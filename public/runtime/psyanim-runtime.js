var PsyanimRuntime=function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=37)}([function(t,e,i){"use strict";
/*!
 * @pixi/constants - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var r,n,o,s,a,h,l,u,c,d,p,f,m,g,v,y,_,b,x;i.d(e,"a",(function(){return m})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"d",(function(){return x})),i.d(e,"e",(function(){return g})),i.d(e,"f",(function(){return a})),i.d(e,"g",(function(){return r})),i.d(e,"h",(function(){return h})),i.d(e,"i",(function(){return v})),i.d(e,"j",(function(){return _})),i.d(e,"k",(function(){return f})),i.d(e,"l",(function(){return b})),i.d(e,"m",(function(){return y})),i.d(e,"n",(function(){return n})),i.d(e,"o",(function(){return c})),i.d(e,"p",(function(){return d})),i.d(e,"q",(function(){return l})),i.d(e,"r",(function(){return u})),i.d(e,"s",(function(){return p})),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(r||(r={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(n||(n={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(o||(o={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(s||(s={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(a||(a={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(h||(h={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(l||(l={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(u||(u={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(c||(c={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(d||(d={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(p||(p={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(f||(f={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(m||(m={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(g||(g={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(v||(v={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(_||(_={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(b||(b={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(x||(x={}))},function(t,e,i){"use strict";i.d(e,"a",(function(){return u})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return m})),i.d(e,"e",(function(){return f})),i.d(e,"f",(function(){return n})),i.d(e,"g",(function(){return a})),i.d(e,"h",(function(){return d})),i.d(e,"i",(function(){return o})),i.d(e,"j",(function(){return l})),i.d(e,"k",(function(){return p})),i.d(e,"l",(function(){return r})),i.d(e,"m",(function(){return E})),i.d(e,"n",(function(){return w}));
/*!
 * @pixi/math - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var r,n=2*Math.PI,o=180/Math.PI,s=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(r||(r={}));var a=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),h=[new a,new a,new a,new a],l=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=r.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.intersects=function(t,e){if(!e){var i=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=i)return!1;var r=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>r}var n=this.left,o=this.right,s=this.top,a=this.bottom;if(o<=n||a<=s)return!1;var l=h[0].set(t.left,t.top),u=h[1].set(t.left,t.bottom),c=h[2].set(t.right,t.top),d=h[3].set(t.right,t.bottom);if(c.x<=l.x||u.y<=l.y)return!1;var p=Math.sign(e.a*e.d-e.b*e.c);if(0===p)return!1;if(e.apply(l,l),e.apply(u,u),e.apply(c,c),e.apply(d,d),Math.max(l.x,u.x,c.x,d.x)<=n||Math.min(l.x,u.x,c.x,d.x)>=o||Math.max(l.y,u.y,c.y,d.y)<=s||Math.min(l.y,u.y,c.y,d.y)>=a)return!1;var f=p*(u.y-l.y),m=p*(l.x-u.x),g=f*n+m*s,v=f*o+m*s,y=f*n+m*a,_=f*o+m*a;if(Math.max(g,v,y,_)<=f*l.x+m*l.y||Math.min(g,v,y,_)>=f*d.x+m*d.y)return!1;var b=p*(l.y-c.y),x=p*(c.x-l.x),T=b*n+x*s,w=b*o+x*s,E=b*n+x*a,S=b*o+x*a;return!(Math.max(T,w,E,S)<=b*l.x+x*l.y||Math.min(T,w,E,S)>=b*d.x+x*d.y)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),u=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=r.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-t,n=this.y-e;return(r*=r)+(n*=n)<=i},t.prototype.getBounds=function(){return new l(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),c=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n,this.type=r.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return(i*=i)+(r*=r)<=1},t.prototype.getBounds=function(){return new l(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),d=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var n=Array.isArray(e[0])?e[0]:e;if("number"!=typeof n[0]){for(var o=[],s=0,a=n.length;s<a;s++)o.push(n[s].x,n[s].y);n=o}this.points=n,this.type=r.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,o=r-1;n<r;o=n++){var s=this.points[2*n],a=this.points[2*n+1],h=this.points[2*o],l=this.points[2*o+1];a>e!=l>e&&t<(e-a)/(l-a)*(h-s)+s&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),p=function(){function t(t,e,i,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=20),this.x=t,this.y=e,this.width=i,this.height=n,this.radius=o,this.type=r.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;var r=t-(this.x+i),n=e-(this.y+i),o=i*i;if(r*r+n*n<=o)return!0;if((r=t-(this.x+this.width-i))*r+n*n<=o)return!0;if(r*r+(n=e-(this.y+this.height-i))*n<=o)return!0;if((r=t-(this.x+i))*r+n*n<=o)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),f=function(){function t(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),this._x=i,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),m=function(){function t(t,e,i,r,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,r,n,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new a;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new a;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,i,r,n,o,s,a,h){return this.a=Math.cos(s+h)*n,this.b=Math.sin(s+h)*n,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,o=this.d,s=t.pivot,a=-Math.atan2(-r,o),h=Math.atan2(i,e),l=Math.abs(a+h);return l<1e-5||Math.abs(n-l)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+o*o),t.position.x=this.tx+(s.x*e+s.y*r),t.position.y=this.ty+(s.x*i+s.y*o),t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),g=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],v=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],y=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],_=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],b=[],x=[],T=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];b.push(e);for(var i=0;i<16;i++)for(var r=T(g[t]*g[i]+y[t]*v[i]),n=T(v[t]*g[i]+_[t]*v[i]),o=T(g[t]*y[i]+y[t]*_[i]),s=T(v[t]*y[i]+_[t]*_[i]),a=0;a<16;a++)if(g[a]===r&&v[a]===n&&y[a]===o&&_[a]===s){e.push(a);break}}for(t=0;t<16;t++){var h=new m;h.set(g[t],v[t],y[t],_[t],0,0),x.push(h)}}();var w={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return g[t]},uY:function(t){return v[t]},vX:function(t){return y[t]},vY:function(t){return _[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return b[t][e]},sub:function(t,e){return b[t][w.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?w.S:w.N:2*Math.abs(e)<=Math.abs(t)?t>0?w.E:w.W:e>0?t>0?w.SE:w.SW:t>0?w.NE:w.NW},matrixAppendRotationInv:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=x[w.inv(e)];n.tx=i,n.ty=r,t.append(n)}},E=function(){function t(){this.worldTransform=new m,this.localTransform=new m,this.position=new f(this.onChange,this,0,0),this.scale=new f(this.onChange,this,1,1),this.pivot=new f(this.onChange,this,0,0),this.skew=new f(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return he})),i.d(e,"b",(function(){return O})),i.d(e,"c",(function(){return v})),i.d(e,"d",(function(){return me})),i.d(e,"e",(function(){return be})),i.d(e,"f",(function(){return we})),i.d(e,"g",(function(){return ge})),i.d(e,"h",(function(){return U})),i.d(e,"i",(function(){return m})),i.d(e,"j",(function(){return x})),i.d(e,"k",(function(){return Nt})),i.d(e,"l",(function(){return V})),i.d(e,"m",(function(){return J})),i.d(e,"n",(function(){return Ct})),i.d(e,"o",(function(){return W})),i.d(e,"p",(function(){return F})),i.d(e,"q",(function(){return ce})),i.d(e,"r",(function(){return Mt})),i.d(e,"s",(function(){return Dt})),i.d(e,"t",(function(){return N})),i.d(e,"u",(function(){return Lt})),i.d(e,"v",(function(){return q})),i.d(e,"w",(function(){return ve})),i.d(e,"x",(function(){return de})),i.d(e,"y",(function(){return fe})),i.d(e,"z",(function(){return pe}));var r=i(4),n=i(0),o=i(3),s=i(12),a=i(8),h=i(1);
/*!
 * @pixi/core - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
r.b.PREFER_ENV=o.o.any?n.g.WEBGL:n.g.WEBGL2,r.b.STRICT_TEXTURE_CACHE=!1;var l=[];function u(t,e){if(!t)return null;var i="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(i=r[1].toLowerCase())}for(var n=l.length-1;n>=0;--n){var o=l[n];if(o.test&&o.test(t,i))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function d(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var p=function(){return(p=Object.assign||function(t){for(var e,i=arguments,r=1,n=arguments.length;r<n;r++)for(var o in e=i[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var f=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new s.a("setRealSize"),this.onUpdate=new s.a("update"),this.onError=new s.a("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),m=function(t){function e(e,i){var r=this,n=i||{},o=n.width,s=n.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return(r=t.call(this,o,s)||this).data=e,r}return d(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.a.UNPACK);var o=e.realWidth,s=e.realHeight;return i.width===o&&i.height===s?r.texSubImage2D(e.target,0,0,0,o,s,e.format,i.type,this.data):(i.width=o,i.height=s,r.texImage2D(e.target,0,i.internalFormat,o,s,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(f),g={scaleMode:n.p.NEAREST,format:n.h.RGBA,alphaMode:n.a.NPM},v=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var s=t.call(this)||this,a=(i=i||{}).alphaMode,h=i.mipmap,l=i.anisotropicLevel,c=i.scaleMode,d=i.width,p=i.height,m=i.wrapMode,g=i.format,v=i.type,y=i.target,_=i.resolution,b=i.resourceOptions;return!e||e instanceof f||((e=u(e,b)).internal=!0),s.resolution=_||r.b.RESOLUTION,s.width=Math.round((d||0)*s.resolution)/s.resolution,s.height=Math.round((p||0)*s.resolution)/s.resolution,s._mipmap=void 0!==h?h:r.b.MIPMAP_TEXTURES,s.anisotropicLevel=void 0!==l?l:r.b.ANISOTROPIC_LEVEL,s._wrapMode=m||r.b.WRAP_MODE,s._scaleMode=void 0!==c?c:r.b.SCALE_MODE,s.format=g||n.h.RGBA,s.type=v||n.r.UNSIGNED_BYTE,s.target=y||n.q.TEXTURE_2D,s.alphaMode=void 0!==a?a:n.a.UNPACK,s.uid=Object(o.D)(),s.touched=0,s.isPowerOfTwo=!1,s._refreshPOT(),s._glTextures={},s.dirtyId=0,s.dirtyStyleId=0,s.cacheId=null,s.valid=d>0&&p>0,s.textureCacheIds=[],s.destroyed=!1,s.resource=null,s._batchEnabled=0,s._batchLocation=0,s.parentTextureArray=null,s.setResource(e),s}return d(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Object(o.p)(this.realWidth)&&Object(o.p)(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete o.a[this.cacheId],delete o.e[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,i,n){void 0===n&&(n=r.b.STRICT_TEXTURE_CACHE);var s="string"==typeof t,a=null;if(s)a=t;else{if(!t._pixiId){var h=i&&i.pixiIdPrefix||"pixiid";t._pixiId=h+"_"+Object(o.D)()}a=t._pixiId}var l=o.a[a];if(s&&n&&!l)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return l||((l=new e(t,i)).cacheId=a,e.addToCache(l,a)),l},e.fromBuffer=function(t,i,r,o){t=t||new Float32Array(i*r*4);var s=new m(t,{width:i,height:r}),a=t instanceof Float32Array?n.r.FLOAT:n.r.UNSIGNED_BYTE;return new e(s,Object.assign(g,o||{width:i,height:r,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),o.a[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),o.a[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=o.a[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete o.a[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete o.a[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(o.c),y=function(t){function e(e,i){var r=this,n=i||{},o=n.width,s=n.height;(r=t.call(this,o,s)||this).items=[],r.itemDirtyIds=[];for(var a=0;a<e;a++){var h=new v;r.items.push(h),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return d(e,t),e.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof f?this.addResourceAt(t[i],i):this.addResourceAt(u(t[i],e),i))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],i=e.realWidth,r=e.realHeight;return t.resize(i,r),Promise.resolve(t)})),this._load},e}(f),_=function(t){function e(e,i){var r,n,o=this,s=i||{},a=s.width,h=s.height;return Array.isArray(e)?(r=e,n=e.length):n=e,o=t.call(this,n,{width:a,height:h})||this,r&&o.initFromArray(r,i),o}return d(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=n.q.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,i){var r=this.length,n=this.itemDirtyIds,o=this.items,s=t.gl;i.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,r,0,e.format,i.type,null);for(var a=0;a<r;a++){var h=o[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,i.type,h.resource.source))}return!0},e}(y),b=function(t){function e(e){var i=this,r=e,n=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(i=t.call(this,n,o)||this).source=e,i.noSubImage=!1,i}return d(e,t),e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=Object(o.i)(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,r){var o=t.gl,s=e.realWidth,a=e.realHeight;if((r=r||this.source)instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.a.UNPACK),this.noSubImage||e.target!==o.TEXTURE_2D||i.width!==s||i.height!==a?(i.width=s,i.height=a,o.texImage2D(e.target,0,i.internalFormat,e.format,i.type,r)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,i.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(i,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(f),x=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.test=function(t){var e=globalThis.OffscreenCanvas;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(b),T=function(t){function e(i,r){var o=this,s=r||{},a=s.width,h=s.height,l=s.autoLoad,u=s.linkBaseTexture;if(i&&i.length!==e.SIDES)throw new Error("Invalid length. Got "+i.length+", expected 6");o=t.call(this,6,{width:a,height:h})||this;for(var c=0;c<e.SIDES;c++)o.items[c].target=n.q.TEXTURE_CUBE_MAP_POSITIVE_X+c;return o.linkBaseTexture=!1!==u,i&&o.initFromArray(i,r),!1!==l&&o.load(),o}return d(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=n.q.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,i){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=n.q.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,i,r){for(var n=this.itemDirtyIds,o=0;o<e.SIDES;o++){var s=this.items[o];n[o]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),n[o]=s.dirtyId):n[o]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,i.realWidth,i.realHeight,0,i.format,r.type,null),n[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(y),w=function(t){function e(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var o=new Image;b.crossOrigin(o,e,i.crossorigin),o.src=e,e=o}return n=t.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(void 0!==i.createBitmap?i.createBitmap:r.b.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,n.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,n.bitmap=null,n._load=null,!1!==i.autoLoad&&n.load(),n}return d(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,i){var r=e.source;e.url=r.src;var n=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?n():(r.onload=n,r.onerror=function(t){i(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(r){return i(r,0,0,e.width,e.height,{premultiplyAlpha:t.alphaMode===n.a.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,i,r){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,r,this.bitmap),!this.preserveBitmap){var n=!0,o=i._glTextures;for(var s in o){var a=o[s];if(a!==r&&a.dirtyId!==i.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(b),E=function(t){function e(e,i){var r=this;return i=i||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=i.scale||1,r._overrideWidth=i.width,r._overrideHeight=i.height,r._resolve=null,r._crossorigin=i.crossorigin,r._load=null,!1!==i.autoLoad&&r.load(),r}return d(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(i){if(t._resolve=function(){t.resize(t.source.width,t.source.height),i(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;b.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(i){t._resolve&&(e.onerror=null,t.onError.emit(i))},e.onload=function(){if(t._resolve){var i=e.width,r=e.height;if(!i||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var n=i*t.scale,s=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(n=t._overrideWidth||t._overrideHeight/r*i,s=t._overrideHeight||t._overrideWidth/i*r),n=Math.round(n),s=Math.round(s);var a=t.source;a.width=n,a.height=s,a._pixiId="canvas_"+Object(o.D)(),a.getContext("2d").drawImage(e,0,0,i,r,0,0,n,s),t._resolve(),t._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),r={};return i&&(r[i[1]]=Math.round(parseFloat(i[3])),r[i[5]]=Math.round(parseFloat(i[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,i){return"svg"===i||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(b),S=function(t){function e(i,r){var n=this;if(r=r||{},!(i instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof i&&(i=[i]);var s=i[0].src||i[0];b.crossOrigin(o,s,r.crossorigin);for(var a=0;a<i.length;++a){var h=document.createElement("source"),l=i[a],u=l.src,c=l.mime,d=(u=u||i[a]).split("?").shift().toLowerCase(),p=d.slice(d.lastIndexOf(".")+1);c=c||e.MIME_TYPES[p]||"video/"+p,h.src=u,h.type=c,o.appendChild(h)}i=o}return(n=t.call(this,i)||this).noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=r.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=!1!==r.autoPlay,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),!1!==r.autoLoad&&n.load(),n}return d(e,t),e.prototype.update=function(e){if(!this.destroyed){var i=a.a.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(a.a.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(a.a.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(a.a.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(a.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(a.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,i){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(b),A=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.test=function(t){return!!globalThis.createImageBitmap&&t instanceof ImageBitmap},e}(b);l.push(w,A,x,S,E,m,T,_);var R={__proto__:null,Resource:f,BaseImageResource:b,INSTALLED:l,autoDetectResource:u,AbstractMultiResource:y,ArrayResource:_,BufferResource:m,CanvasResource:x,CubeResource:T,ImageResource:w,SVGResource:E,VideoResource:S,ImageBitmapResource:A},P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.a.UNPACK);var o=e.realWidth,s=e.realHeight;return i.width===o&&i.height===s?r.texSubImage2D(e.target,0,0,0,o,s,e.format,i.type,this.data):(i.width=o,i.height=s,r.texImage2D(e.target,0,i.internalFormat,o,s,0,e.format,i.type,this.data)),!0},e}(m),I=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new s.a("disposeFramebuffer"),this.multisample=n.l.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new v(null,{scaleMode:n.p.NEAREST,resolution:1,mipmap:n.k.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new v(new P(null,{width:this.width,height:this.height}),{scaleMode:n.p.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:n.k.OFF,format:n.h.DEPTH_COMPONENT,type:n.r.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var r=this.colorTextures[i],n=r.resolution;r.setSize(t/n,e/n)}if(this.depthTexture){n=this.depthTexture.resolution;this.depthTexture.setSize(t/n,e/n)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),O=function(t){function e(e){void 0===e&&(e={});var i=this;if("number"==typeof e){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];e={width:r,height:o,scaleMode:s,resolution:a}}return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:n.l.NONE,(i=t.call(this,null,e)||this).mipmap=n.k.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new I(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return d(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(v),C=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,i){var r=e.width,n=e.height;if(i){var o=t.width/2/r,s=t.height/2/n,a=t.x/r+o,l=t.y/n+s;i=h.n.add(i,h.n.NW),this.x0=a+o*h.n.uX(i),this.y0=l+s*h.n.uY(i),i=h.n.add(i,2),this.x1=a+o*h.n.uX(i),this.y1=l+s*h.n.uY(i),i=h.n.add(i,2),this.x2=a+o*h.n.uX(i),this.y2=l+s*h.n.uY(i),i=h.n.add(i,2),this.x3=a+o*h.n.uX(i),this.y3=l+s*h.n.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),M=new C;function D(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var N=function(t){function e(i,r,n,o,s,a){var l=t.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new h.j(0,0,1,1)),i instanceof e&&(i=i.baseTexture),l.baseTexture=i,l._frame=r,l.trim=o,l.valid=!1,l._uvs=M,l.uvMatrix=null,l.orig=n||r,l._rotate=Number(s||0),!0===s)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new h.g(a.x,a.y):new h.g(0,0),l._updateID=0,l.textureCacheIds=[],i.valid?l.noFrame?i.valid&&l.onBaseTextureUpdated(i):l.frame=r:i.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&i.on("update",l.onBaseTextureUpdated,l),l}return d(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&i.url&&o.e[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===M&&(this._uvs=new C),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,n){void 0===i&&(i={}),void 0===n&&(n=r.b.STRICT_TEXTURE_CACHE);var s="string"==typeof t,a=null;if(s)a=t;else if(t instanceof v){if(!t.cacheId){var h=i&&i.pixiIdPrefix||"pixiid";t.cacheId=h+"-"+Object(o.D)(),v.addToCache(t,t.cacheId)}a=t.cacheId}else{if(!t._pixiId){h=i&&i.pixiIdPrefix||"pixiid";t._pixiId=h+"_"+Object(o.D)()}a=t._pixiId}var l=o.e[a];if(s&&n&&!l)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return l||t instanceof v?!l&&t instanceof v&&(l=new e(t),e.addToCache(l,a)):(i.resolution||(i.resolution=Object(o.l)(t)),(l=new e(new v(t,i))).baseTexture.cacheId=a,v.addToCache(l.baseTexture,a),e.addToCache(l,a)),l},e.fromURL=function(t,i){var r=Object.assign({autoLoad:!1},null==i?void 0:i.resourceOptions),n=e.from(t,Object.assign({resourceOptions:r},i),!1),o=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):o.load().then((function(){return Promise.resolve(n)}))},e.fromBuffer=function(t,i,r,n){return new e(v.fromBuffer(t,i,r,n))},e.fromLoader=function(t,i,n,s){var a=new v(t,Object.assign({scaleMode:r.b.SCALE_MODE,resolution:Object(o.l)(i)},s)),h=a.resource;h instanceof w&&(h.url=i);var l=new e(a);return n||(n=i),v.addToCache(l.baseTexture,n),e.addToCache(l,n),n!==i&&(v.addToCache(l.baseTexture,i),e.addToCache(l,i)),l.baseTexture.valid?Promise.resolve(l):new Promise((function(t){l.baseTexture.once("loaded",(function(){return t(l)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),o.e[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),o.e[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=o.e[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete o.e[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)o.e[t.textureCacheIds[r]]===t&&delete o.e[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,o=e+r>this.baseTexture.width,s=i+n>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",h="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,l="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+l)}this.valid=r&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new v),D(e._EMPTY),D(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=document.createElement("canvas"),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),e._WHITE=new e(new v(new x(t))),D(e._WHITE),D(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(o.c),F=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return d(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,i){void 0===i&&(i=!0);var r=this.baseTexture.resolution,n=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=n>0&&o>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(n,o),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var i=arguments,r=[],n=1;n<arguments.length;n++)r[n-1]=i[n];return"number"==typeof t&&(Object(o.h)("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new O(t))},e}(N),L=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,i){void 0===i&&(i=n.l.NONE);var r=new O(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new F(r)},t.prototype.getOptimalTexture=function(t,e,i,r){var s;void 0===i&&(i=1),void 0===r&&(r=n.l.NONE),t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?s=r>1?-r:-1:(s=((65535&(t=Object(o.s)(t)))<<16|65535&(e=Object(o.s)(e)))>>>0,r>1&&(s+=4294967296*r)),this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,r)),a.filterPoolKey=s,a.setResolution(i),a},t.prototype.getFilterTexture=function(t,e,i){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||n.l.NONE);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),B=function(){function t(t,e,i,r,o,s,a){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===r&&(r=n.r.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=r,this.stride=o,this.start=s,this.instance=a}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,i,r,n,o){return new t(e,i,r,n,o)},t}(),k=0,U=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=k++,this.disposeRunner=new s.a("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===n.d.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?n.d.ELEMENT_ARRAY_BUFFER:n.d.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),G={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var X={5126:4,5123:2,5121:1},j=0,H={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},V=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=j++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new s.a("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,i,r,n,o,s,a){if(void 0===i&&(i=0),void 0===r&&(r=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof U||(e instanceof Array&&(e=new Float32Array(e)),e=new U(e));var h=t.split("|");if(h.length>1){for(var l=0;l<h.length;l++)this.addAttribute(h[l],e,i,r,n);return this}var u=this.buffers.indexOf(e);return-1===u&&(this.buffers.push(e),u=this.buffers.length-1),this.attributes[t]=new B(u,i,r,n,o,s,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof U||(t instanceof Array&&(t=new Uint16Array(t)),t=new U(t)),t.type=n.d.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],r=new U;for(t in this.attributes){var n=this.attributes[t],s=this.buffers[n.buffer];e.push(s.data),i.push(n.size*X[n.type]/4),n.buffer=0}for(r.data=function(t,e){for(var i=0,r=0,n={},s=0;s<t.length;s++)r+=e[s],i+=t[s].length;var a=new ArrayBuffer(4*i),h=null,l=0;for(s=0;s<t.length;s++){var u=e[s],c=t[s],d=Object(o.k)(c);n[d]||(n[d]=new G[d](a)),h=n[d];for(var p=0;p<c.length;p++){h[(p/u|0)*r+l+p%u]=c[p]}l+=u}return new Float32Array(a)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,i=0;i<this.buffers.length;i++)e.buffers[i]=new U(this.buffers[i].data.slice(0));for(var i in this.attributes){var r=this.attributes[i];e.attributes[i]=new B(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=n.d.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var i,r=new t,s=[],a=[],h=[],l=0;l<e.length;l++){i=e[l];for(var u=0;u<i.buffers.length;u++)a[u]=a[u]||0,a[u]+=i.buffers[u].data.length,h[u]=0}for(l=0;l<i.buffers.length;l++)s[l]=new(H[Object(o.k)(i.buffers[l].data)])(a[l]),r.buffers[l]=new U(s[l]);for(l=0;l<e.length;l++){i=e[l];for(u=0;u<i.buffers.length;u++)s[u].set(i.buffers[u].data,h[u]),h[u]+=i.buffers[u].data.length}if(r.attributes=i.attributes,i.indexBuffer){r.indexBuffer=r.buffers[i.buffers.indexOf(i.indexBuffer)],r.indexBuffer.type=n.d.ELEMENT_ARRAY_BUFFER;var c=0,d=0,p=0,f=0;for(l=0;l<i.buffers.length;l++)if(i.buffers[l]!==i.indexBuffer){f=l;break}for(var l in i.attributes){var m=i.attributes[l];(0|m.buffer)===f&&(d+=m.size*X[m.type]/4)}for(l=0;l<e.length;l++){var g=e[l].indexBuffer.data;for(u=0;u<g.length;u++)r.indexBuffer.data[u+p]+=c;c+=e[l].buffers[f].data.length/d,p+=g.length}}return r},t}(),z=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return d(e,t),e}(V),W=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new U(e.vertices),e.uvBuffer=new U(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return d(e,t),e.prototype.map=function(t,e){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(V),Y=0,q=function(){function t(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Y++,this.static=!!e,this.ubo=!!i,t instanceof U?(this.buffer=t,this.buffer.type=n.d.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new U(new Float32Array(1)),this.buffer.type=n.d.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,i,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(i,r)},t.from=function(e,i,r){return new t(e,i,r)},t.uboFrom=function(e,i){return new t(e,null==i||i,!0)},t}(),K=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=n.l.NONE,this.sourceFrame=new h.j,this.destinationFrame=new h.j,this.bindingSourceFrame=new h.j,this.bindingDestinationFrame=new h.j,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),$=[new h.g,new h.g,new h.g,new h.g],Z=new h.d,Q=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new L,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new z,this.quadUv=new W,this.tempRect=new h.j,this.activeState={},this.globalUniforms=new q({outputFrame:new h.j,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var i,r,n=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new K,a=this.renderer.renderTexture,h=e[0].resolution,l=e[0].multisample,u=e[0].padding,c=e[0].autoFit,d=null===(i=e[0].legacy)||void 0===i||i,p=1;p<e.length;p++){var f=e[p];h=Math.min(h,f.resolution),l=Math.min(l,f.multisample),u=this.useMaxPadding?Math.max(u,f.padding):u+f.padding,c=c&&f.autoFit,d=d||null===(r=f.legacy)||void 0===r||r}1===o.length&&(this.defaultFilterStack[0].renderTexture=a.current),o.push(s),s.resolution=h,s.multisample=l,s.legacy=d,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u);var m=this.tempRect.copyFrom(a.sourceFrame);n.projection.transform&&this.transformAABB(Z.copyFrom(n.projection.transform).invert(),m),c?(s.sourceFrame.fit(m),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(m)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,a.current?a.current.resolution:n.resolution,a.sourceFrame,a.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,h,l),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var g=this.tempRect;g.x=0,g.y=0,g.width=s.sourceFrame.width,g.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,g),n.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var o=r.inputSize,s=r.inputPixel,a=r.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],s[0]=Math.round(o[0]*e.resolution),s[1]=Math.round(o[1]*e.resolution),s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=e.sourceFrame.width*o[2]-.5*s[2],a[3]=e.sourceFrame.height*o[3]-.5*s[3],e.legacy){var h=r.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,l.renderTexture,n.e.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var u=e.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,e.resolution);c.filterFrame=u.filterFrame;var d=0;for(d=0;d<i.length-1;++d){1===d&&e.multisample>1&&((c=this.getOptimalFilterTexture(u.width,u.height,e.resolution)).filterFrame=u.filterFrame),i[d].apply(this,u,c,n.e.CLEAR,e);var p=u;u=c,c=p}i[d].apply(this,u,l.renderTexture,n.e.BLEND,e),d>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=n.e.CLEAR);var i=this.renderer,r=i.renderTexture,o=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var s=this.tempRect;s.x=0,s.y=0,s.width=t.filterFrame.width,s.height=t.filterFrame.height,r.bind(t,t.filterFrame,s)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&o.stateId||this.forceClear;(e===n.e.CLEAR||e===n.e.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,i,r){var o=this.renderer;o.state.set(t.state),this.bindAndClear(i,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(n.f.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(n.f.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,r=i.sourceFrame,n=i.destinationFrame,o=e._texture.orig,s=t.set(n.width,0,0,n.height,r.x,r.y),a=e.worldTransform.copyTo(h.d.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,i,r){return void 0===i&&(i=1),void 0===r&&(r=n.l.NONE),this.texturePool.getOptimalTexture(t,e,i,r)},t.prototype.getFilterTexture=function(t,e,i){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||n.l.NONE);return o.filterFrame=t.filterFrame,o},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var i=$[0],r=$[1],n=$[2],o=$[3];i.set(e.left,e.top),r.set(e.left,e.bottom),n.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(i,i),t.apply(r,r),t.apply(n,n),t.apply(o,o);var s=Math.min(i.x,r.x,n.x,o.x),a=Math.min(i.y,r.y,n.y,o.y),h=Math.max(i.x,r.x,n.x,o.x),l=Math.max(i.y,r.y,n.y,o.y);e.x=s,e.y=a,e.width=h-s,e.height=l-a},t.prototype.roundFrame=function(t,e,i,r,n){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(n){var o=n.a,s=n.b,a=n.c,h=n.d;if((Math.abs(s)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}(n=n?Z.copyFrom(n):Z.identity()).translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)}},t}(),J=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),tt=function(){function t(t){this.renderer=t,this.emptyRenderer=new J(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,i,r){for(var n=t.elements,o=t.ids,s=t.count,a=0,h=0;h<s;h++){var l=n[h],u=l._batchLocation;if(u>=0&&u<r&&e[u]===l)o[h]=u;else for(;a<r;){var c=e[a];if(!c||c._batchEnabled!==i||c._batchLocation!==a){o[h]=a,l._batchLocation=a,e[a]=l;break}a++}}},t.prototype.destroy=function(){this.renderer=null},t}(),et=0,it=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=et++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=et++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var i;if(r.b.PREFER_ENV>=n.g.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),rt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=n.l.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},nt=new h.j,ot=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new I(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new h.j,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;r.b.PREFER_ENV===n.g.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,i){void 0===i&&(i=0);var r=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var s=t.colorTextures[o];this.renderer.texture.unbind(s.parentTextureArray||s)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var a=e.width>>i,h=e.height>>i,l=a/e.width;this.setViewport(e.x*l,e.y*l,a,h)}else{a=t.width>>i,h=t.height>>i;this.setViewport(0,0,a,h)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,i,r){var n=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),r=Math.round(r),n.width===i&&n.height===r&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=i,n.height=r,this.gl.viewport(t,e,i,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,i,r,o){void 0===o&&(o=n.c.COLOR|n.c.DEPTH);var s=this.gl;s.clearColor(t,e,i,r),s.clear(o)},t.prototype.initFramebuffer=function(t){var e=this.gl,i=new rt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,n=r.length;e.drawBuffers||(n=Math.min(n,1));for(var o=0;o<n;o++){var s=r[o],a=s.parentTextureArray||s;this.renderer.texture.bind(a,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var i=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures,o=n.length;i.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var s=[],a=0;a<o;a++){var h=n[a],l=h.parentTextureArray||h;this.renderer.texture.bind(l,0),0===a&&r.msaaBuffer||(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+a,h.target,l._glTextures[this.CONTEXT_UID].texture,e),s.push(i.COLOR_ATTACHMENT0+a))}if((s.length>1&&i.drawBuffers(s),t.depthTexture)&&this.writeDepthTexture){var u=t.depthTexture;this.renderer.texture.bind(u,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,i=n.l.NONE;if(t<=1||null===e)return i;for(var r=0;r<e.length;r++)if(e[r]<=t){i=e[r];break}return 1===i&&(i=n.l.NONE),i},t.prototype.blit=function(t,e,i){var r=this.current,n=this.renderer,o=this.gl,s=this.CONTEXT_UID;if(2===n.context.webGLVersion&&r){var a=r.glFramebuffers[s];if(a){if(!t){if(!a.msaaBuffer)return;var h=r.colorTextures[0];if(!h)return;a.blitFramebuffer||(a.blitFramebuffer=new I(r.width,r.height),a.blitFramebuffer.addColorTexture(0,h)),(t=a.blitFramebuffer).colorTextures[0]!==h&&(t.colorTextures[0]=h,t.dirtyId++,t.dirtyFormat++),t.width===r.width&&t.height===r.height||(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||((e=nt).width=r.width,e.height=r.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,a.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var i=t.width,r=t.height,n=this.gl,o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),e.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,e.multisample,n.DEPTH24_STENCIL8,i,r):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,r),e.stencil=o,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new h.j},t.prototype.destroy=function(){this.renderer=null},t}(),st={5126:4,5123:2,5121:1},at=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var i=this.renderer.context.extensions.vertexArrayObject;r.b.PREFER_ENV===n.g.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var o=t.getExtension("ANGLE_instanced_arrays");o?(t.vertexAttribDivisor=function(t,e){return o.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,r,n){return o.drawElementsInstancedANGLE(t,e,i,r,n)},t.drawArraysInstanced=function(t,e,i,r){return o.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},n=!0);var o=r[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var r=t.buffers[i];e.update(r)}},t.prototype.checkCompatibility=function(t,e){var i=t.attributes,r=e.attributeData;for(var n in r)if(!i[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},t.prototype.getSignature=function(t,e){var i=t.attributes,r=e.attributeData,n=["g",t.id];for(var o in i)r[o]&&n.push(o,r[o].location);return n.join("-")},t.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0);var r=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,s=e.program;s.glPrograms[n]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,s);var a=this.getSignature(t,s),h=t.glVertexArrayObjects[this.CONTEXT_UID],l=h[a];if(l)return h[s.id]=l,l;var u=t.buffers,c=t.attributes,d={},p={};for(var f in u)d[f]=0,p[f]=0;for(var f in c)!c[f].size&&s.attributeData[f]?c[f].size=s.attributeData[f].size:c[f].size||console.warn("PIXI Geometry attribute '"+f+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[f].buffer]+=c[f].size*st[c[f].type];for(var f in c){var m=c[f],g=m.size;void 0===m.stride&&(d[m.buffer]===g*st[m.type]?m.stride=0:m.stride=d[m.buffer]),void 0===m.start&&(m.start=p[m.buffer],p[m.buffer]+=g*st[m.type])}l=r.createVertexArray(),r.bindVertexArray(l);for(var v=0;v<u.length;v++){var y=u[v];o.bind(y),i&&y._glBuffers[n].refCount++}return this.activateVao(t,s),this._activeVao=l,h[s.id]=l,h[a]=l,l},t.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,o=t.buffers,s=null===(i=this.renderer)||void 0===i?void 0:i.buffer;if(t.disposeRunner.remove(this),r){if(s)for(var a=0;a<o.length;a++){var h=o[a]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,0!==h.refCount||e||s.dispose(o[a],e))}if(!e)for(var l in r)if("g"===l[0]){var u=r[l];this._activeVao===u&&this.unbind(),n.deleteVertexArray(u)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},t.prototype.activateVao=function(t,e){var i=this.gl,r=this.CONTEXT_UID,n=this.renderer.buffer,o=t.buffers,s=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);var a=null;for(var h in s){var l=s[h],u=o[l.buffer],c=u._glBuffers[r];if(e.attributeData[h]){a!==c&&(n.bind(u),a=c);var d=e.attributeData[h].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(d,1)}}}},t.prototype.draw=function(t,e,i,r){var n=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(i||0)*s,r||1):n.drawElements(t,e||o.indexBuffer.data.length,a,(i||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,i,e||o.getSize(),r||1):n.drawArrays(t,i,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),ht=function(){function t(t){void 0===t&&(t=null),this.type=n.j.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=r.b.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=n.j.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function lt(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),r}function ut(t,e){var i=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),r=t.getShaderInfoLog(e),n=r.split("\n"),o={},s=n.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||o[t])&&(o[t]=!0,!0)})),a=[""];s.forEach((function(t){i[t-1]="%c"+i[t-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var h=i.join("\n");a[0]=h,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function ct(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}function dt(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ct(2*e);case"bvec3":return ct(3*e);case"bvec4":return ct(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var pt,ft={},mt=ft;function gt(){if(!pt){pt=n.m.MEDIUM;var t=function(){if(mt===ft||mt&&mt.isContextLost()){var t=document.createElement("canvas"),e=void 0;r.b.PREFER_ENV>=n.g.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),mt=e}return mt}();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);pt=e.precision?n.m.HIGH:n.m.MEDIUM}}return pt}function vt(t,e,i){if("precision"!==t.substring(0,9)){var r=e;return e===n.m.HIGH&&i!==n.m.HIGH&&(r=n.m.MEDIUM),"precision "+r+" float;\n"+t}return i!==n.m.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var yt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function _t(t){return yt[t]}var bt=null,xt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Tt(t,e){if(!bt){var i=Object.keys(xt);bt={};for(var r=0;r<i.length;++r){var n=i[r];bt[t[n]]=xt[n]}}return bt[e]}var wt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Et={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},St={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var At,Rt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Pt(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}var It=0,Ot={},Ct=function(){function t(e,i,o){void 0===o&&(o="pixi-shader"),this.id=It++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(o=o.replace(/\s+/g,"-"),Ot[o]?(Ot[o]++,o+="-"+Ot[o]):Ot[o]=1,this.vertexSrc="#define SHADER_NAME "+o+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+o+"\n"+this.fragmentSrc,this.vertexSrc=vt(this.vertexSrc,r.b.PRECISION_VERTEX,n.m.HIGH),this.fragmentSrc=vt(this.fragmentSrc,r.b.PRECISION_FRAGMENT,gt())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,i,r){var n=e+i,s=o.d[n];return s||(o.d[n]=s=new t(e,i,r)),s},t}(),Mt=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof q?e:new q(e):new q({})}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var r=e.uniforms[i];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,i,r){return new t(Ct.from(e,i),r)},t}(),Dt=function(){function t(){this.data=0,this.blendMode=n.b.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==n.b.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Nt=function(t){function e(i,n,o){var s=this,a=Ct.from(i||e.defaultVertexSrc,n||e.defaultFragmentSrc);return(s=t.call(this,a,o)||this).padding=0,s.resolution=r.b.FILTER_RESOLUTION,s.multisample=r.b.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new Dt,s}return d(e,t),e.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Mt),Ft=new h.d,Lt=function(){function t(t,e){this._texture=t,this.mapCoord=new h.d,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],o=t[r+1];e[r]=n*i.a+o*i.c+i.tx,e[r+1]=n*i.b+o*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(Ft.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Ft));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,h=this.clampOffset;return s[0]=(e._frame.x+a+h)/o.width,s[1]=(e._frame.y+a+h)/o.height,s[2]=(e._frame.x+e._frame.width-a+h)/o.width,s[3]=(e._frame.y+e._frame.height-a+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),Bt=function(t){function e(e,i,r){var n=this,o=null;return"string"!=typeof e&&void 0===i&&void 0===r&&(o=e,e=void 0,i=void 0,r=void 0),(n=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",i||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=o,n.maskMatrix=new h.d,n}return d(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,i,r){var n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Lt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,r))},e}(Nt),kt=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var r=this.maskDataPool.pop()||new ht;r.pooled=!0,r.maskObject=e,i=r}var o=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(o),i.autoDetect&&this.detect(i),i._target=t,i.type!==n.j.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case n.j.SCISSOR:this.renderer.scissor.push(i);break;case n.j.STENCIL:this.renderer.stencil.push(i);break;case n.j.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i)}i.type===n.j.SPRITE&&this.maskStack.push(i)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case n.j.SCISSOR:this.renderer.scissor.pop();break;case n.j.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case n.j.SPRITE:this.popSpriteMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var i=this.maskStack[this.maskStack.length-1];i.type===n.j.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},t.prototype.detect=function(t){t.maskObject.isSprite?t.type=n.j.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=n.j.SCISSOR:t.type=n.j.STENCIL},t.prototype.pushSpriteMask=function(t){var e,i,r=t.maskObject,n=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Bt]);var s,a,h=this.renderer,l=h.renderTexture;if(l.current){var u=l.current;s=t.resolution||u.resolution,a=null!==(e=t.multisample)&&void 0!==e?e:u.multisample}else s=t.resolution||h.resolution,a=null!==(i=t.multisample)&&void 0!==i?i:h.multisample;o[0].resolution=s,o[0].multisample=a,o[0].maskSprite=r;var c=n.filterArea;n.filterArea=r.getBounds(!0),h.filter.push(n,o),n.filterArea=c,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.destroy=function(){this.renderer=null},t}(),Ut=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==i&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Gt=new h.d,Xt=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return d(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){if(!t._scissorRectLocal){var e=t._scissorRect,i=t.maskObject,r=this.renderer,n=r.renderTexture;i.renderable=!0;var o=i.getBounds();this.roundFrameToPixels(o,n.current?n.current.resolution:r.resolution,n.sourceFrame,n.destinationFrame,r.projection.transform),i.renderable=!1,e&&o.fit(e),t._scissorRectLocal=o}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,i=t.b,r=t.c,n=t.d;return(Math.abs(i)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4)},e.prototype.testScissor=function(t){var i=t.maskObject;if(!i.isFastRect||!i.isFastRect())return!1;if(e.isMatrixRotated(i.worldTransform))return!1;if(e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var r=t._scissorRectLocal;return r.width>0&&r.height>0},e.prototype.roundFrameToPixels=function(t,i,r,n,o){e.isMatrixRotated(o)||((o=o?Gt.copyFrom(o):Gt.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(o,t),t.fit(n),t.x=Math.round(t.x*i),t.y=Math.round(t.y*i),t.width=Math.round(t.width*i),t.height=Math.round(t.height*i))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(Ut),jt=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return d(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?e.disable(e.STENCIL_TEST):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(Ut),Ht=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new h.d,this.transform=null}return t.prototype.update=function(t,e,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,i,r){var n=this.projectionMatrix,o=r?-1:1;n.identity(),n.a=1/e.width*2,n.d=o*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-o-e.y*n.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),Vt=new h.j,zt=new h.j,Wt=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new h.j,this.destinationFrame=new h.j,this.viewportFrame=new h.j}return t.prototype.bind=function(t,e,i){void 0===t&&(t=null);var r,n,o,s=this.renderer;this.current=t,t?(o=(r=t.baseTexture).resolution,e||(Vt.width=t.frame.width,Vt.height=t.frame.height,e=Vt),i||(zt.x=t.frame.x,zt.y=t.frame.y,zt.width=e.width,zt.height=e.height,i=zt),n=r.framebuffer):(o=s.resolution,e||(Vt.width=s.screen.width,Vt.height=s.screen.height,e=Vt),i||((i=Vt).width=e.width,i.height=e.height));var a=this.viewportFrame;a.x=i.x*o,a.y=i.y*o,a.width=i.width*o,a.height=i.height*o,t||(a.y=s.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(i,e,o,!n),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var i=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,n=i.width!==r.width||i.height!==r.height;if(n){var o=this.viewportFrame,s=o.x,a=o.y,h=o.width,l=o.height;s=Math.round(s),a=Math.round(a),h=Math.round(h),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,a,h,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),n&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function Yt(t,e,i,r,n){i.buffer.update(n)}var qt={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Kt={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function $t(t,e){if(!t.autoManage)return{size:0,syncFunc:Yt};for(var i=function(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),i=0,r=0,n=0,o=0;o<e.length;o++){var s=e[o];if(i=Kt[s.data.type],s.data.size>1&&(i=Math.max(i,16)*s.data.size),s.dataLen=i,r%i!=0&&r<16){var a=r%i%16;r+=a,n+=a}r+i>16?(n=16*Math.ceil(n/16),s.offset=n,n+=i,r=i):(s.offset=n,r+=i,n+=i)}return{uboElements:e,size:n=16*Math.ceil(n/16)}}(function(t,e){var i=[];for(var r in t)e[r]&&i.push(e[r]);return i.sort((function(t,e){return t.index-e.index})),i}(t.uniforms,e)),r=i.uboElements,n=i.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],s=0;s<r.length;s++){for(var a=r[s],h=t.uniforms[a.data.name],l=a.data.name,u=!1,c=0;c<wt.length;c++){var d=wt[c];if(d.codeUbo&&d.test(a.data,h)){o.push("offset = "+a.offset/4+";",wt[c].codeUbo(a.data.name,h)),u=!0;break}}if(!u)if(a.data.size>1){var p=_t(a.data.type),f=Math.max(Kt[a.data.type]/16,1),m=p/f,g=(4-m%4)%4;o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+a.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+a.data.size*f+"; i++)\n                {\n                    for(var j = 0; j < "+m+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+g+";\n                }\n\n                ")}else{var v=qt[a.data.type];o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+a.offset/4+";\n                "+v+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}var Zt=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function Qt(t,e){var i=lt(t,t.VERTEX_SHADER,e.vertexSrc),r=lt(t,t.FRAGMENT_SHADER,e.fragmentSrc),n=t.createProgram();if(t.attachShader(n,i),t.attachShader(n,r),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||function(t,e,i,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||ut(t,i),t.getShaderParameter(r,t.COMPILE_STATUS)||ut(t,r),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,n,i,r),e.attributeData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var o=e.getActiveAttrib(t,n);if(0!==o.name.indexOf("gl_")){var s=Tt(e,o.type),a={type:s,name:o.name,size:_t(s),location:e.getAttribLocation(t,o.name)};i[o.name]=a}}return i}(n,t),e.uniformData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;n++){var o=e.getActiveUniform(t,n),s=o.name.replace(/\[.*?\]$/,""),a=!!o.name.match(/\[.*?\]$/),h=Tt(e,o.type);i[s]={name:s,index:n,type:h,size:o.size,isArray:a,value:dt(h,o.size)}}return i}(n,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort((function(t,e){return t>e?1:-1}));for(var s=0;s<o.length;s++)e.attributeData[o[s]].location=s,t.bindAttribLocation(n,s,o[s]);t.linkProgram(n)}t.deleteShader(i),t.deleteShader(r);var a={};for(var s in e.uniformData){var h=e.uniformData[s];a[s]={location:t.getUniformLocation(n,s),value:dt(h.type,h.size)}}return new Zt(n,a)}var Jt=0,te={textureCount:0,uboCount:0},ee=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Jt++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof At)return At;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");At=!0===t({a:"b"},"a","b")}catch(t){At=!1}return At}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),e||(te.textureCount=0,te.uboCount=0,this.syncUniformGroup(t.uniformGroup,te)),r},t.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();t.static&&t.dirtyId===i.uniformDirtyGroups[t.id]||(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},t.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var i,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var n in t.uniforms){var o=e[n];if(o){for(var s=t.uniforms[n],a=!1,h=0;h<wt.length;h++)if(wt[h].test(o,s)){r.push(wt[h].code(n,s)),a=!0;break}if(!a){var l=(1===o.size?Et:St)[o.type].replace("location",'ud["'+n+'"].location');r.push('\n            cu = ud["'+n+'"];\n            cv = cu.value;\n            v = uv["'+n+'"];\n            '+l+";")}}else(null===(i=t.uniforms[n])||void 0===i?void 0:i.group)&&(t.uniforms[n].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+n+", '"+n+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+n+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||0!==t.dirtyId||!i.uniformGroups[t.id]){t.dirtyId=0;var r=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),r(i.uniformData,t.uniforms,this.renderer,te,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,i){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var n=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),s=this._uboCache[o];if(s||(s=this._uboCache[o]=$t(t,this.shader.program.uniformData)),t.autoManage){var a=new Float32Array(s.size/4);t.buffer.update(a)}return e.uniformGroups[t.id]=s.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,i){var r=t.uniforms,n=[i+"-"];for(var o in r)n.push(o),e[o]&&n.push(e[o].type);return n.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,i=t.program,r=Qt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();var ie=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=n.b.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Dt,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[n.b.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.ADD]=[t.ONE,t.ONE],e[n.b.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.NONE]=[0,0],e[n.b.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[n.b.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[n.b.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[n.b.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[n.b.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[n.b.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[n.b.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[n.b.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[n.b.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[n.b.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),re=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=r.b.GC_MAX_IDLE,this.checkCountMax=r.b.GC_MAX_CHECK_COUNT,this.mode=r.b.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==n.i.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[r]=null,i=!0)}if(i){var o=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[o++]=e[r]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t.prototype.destroy=function(){this.renderer=null},t}();var ne=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=n.r.UNSIGNED_BYTE,this.internalFormat=n.h.RGBA,this.samplerType=0},oe=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new v,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){var e,i,r,o,s,a,h,l,u,c,d,p,f,m,g,v,y,_,b,x,T,w,E;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?((e={})[n.r.UNSIGNED_BYTE]=((i={})[n.h.RGBA]=t.RGBA8,i[n.h.RGB]=t.RGB8,i[n.h.RG]=t.RG8,i[n.h.RED]=t.R8,i[n.h.RGBA_INTEGER]=t.RGBA8UI,i[n.h.RGB_INTEGER]=t.RGB8UI,i[n.h.RG_INTEGER]=t.RG8UI,i[n.h.RED_INTEGER]=t.R8UI,i[n.h.ALPHA]=t.ALPHA,i[n.h.LUMINANCE]=t.LUMINANCE,i[n.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,i),e[n.r.BYTE]=((r={})[n.h.RGBA]=t.RGBA8_SNORM,r[n.h.RGB]=t.RGB8_SNORM,r[n.h.RG]=t.RG8_SNORM,r[n.h.RED]=t.R8_SNORM,r[n.h.RGBA_INTEGER]=t.RGBA8I,r[n.h.RGB_INTEGER]=t.RGB8I,r[n.h.RG_INTEGER]=t.RG8I,r[n.h.RED_INTEGER]=t.R8I,r),e[n.r.UNSIGNED_SHORT]=((o={})[n.h.RGBA_INTEGER]=t.RGBA16UI,o[n.h.RGB_INTEGER]=t.RGB16UI,o[n.h.RG_INTEGER]=t.RG16UI,o[n.h.RED_INTEGER]=t.R16UI,o[n.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,o),e[n.r.SHORT]=((s={})[n.h.RGBA_INTEGER]=t.RGBA16I,s[n.h.RGB_INTEGER]=t.RGB16I,s[n.h.RG_INTEGER]=t.RG16I,s[n.h.RED_INTEGER]=t.R16I,s),e[n.r.UNSIGNED_INT]=((a={})[n.h.RGBA_INTEGER]=t.RGBA32UI,a[n.h.RGB_INTEGER]=t.RGB32UI,a[n.h.RG_INTEGER]=t.RG32UI,a[n.h.RED_INTEGER]=t.R32UI,a[n.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,a),e[n.r.INT]=((h={})[n.h.RGBA_INTEGER]=t.RGBA32I,h[n.h.RGB_INTEGER]=t.RGB32I,h[n.h.RG_INTEGER]=t.RG32I,h[n.h.RED_INTEGER]=t.R32I,h),e[n.r.FLOAT]=((l={})[n.h.RGBA]=t.RGBA32F,l[n.h.RGB]=t.RGB32F,l[n.h.RG]=t.RG32F,l[n.h.RED]=t.R32F,l[n.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,l),e[n.r.HALF_FLOAT]=((u={})[n.h.RGBA]=t.RGBA16F,u[n.h.RGB]=t.RGB16F,u[n.h.RG]=t.RG16F,u[n.h.RED]=t.R16F,u),e[n.r.UNSIGNED_SHORT_5_6_5]=((c={})[n.h.RGB]=t.RGB565,c),e[n.r.UNSIGNED_SHORT_4_4_4_4]=((d={})[n.h.RGBA]=t.RGBA4,d),e[n.r.UNSIGNED_SHORT_5_5_5_1]=((p={})[n.h.RGBA]=t.RGB5_A1,p),e[n.r.UNSIGNED_INT_2_10_10_10_REV]=((f={})[n.h.RGBA]=t.RGB10_A2,f[n.h.RGBA_INTEGER]=t.RGB10_A2UI,f),e[n.r.UNSIGNED_INT_10F_11F_11F_REV]=((m={})[n.h.RGB]=t.R11F_G11F_B10F,m),e[n.r.UNSIGNED_INT_5_9_9_9_REV]=((g={})[n.h.RGB]=t.RGB9_E5,g),e[n.r.UNSIGNED_INT_24_8]=((v={})[n.h.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,v),e[n.r.FLOAT_32_UNSIGNED_INT_24_8_REV]=((y={})[n.h.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,y),E=e):((_={})[n.r.UNSIGNED_BYTE]=((b={})[n.h.RGBA]=t.RGBA,b[n.h.RGB]=t.RGB,b[n.h.ALPHA]=t.ALPHA,b[n.h.LUMINANCE]=t.LUMINANCE,b[n.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,b),_[n.r.UNSIGNED_SHORT_5_6_5]=((x={})[n.h.RGB]=t.RGB,x),_[n.r.UNSIGNED_SHORT_4_4_4_4]=((T={})[n.h.RGBA]=t.RGBA,T),_[n.r.UNSIGNED_SHORT_5_5_5_1]=((w={})[n.h.RGBA]=t.RGBA,w),E=_),E}(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var r=new ne(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ne(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[r]=null)},t.prototype.ensureSamplerType=function(t){var e=this.boundTextures,i=this.hasIntegerTextures,r=this.CONTEXT_UID;if(i)for(var o=t-1;o>=0;--o){var s=e[o];if(s)s._glTextures[r].samplerType!==n.o.FLOAT&&this.renderer.texture.unbind(s)}},t.prototype.initTexture=function(t){var e=new ne(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var i,r;e.internalFormat=null!==(r=null===(i=this.internalFormats[t.type])||void 0===i?void 0:i[t.format])&&void 0!==r?r:t.format,2===this.webGLVersion&&t.type===n.r.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==n.o.FLOAT&&(this.hasIntegerTextures=!0);else{var r=t.realWidth,o=t.realHeight,s=i.gl;(e.width!==r||e.height!==o||e.dirtyId<0)&&(e.width=r,e.height=o,s.texImage2D(t.target,0,e.internalFormat,r,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&Object(o.x)(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==n.k.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=n.s.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==n.k.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===n.p.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===n.p.LINEAR){var o=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===n.p.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===n.p.LINEAR?i.LINEAR:i.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),se={__proto__:null,FilterSystem:Q,BatchSystem:tt,ContextSystem:it,FramebufferSystem:ot,GeometrySystem:at,MaskSystem:kt,ScissorSystem:Xt,StencilSystem:jt,ProjectionSystem:Ht,RenderTextureSystem:Wt,ShaderSystem:ee,StateSystem:ie,TextureGCSystem:re,TextureSystem:oe},ae=new h.d,he=function(t){function e(e,i){void 0===e&&(e=n.n.UNKNOWN);var s=t.call(this)||this;return i=Object.assign({},r.b.RENDER_OPTIONS,i),s.options=i,s.type=e,s.screen=new h.j(0,0,i.width,i.height),s.view=i.view||document.createElement("canvas"),s.resolution=i.resolution||r.b.RESOLUTION,s.useContextAlpha=i.useContextAlpha,s.autoDensity=!!i.autoDensity,s.preserveDrawingBuffer=i.preserveDrawingBuffer,s.clearBeforeRender=i.clearBeforeRender,s._backgroundColor=0,s._backgroundColorRgba=[0,0,0,1],s._backgroundColorString="#000000",s.backgroundColor=i.backgroundColor||s._backgroundColor,s.backgroundAlpha=i.backgroundAlpha,void 0!==i.transparent&&(Object(o.h)("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),s.useContextAlpha=i.transparent,s.backgroundAlpha=i.transparent?0:1),s._lastObjectRendered=null,s.plugins={},s}return d(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var i=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=r+"px"),this.emit("resize",i,r)},e.prototype.generateTexture=function(t,e,i,r){void 0===e&&(e={}),"number"==typeof e&&(Object(o.h)("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:i,region:r});var n=e.region,s=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&(i[r[n]]=t[r[n]])}return i}(e,["region"]);0===(r=n||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var a=F.create(p({width:r.width,height:r.height},s));return ae.tx=-r.x,ae.ty=-r.y,this.render(t,{renderTexture:a,clear:!1,transform:ae,skipUpdateTransform:!!t.parent}),a},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=n.n.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Object(o.n)(t),Object(o.m)(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(o.c),le=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},ue=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,i=this.CONTEXT_UID,r=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)},t.prototype.bindBufferBase=function(t,e){var i=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var n=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,n.buffer)}},t.prototype.bindBufferRange=function(t,e,i){var r=this.gl,n=this.CONTEXT_UID;i=i||0;var o=t._glBuffers[n]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,256*i,256)},t.prototype.update=function(t){var e=this.gl,i=this.CONTEXT_UID,r=t._glBuffers[i];if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var n=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,n)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),i&&(e||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,i=this.gl;return t._glBuffers[e]=new le(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}(),ce=function(t){function e(i){var r=t.call(this,n.n.WEBGL,i)||this;return i=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new s.a("destroy"),contextChange:new s.a("contextChange"),reset:new s.a("reset"),update:new s.a("update"),postrender:new s.a("postrender"),prerender:new s.a("prerender"),resize:new s.a("resize")},r.runners.contextChange.add(r),r.globalUniforms=new q({projectionMatrix:new h.d},!0),r.addSystem(kt,"mask").addSystem(it,"context").addSystem(ie,"state").addSystem(ee,"shader").addSystem(oe,"texture").addSystem(ue,"buffer").addSystem(at,"geometry").addSystem(ot,"framebuffer").addSystem(Xt,"scissor").addSystem(jt,"stencil").addSystem(Ht,"projection").addSystem(re,"textureGC").addSystem(Q,"filter").addSystem(Wt,"renderTexture").addSystem(tt,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,i.context?r.context.initFromContext(i.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:i.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,Object(o.z)(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return d(e,t),e.create=function(t){if(Object(o.q)())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}t>=n.l.HIGH?this.multisample=n.l.HIGH:t>=n.l.MEDIUM?this.multisample=n.l.MEDIUM:t>=n.l.LOW?this.multisample=n.l.LOW:this.multisample=n.l.NONE},e.prototype.addSystem=function(t,e){var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=i,this.runners)this.runners[r].add(i);return this},e.prototype.render=function(t,e){var i,r,n,s;if(e&&(e instanceof F?(Object(o.h)("6.0.0","Renderer#render arguments changed, use options instead."),i=e,r=arguments[2],n=arguments[3],s=arguments[4]):(i=e.renderTexture,r=e.clear,n=e.transform,s=e.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,!this.context.isLost){if(i||(this._lastObjectRendered=t),!s){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,i,r,n){void 0===i&&(i={});var o=t.prototype.generateTexture.call(this,e,i,r,n);return this.framebuffer.blit(),o},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.emit(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Object(o.h)("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,i){e.__plugins=e.__plugins||{},e.__plugins[t]=i},e}(he);function de(t){return ce.create(t)}var pe="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",fe="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",me=(function(){function t(t){Object(o.h)("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}t.prototype.destroy=function(){this.renderer=null}}(),function(){this.texArray=null,this.blend=0,this.type=n.f.TRIANGLES,this.start=0,this.size=0,this.data=null}),ge=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),ve=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),ye=function(t){function e(e){var i=t.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Dt.for2d(),i.size=4*r.b.SPRITE_BATCH_SIZE,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return d(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;r.b.PREFER_ENV===n.g.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var r=Rt.replace(/%forloop%/gi,Pt(t));if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,r=this.size/4,n=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new me);for(;i.length<n;)i.push(new ge);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,r=e._textureArrayPool,n=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++v._globalBatch,h=0,l=r[0],u=0;n.copyBoundTextures(o,i);for(var c=0;c<this._bufferSize;++c){var d=t[c];t[c]=null,d._batchEnabled!==a&&(l.count>=i&&(n.boundArray(l,o,a,i),this.buildDrawCalls(l,u,c),u=c,l=r[++h],++a),d._batchEnabled=a,d.touched=s,l.elements[l.count++]=d)}l.count>0&&(n.boundArray(l,o,a,i),this.buildDrawCalls(l,u,this._bufferSize),++h,++a);for(c=0;c<o.length;c++)o[c]=null;v._globalBatch=a},e.prototype.buildDrawCalls=function(t,i,r){var n=this._bufferedElements,s=this._attributeBuffer,a=this._indexBuffer,h=this.vertexSize,l=e._drawCallPool,u=this._dcIndex,c=this._aIndex,d=this._iIndex,p=l[u];p.start=this._iIndex,p.texArray=t;for(var f=i;f<r;++f){var m=n[f],g=m._texture.baseTexture,v=o.t[g.alphaMode?1:0][m.blendMode];n[f]=null,i<f&&p.blend!==v&&(p.size=d-p.start,i=f,(p=l[++u]).texArray=t,p.start=d),this.packInterleavedGeometry(m,s,a,c,d),c+=m.vertexData.length/2*h,d+=m.indices.length,p.blend=v}i<r&&(p.size=d-p.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=d},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;r.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,r=i.gl,n=i.state,o=e._drawCallPool,s=null,a=0;a<t;a++){var h=o[a],l=h.texArray,u=h.type,c=h.size,d=h.start,p=h.blend;s!==l&&(s=l,this.bindAndClearTexArray(l)),this.state.blendMode=p,n.set(this.state),r.drawElements(u,c,r.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),r.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=Object(o.s)(Math.ceil(t/8)),i=Object(o.r)(e),r=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._aBuffers[r];return n||(this._aBuffers[r]=n=new ve(r*this.vertexSize*4)),n},e.prototype.getIndexBuffer=function(t){var e=Object(o.s)(Math.ceil(t/12)),i=Object(o.r)(e),r=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(r)),n},e.prototype.packInterleavedGeometry=function(t,e,i,r,n){for(var s=e.uint32View,a=e.float32View,h=r/this.vertexSize,l=t.uvs,u=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),f=p<1&&t._texture.baseTexture.alphaMode?Object(o.v)(t._tintRGB,p):t._tintRGB+(255*p<<24),m=0;m<c.length;m+=2)a[r++]=c[m],a[r++]=c[m+1],a[r++]=l[m],a[r++]=l[m+1],s[r++]=f,a[r++]=d;for(m=0;m<u.length;m++)i[n++]=h+u[m]},e._drawCallPool=[],e._textureArrayPool=[],e}(J),_e=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=q.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Ct(this.vertexSrc,r)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new h.d,default:this.defaultGroupCache[t]};return new Mt(this.programCache[t],n)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),be=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i._buffer=new U(null,e,!1),i._indexBuffer=new U(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,n.r.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,n.r.FLOAT).addAttribute("aColor",i._buffer,4,!0,n.r.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,n.r.FLOAT).addIndex(i._indexBuffer),i}return d(e,t),e}(V),xe="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Te="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",we=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:xe,fragment:Te,geometryClass:be,vertexSize:6},t),i=e.vertex,r=e.fragment,n=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var s=t.call(this,e)||this;return s.shaderGenerator=new _e(i,r),s.geometryClass=o,s.vertexSize=n,s}return d(e,t),e}(ye)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return xe},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Te},enumerable:!1,configurable:!0}),t}().create(),Ee={},Se=function(t){Object.defineProperty(Ee,t,{get:function(){return Object(o.h)("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),R[t]}})};for(var Ae in R)Se(Ae);var Re={},Pe=function(t){Object.defineProperty(Re,t,{get:function(){return Object(o.h)("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),se[t]}})};for(var Ae in se)Pe(Ae)},function(t,e,i){"use strict";i.d(e,"a",(function(){return k})),i.d(e,"b",(function(){return U})),i.d(e,"d",(function(){return L})),i.d(e,"e",(function(){return B})),i.d(e,"f",(function(){return x})),i.d(e,"g",(function(){return S})),i.d(e,"h",(function(){return F})),i.d(e,"i",(function(){return j})),i.d(e,"k",(function(){return A})),i.d(e,"l",(function(){return H})),i.d(e,"m",(function(){return g})),i.d(e,"n",(function(){return v})),i.d(e,"p",(function(){return P})),i.d(e,"q",(function(){return f})),i.d(e,"r",(function(){return I})),i.d(e,"s",(function(){return R})),i.d(e,"t",(function(){return b})),i.d(e,"u",(function(){return T})),i.d(e,"v",(function(){return w})),i.d(e,"w",(function(){return E})),i.d(e,"x",(function(){return O})),i.d(e,"y",(function(){return _})),i.d(e,"z",(function(){return p})),i.d(e,"A",(function(){return C})),i.d(e,"B",(function(){return y})),i.d(e,"C",(function(){return G})),i.d(e,"D",(function(){return D})),i.d(e,"E",(function(){return u}));var r=i(4);i.d(e,"o",(function(){return r.a}));var n=i(20),o=i.n(n);i.d(e,"c",(function(){return o.a}));var s=i(21),a=i.n(s);i.d(e,"j",(function(){return a.a}));var h=i(18),l=i(0),u={parse:h.parse,format:h.format,resolve:h.resolve};r.b.RETINA_PREFIX=/@([0-9\.]+)x/,r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var c,d=!1;function p(t){var e;if(!d){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS 6.3.2 - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,i)}else globalThis.console&&globalThis.console.log("PixiJS 6.3.2 - "+t+" - http://www.pixijs.com/");d=!0}}function f(){return void 0===c&&(c=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,n}catch(t){return!1}}()),c}var m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function g(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function v(t){var e=t.toString(16);return"#"+(e="000000".substring(0,6-e.length)+e)}function y(t){return"string"==typeof t&&"#"===(t=m[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),parseInt(t,16)}function _(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var b=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[l.b.NORMAL_NPM]=l.b.NORMAL,t[l.b.ADD_NPM]=l.b.ADD,t[l.b.SCREEN_NPM]=l.b.SCREEN,e[l.b.NORMAL]=l.b.NORMAL_NPM,e[l.b.ADD]=l.b.ADD_NPM,e[l.b.SCREEN]=l.b.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function x(t,e){return b[e?1:0][t]}function T(t,e,i,r){return i=i||new Float32Array(4),r||void 0===r?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function w(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255,n=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(n=n*e+.5|0)}function E(t,e,i,r){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(r||void 0===r)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function S(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var r=0,n=0;r<i;r+=6,n+=4)e[r+0]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3;return e}function A(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}Float32Array,Uint32Array,Int32Array,Uint8Array;function R(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function P(t){return!(t&t-1||!t)}function I(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function O(t,e,i){var r,n=t.length;if(!(e>=n||0===i)){var o=n-(i=e+i>n?n-e:i);for(r=e;r<o;++r)t[r]=t[r+i];t.length=o}}function C(t){return 0===t?0:t<0?-1:1}var M=0;function D(){return++M}var N={};function F(t,e,i){if(void 0===i&&(i=3),!N[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),N[e]=!0}}var L={},B=Object.create(null),k=Object.create(null);var U=function(){function t(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||r.b.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),t}();function G(t){var e,i,r,n=t.width,o=t.height,s=t.getContext("2d"),a=s.getImageData(0,0,n,o).data,h=a.length,l={top:null,left:null,right:null,bottom:null},u=null;for(e=0;e<h;e+=4)0!==a[e+3]&&(i=e/4%n,r=~~(e/4/n),null===l.top&&(l.top=r),(null===l.left||i<l.left)&&(l.left=i),(null===l.right||l.right<i)&&(l.right=i+1),(null===l.bottom||l.bottom<r)&&(l.bottom=r));return null!==l.top&&(n=l.right-l.left,o=l.bottom-l.top+1,u=s.getImageData(l.left,l.top,n,o)),{height:o,width:n,data:u}}var X;function j(t,e){if(void 0===e&&(e=globalThis.location),0===t.indexOf("data:"))return"";e=e||globalThis.location,X||(X=document.createElement("a")),X.href=t;var i=u.parse(X.href),r=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&r&&i.protocol===e.protocol?"":"anonymous"}function H(t,e){var i=r.b.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}},function(t,e,i){"use strict";i.d(e,"a",(function(){return k})),i.d(e,"b",(function(){return U}));var r=/iPhone/i,n=/iPod/i,o=/iPad/i,s=/\biOS-universal(?:.+)Mac\b/i,a=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,l=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,u=/Silk/i,c=/Windows Phone/i,d=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,f=/BB10/i,m=/Opera Mini/i,g=/\b(CriOS|Chrome)(?:.+)Mobile/i,v=/Mobile(?:.+)Firefox\b/i,y=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};
/*!
 * @pixi/settings - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var _,b,x,T,w,E,S,A,R,P,I,O,C,M,D,N,F,L,B,k=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,_=i.split("[FBAN");void 0!==_[1]&&(i=_[0]),void 0!==(_=i.split("Twitter"))[1]&&(i=_[0]);var b=function(t){return function(e){return e.test(t)}}(i),x={apple:{phone:b(r)&&!b(c),ipod:b(n),tablet:!b(r)&&(b(o)||y(e))&&!b(c),universal:b(s),device:(b(r)||b(n)||b(o)||b(s)||y(e))&&!b(c)},amazon:{phone:b(l),tablet:!b(l)&&b(u),device:b(l)||b(u)},android:{phone:!b(c)&&b(l)||!b(c)&&b(a),tablet:!b(c)&&!b(l)&&!b(a)&&(b(u)||b(h)),device:!b(c)&&(b(l)||b(u)||b(a)||b(h))||b(/\bokhttp\b/i)},windows:{phone:b(c),tablet:b(d),device:b(c)||b(d)},other:{blackberry:b(p),blackberry10:b(f),opera:b(m),firefox:b(v),chrome:b(g),device:b(p)||b(f)||b(m)||b(v)||b(g)},any:!1,phone:!1,tablet:!1};return x.any=x.apple.device||x.android.device||x.windows.device||x.other.device,x.phone=x.apple.phone||x.android.phone||x.windows.phone,x.tablet=x.apple.tablet||x.android.tablet||x.windows.tablet,x}(globalThis.navigator);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(_||(_={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(b||(b={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(x||(x={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(T||(T={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(w||(w={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(E||(E={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(S||(S={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(A||(A={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(R||(R={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(P||(P={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(I||(I={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(O||(O={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(C||(C={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(M||(M={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(D||(D={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(N||(N={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(F||(F={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(L||(L={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(B||(B={}));var U={MIPMAP_TEXTURES:O.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:L.NONE,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(k.tablet||k.phone){var i;if(k.apple.device)if(i=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(i[1],10)<11&&(e=!1);if(k.android.device)if(i=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(i[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:D.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:I.CLAMP,SCALE_MODE:P.LINEAR,PRECISION_VERTEX:N.HIGH,PRECISION_FRAGMENT:k.apple.device?N.HIGH:N.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!k.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},function(t,e){var i="function"==typeof Float32Array;function r(t,e){return 1-3*e+3*t}function n(t,e){return 3*e-6*t}function o(t){return 3*t}function s(t,e,i){return((r(e,i)*t+n(e,i))*t+o(e))*t}function a(t,e,i){return 3*r(e,i)*t*t+2*n(e,i)*t+o(e)}function h(t){return t}t.exports=function(t,e,r,n){if(!(0<=t&&t<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&r===n)return h;for(var o=i?new Float32Array(11):new Array(11),l=0;l<11;++l)o[l]=s(.1*l,t,r);function u(e){for(var i=0,n=1;10!==n&&o[n]<=e;++n)i+=.1;--n;var h=i+.1*((e-o[n])/(o[n+1]-o[n])),l=a(h,t,r);return l>=.001?function(t,e,i,r){for(var n=0;n<4;++n){var o=a(e,i,r);if(0===o)return e;e-=(s(e,i,r)-t)/o}return e}(e,h,t,r):0===l?h:function(t,e,i,r,n){var o,a,h=0;do{(o=s(a=e+(i-e)/2,r,n)-t)>0?i=a:e=a}while(Math.abs(o)>1e-7&&++h<10);return a}(e,i,i+.1,t,r)}return function(t){return 0===t?0:1===t?1:s(u(t),e,n)}}},function(t,e){function i(t,e){if(!(this instanceof i))return new i(t,e);this.x=t||0,this.y=e||0}t.exports=i,i.fromArray=function(t){return new i(t[0]||0,t[1]||0)},i.fromObject=function(t){return new i(t.x||0,t.y||0)},i.prototype.addX=function(t){return this.x+=t.x,this},i.prototype.addY=function(t){return this.y+=t.y,this},i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},i.prototype.addScalarX=function(t){return this.x+=t,this},i.prototype.addScalarY=function(t){return this.y+=t,this},i.prototype.subtractX=function(t){return this.x-=t.x,this},i.prototype.subtractY=function(t){return this.y-=t.y,this},i.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.subtractScalar=function(t){return this.x-=t,this.y-=t,this},i.prototype.subtractScalarX=function(t){return this.x-=t,this},i.prototype.subtractScalarY=function(t){return this.y-=t,this},i.prototype.divideX=function(t){return this.x/=t.x,this},i.prototype.divideY=function(t){return this.y/=t.y,this},i.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},i.prototype.divideScalar=function(t){return 0!==t?(this.x/=t,this.y/=t):(this.x=0,this.y=0),this},i.prototype.divideScalarX=function(t){return 0!==t?this.x/=t:this.x=0,this},i.prototype.divideScalarY=function(t){return 0!==t?this.y/=t:this.y=0,this},i.prototype.invertX=function(){return this.x*=-1,this},i.prototype.invertY=function(){return this.y*=-1,this},i.prototype.invert=function(){return this.invertX(),this.invertY(),this},i.prototype.multiplyX=function(t){return this.x*=t.x,this},i.prototype.multiplyY=function(t){return this.y*=t.y,this},i.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},i.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},i.prototype.multiplyScalarX=function(t){return this.x*=t,this},i.prototype.multiplyScalarY=function(t){return this.y*=t,this},i.prototype.normalize=function(){var t=this.length();return 0===t?(this.x=1,this.y=0):this.divide(i(t,t)),this},i.prototype.norm=i.prototype.normalize,i.prototype.limit=function(t,e){return Math.abs(this.x)>t&&(this.x*=e),Math.abs(this.y)>t&&(this.y*=e),this},i.prototype.randomize=function(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this},i.prototype.randomizeX=function(t,e){var i=Math.min(t.x,e.x),r=Math.max(t.x,e.x);return this.x=n(i,r),this},i.prototype.randomizeY=function(t,e){var i=Math.min(t.y,e.y),r=Math.max(t.y,e.y);return this.y=n(i,r),this},i.prototype.randomizeAny=function(t,e){return Math.round(Math.random())?this.randomizeX(t,e):this.randomizeY(t,e),this},i.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},i.prototype.toFixed=function(t){return void 0===t&&(t=8),this.x=this.x.toFixed(t),this.y=this.y.toFixed(t),this},i.prototype.mixX=function(t,e){return void 0===e&&(e=.5),this.x=(1-e)*this.x+e*t.x,this},i.prototype.mixY=function(t,e){return void 0===e&&(e=.5),this.y=(1-e)*this.y+e*t.y,this},i.prototype.mix=function(t,e){return this.mixX(t,e),this.mixY(t,e),this},i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copyX=function(t){return this.x=t.x,this},i.prototype.copyY=function(t){return this.y=t.y,this},i.prototype.copy=function(t){return this.copyX(t),this.copyY(t),this},i.prototype.zero=function(){return this.x=this.y=0,this},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.cross=function(t){return this.x*t.y-this.y*t.x},i.prototype.projectOnto=function(t){var e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this},i.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},i.prototype.horizontalAngleDeg=function(){return o(this.horizontalAngle())},i.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},i.prototype.verticalAngleDeg=function(){return o(this.verticalAngle())},i.prototype.angle=i.prototype.horizontalAngle,i.prototype.angleDeg=i.prototype.horizontalAngleDeg,i.prototype.direction=i.prototype.horizontalAngle,i.prototype.rotate=function(t){var e=this.x*Math.cos(t)-this.y*Math.sin(t),i=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=i,this},i.prototype.rotateDeg=function(t){return t=s(t),this.rotate(t)},i.prototype.rotateTo=function(t){return this.rotate(t-this.angle())},i.prototype.rotateToDeg=function(t){return t=s(t),this.rotateTo(t)},i.prototype.rotateBy=function(t){var e=this.angle()+t;return this.rotate(e)},i.prototype.rotateByDeg=function(t){return t=s(t),this.rotateBy(t)},i.prototype.distanceX=function(t){return this.x-t.x},i.prototype.absDistanceX=function(t){return Math.abs(this.distanceX(t))},i.prototype.distanceY=function(t){return this.y-t.y},i.prototype.absDistanceY=function(t){return Math.abs(this.distanceY(t))},i.prototype.distance=function(t){return Math.sqrt(this.distanceSq(t))},i.prototype.distanceSq=function(t){var e=this.distanceX(t),i=this.distanceY(t);return e*e+i*i},i.prototype.length=function(){return Math.sqrt(this.lengthSq())},i.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},i.prototype.magnitude=i.prototype.length,i.prototype.isZero=function(){return 0===this.x&&0===this.y},i.prototype.isEqualTo=function(t){return this.x===t.x&&this.y===t.y},i.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},i.prototype.toArray=function(){return[this.x,this.y]},i.prototype.toObject=function(){return{x:this.x,y:this.y}};var r=180/Math.PI;function n(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function o(t){return t*r}function s(t){return t/r}},function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return C})),i.d(e,"c",(function(){return P})),i.d(e,"d",(function(){return I}));var r=i(4),n=i(1),o=i(3);
/*!
 * @pixi/display - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
r.b.SORTABLE_CHILDREN=!1;var s=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.j.EMPTY:((t=t||new n.j(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var i=t.a,r=t.b,n=t.c,o=t.d,s=t.tx,a=t.ty,h=i*e.x+n*e.y+s,l=r*e.x+o*e.y+a;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,o=t[0],s=t[1];e=o<e?o:e,i=s<i?s:i,r=o>r?o:r,n=s>n?s:n,e=(o=t[2])<e?o:e,i=(s=t[3])<i?s:i,r=o>r?o:r,n=s>n?s:n,e=(o=t[4])<e?o:e,i=(s=t[5])<i?s:i,r=o>r?o:r,n=s>n?s:n,e=(o=t[6])<e?o:e,i=(s=t[7])<i?s:i,r=o>r?o:r,n=s>n?s:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n},t.prototype.addFrame=function(t,e,i,r,n){this.addFrameMatrix(t.worldTransform,e,i,r,n)},t.prototype.addFrameMatrix=function(t,e,i,r,n){var o=t.a,s=t.b,a=t.c,h=t.d,l=t.tx,u=t.ty,c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,m=o*e+a*i+l,g=s*e+h*i+u;c=m<c?m:c,d=g<d?g:d,p=m>p?m:p,f=g>f?g:f,c=(m=o*r+a*i+l)<c?m:c,d=(g=s*r+h*i+u)<d?g:d,p=m>p?m:p,f=g>f?g:f,c=(m=o*e+a*n+l)<c?m:c,d=(g=s*e+h*n+u)<d?g:d,p=m>p?m:p,f=g>f?g:f,c=(m=o*r+a*n+l)<c?m:c,d=(g=s*r+h*n+u)<d?g:d,p=m>p?m:p,f=g>f?g:f,this.minX=c,this.minY=d,this.maxX=p,this.maxY=f},t.prototype.addVertexData=function(t,e,i){for(var r=this.minX,n=this.minY,o=this.maxX,s=this.maxY,a=e;a<i;a+=2){var h=t[a],l=t[a+1];r=h<r?h:r,n=l<n?l:n,o=h>o?h:o,s=l>s?l:s}this.minX=r,this.minY=n,this.maxX=o,this.maxY=s},t.prototype.addVertices=function(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)},t.prototype.addVerticesMatrix=function(t,e,i,r,n,o){void 0===n&&(n=0),void 0===o&&(o=n);for(var s=t.a,a=t.b,h=t.c,l=t.d,u=t.tx,c=t.ty,d=this.minX,p=this.minY,f=this.maxX,m=this.maxY,g=i;g<r;g+=2){var v=e[g],y=e[g+1],_=s*v+h*y+u,b=l*y+a*v+c;d=Math.min(d,_-n),f=Math.max(f,_+n),p=Math.min(p,b-o),m=Math.max(m,b+o)}this.minX=d,this.minY=p,this.maxX=f,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=o){var s=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<s?i:s,this.minY=r<a?r:a,this.maxX=n>h?n:h,this.maxY=o>l?o:l}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=o){var s=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<s?i:s,this.minY=r<a?r:a,this.maxX=n>h?n:h,this.maxY=o>l?o:l}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,i,r,n,o){t-=n,e-=o,i+=n,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function h(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var l,u,c,d,p,f,m,g,v,y,_,b,x,T,w,E,S,A,R,P=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new n.m,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new s,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return h(e,t),e.mixin=function(t){for(var i=Object.keys(t),r=0;r<i.length;++r){var n=i[r];Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t,n))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new n.j),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new n.j),t=this._localBoundsRect),this._localBounds||(this._localBounds=new s);var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-o,a},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,r,n,o,s,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new I),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*n.i},set:function(t){this.transform.rotation=t*n.b},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask!==t){var e;if(this._mask)(e=this._mask.maskObject||this._mask)._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1);if(this._mask=t,this._mask)0===(e=this._mask.maskObject||this._mask)._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++}},enumerable:!1,configurable:!0}),e}(o.c),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return h(e,t),e}(P);function O(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}P.prototype.displayObjectUpdateTransform=P.prototype.updateTransform,function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(l||(l={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(u||(u={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(c||(c={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(d||(d={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(p||(p={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(f||(f={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(m||(m={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(g||(g={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(v||(v={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(y||(y={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(_||(_={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(b||(b={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(x||(x={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(T||(T={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(w||(w={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(E||(E={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(S||(S={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(A||(A={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(R||(R={}));var C=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=r.b.SORTABLE_CHILDREN,e.sortDirty=!1,e}return h(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);Object(o.x)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var n=e[0],s=this.children.indexOf(n);if(-1===s)return null;n.parent=null,n.transform._parentID=-1,Object(o.x)(this.children,s,1),this._boundsID++,this.onChildrenChange(s),n.emit("removed",this),this.emit("childRemoved",n,this,s)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Object(o.x)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var i,r=t,n=e-r;if(n>0&&n<=e){i=this.children.splice(r,n);for(var o=0;o<i.length;++o)i[o].parent=null,i[o].transform&&(i[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(o=0;o<i.length;++o)i[o].emit("removed",this),this.emit("childRemoved",i[o],this,o);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(O),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,i){void 0===i&&(i=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!i)for(var n=0,o=this.children.length;n<o;++n){var s=this.children[n];s.visible&&s.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var i=t.renderTexture.sourceFrame;if(i.width>0&&i.height>0){var r,n;if(this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==e.prototype._render&&(r=this.getBounds(!0)),r&&i.intersects(r,n))this._render(t);else if(this.cullArea)return;for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o],h=a.cullable;a.cullable=h||!this.cullArea,a.render(t),a.cullable=h}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r])}var n=e&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==S.NONE));if(n&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);r=0;for(var o=this.children.length;r<o;++r)this.children[r].render(t)}n&&t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<r.length;++n)r[n].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(P);C.prototype.containerUpdateTransform=C.prototype.updateTransform},function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r}));var r,n=i(4);
/*!
 * @pixi/ticker - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */n.b.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(r||(r={}));var o=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),s=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new o(null,null,1/0),this.deltaMS=1/n.b.TARGET_FPMS,this.elapsedMS=1/n.b.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=r.NORMAL),this._addListener(new o(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=r.NORMAL),this._addListener(new o(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*n.b.TARGET_FPMS;for(var r=this._head,o=r.next;o;)o=o.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,n.b.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),a=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,r.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?s.shared:new s,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()},function(t,e,i){"use strict";i.d(e,"a",(function(){return f})),i.d(e,"b",(function(){return g})),i.d(e,"c",(function(){return m}));var r=i(2),n=i(1),o=i(0),s=i(7),a=i(4),h=i(3),l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function u(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var c=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),d=new n.g,p=new n.h,f=function(t){function e(e,i,n,s){void 0===s&&(s=o.f.TRIANGLES);var h=t.call(this)||this;return h.geometry=e,h.shader=i,h.state=n||r.s.for2d(),h.drawMode=s,h.start=0,h.size=0,h.uvs=null,h.indices=null,h.vertexData=new Float32Array(1),h.vertexDirty=-1,h._transformID=-1,h._roundPixels=a.b.ROUND_PIXELS,h.batchUvs=null,h}return u(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===o.f.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,n=r.a,o=r.b,s=r.c,h=r.d,l=r.tx,u=r.ty,c=this.vertexData,d=0;d<c.length/2;d++){var p=e[2*d],f=e[2*d+1];c[2*d]=n*p+s*f+l,c[2*d+1]=o*p+h*f+u}if(this._roundPixels){var m=a.b.RESOLUTION;for(d=0;d<c.length;++d)c[d]=Math.round((c[d]*m|0)/m)}this.vertexDirty=i}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new c(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,d);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=p.points,r=this.geometry.getIndex().data,n=r.length,o=4===this.drawMode?3:1,s=0;s+2<n;s+=o){var a=2*r[s],h=2*r[s+1],l=2*r[s+2];if(i[0]=e[a],i[1]=e[a+1],i[2]=e[h],i[3]=e[h+1],i[4]=e[l],i[5]=e[l+1],p.contains(d.x,d.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(s.b),m=function(t){function e(e,i){var o=this,s={uSampler:e,alpha:1,uTextureMatrix:n.d.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(s,i.uniforms),(o=t.call(this,i.program||r.n.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),s)||this)._colorDirty=!1,o.uvMatrix=new r.u(e),o.batchable=void 0===i.program,o.pluginName=i.pluginName,o.tint=i.tint,o.alpha=i.alpha,o}return u(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Object(h.w)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(r.r),g=function(t){function e(e,i,n){var s=t.call(this)||this,a=new r.h(e),h=new r.h(i,!0),l=new r.h(n,!0,!0);return s.addAttribute("aVertexPosition",a,2,!1,o.r.FLOAT).addAttribute("aTextureCoord",h,2,!1,o.r.FLOAT).addIndex(l),s._updateId=-1,s}return u(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(r.l)},function(t,e,i){"use strict";i.d(e,"a",(function(){return p})),i.d(e,"b",(function(){return f}));var r=i(2),n=i(3),o=i(1),s=i(0),a=i(4),h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var l=function(){function t(t){this._foundShapes=[],this.renderer=t}return t.prototype.pushMask=function(t){var e=this.renderer,i=t.maskObject||t;e.context.save();var r=this._foundShapes;if(this.recursiveFindShapes(i,r),r.length>0){var n=e.context;n.beginPath();for(var o=0;o<r.length;o++){var s=r[o],a=s.transform.worldTransform;this.renderer.setContextTransform(a),this.renderGraphicsShape(s)}r.length=0,n.clip()}},t.prototype.recursiveFindShapes=function(t,e){t.geometry&&t.geometry.graphicsData&&e.push(t);var i=t.children;if(i)for(var r=0;r<i.length;r++)this.recursiveFindShapes(i[r],e)},t.prototype.renderGraphicsShape=function(t){t.finishPoly();var e=this.renderer.context,i=t.geometry.graphicsData,r=i.length;if(0!==r)for(var n=0;n<r;n++){var s=i[n],a=s.shape;if(a.type===o.l.POLY){var h=a.points,l=s.holes,u=void 0,c=void 0,d=void 0,p=void 0;e.moveTo(h[0],h[1]);for(var f=1;f<h.length/2;f++)e.lineTo(h[2*f],h[2*f+1]);if(l.length>0){u=0,d=h[0],p=h[1];for(f=2;f+2<h.length;f+=2)u+=(h[f]-d)*(h[f+3]-p)-(h[f+2]-d)*(h[f+1]-p);for(var m=0;m<l.length;m++)if(h=l[m].shape.points){c=0,d=h[0],p=h[1];for(f=2;f+2<h.length;f+=2)c+=(h[f]-d)*(h[f+3]-p)-(h[f+2]-d)*(h[f+1]-p);if(c*u<0){e.moveTo(h[0],h[1]);for(f=2;f<h.length;f+=2)e.lineTo(h[f],h[f+1])}else{e.moveTo(h[h.length-2],h[h.length-1]);for(f=h.length-4;f>=0;f-=2)e.lineTo(h[f],h[f+1])}l[m].shape.closeStroke&&e.closePath()}}h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&e.closePath()}else if(a.type===o.l.RECT)e.rect(a.x,a.y,a.width,a.height),e.closePath();else if(a.type===o.l.CIRC)e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath();else if(a.type===o.l.ELIP){var g=2*a.width,v=2*a.height,y=a.x-g/2,_=a.y-v/2,b=g/2*.5522848,x=v/2*.5522848,T=y+g,w=_+v,E=y+g/2,S=_+v/2;e.moveTo(y,S),e.bezierCurveTo(y,S-x,E-b,_,E,_),e.bezierCurveTo(E+b,_,T,S-x,T,S),e.bezierCurveTo(T,S+x,E+b,w,E,w),e.bezierCurveTo(E-b,w,y,S+x,y,S),e.closePath()}else if(a.type===o.l.RREC){var A=a.x,R=a.y,P=a.width,I=a.height,O=a.radius,C=Math.min(P,I)/2;O=O>C?C:O,e.moveTo(A,R+O),e.lineTo(A,R+I-O),e.quadraticCurveTo(A,R+I,A+O,R+I),e.lineTo(A+P-O,R+I),e.quadraticCurveTo(A+P,R+I,A+P,R+I-O),e.lineTo(A+P,R+O),e.quadraticCurveTo(A+P,R,A+P-O,R),e.lineTo(A+O,R),e.quadraticCurveTo(A,R,A,R+O),e.closePath()}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();function u(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}function c(){if("undefined"==typeof document)return!1;var t=u("#ff00ff"),e=u("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var r=i.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var n=r.getImageData(2,0,1,1);if(!n)return!1;var o=n.data;return 255===o[0]&&0===o[1]&&0===o[2]}var d=new o.d,p=function(t){function e(i){var r,o=t.call(this,s.n.CANVAS,i)||this;if(o.refresh=!0,o.maskManager=new l(o),o.smoothProperty="imageSmoothingEnabled",o.blendModes=(void 0===r&&(r=[]),c()?(r[s.b.NORMAL]="source-over",r[s.b.ADD]="lighter",r[s.b.MULTIPLY]="multiply",r[s.b.SCREEN]="screen",r[s.b.OVERLAY]="overlay",r[s.b.DARKEN]="darken",r[s.b.LIGHTEN]="lighten",r[s.b.COLOR_DODGE]="color-dodge",r[s.b.COLOR_BURN]="color-burn",r[s.b.HARD_LIGHT]="hard-light",r[s.b.SOFT_LIGHT]="soft-light",r[s.b.DIFFERENCE]="difference",r[s.b.EXCLUSION]="exclusion",r[s.b.HUE]="hue",r[s.b.SATURATION]="saturate",r[s.b.COLOR]="color",r[s.b.LUMINOSITY]="luminosity"):(r[s.b.NORMAL]="source-over",r[s.b.ADD]="lighter",r[s.b.MULTIPLY]="source-over",r[s.b.SCREEN]="source-over",r[s.b.OVERLAY]="source-over",r[s.b.DARKEN]="source-over",r[s.b.LIGHTEN]="source-over",r[s.b.COLOR_DODGE]="source-over",r[s.b.COLOR_BURN]="source-over",r[s.b.HARD_LIGHT]="source-over",r[s.b.SOFT_LIGHT]="source-over",r[s.b.DIFFERENCE]="source-over",r[s.b.EXCLUSION]="source-over",r[s.b.HUE]="source-over",r[s.b.SATURATION]="source-over",r[s.b.COLOR]="source-over",r[s.b.LUMINOSITY]="source-over"),r[s.b.NORMAL_NPM]=r[s.b.NORMAL],r[s.b.ADD_NPM]=r[s.b.ADD],r[s.b.SCREEN_NPM]=r[s.b.SCREEN],r[s.b.SRC_IN]="source-in",r[s.b.SRC_OUT]="source-out",r[s.b.SRC_ATOP]="source-atop",r[s.b.DST_OVER]="destination-over",r[s.b.DST_IN]="destination-in",r[s.b.DST_OUT]="destination-out",r[s.b.DST_ATOP]="destination-atop",r[s.b.XOR]="xor",r[s.b.SUBTRACT]="source-over",r),o.renderingToScreen=!1,o._activeBlendMode=null,o._projTransform=null,o._outerBlend=!1,o.rootContext=o.view.getContext("2d",{alpha:o.useContextAlpha}),o.context=o.rootContext,!o.rootContext.imageSmoothingEnabled){var a=o.rootContext;a.webkitImageSmoothingEnabled?o.smoothProperty="webkitImageSmoothingEnabled":a.mozImageSmoothingEnabled?o.smoothProperty="mozImageSmoothingEnabled":a.oImageSmoothingEnabled?o.smoothProperty="oImageSmoothingEnabled":a.msImageSmoothingEnabled&&(o.smoothProperty="msImageSmoothingEnabled")}return o.initPlugins(e.__plugins),Object(n.z)("Canvas"),o.resize(o.options.width,o.options.height),o}return function(t,e){function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.addSystem=function(){return this},e.prototype.render=function(t,e){if(this.view){var i,o,a,h;e&&(e instanceof r.p||e instanceof r.b?(Object(n.h)("6.0.0","CanvasRenderer#render arguments changed, use options instead."),i=e,o=arguments[2],a=arguments[3],h=arguments[4]):(i=e.renderTexture,o=e.clear,a=e.transform,h=e.skipUpdateTransform)),this.renderingToScreen=!i,this.emit("prerender");var l=this.resolution;i?((i=i.castToBaseTexture())._canvasRenderTarget||(i._canvasRenderTarget=new n.b(i.width,i.height,i.resolution),i.resource=new r.j(i._canvasRenderTarget.canvas),i.valid=!0),this.context=i._canvasRenderTarget.context,this.resolution=i._canvasRenderTarget.resolution):this.context=this.rootContext;var u=this.context;if(this._projTransform=a||null,i||(this._lastObjectRendered=t),!h){var c=t.enableTempParent();t.updateTransform(),t.disableTempParent(c)}if(u.save(),u.setTransform(1,0,0,1,0,0),u.globalAlpha=1,this._activeBlendMode=s.b.NORMAL,this._outerBlend=!1,u.globalCompositeOperation=this.blendModes[s.b.NORMAL],void 0!==o?o:this.clearBeforeRender)if(this.renderingToScreen)u.clearRect(0,0,this.width,this.height),this.backgroundAlpha>0&&(u.globalAlpha=this.useContextAlpha?this.backgroundAlpha:1,u.fillStyle=this._backgroundColorString,u.fillRect(0,0,this.width,this.height),u.globalAlpha=1);else{(i=i)._canvasRenderTarget.clear();var d=i.clearColor;d[3]>0&&(u.globalAlpha=this.useContextAlpha?d[3]:1,u.fillStyle=Object(n.n)(Object(n.y)(d)),u.fillRect(0,0,i.realWidth,i.realHeight),u.globalAlpha=1)}var p=this.context;this.context=u,t.renderCanvas(this),this.context=p,u.restore(),this.resolution=l,this._projTransform=null,this.emit("postrender")}},e.prototype.setContextTransform=function(t,e,i){var r=t,n=this._projTransform,o=this.resolution;i=i||o,n&&((r=d).copyFrom(t),r.prepend(n)),e?this.context.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*o|0,r.ty*o|0):this.context.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*o,r.ty*o)},e.prototype.clear=function(t,e){void 0===t&&(t=this._backgroundColorString),void 0===e&&(e=this.backgroundAlpha);var i=this.context;i.clearRect(0,0,this.width,this.height),t&&(i.globalAlpha=this.useContextAlpha?e:1,i.fillStyle=t,i.fillRect(0,0,this.width,this.height),i.globalAlpha=1)},e.prototype.setBlendMode=function(t,e){var i=t===s.b.SRC_IN||t===s.b.SRC_OUT||t===s.b.DST_IN||t===s.b.DST_ATOP;!e&&i&&(t=s.b.NORMAL),this._activeBlendMode!==t&&(this._activeBlendMode=t,this._outerBlend=i,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=a.b.SCALE_MODE===s.p.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e.registerPlugin=function(t,i){e.__plugins=e.__plugins||{},e.__plugins[t]=i},e}(r.a),f={canvas:null,getTintedCanvas:function(t,e){var i=t.texture,r="#"+("00000"+(0|(e=f.roundColor(e))).toString(16)).slice(-6);i.tintCache=i.tintCache||{};var n,o=i.tintCache[r];if(o){if(o.tintId===i._updateID)return i.tintCache[r];n=i.tintCache[r]}else n=document.createElement("canvas");if(f.tintMethod(i,e,n),n.tintId=i._updateID,f.convertTintToImage){var s=new Image;s.src=n.toDataURL(),i.tintCache[r]=s}else i.tintCache[r]=n;return n},getTintedPattern:function(t,e){var i="#"+("00000"+(0|(e=f.roundColor(e))).toString(16)).slice(-6);t.patternCache=t.patternCache||{};var r=t.patternCache[i];return r&&r.tintId===t._updateID||(f.canvas||(f.canvas=document.createElement("canvas")),f.tintMethod(t,e,f.canvas),(r=f.canvas.getContext("2d").createPattern(f.canvas,"repeat")).tintId=t._updateID,t.patternCache[i]=r),r},tintWithMultiply:function(t,e,i){var r=i.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.fillStyle="#"+("00000"+(0|e).toString(16)).slice(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="multiply";var s=t.baseTexture.getDrawableSource();r.drawImage(s,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(s,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithOverlay:function(t,e,i){var r=i.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).slice(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.getDrawableSource(),n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithPerPixel:function(t,e,i){var r=i.getContext("2d"),o=t._frame.clone(),s=t.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,i.width=Math.ceil(o.width),i.height=Math.ceil(o.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.getDrawableSource(),o.x,o.y,o.width,o.height,0,0,o.width,o.height),r.restore();for(var a=Object(n.m)(e),h=a[0],l=a[1],u=a[2],c=r.getImageData(0,0,o.width,o.height),d=c.data,p=0;p<d.length;p+=4)d[p+0]*=h,d[p+1]*=l,d[p+2]*=u;r.putImageData(c,0,0)},roundColor:function(t){var e=f.cacheStepsPerColorChannel,i=Object(n.m)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),Object(n.y)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:c(),tintMethod:null};f.tintMethod=f.canUseMultiply?f.tintWithMultiply:f.tintWithPerPixel;var m=r.q.create;r.q.create=function(t){if(!(t&&t.forceCanvas))try{return m(t)}catch(t){}return new p(t)},r.c.prototype.getDrawableSource=function(){var t=this.resource;return t?t.bitmap||t.source:null},r.b.prototype._canvasRenderTarget=null,r.t.prototype.patternCache=null,r.t.prototype.tintCache=null},function(t,e,i){(function(e){t.exports=function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[s]={exports:{}};e[s][0].call(l.exports,(function(t){return n(e[s][1][t]||t)}),l,l.exports,t,e,i,r)}return i[s].exports}for(var o=!1,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){var r={};e.exports=r;var n=t("../geometry/Vertices"),o=t("../geometry/Vector"),s=t("../core/Sleeping"),a=(t("../render/Render"),t("../core/Common")),h=t("../geometry/Bounds"),l=t("../geometry/Axes");!function(){r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r.create=function(e){var i={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:n.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0}},r=a.extend(i,e);return t(r,e),r},r.nextGroup=function(t){return t?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var t=function(t,e){e=e||{},r.set(t,{bounds:t.bounds||h.create(t.vertices),positionPrev:t.positionPrev||o.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),n.rotate(t.vertices,t.angle,t.position),l.rotate(t.axes,t.angle),h.update(t.bounds,t.vertices,t.velocity),r.set(t,{axes:e.axes||t.axes,area:e.area||t.area,mass:e.mass||t.mass,inertia:e.inertia||t.inertia});var i=t.isStatic?"#2e2b44":a.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]);t.render.fillStyle=t.render.fillStyle||i,t.render.strokeStyle=t.render.strokeStyle||"#000",t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};r.set=function(t,e,i){var n;for(n in"string"==typeof e&&(n=e,(e={})[n]=i),e)if(i=e[n],e.hasOwnProperty(n))switch(n){case"isStatic":r.setStatic(t,i);break;case"isSleeping":s.set(t,i);break;case"mass":r.setMass(t,i);break;case"density":r.setDensity(t,i);break;case"inertia":r.setInertia(t,i);break;case"vertices":r.setVertices(t,i);break;case"position":r.setPosition(t,i);break;case"angle":r.setAngle(t,i);break;case"velocity":r.setVelocity(t,i);break;case"angularVelocity":r.setAngularVelocity(t,i);break;case"parts":r.setParts(t,i);break;default:t[n]=i}},r.setStatic=function(t,e){for(var i=0;i<t.parts.length;i++){var r=t.parts[i];r.isStatic=e,e?(r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia},r.restitution=0,r.friction=1,r.mass=r.inertia=r.density=1/0,r.inverseMass=r.inverseInertia=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.angularVelocity=0,r.speed=0,r.angularSpeed=0,r.motion=0):r._original&&(r.restitution=r._original.restitution,r.friction=r._original.friction,r.mass=r._original.mass,r.inertia=r._original.inertia,r.density=r._original.density,r.inverseMass=r._original.inverseMass,r.inverseInertia=r._original.inverseInertia,delete r._original)}},r.setMass=function(t,e){var i=t.inertia/(t.mass/6);t.inertia=i*(e/6),t.inverseInertia=1/t.inertia,t.mass=e,t.inverseMass=1/t.mass,t.density=t.mass/t.area},r.setDensity=function(t,e){r.setMass(t,e*t.area),t.density=e},r.setInertia=function(t,e){t.inertia=e,t.inverseInertia=1/t.inertia},r.setVertices=function(t,e){e[0].body===t?t.vertices=e:t.vertices=n.create(e,t),t.axes=l.fromVertices(t.vertices),t.area=n.area(t.vertices),r.setMass(t,t.density*t.area);var i=n.centre(t.vertices);n.translate(t.vertices,i,-1),r.setInertia(t,r._inertiaScale*n.inertia(t.vertices,t.mass)),n.translate(t.vertices,t.position),h.update(t.bounds,t.vertices,t.velocity)},r.setParts=function(t,e,i){var o;for(e=e.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,o=0;o<e.length;o++){var s=e[o];s!==t&&(s.parent=t,t.parts.push(s))}if(1!==t.parts.length){if(i=void 0===i||i){var a=[];for(o=0;o<e.length;o++)a=a.concat(e[o].vertices);n.clockwiseSort(a);var h=n.hull(a),l=n.centre(h);r.setVertices(t,h),n.translate(t.vertices,l)}var u=r._totalProperties(t);t.area=u.area,t.parent=t,t.position.x=u.centre.x,t.position.y=u.centre.y,t.positionPrev.x=u.centre.x,t.positionPrev.y=u.centre.y,r.setMass(t,u.mass),r.setInertia(t,u.inertia),r.setPosition(t,u.centre)}},r.setPosition=function(t,e){var i=o.sub(e,t.position);t.positionPrev.x+=i.x,t.positionPrev.y+=i.y;for(var r=0;r<t.parts.length;r++){var s=t.parts[r];s.position.x+=i.x,s.position.y+=i.y,n.translate(s.vertices,i),h.update(s.bounds,s.vertices,t.velocity)}},r.setAngle=function(t,e){var i=e-t.angle;t.anglePrev+=i;for(var r=0;r<t.parts.length;r++){var s=t.parts[r];s.angle+=i,n.rotate(s.vertices,i,t.position),l.rotate(s.axes,i),h.update(s.bounds,s.vertices,t.velocity),r>0&&o.rotateAbout(s.position,i,t.position,s.position)}},r.setVelocity=function(t,e){t.positionPrev.x=t.position.x-e.x,t.positionPrev.y=t.position.y-e.y,t.velocity.x=e.x,t.velocity.y=e.y,t.speed=o.magnitude(t.velocity)},r.setAngularVelocity=function(t,e){t.anglePrev=t.angle-e,t.angularVelocity=e,t.angularSpeed=Math.abs(t.angularVelocity)},r.translate=function(t,e){r.setPosition(t,o.add(t.position,e))},r.rotate=function(t,e,i){if(i){var n=Math.cos(e),o=Math.sin(e),s=t.position.x-i.x,a=t.position.y-i.y;r.setPosition(t,{x:i.x+(s*n-a*o),y:i.y+(s*o+a*n)}),r.setAngle(t,t.angle+e)}else r.setAngle(t,t.angle+e)},r.scale=function(t,e,i,o){var s=0,a=0;o=o||t.position;for(var u=0;u<t.parts.length;u++){var c=t.parts[u];n.scale(c.vertices,e,i,o),c.axes=l.fromVertices(c.vertices),c.area=n.area(c.vertices),r.setMass(c,t.density*c.area),n.translate(c.vertices,{x:-c.position.x,y:-c.position.y}),r.setInertia(c,r._inertiaScale*n.inertia(c.vertices,c.mass)),n.translate(c.vertices,{x:c.position.x,y:c.position.y}),u>0&&(s+=c.area,a+=c.inertia),c.position.x=o.x+(c.position.x-o.x)*e,c.position.y=o.y+(c.position.y-o.y)*i,h.update(c.bounds,c.vertices,t.velocity)}t.parts.length>1&&(t.area=s,t.isStatic||(r.setMass(t,t.density*s),r.setInertia(t,a))),t.circleRadius&&(e===i?t.circleRadius*=e:t.circleRadius=null)},r.update=function(t,e,i,r){var s=Math.pow(e*i*t.timeScale,2),a=1-t.frictionAir*i*t.timeScale,u=t.position.x-t.positionPrev.x,c=t.position.y-t.positionPrev.y;t.velocity.x=u*a*r+t.force.x/t.mass*s,t.velocity.y=c*a*r+t.force.y/t.mass*s,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*a*r+t.torque/t.inertia*s,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=o.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var d=0;d<t.parts.length;d++){var p=t.parts[d];n.translate(p.vertices,t.velocity),d>0&&(p.position.x+=t.velocity.x,p.position.y+=t.velocity.y),0!==t.angularVelocity&&(n.rotate(p.vertices,t.angularVelocity,t.position),l.rotate(p.axes,t.angularVelocity),d>0&&o.rotateAbout(p.position,t.angularVelocity,t.position,p.position)),h.update(p.bounds,p.vertices,t.velocity)}},r.applyForce=function(t,e,i){t.force.x+=i.x,t.force.y+=i.y;var r=e.x-t.position.x,n=e.y-t.position.y;t.torque+=r*i.y-n*i.x},r._totalProperties=function(t){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=1===t.parts.length?0:1;i<t.parts.length;i++){var r=t.parts[i],n=r.mass!==1/0?r.mass:1;e.mass+=n,e.area+=r.area,e.inertia+=r.inertia,e.centre=o.add(e.centre,o.mult(r.position,n))}return e.centre=o.div(e.centre,e.mass),e}}()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31}],2:[function(t,e,i){var r={};e.exports=r;var n=t("../core/Events"),o=t("../core/Common"),s=t("../geometry/Bounds"),a=t("./Body");r.create=function(t){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},r.setModified=function(t,e,i,n){if(t.isModified=e,i&&t.parent&&r.setModified(t.parent,e,i,n),n)for(var o=0;o<t.composites.length;o++){var s=t.composites[o];r.setModified(s,e,i,n)}},r.add=function(t,e){var i=[].concat(e);n.trigger(t,"beforeAdd",{object:e});for(var s=0;s<i.length;s++){var a=i[s];switch(a.type){case"body":if(a.parent!==a){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(t,a);break;case"constraint":r.addConstraint(t,a);break;case"composite":r.addComposite(t,a);break;case"mouseConstraint":r.addConstraint(t,a.constraint)}}return n.trigger(t,"afterAdd",{object:e}),t},r.remove=function(t,e,i){var o=[].concat(e);n.trigger(t,"beforeRemove",{object:e});for(var s=0;s<o.length;s++){var a=o[s];switch(a.type){case"body":r.removeBody(t,a,i);break;case"constraint":r.removeConstraint(t,a,i);break;case"composite":r.removeComposite(t,a,i);break;case"mouseConstraint":r.removeConstraint(t,a.constraint)}}return n.trigger(t,"afterRemove",{object:e}),t},r.addComposite=function(t,e){return t.composites.push(e),e.parent=t,r.setModified(t,!0,!0,!1),t},r.removeComposite=function(t,e,i){var n=o.indexOf(t.composites,e);if(-1!==n&&(r.removeCompositeAt(t,n),r.setModified(t,!0,!0,!1)),i)for(var s=0;s<t.composites.length;s++)r.removeComposite(t.composites[s],e,!0);return t},r.removeCompositeAt=function(t,e){return t.composites.splice(e,1),r.setModified(t,!0,!0,!1),t},r.addBody=function(t,e){return t.bodies.push(e),r.setModified(t,!0,!0,!1),t},r.removeBody=function(t,e,i){var n=o.indexOf(t.bodies,e);if(-1!==n&&(r.removeBodyAt(t,n),r.setModified(t,!0,!0,!1)),i)for(var s=0;s<t.composites.length;s++)r.removeBody(t.composites[s],e,!0);return t},r.removeBodyAt=function(t,e){return t.bodies.splice(e,1),r.setModified(t,!0,!0,!1),t},r.addConstraint=function(t,e){return t.constraints.push(e),r.setModified(t,!0,!0,!1),t},r.removeConstraint=function(t,e,i){var n=o.indexOf(t.constraints,e);if(-1!==n&&r.removeConstraintAt(t,n),i)for(var s=0;s<t.composites.length;s++)r.removeConstraint(t.composites[s],e,!0);return t},r.removeConstraintAt=function(t,e){return t.constraints.splice(e,1),r.setModified(t,!0,!0,!1),t},r.clear=function(t,e,i){if(i)for(var n=0;n<t.composites.length;n++)r.clear(t.composites[n],e,!0);return e?t.bodies=t.bodies.filter((function(t){return t.isStatic})):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,r.setModified(t,!0,!0,!1),t},r.allBodies=function(t){for(var e=[].concat(t.bodies),i=0;i<t.composites.length;i++)e=e.concat(r.allBodies(t.composites[i]));return e},r.allConstraints=function(t){for(var e=[].concat(t.constraints),i=0;i<t.composites.length;i++)e=e.concat(r.allConstraints(t.composites[i]));return e},r.allComposites=function(t){for(var e=[].concat(t.composites),i=0;i<t.composites.length;i++)e=e.concat(r.allComposites(t.composites[i]));return e},r.get=function(t,e,i){var n,o;switch(i){case"body":n=r.allBodies(t);break;case"constraint":n=r.allConstraints(t);break;case"composite":n=r.allComposites(t).concat(t)}return n?0===(o=n.filter((function(t){return t.id.toString()===e.toString()}))).length?null:o[0]:null},r.move=function(t,e,i){return r.remove(t,e),r.add(i,e),t},r.rebase=function(t){for(var e=r.allBodies(t).concat(r.allConstraints(t)).concat(r.allComposites(t)),i=0;i<e.length;i++)e[i].id=o.nextId();return r.setModified(t,!0,!0,!1),t},r.translate=function(t,e,i){for(var n=i?r.allBodies(t):t.bodies,o=0;o<n.length;o++)a.translate(n[o],e);return r.setModified(t,!0,!0,!1),t},r.rotate=function(t,e,i,n){for(var o=Math.cos(e),s=Math.sin(e),h=n?r.allBodies(t):t.bodies,l=0;l<h.length;l++){var u=h[l],c=u.position.x-i.x,d=u.position.y-i.y;a.setPosition(u,{x:i.x+(c*o-d*s),y:i.y+(c*s+d*o)}),a.rotate(u,e)}return r.setModified(t,!0,!0,!1),t},r.scale=function(t,e,i,n,o){for(var s=o?r.allBodies(t):t.bodies,h=0;h<s.length;h++){var l=s[h],u=l.position.x-n.x,c=l.position.y-n.y;a.setPosition(l,{x:n.x+u*e,y:n.y+c*i}),a.scale(l,e,i)}return r.setModified(t,!0,!0,!1),t},r.bounds=function(t){for(var e=r.allBodies(t),i=[],n=0;n<e.length;n+=1){var o=e[n];i.push(o.bounds.min,o.bounds.max)}return s.create(i)}},{"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"./Body":1}],3:[function(t,e,i){var r={};e.exports=r;var n=t("./Composite"),o=(t("../constraint/Constraint"),t("../core/Common"));r.create=function(t){var e=n.create(),i={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return o.extend(e,i,t)}},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(t,e,i){var r={};e.exports=r,r.create=function(t){return{id:r.id(t),vertex:t,normalImpulse:0,tangentImpulse:0}},r.id=function(t){return t.body.id+"_"+t.index}},{}],5:[function(t,e,i){var r={};e.exports=r;var n=t("./SAT"),o=t("./Pair"),s=t("../geometry/Bounds");r.collisions=function(t,e){for(var i=[],a=e.pairs.table,h=0;h<t.length;h++){var l=t[h][0],u=t[h][1];if((!l.isStatic&&!l.isSleeping||!u.isStatic&&!u.isSleeping)&&r.canCollide(l.collisionFilter,u.collisionFilter)&&s.overlaps(l.bounds,u.bounds))for(var c=l.parts.length>1?1:0;c<l.parts.length;c++)for(var d=l.parts[c],p=u.parts.length>1?1:0;p<u.parts.length;p++){var f=u.parts[p];if(d===l&&f===u||s.overlaps(d.bounds,f.bounds)){var m,g=a[o.id(d,f)];m=g&&g.isActive?g.collision:null;var v=n.collides(d,f,m);v.collided&&i.push(v)}}}return i},r.canCollide=function(t,e){return t.group===e.group&&0!==t.group?t.group>0:0!=(t.mask&e.category)&&0!=(e.mask&t.category)}},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(t,e,i){var r={};e.exports=r;var n=t("./Pair"),o=t("./Detector"),s=t("../core/Common");r.create=function(t){var e={controller:r,detector:o.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return s.extend(e,t)},r.update=function(t,e,i,n){var o,s,a,h,l,u=i.world,c=t.buckets,d=!1;for(o=0;o<e.length;o++){var p=e[o];if((!p.isSleeping||n)&&!(p.bounds.max.x<u.bounds.min.x||p.bounds.min.x>u.bounds.max.x||p.bounds.max.y<u.bounds.min.y||p.bounds.min.y>u.bounds.max.y)){var f=r._getRegion(t,p);if(!p.region||f.id!==p.region.id||n){p.region&&!n||(p.region=f);var m=r._regionUnion(f,p.region);for(s=m.startCol;s<=m.endCol;s++)for(a=m.startRow;a<=m.endRow;a++){h=c[l=r._getBucketId(s,a)];var g=s>=f.startCol&&s<=f.endCol&&a>=f.startRow&&a<=f.endRow,v=s>=p.region.startCol&&s<=p.region.endCol&&a>=p.region.startRow&&a<=p.region.endRow;!g&&v&&v&&h&&r._bucketRemoveBody(t,h,p),(p.region===f||g&&!v||n)&&(h||(h=r._createBucket(c,l)),r._bucketAddBody(t,h,p))}p.region=f,d=!0}}}d&&(t.pairsList=r._createActivePairsList(t))},r.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]},r._regionUnion=function(t,e){var i=Math.min(t.startCol,e.startCol),n=Math.max(t.endCol,e.endCol),o=Math.min(t.startRow,e.startRow),s=Math.max(t.endRow,e.endRow);return r._createRegion(i,n,o,s)},r._getRegion=function(t,e){var i=e.bounds,n=Math.floor(i.min.x/t.bucketWidth),o=Math.floor(i.max.x/t.bucketWidth),s=Math.floor(i.min.y/t.bucketHeight),a=Math.floor(i.max.y/t.bucketHeight);return r._createRegion(n,o,s,a)},r._createRegion=function(t,e,i,r){return{id:t+","+e+","+i+","+r,startCol:t,endCol:e,startRow:i,endRow:r}},r._getBucketId=function(t,e){return"C"+t+"R"+e},r._createBucket=function(t,e){return t[e]=[]},r._bucketAddBody=function(t,e,i){for(var r=0;r<e.length;r++){var o=e[r];if(!(i.id===o.id||i.isStatic&&o.isStatic)){var s=n.id(i,o),a=t.pairs[s];a?a[2]+=1:t.pairs[s]=[i,o,1]}}e.push(i)},r._bucketRemoveBody=function(t,e,i){e.splice(s.indexOf(e,i),1);for(var r=0;r<e.length;r++){var o=e[r],a=n.id(i,o),h=t.pairs[a];h&&(h[2]-=1)}},r._createActivePairsList=function(t){var e,i,r=[];e=s.keys(t.pairs);for(var n=0;n<e.length;n++)(i=t.pairs[e[n]])[2]>0?r.push(i):delete t.pairs[e[n]];return r}},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(t,e,i){var r={};e.exports=r;var n=t("./Contact");r.create=function(t,e){var i=t.bodyA,n=t.bodyB,o=t.parentA,s=t.parentB,a={id:r.id(i,n),bodyA:i,bodyB:n,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:i.isSensor||n.isSensor,timeCreated:e,timeUpdated:e,inverseMass:o.inverseMass+s.inverseMass,friction:Math.min(o.friction,s.friction),frictionStatic:Math.max(o.frictionStatic,s.frictionStatic),restitution:Math.max(o.restitution,s.restitution),slop:Math.max(o.slop,s.slop)};return r.update(a,t,e),a},r.update=function(t,e,i){var o=t.contacts,s=e.supports,a=t.activeContacts,h=e.parentA,l=e.parentB;if(t.collision=e,t.inverseMass=h.inverseMass+l.inverseMass,t.friction=Math.min(h.friction,l.friction),t.frictionStatic=Math.max(h.frictionStatic,l.frictionStatic),t.restitution=Math.max(h.restitution,l.restitution),t.slop=Math.max(h.slop,l.slop),a.length=0,e.collided){for(var u=0;u<s.length;u++){var c=s[u],d=n.id(c),p=o[d];p?a.push(p):a.push(o[d]=n.create(c))}t.separation=e.depth,r.setActive(t,!0,i)}else!0===t.isActive&&r.setActive(t,!1,i)},r.setActive=function(t,e,i){e?(t.isActive=!0,t.timeUpdated=i):(t.isActive=!1,t.activeContacts.length=0)},r.id=function(t,e){return t.id<e.id?"A"+t.id+"B"+e.id:"A"+e.id+"B"+t.id}},{"./Contact":4}],8:[function(t,e,i){var r={};e.exports=r;var n=t("./Pair"),o=t("../core/Common");r._pairMaxIdleLife=1e3,r.create=function(t){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},r.update=function(t,e,i){var r,s,a,h,l=t.list,u=t.table,c=t.collisionStart,d=t.collisionEnd,p=t.collisionActive,f=[];for(c.length=0,d.length=0,p.length=0,h=0;h<e.length;h++)(r=e[h]).collided&&(s=n.id(r.bodyA,r.bodyB),f.push(s),(a=u[s])?(a.isActive?p.push(a):c.push(a),n.update(a,r,i)):(a=n.create(r,i),u[s]=a,c.push(a),l.push(a)));for(h=0;h<l.length;h++)(a=l[h]).isActive&&-1===o.indexOf(f,a.id)&&(n.setActive(a,!1,i),d.push(a))},r.removeOld=function(t,e){var i,n,o,s,a=t.list,h=t.table,l=[];for(s=0;s<a.length;s++)(n=(i=a[s]).collision).bodyA.isSleeping||n.bodyB.isSleeping?i.timeUpdated=e:e-i.timeUpdated>r._pairMaxIdleLife&&l.push(s);for(s=0;s<l.length;s++)delete h[(i=a[o=l[s]-s]).id],a.splice(o,1)},r.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},{"../core/Common":14,"./Pair":7}],9:[function(t,e,i){var r={};e.exports=r;var n=t("../geometry/Vector"),o=t("./SAT"),s=t("../geometry/Bounds"),a=t("../factory/Bodies"),h=t("../geometry/Vertices");r.collides=function(t,e){for(var i=[],r=0;r<e.length;r++){var n=e[r];if(s.overlaps(n.bounds,t.bounds))for(var a=1===n.parts.length?0:1;a<n.parts.length;a++){var h=n.parts[a];if(s.overlaps(h.bounds,t.bounds)){var l=o.collides(h,t);if(l.collided){i.push(l);break}}}}return i},r.ray=function(t,e,i,o){o=o||1e-100;for(var s=n.angle(e,i),h=n.magnitude(n.sub(e,i)),l=.5*(i.x+e.x),u=.5*(i.y+e.y),c=a.rectangle(l,u,h,o,{angle:s}),d=r.collides(c,t),p=0;p<d.length;p+=1){var f=d[p];f.body=f.bodyB=f.bodyA}return d},r.region=function(t,e,i){for(var r=[],n=0;n<t.length;n++){var o=t[n],a=s.overlaps(o.bounds,e);(a&&!i||!a&&i)&&r.push(o)}return r},r.point=function(t,e){for(var i=[],r=0;r<t.length;r++){var n=t[r];if(s.contains(n.bounds,e))for(var o=1===n.parts.length?0:1;o<n.parts.length;o++){var a=n.parts[o];if(s.contains(a.bounds,e)&&h.contains(a.vertices,e)){i.push(n);break}}}return i}},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(t,e,i){var r={};e.exports=r;var n=t("../geometry/Vertices"),o=t("../geometry/Vector"),s=t("../core/Common"),a=t("../geometry/Bounds");r._restingThresh=4,r._restingThreshTangent=6,r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r.preSolvePosition=function(t){var e,i,r;for(e=0;e<t.length;e++)(i=t[e]).isActive&&(r=i.activeContacts.length,i.collision.parentA.totalContacts+=r,i.collision.parentB.totalContacts+=r)},r.solvePosition=function(t,e){var i,n,s,a,h,l,u,c,d,p=o._temp[0],f=o._temp[1],m=o._temp[2],g=o._temp[3];for(i=0;i<t.length;i++)(n=t[i]).isActive&&!n.isSensor&&(a=(s=n.collision).parentA,h=s.parentB,l=s.normal,u=o.sub(o.add(h.positionImpulse,h.position,p),o.add(a.positionImpulse,o.sub(h.position,s.penetration,f),m),g),n.separation=o.dot(l,u));for(i=0;i<t.length;i++)(n=t[i]).isActive&&!n.isSensor&&(a=(s=n.collision).parentA,h=s.parentB,l=s.normal,d=(n.separation-n.slop)*e,(a.isStatic||h.isStatic)&&(d*=2),a.isStatic||a.isSleeping||(c=r._positionDampen/a.totalContacts,a.positionImpulse.x+=l.x*d*c,a.positionImpulse.y+=l.y*d*c),h.isStatic||h.isSleeping||(c=r._positionDampen/h.totalContacts,h.positionImpulse.x-=l.x*d*c,h.positionImpulse.y-=l.y*d*c))},r.postSolvePosition=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.totalContacts=0,0!==i.positionImpulse.x||0!==i.positionImpulse.y){for(var s=0;s<i.parts.length;s++){var h=i.parts[s];n.translate(h.vertices,i.positionImpulse),a.update(h.bounds,h.vertices,i.velocity),h.position.x+=i.positionImpulse.x,h.position.y+=i.positionImpulse.y}i.positionPrev.x+=i.positionImpulse.x,i.positionPrev.y+=i.positionImpulse.y,o.dot(i.positionImpulse,i.velocity)<0?(i.positionImpulse.x=0,i.positionImpulse.y=0):(i.positionImpulse.x*=r._positionWarming,i.positionImpulse.y*=r._positionWarming)}}},r.preSolveVelocity=function(t){var e,i,r,n,s,a,h,l,u,c,d,p,f,m,g=o._temp[0],v=o._temp[1];for(e=0;e<t.length;e++)if((r=t[e]).isActive&&!r.isSensor)for(n=r.activeContacts,a=(s=r.collision).parentA,h=s.parentB,l=s.normal,u=s.tangent,i=0;i<n.length;i++)d=(c=n[i]).vertex,p=c.normalImpulse,f=c.tangentImpulse,0===p&&0===f||(g.x=l.x*p+u.x*f,g.y=l.y*p+u.y*f,a.isStatic||a.isSleeping||(m=o.sub(d,a.position,v),a.positionPrev.x+=g.x*a.inverseMass,a.positionPrev.y+=g.y*a.inverseMass,a.anglePrev+=o.cross(m,g)*a.inverseInertia),h.isStatic||h.isSleeping||(m=o.sub(d,h.position,v),h.positionPrev.x-=g.x*h.inverseMass,h.positionPrev.y-=g.y*h.inverseMass,h.anglePrev-=o.cross(m,g)*h.inverseInertia))},r.solveVelocity=function(t,e){for(var i=e*e,n=o._temp[0],a=o._temp[1],h=o._temp[2],l=o._temp[3],u=o._temp[4],c=o._temp[5],d=0;d<t.length;d++){var p=t[d];if(p.isActive&&!p.isSensor){var f=p.collision,m=f.parentA,g=f.parentB,v=f.normal,y=f.tangent,_=p.activeContacts,b=1/_.length;m.velocity.x=m.position.x-m.positionPrev.x,m.velocity.y=m.position.y-m.positionPrev.y,g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,m.angularVelocity=m.angle-m.anglePrev,g.angularVelocity=g.angle-g.anglePrev;for(var x=0;x<_.length;x++){var T=_[x],w=T.vertex,E=o.sub(w,m.position,a),S=o.sub(w,g.position,h),A=o.add(m.velocity,o.mult(o.perp(E),m.angularVelocity),l),R=o.add(g.velocity,o.mult(o.perp(S),g.angularVelocity),u),P=o.sub(A,R,c),I=o.dot(v,P),O=o.dot(y,P),C=Math.abs(O),M=s.sign(O),D=(1+p.restitution)*I,N=s.clamp(p.separation+I,0,1)*r._frictionNormalMultiplier,F=O,L=1/0;C>p.friction*p.frictionStatic*N*i&&(L=C,F=s.clamp(p.friction*M*i,-L,L));var B=o.cross(E,v),k=o.cross(S,v),U=b/(m.inverseMass+g.inverseMass+m.inverseInertia*B*B+g.inverseInertia*k*k);if(D*=U,F*=U,I<0&&I*I>r._restingThresh*i)T.normalImpulse=0;else{var G=T.normalImpulse;T.normalImpulse=Math.min(T.normalImpulse+D,0),D=T.normalImpulse-G}if(O*O>r._restingThreshTangent*i)T.tangentImpulse=0;else{var X=T.tangentImpulse;T.tangentImpulse=s.clamp(T.tangentImpulse+F,-L,L),F=T.tangentImpulse-X}n.x=v.x*D+y.x*F,n.y=v.y*D+y.y*F,m.isStatic||m.isSleeping||(m.positionPrev.x+=n.x*m.inverseMass,m.positionPrev.y+=n.y*m.inverseMass,m.anglePrev+=o.cross(E,n)*m.inverseInertia),g.isStatic||g.isSleeping||(g.positionPrev.x-=n.x*g.inverseMass,g.positionPrev.y-=n.y*g.inverseMass,g.anglePrev-=o.cross(S,n)*g.inverseInertia)}}}}},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(t,e,i){var r={};e.exports=r;var n=t("../geometry/Vertices"),o=t("../geometry/Vector");r.collides=function(t,e,i){var s,a,h,l,u=!1;if(i){var c=t.parent,d=e.parent,p=c.speed*c.speed+c.angularSpeed*c.angularSpeed+d.speed*d.speed+d.angularSpeed*d.angularSpeed;u=i&&i.collided&&p<.2,l=i}else l={collided:!1,bodyA:t,bodyB:e};if(i&&u){var f=l.axisBody,m=f===t?e:t,g=[f.axes[i.axisNumber]];if(h=r._overlapAxes(f.vertices,m.vertices,g),l.reused=!0,h.overlap<=0)return l.collided=!1,l}else{if((s=r._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return l.collided=!1,l;if((a=r._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return l.collided=!1,l;s.overlap<a.overlap?(h=s,l.axisBody=t):(h=a,l.axisBody=e),l.axisNumber=h.axisNumber}l.bodyA=t.id<e.id?t:e,l.bodyB=t.id<e.id?e:t,l.collided=!0,l.depth=h.overlap,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent,t=l.bodyA,e=l.bodyB,o.dot(h.axis,o.sub(e.position,t.position))<0?l.normal={x:h.axis.x,y:h.axis.y}:l.normal={x:-h.axis.x,y:-h.axis.y},l.tangent=o.perp(l.normal),l.penetration=l.penetration||{},l.penetration.x=l.normal.x*l.depth,l.penetration.y=l.normal.y*l.depth;var v=r._findSupports(t,e,l.normal),y=[];if(n.contains(t.vertices,v[0])&&y.push(v[0]),n.contains(t.vertices,v[1])&&y.push(v[1]),y.length<2){var _=r._findSupports(e,t,o.neg(l.normal));n.contains(e.vertices,_[0])&&y.push(_[0]),y.length<2&&n.contains(e.vertices,_[1])&&y.push(_[1])}return y.length<1&&(y=[v[0]]),l.supports=y,l},r._overlapAxes=function(t,e,i){for(var n,s,a=o._temp[0],h=o._temp[1],l={overlap:Number.MAX_VALUE},u=0;u<i.length;u++){if(s=i[u],r._projectToAxis(a,t,s),r._projectToAxis(h,e,s),(n=Math.min(a.max-h.min,h.max-a.min))<=0)return l.overlap=n,l;n<l.overlap&&(l.overlap=n,l.axis=s,l.axisNumber=u)}return l},r._projectToAxis=function(t,e,i){for(var r=o.dot(e[0],i),n=r,s=1;s<e.length;s+=1){var a=o.dot(e[s],i);a>n?n=a:a<r&&(r=a)}t.min=r,t.max=n},r._findSupports=function(t,e,i){for(var r,n,s,a,h=Number.MAX_VALUE,l=o._temp[0],u=e.vertices,c=t.position,d=0;d<u.length;d++)n=u[d],l.x=n.x-c.x,l.y=n.y-c.y,(r=-o.dot(i,l))<h&&(h=r,s=n);return n=u[s.index-1>=0?s.index-1:u.length-1],l.x=n.x-c.x,l.y=n.y-c.y,h=-o.dot(i,l),a=n,n=u[(s.index+1)%u.length],l.x=n.x-c.x,l.y=n.y-c.y,(r=-o.dot(i,l))<h&&(a=n),[s,a]}},{"../geometry/Vector":28,"../geometry/Vertices":29}],12:[function(t,e,i){var r={};e.exports=r;var n=t("../geometry/Vertices"),o=t("../geometry/Vector"),s=t("../core/Sleeping"),a=t("../geometry/Bounds"),h=t("../geometry/Axes"),l=t("../core/Common");r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(t){var e=t;e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var i=e.bodyA?o.add(e.bodyA.position,e.pointA):e.pointA,r=e.bodyB?o.add(e.bodyB.position,e.pointB):e.pointB,n=o.magnitude(o.sub(i,r));e.length=void 0!==e.length?e.length:n,e.id=e.id||l.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(e.length>0?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var s={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===e.length&&e.stiffness>.1?(s.type="pin",s.anchors=!1):e.stiffness<.9&&(s.type="spring"),e.render=l.extend(s,e.render),e},r.preSolveAll=function(t){for(var e=0;e<t.length;e+=1){var i=t[e],r=i.constraintImpulse;i.isStatic||0===r.x&&0===r.y&&0===r.angle||(i.position.x+=r.x,i.position.y+=r.y,i.angle+=r.angle)}},r.solveAll=function(t,e){for(var i=0;i<t.length;i+=1){var n=t[i],o=!n.bodyA||n.bodyA&&n.bodyA.isStatic,s=!n.bodyB||n.bodyB&&n.bodyB.isStatic;(o||s)&&r.solve(t[i],e)}for(i=0;i<t.length;i+=1)o=!(n=t[i]).bodyA||n.bodyA&&n.bodyA.isStatic,s=!n.bodyB||n.bodyB&&n.bodyB.isStatic,o||s||r.solve(t[i],e)},r.solve=function(t,e){var i=t.bodyA,n=t.bodyB,s=t.pointA,a=t.pointB;if(i||n){i&&!i.isStatic&&(o.rotate(s,i.angle-t.angleA,s),t.angleA=i.angle),n&&!n.isStatic&&(o.rotate(a,n.angle-t.angleB,a),t.angleB=n.angle);var h=s,l=a;if(i&&(h=o.add(i.position,s)),n&&(l=o.add(n.position,a)),h&&l){var u=o.sub(h,l),c=o.magnitude(u);c<r._minLength&&(c=r._minLength);var d,p,f,m,g,v=(c-t.length)/c,y=t.stiffness<1?t.stiffness*e:t.stiffness,_=o.mult(u,v*y),b=(i?i.inverseMass:0)+(n?n.inverseMass:0),x=b+((i?i.inverseInertia:0)+(n?n.inverseInertia:0));if(t.damping){var T=o.create();f=o.div(u,c),g=o.sub(n&&o.sub(n.position,n.positionPrev)||T,i&&o.sub(i.position,i.positionPrev)||T),m=o.dot(f,g)}i&&!i.isStatic&&(p=i.inverseMass/b,i.constraintImpulse.x-=_.x*p,i.constraintImpulse.y-=_.y*p,i.position.x-=_.x*p,i.position.y-=_.y*p,t.damping&&(i.positionPrev.x-=t.damping*f.x*m*p,i.positionPrev.y-=t.damping*f.y*m*p),d=o.cross(s,_)/x*r._torqueDampen*i.inverseInertia*(1-t.angularStiffness),i.constraintImpulse.angle-=d,i.angle-=d),n&&!n.isStatic&&(p=n.inverseMass/b,n.constraintImpulse.x+=_.x*p,n.constraintImpulse.y+=_.y*p,n.position.x+=_.x*p,n.position.y+=_.y*p,t.damping&&(n.positionPrev.x+=t.damping*f.x*m*p,n.positionPrev.y+=t.damping*f.y*m*p),d=o.cross(a,_)/x*r._torqueDampen*n.inverseInertia*(1-t.angularStiffness),n.constraintImpulse.angle+=d,n.angle+=d)}}},r.postSolveAll=function(t){for(var e=0;e<t.length;e++){var i=t[e],l=i.constraintImpulse;if(!(i.isStatic||0===l.x&&0===l.y&&0===l.angle)){s.set(i,!1);for(var u=0;u<i.parts.length;u++){var c=i.parts[u];n.translate(c.vertices,l),u>0&&(c.position.x+=l.x,c.position.y+=l.y),0!==l.angle&&(n.rotate(c.vertices,l.angle,i.position),h.rotate(c.axes,l.angle),u>0&&o.rotateAbout(c.position,l.angle,i.position,c.position)),a.update(c.bounds,c.vertices,i.velocity)}l.angle*=r._warming,l.x*=r._warming,l.y*=r._warming}}}},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],13:[function(t,e,i){var r={};e.exports=r;var n=t("../geometry/Vertices"),o=t("../core/Sleeping"),s=t("../core/Mouse"),a=t("../core/Events"),h=t("../collision/Detector"),l=t("./Constraint"),u=t("../body/Composite"),c=t("../core/Common"),d=t("../geometry/Bounds");r.create=function(t,e){var i=(t?t.mouse:null)||(e?e.mouse:null);i||(t&&t.render&&t.render.canvas?i=s.create(t.render.canvas):e&&e.element?i=s.create(e.element):(i=s.create(),c.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var n={type:"mouseConstraint",mouse:i,element:null,body:null,constraint:l.create({label:"Mouse Constraint",pointA:i.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},o=c.extend(n,e);return a.on(t,"beforeUpdate",(function(){var e=u.allBodies(t.world);r.update(o,e),r._triggerEvents(o)})),o},r.update=function(t,e){var i=t.mouse,r=t.constraint,s=t.body;if(0===i.button){if(r.bodyB)o.set(r.bodyB,!1),r.pointA=i.position;else for(var l=0;l<e.length;l++)if(s=e[l],d.contains(s.bounds,i.position)&&h.canCollide(s.collisionFilter,t.collisionFilter))for(var u=s.parts.length>1?1:0;u<s.parts.length;u++){var c=s.parts[u];if(n.contains(c.vertices,i.position)){r.pointA=i.position,r.bodyB=t.body=s,r.pointB={x:i.position.x-s.position.x,y:i.position.y-s.position.y},r.angleB=s.angle,o.set(s,!1),a.trigger(t,"startdrag",{mouse:i,body:s});break}}}else r.bodyB=t.body=null,r.pointB=null,s&&a.trigger(t,"enddrag",{mouse:i,body:s})},r._triggerEvents=function(t){var e=t.mouse,i=e.sourceEvents;i.mousemove&&a.trigger(t,"mousemove",{mouse:e}),i.mousedown&&a.trigger(t,"mousedown",{mouse:e}),i.mouseup&&a.trigger(t,"mouseup",{mouse:e}),s.clearSourceEvents(e)}},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(t,i,r){(function(e){var r={};i.exports=r,function(){r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r.extend=function(t,e){var i,n;"boolean"==typeof e?(i=2,n=e):(i=1,n=!0);for(var o=i;o<arguments.length;o++){var s=arguments[o];if(s)for(var a in s)n&&s[a]&&s[a].constructor===Object?t[a]&&t[a].constructor!==Object?t[a]=s[a]:(t[a]=t[a]||{},r.extend(t[a],n,s[a])):t[a]=s[a]}return t},r.clone=function(t,e){return r.extend({},e,t)},r.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)e.push(i);return e},r.values=function(t){var e=[];if(Object.keys){for(var i=Object.keys(t),r=0;r<i.length;r++)e.push(t[i[r]]);return e}for(var n in t)e.push(t[n]);return e},r.get=function(t,e,i,r){e=e.split(".").slice(i,r);for(var n=0;n<e.length;n+=1)t=t[e[n]];return t},r.set=function(t,e,i,n,o){var s=e.split(".").slice(n,o);return r.get(t,e,0,-1)[s[s.length-1]]=i,i},r.shuffle=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(r.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t},r.choose=function(t){return t[Math.floor(r.random()*t.length)]},r.isElement=function(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},r.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r.isFunction=function(t){return"function"==typeof t},r.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},r.isString=function(t){return"[object String]"===toString.call(t)},r.clamp=function(t,e,i){return t<e?e:t>i?i:t},r.sign=function(t){return t<0?-1:1},r.now=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-r._nowStartTime},r.random=function(t,e){return e=void 0!==e?e:1,(t=void 0!==t?t:0)+i()*(e-t)};var i=function(){return r._seed=(9301*r._seed+49297)%233280,r._seed/233280};r.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.nextId=function(){return r._nextId++},r.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},r.map=function(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r+=1)i.push(e(t[r]));return i},r.topologicalSort=function(t){var e=[],i=[],n=[];for(var o in t)i[o]||n[o]||r._topologicalSort(o,i,n,t,e);return e},r._topologicalSort=function(t,e,i,n,o){var s=n[t]||[];i[t]=!0;for(var a=0;a<s.length;a+=1){var h=s[a];i[h]||e[h]||r._topologicalSort(h,e,i,n,o)}i[t]=!1,e[t]=!0,o.push(t)},r.chain=function(){for(var t=[],e=0;e<arguments.length;e+=1){var i=arguments[e];i._chained?t.push.apply(t,i._chained):t.push(i)}var r=function(){for(var e,i=new Array(arguments.length),r=0,n=arguments.length;r<n;r++)i[r]=arguments[r];for(r=0;r<t.length;r+=1){var o=t[r].apply(e,i);void 0!==o&&(e=o)}return e};return r._chained=t,r},r.chainPathBefore=function(t,e,i){return r.set(t,e,r.chain(i,r.get(t,e)))},r.chainPathAfter=function(t,e,i){return r.set(t,e,r.chain(r.get(t,e),i))},r._requireGlobal=function(i,r){return("undefined"!=typeof window?window[i]:void 0!==e?e[i]:null)||t(r)}}()}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(t,e,i){var r={};e.exports=r;var n=t("../body/World"),o=t("./Sleeping"),s=t("../collision/Resolver"),a=t("../render/Render"),h=t("../collision/Pairs"),l=(t("./Metrics"),t("../collision/Grid")),u=t("./Events"),c=t("../body/Composite"),d=t("../constraint/Constraint"),p=t("./Common"),f=t("../body/Body");r.create=function(t,e){e=(e=p.isElement(t)?e:t)||{},((t=p.isElement(t)?t:null)||e.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var i={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:l}},r=p.extend(i,e);if(t||r.render){var o={element:t,controller:a};r.render=p.extend(o,r.render)}return r.render&&r.render.controller&&(r.render=r.render.controller.create(r.render)),r.render&&(r.render.engine=r),r.world=e.world||n.create(r.world),r.pairs=h.create(),r.broadphase=r.broadphase.controller.create(r.broadphase),r.metrics=r.metrics||{extended:!1},r},r.update=function(t,e,i){e=e||1e3/60,i=i||1;var n,a=t.world,l=t.timing,p=t.broadphase,f=[];l.timestamp+=e*l.timeScale;var m={timestamp:l.timestamp};u.trigger(t,"beforeUpdate",m);var g=c.allBodies(a),v=c.allConstraints(a);for(t.enableSleeping&&o.update(g,l.timeScale),r._bodiesApplyGravity(g,a.gravity),r._bodiesUpdate(g,e,l.timeScale,i,a.bounds),d.preSolveAll(g),n=0;n<t.constraintIterations;n++)d.solveAll(v,l.timeScale);d.postSolveAll(g),p.controller?(a.isModified&&p.controller.clear(p),p.controller.update(p,g,t,a.isModified),f=p.pairsList):f=g,a.isModified&&c.setModified(a,!1,!1,!0);var y=p.detector(f,t),_=t.pairs,b=l.timestamp;for(h.update(_,y,b),h.removeOld(_,b),t.enableSleeping&&o.afterCollisions(_.list,l.timeScale),_.collisionStart.length>0&&u.trigger(t,"collisionStart",{pairs:_.collisionStart}),s.preSolvePosition(_.list),n=0;n<t.positionIterations;n++)s.solvePosition(_.list,l.timeScale);for(s.postSolvePosition(g),d.preSolveAll(g),n=0;n<t.constraintIterations;n++)d.solveAll(v,l.timeScale);for(d.postSolveAll(g),s.preSolveVelocity(_.list),n=0;n<t.velocityIterations;n++)s.solveVelocity(_.list,l.timeScale);return _.collisionActive.length>0&&u.trigger(t,"collisionActive",{pairs:_.collisionActive}),_.collisionEnd.length>0&&u.trigger(t,"collisionEnd",{pairs:_.collisionEnd}),r._bodiesClearForces(g),u.trigger(t,"afterUpdate",m),t},r.merge=function(t,e){if(p.extend(t,e),e.world){t.world=e.world,r.clear(t);for(var i=c.allBodies(t.world),n=0;n<i.length;n++){var s=i[n];o.set(s,!1),s.id=p.nextId()}}},r.clear=function(t){var e=t.world;h.clear(t.pairs);var i=t.broadphase;if(i.controller){var r=c.allBodies(e);i.controller.clear(i),i.controller.update(i,r,t,!0)}},r._bodiesClearForces=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.force.x=0,i.force.y=0,i.torque=0}},r._bodiesApplyGravity=function(t,e){var i=void 0!==e.scale?e.scale:.001;if((0!==e.x||0!==e.y)&&0!==i)for(var r=0;r<t.length;r++){var n=t[r];n.isStatic||n.isSleeping||(n.force.y+=n.mass*e.y*i,n.force.x+=n.mass*e.x*i)}},r._bodiesUpdate=function(t,e,i,r,n){for(var o=0;o<t.length;o++){var s=t[o];s.isStatic||s.isSleeping||f.update(s,e,i,r)}}},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(t,e,i){var r={};e.exports=r;var n=t("./Common");r.on=function(t,e,i){for(var r,n=e.split(" "),o=0;o<n.length;o++)r=n[o],t.events=t.events||{},t.events[r]=t.events[r]||[],t.events[r].push(i);return i},r.off=function(t,e,i){if(e){"function"==typeof e&&(i=e,e=n.keys(t.events).join(" "));for(var r=e.split(" "),o=0;o<r.length;o++){var s=t.events[r[o]],a=[];if(i&&s)for(var h=0;h<s.length;h++)s[h]!==i&&a.push(s[h]);t.events[r[o]]=a}}else t.events={}},r.trigger=function(t,e,i){var r,o,s,a;if(t.events){i||(i={}),r=e.split(" ");for(var h=0;h<r.length;h++)if(o=r[h],s=t.events[o]){(a=n.clone(i,!1)).name=o,a.source=t;for(var l=0;l<s.length;l++)s[l].apply(t,[a])}}}},{"./Common":14}],17:[function(t,e,i){var r={};e.exports=r;var n=t("./Plugin"),o=t("./Common");r.name="matter-js",r.version="0.14.2",r.uses=[],r.used=[],r.use=function(){n.use(r,Array.prototype.slice.call(arguments))},r.before=function(t,e){return t=t.replace(/^Matter./,""),o.chainPathBefore(r,t,e)},r.after=function(t,e){return t=t.replace(/^Matter./,""),o.chainPathAfter(r,t,e)}},{"./Common":14,"./Plugin":20}],18:[function(t,e,i){},{"../body/Composite":2,"./Common":14}],19:[function(t,e,i){var r={};e.exports=r;var n=t("../core/Common");r.create=function(t){var e={};return t||n.log("Mouse.create: element was undefined, defaulting to document.body","warn"),e.element=t||document.body,e.absolute={x:0,y:0},e.position={x:0,y:0},e.mousedownPosition={x:0,y:0},e.mouseupPosition={x:0,y:0},e.offset={x:0,y:0},e.scale={x:1,y:1},e.wheelDelta=0,e.button=-1,e.pixelRatio=e.element.getAttribute("data-pixel-ratio")||1,e.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},e.mousemove=function(t){var i=r._getRelativeMousePosition(t,e.element,e.pixelRatio);t.changedTouches&&(e.button=0,t.preventDefault()),e.absolute.x=i.x,e.absolute.y=i.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y,e.sourceEvents.mousemove=t},e.mousedown=function(t){var i=r._getRelativeMousePosition(t,e.element,e.pixelRatio);t.changedTouches?(e.button=0,t.preventDefault()):e.button=t.button,e.absolute.x=i.x,e.absolute.y=i.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y,e.mousedownPosition.x=e.position.x,e.mousedownPosition.y=e.position.y,e.sourceEvents.mousedown=t},e.mouseup=function(t){var i=r._getRelativeMousePosition(t,e.element,e.pixelRatio);t.changedTouches&&t.preventDefault(),e.button=-1,e.absolute.x=i.x,e.absolute.y=i.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y,e.mouseupPosition.x=e.position.x,e.mouseupPosition.y=e.position.y,e.sourceEvents.mouseup=t},e.mousewheel=function(t){e.wheelDelta=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),t.preventDefault()},r.setElement(e,e.element),e},r.setElement=function(t,e){t.element=e,e.addEventListener("mousemove",t.mousemove),e.addEventListener("mousedown",t.mousedown),e.addEventListener("mouseup",t.mouseup),e.addEventListener("mousewheel",t.mousewheel),e.addEventListener("DOMMouseScroll",t.mousewheel),e.addEventListener("touchmove",t.mousemove),e.addEventListener("touchstart",t.mousedown),e.addEventListener("touchend",t.mouseup)},r.clearSourceEvents=function(t){t.sourceEvents.mousemove=null,t.sourceEvents.mousedown=null,t.sourceEvents.mouseup=null,t.sourceEvents.mousewheel=null,t.wheelDelta=0},r.setOffset=function(t,e){t.offset.x=e.x,t.offset.y=e.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y},r.setScale=function(t,e){t.scale.x=e.x,t.scale.y=e.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y},r._getRelativeMousePosition=function(t,e,i){var r,n,o=e.getBoundingClientRect(),s=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageXOffset?window.pageXOffset:s.scrollLeft,h=void 0!==window.pageYOffset?window.pageYOffset:s.scrollTop,l=t.changedTouches;return l?(r=l[0].pageX-o.left-a,n=l[0].pageY-o.top-h):(r=t.pageX-o.left-a,n=t.pageY-o.top-h),{x:r/(e.clientWidth/(e.width||e.clientWidth)*i),y:n/(e.clientHeight/(e.height||e.clientHeight)*i)}}},{"../core/Common":14}],20:[function(t,e,i){var r={};e.exports=r;var n=t("./Common");r._registry={},r.register=function(t){if(r.isPlugin(t)||n.warn("Plugin.register:",r.toString(t),"does not implement all required fields."),t.name in r._registry){var e=r._registry[t.name],i=r.versionParse(t.version).number,o=r.versionParse(e.version).number;i>o?(n.warn("Plugin.register:",r.toString(e),"was upgraded to",r.toString(t)),r._registry[t.name]=t):i<o?n.warn("Plugin.register:",r.toString(e),"can not be downgraded to",r.toString(t)):t!==e&&n.warn("Plugin.register:",r.toString(t),"is already registered to different plugin object")}else r._registry[t.name]=t;return t},r.resolve=function(t){return r._registry[r.dependencyParse(t).name]},r.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},r.isPlugin=function(t){return t&&t.name&&t.version&&t.install},r.isUsed=function(t,e){return t.used.indexOf(e)>-1},r.isFor=function(t,e){var i=t.for&&r.dependencyParse(t.for);return!t.for||e.name===i.name&&r.versionSatisfies(e.version,i.range)},r.use=function(t,e){if(t.uses=(t.uses||[]).concat(e||[]),0!==t.uses.length){for(var i=r.dependencies(t),o=n.topologicalSort(i),s=[],a=0;a<o.length;a+=1)if(o[a]!==t.name){var h=r.resolve(o[a]);h?r.isUsed(t,h.name)||(r.isFor(h,t)||(n.warn("Plugin.use:",r.toString(h),"is for",h.for,"but installed on",r.toString(t)+"."),h._warned=!0),h.install?h.install(t):(n.warn("Plugin.use:",r.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(s.push("🔶 "+r.toString(h)),delete h._warned):s.push("✅ "+r.toString(h)),t.used.push(h.name)):s.push("❌ "+o[a])}s.length>0&&n.info(s.join("  "))}else n.warn("Plugin.use:",r.toString(t),"does not specify any dependencies to install.")},r.dependencies=function(t,e){var i=r.dependencyParse(t),o=i.name;if(!(o in(e=e||{}))){t=r.resolve(t)||t,e[o]=n.map(t.uses||[],(function(e){r.isPlugin(e)&&r.register(e);var o=r.dependencyParse(e),s=r.resolve(e);return s&&!r.versionSatisfies(s.version,o.range)?(n.warn("Plugin.dependencies:",r.toString(s),"does not satisfy",r.toString(o),"used by",r.toString(i)+"."),s._warned=!0,t._warned=!0):s||(n.warn("Plugin.dependencies:",r.toString(e),"used by",r.toString(i),"could not be resolved."),t._warned=!0),o.name}));for(var s=0;s<e[o].length;s+=1)r.dependencies(e[o][s],e);return e}},r.dependencyParse=function(t){return n.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(t)||n.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},r.versionParse=function(t){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(t)||n.warn("Plugin.versionParse:",t,"is not a valid version or range.");var e=t.split("-");t=e[0];var i=isNaN(Number(t[0])),r=i?t.substr(1):t,o=n.map(r.split("."),(function(t){return Number(t)}));return{isRange:i,version:r,range:t,operator:i?t[0]:"",parts:o,prerelease:e[1],number:1e8*o[0]+1e4*o[1]+o[2]}},r.versionSatisfies=function(t,e){e=e||"*";var i=r.versionParse(e),n=i.parts,o=r.versionParse(t),s=o.parts;if(i.isRange){if("*"===i.operator||"*"===t)return!0;if("~"===i.operator)return s[0]===n[0]&&s[1]===n[1]&&s[2]>=n[2];if("^"===i.operator)return n[0]>0?s[0]===n[0]&&o.number>=i.number:n[1]>0?s[1]===n[1]&&s[2]>=n[2]:s[2]===n[2]}return t===e||"*"===t}},{"./Common":14}],21:[function(t,e,i){var r={};e.exports=r;var n,o,s,a=t("./Events"),h=t("./Engine"),l=t("./Common");"undefined"!=typeof window&&(n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),n||(n=function(t){s=setTimeout((function(){t(l.now())}),1e3/60)},o=function(){clearTimeout(s)}),r.create=function(t){var e=l.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},t);return e.delta=e.delta||1e3/e.fps,e.deltaMin=e.deltaMin||1e3/e.fps,e.deltaMax=e.deltaMax||1e3/(.5*e.fps),e.fps=1e3/e.delta,e},r.run=function(t,e){return void 0!==t.positionIterations&&(e=t,t=r.create()),function i(o){t.frameRequestId=n(i),o&&t.enabled&&r.tick(t,e,o)}(),t},r.tick=function(t,e,i){var r,n=e.timing,o=1,s={timestamp:n.timestamp};a.trigger(t,"beforeTick",s),a.trigger(e,"beforeTick",s),t.isFixed?r=t.delta:(r=i-t.timePrev||t.delta,t.timePrev=i,t.deltaHistory.push(r),t.deltaHistory=t.deltaHistory.slice(-t.deltaSampleSize),o=(r=(r=(r=Math.min.apply(null,t.deltaHistory))<t.deltaMin?t.deltaMin:r)>t.deltaMax?t.deltaMax:r)/t.delta,t.delta=r),0!==t.timeScalePrev&&(o*=n.timeScale/t.timeScalePrev),0===n.timeScale&&(o=0),t.timeScalePrev=n.timeScale,t.correction=o,t.frameCounter+=1,i-t.counterTimestamp>=1e3&&(t.fps=t.frameCounter*((i-t.counterTimestamp)/1e3),t.counterTimestamp=i,t.frameCounter=0),a.trigger(t,"tick",s),a.trigger(e,"tick",s),e.world.isModified&&e.render&&e.render.controller&&e.render.controller.clear&&e.render.controller.clear(e.render),a.trigger(t,"beforeUpdate",s),h.update(e,r,o),a.trigger(t,"afterUpdate",s),e.render&&e.render.controller&&(a.trigger(t,"beforeRender",s),a.trigger(e,"beforeRender",s),e.render.controller.world(e.render),a.trigger(t,"afterRender",s),a.trigger(e,"afterRender",s)),a.trigger(t,"afterTick",s),a.trigger(e,"afterTick",s)},r.stop=function(t){o(t.frameRequestId)},r.start=function(t,e){r.run(t,e)}},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(t,e,i){var r={};e.exports=r;var n=t("./Events");r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(t,e){for(var i=e*e*e,n=0;n<t.length;n++){var o=t[n],s=o.speed*o.speed+o.angularSpeed*o.angularSpeed;if(0===o.force.x&&0===o.force.y){var a=Math.min(o.motion,s),h=Math.max(o.motion,s);o.motion=r._minBias*a+(1-r._minBias)*h,o.sleepThreshold>0&&o.motion<r._motionSleepThreshold*i?(o.sleepCounter+=1,o.sleepCounter>=o.sleepThreshold&&r.set(o,!0)):o.sleepCounter>0&&(o.sleepCounter-=1)}else r.set(o,!1)}},r.afterCollisions=function(t,e){for(var i=e*e*e,n=0;n<t.length;n++){var o=t[n];if(o.isActive){var s=o.collision,a=s.bodyA.parent,h=s.bodyB.parent;if(!(a.isSleeping&&h.isSleeping||a.isStatic||h.isStatic)&&(a.isSleeping||h.isSleeping)){var l=a.isSleeping&&!a.isStatic?a:h,u=l===a?h:a;!l.isStatic&&u.motion>r._motionWakeThreshold*i&&r.set(l,!1)}}}},r.set=function(t,e){var i=t.isSleeping;e?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,i||n.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,i&&n.trigger(t,"sleepEnd"))}},{"./Events":16}],23:[function(t,e,i){var r={};e.exports=r;var n,o=t("../geometry/Vertices"),s=t("../core/Common"),a=t("../body/Body"),h=t("../geometry/Bounds"),l=t("../geometry/Vector");r.rectangle=function(t,e,i,r,n){n=n||{};var h={label:"Rectangle Body",position:{x:t,y:e},vertices:o.fromPath("L 0 0 L "+i+" 0 L "+i+" "+r+" L 0 "+r)};if(n.chamfer){var l=n.chamfer;h.vertices=o.chamfer(h.vertices,l.radius,l.quality,l.qualityMin,l.qualityMax),delete n.chamfer}return a.create(s.extend({},h,n))},r.trapezoid=function(t,e,i,r,n,h){h=h||{};var l,u=i*(n*=.5),c=u+(1-2*n)*i,d=c+u;l=n<.5?"L 0 0 L "+u+" "+-r+" L "+c+" "+-r+" L "+d+" 0":"L 0 0 L "+c+" "+-r+" L "+d+" 0";var p={label:"Trapezoid Body",position:{x:t,y:e},vertices:o.fromPath(l)};if(h.chamfer){var f=h.chamfer;p.vertices=o.chamfer(p.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax),delete h.chamfer}return a.create(s.extend({},p,h))},r.circle=function(t,e,i,n,o){n=n||{};var a={label:"Circle Body",circleRadius:i};o=o||25;var h=Math.ceil(Math.max(10,Math.min(o,i)));return h%2==1&&(h+=1),r.polygon(t,e,h,i,s.extend({},a,n))},r.polygon=function(t,e,i,n,h){if(h=h||{},i<3)return r.circle(t,e,n,h);for(var l=2*Math.PI/i,u="",c=.5*l,d=0;d<i;d+=1){var p=c+d*l,f=Math.cos(p)*n,m=Math.sin(p)*n;u+="L "+f.toFixed(3)+" "+m.toFixed(3)+" "}var g={label:"Polygon Body",position:{x:t,y:e},vertices:o.fromPath(u)};if(h.chamfer){var v=h.chamfer;g.vertices=o.chamfer(g.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete h.chamfer}return a.create(s.extend({},g,h))},r.fromVertices=function(t,e,i,r,u,c,d){var p,f,m,g,v,y,_,b,x;for(n||(n=s._requireGlobal("decomp","poly-decomp")),r=r||{},f=[],u=void 0!==u&&u,c=void 0!==c?c:.01,d=void 0!==d?d:10,n||s.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),s.isArray(i[0])||(i=[i]),b=0;b<i.length;b+=1)if(g=i[b],(m=o.isConvex(g))||!n)g=m?o.clockwiseSort(g):o.hull(g),f.push({position:{x:t,y:e},vertices:g});else{var T=g.map((function(t){return[t.x,t.y]}));n.makeCCW(T),!1!==c&&n.removeCollinearPoints(T,c);var w=n.quickDecomp(T);for(v=0;v<w.length;v++){var E=w[v].map((function(t){return{x:t[0],y:t[1]}}));d>0&&o.area(E)<d||f.push({position:o.centre(E),vertices:E})}}for(v=0;v<f.length;v++)f[v]=a.create(s.extend(f[v],r));if(u)for(v=0;v<f.length;v++){var S=f[v];for(y=v+1;y<f.length;y++){var A=f[y];if(h.overlaps(S.bounds,A.bounds)){var R=S.vertices,P=A.vertices;for(_=0;_<S.vertices.length;_++)for(x=0;x<A.vertices.length;x++){var I=l.magnitudeSquared(l.sub(R[(_+1)%R.length],P[x])),O=l.magnitudeSquared(l.sub(R[_],P[(x+1)%P.length]));I<5&&O<5&&(R[_].isInternal=!0,P[x].isInternal=!0)}}}}return f.length>1?(p=a.create(s.extend({parts:f.slice(0)},r)),a.setPosition(p,{x:t,y:e}),p):f[0]}},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(t,e,i){var r={};e.exports=r;var n=t("../body/Composite"),o=t("../constraint/Constraint"),s=t("../core/Common"),a=t("../body/Body"),h=t("./Bodies");r.stack=function(t,e,i,r,o,s,h){for(var l,u=n.create({label:"Stack"}),c=t,d=e,p=0,f=0;f<r;f++){for(var m=0,g=0;g<i;g++){var v=h(c,d,g,f,l,p);if(v){var y=v.bounds.max.y-v.bounds.min.y,_=v.bounds.max.x-v.bounds.min.x;y>m&&(m=y),a.translate(v,{x:.5*_,y:.5*y}),c=v.bounds.max.x+o,n.addBody(u,v),l=v,p+=1}else c+=o}d+=m+s,c=t}return u},r.chain=function(t,e,i,r,a,h){for(var l=t.bodies,u=1;u<l.length;u++){var c=l[u-1],d=l[u],p=c.bounds.max.y-c.bounds.min.y,f=c.bounds.max.x-c.bounds.min.x,m=d.bounds.max.y-d.bounds.min.y,g={bodyA:c,pointA:{x:f*e,y:p*i},bodyB:d,pointB:{x:(d.bounds.max.x-d.bounds.min.x)*r,y:m*a}},v=s.extend(g,h);n.addConstraint(t,o.create(v))}return t.label+=" Chain",t},r.mesh=function(t,e,i,r,a){var h,l,u,c,d,p=t.bodies;for(h=0;h<i;h++){for(l=1;l<e;l++)u=p[l-1+h*e],c=p[l+h*e],n.addConstraint(t,o.create(s.extend({bodyA:u,bodyB:c},a)));if(h>0)for(l=0;l<e;l++)u=p[l+(h-1)*e],c=p[l+h*e],n.addConstraint(t,o.create(s.extend({bodyA:u,bodyB:c},a))),r&&l>0&&(d=p[l-1+(h-1)*e],n.addConstraint(t,o.create(s.extend({bodyA:d,bodyB:c},a)))),r&&l<e-1&&(d=p[l+1+(h-1)*e],n.addConstraint(t,o.create(s.extend({bodyA:d,bodyB:c},a))))}return t.label+=" Mesh",t},r.pyramid=function(t,e,i,n,o,s,h){return r.stack(t,e,i,n,o,s,(function(e,r,s,l,u,c){var d=Math.min(n,Math.ceil(i/2)),p=u?u.bounds.max.x-u.bounds.min.x:0;if(!(l>d||s<(l=d-l)||s>i-1-l))return 1===c&&a.translate(u,{x:(s+(i%2==1?1:-1))*p,y:0}),h(t+(u?s*p:0)+s*o,r,s,l,u,c)}))},r.newtonsCradle=function(t,e,i,r,s){for(var a=n.create({label:"Newtons Cradle"}),l=0;l<i;l++){var u=h.circle(t+l*(1.9*r),e+s,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),c=o.create({pointA:{x:t+l*(1.9*r),y:e},bodyB:u});n.addBody(a,u),n.addConstraint(a,c)}return a},r.car=function(t,e,i,r,s){var l=a.nextGroup(!0),u=.5*-i+20,c=.5*i-20,d=n.create({label:"Car"}),p=h.rectangle(t,e,i,r,{collisionFilter:{group:l},chamfer:{radius:.5*r},density:2e-4}),f=h.circle(t+u,e+0,s,{collisionFilter:{group:l},friction:.8}),m=h.circle(t+c,e+0,s,{collisionFilter:{group:l},friction:.8}),g=o.create({bodyB:p,pointB:{x:u,y:0},bodyA:f,stiffness:1,length:0}),v=o.create({bodyB:p,pointB:{x:c,y:0},bodyA:m,stiffness:1,length:0});return n.addBody(d,p),n.addBody(d,f),n.addBody(d,m),n.addConstraint(d,g),n.addConstraint(d,v),d},r.softBody=function(t,e,i,n,o,a,l,u,c,d){c=s.extend({inertia:1/0},c),d=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},d);var p=r.stack(t,e,i,n,o,a,(function(t,e){return h.circle(t,e,u,c)}));return r.mesh(p,i,n,l,d),p.label="Soft Body",p}},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(t,e,i){var r={};e.exports=r;var n=t("../geometry/Vector"),o=t("../core/Common");r.fromVertices=function(t){for(var e={},i=0;i<t.length;i++){var r=(i+1)%t.length,s=n.normalise({x:t[r].y-t[i].y,y:t[i].x-t[r].x}),a=0===s.y?1/0:s.x/s.y;e[a=a.toFixed(3).toString()]=s}return o.values(e)},r.rotate=function(t,e){if(0!==e)for(var i=Math.cos(e),r=Math.sin(e),n=0;n<t.length;n++){var o,s=t[n];o=s.x*i-s.y*r,s.y=s.x*r+s.y*i,s.x=o}}},{"../core/Common":14,"../geometry/Vector":28}],26:[function(t,e,i){var r={};e.exports=r,r.create=function(t){var e={min:{x:0,y:0},max:{x:0,y:0}};return t&&r.update(e,t),e},r.update=function(t,e,i){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var r=0;r<e.length;r++){var n=e[r];n.x>t.max.x&&(t.max.x=n.x),n.x<t.min.x&&(t.min.x=n.x),n.y>t.max.y&&(t.max.y=n.y),n.y<t.min.y&&(t.min.y=n.y)}i&&(i.x>0?t.max.x+=i.x:t.min.x+=i.x,i.y>0?t.max.y+=i.y:t.min.y+=i.y)},r.contains=function(t,e){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},r.overlaps=function(t,e){return t.min.x<=e.max.x&&t.max.x>=e.min.x&&t.max.y>=e.min.y&&t.min.y<=e.max.y},r.translate=function(t,e){t.min.x+=e.x,t.max.x+=e.x,t.min.y+=e.y,t.max.y+=e.y},r.shift=function(t,e){var i=t.max.x-t.min.x,r=t.max.y-t.min.y;t.min.x=e.x,t.max.x=e.x+i,t.min.y=e.y,t.max.y=e.y+r}},{}],27:[function(t,e,i){var r={};e.exports=r,t("../geometry/Bounds");var n=t("../core/Common");r.pathToVertices=function(t,e){"undefined"==typeof window||"SVGPathSeg"in window||n.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,o,s,a,h,l,u,c,d,p,f,m=[],g=0,v=0,y=0;e=e||15;var _=function(t,e,i){var r=i%2==1&&i>1;if(!d||t!=d.x||e!=d.y){d&&r?(p=d.x,f=d.y):(p=0,f=0);var n={x:p+t,y:f+e};!r&&d||(d=n),m.push(n),v=p+t,y=f+e}},b=function(t){var e=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==e){switch(e){case"M":case"L":case"T":case"C":case"S":case"Q":v=t.x,y=t.y;break;case"H":v=t.x;break;case"V":y=t.y}_(v,y,t.pathSegType)}};for(r._svgPathToAbsolute(t),s=t.getTotalLength(),l=[],i=0;i<t.pathSegList.numberOfItems;i+=1)l.push(t.pathSegList.getItem(i));for(u=l.concat();g<s;){if((h=l[t.getPathSegAtLength(g)])!=c){for(;u.length&&u[0]!=h;)b(u.shift());c=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=t.getPointAtLength(g),_(a.x,a.y,0)}g+=e}for(i=0,o=u.length;i<o;++i)b(u[i]);return m},r._svgPathToAbsolute=function(t){for(var e,i,r,n,o,s,a=t.pathSegList,h=0,l=0,u=a.numberOfItems,c=0;c<u;++c){var d=a.getItem(c),p=d.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p))"x"in d&&(h=d.x),"y"in d&&(l=d.y);else switch("x1"in d&&(r=h+d.x1),"x2"in d&&(o=h+d.x2),"y1"in d&&(n=l+d.y1),"y2"in d&&(s=l+d.y2),"x"in d&&(h+=d.x),"y"in d&&(l+=d.y),p){case"m":a.replaceItem(t.createSVGPathSegMovetoAbs(h,l),c);break;case"l":a.replaceItem(t.createSVGPathSegLinetoAbs(h,l),c);break;case"h":a.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(h),c);break;case"v":a.replaceItem(t.createSVGPathSegLinetoVerticalAbs(l),c);break;case"c":a.replaceItem(t.createSVGPathSegCurvetoCubicAbs(h,l,r,n,o,s),c);break;case"s":a.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(h,l,o,s),c);break;case"q":a.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(h,l,r,n),c);break;case"t":a.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(h,l),c);break;case"a":a.replaceItem(t.createSVGPathSegArcAbs(h,l,d.r1,d.r2,d.angle,d.largeArcFlag,d.sweepFlag),c);break;case"z":case"Z":h=e,l=i}"M"!=p&&"m"!=p||(e=h,i=l)}}},{"../core/Common":14,"../geometry/Bounds":26}],28:[function(t,e,i){var r={};e.exports=r,r.create=function(t,e){return{x:t||0,y:e||0}},r.clone=function(t){return{x:t.x,y:t.y}},r.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},r.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},r.rotate=function(t,e,i){var r=Math.cos(e),n=Math.sin(e);i||(i={});var o=t.x*r-t.y*n;return i.y=t.x*n+t.y*r,i.x=o,i},r.rotateAbout=function(t,e,i,r){var n=Math.cos(e),o=Math.sin(e);r||(r={});var s=i.x+((t.x-i.x)*n-(t.y-i.y)*o);return r.y=i.y+((t.x-i.x)*o+(t.y-i.y)*n),r.x=s,r},r.normalise=function(t){var e=r.magnitude(t);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}},r.dot=function(t,e){return t.x*e.x+t.y*e.y},r.cross=function(t,e){return t.x*e.y-t.y*e.x},r.cross3=function(t,e,i){return(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)},r.add=function(t,e,i){return i||(i={}),i.x=t.x+e.x,i.y=t.y+e.y,i},r.sub=function(t,e,i){return i||(i={}),i.x=t.x-e.x,i.y=t.y-e.y,i},r.mult=function(t,e){return{x:t.x*e,y:t.y*e}},r.div=function(t,e){return{x:t.x/e,y:t.y/e}},r.perp=function(t,e){return{x:(e=!0===e?-1:1)*-t.y,y:e*t.x}},r.neg=function(t){return{x:-t.x,y:-t.y}},r.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]},{}],29:[function(t,e,i){var r={};e.exports=r;var n=t("../geometry/Vector"),o=t("../core/Common");r.create=function(t,e){for(var i=[],r=0;r<t.length;r++){var n=t[r],o={x:n.x,y:n.y,index:r,body:e,isInternal:!1};i.push(o)}return i},r.fromPath=function(t,e){var i=[];return t.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,(function(t,e,r){i.push({x:parseFloat(e),y:parseFloat(r)})})),r.create(i,e)},r.centre=function(t){for(var e,i,o,s=r.area(t,!0),a={x:0,y:0},h=0;h<t.length;h++)o=(h+1)%t.length,e=n.cross(t[h],t[o]),i=n.mult(n.add(t[h],t[o]),e),a=n.add(a,i);return n.div(a,6*s)},r.mean=function(t){for(var e={x:0,y:0},i=0;i<t.length;i++)e.x+=t[i].x,e.y+=t[i].y;return n.div(e,t.length)},r.area=function(t,e){for(var i=0,r=t.length-1,n=0;n<t.length;n++)i+=(t[r].x-t[n].x)*(t[r].y+t[n].y),r=n;return e?i/2:Math.abs(i)/2},r.inertia=function(t,e){for(var i,r,o=0,s=0,a=t,h=0;h<a.length;h++)r=(h+1)%a.length,o+=(i=Math.abs(n.cross(a[r],a[h])))*(n.dot(a[r],a[r])+n.dot(a[r],a[h])+n.dot(a[h],a[h])),s+=i;return e/6*(o/s)},r.translate=function(t,e,i){var r;if(i)for(r=0;r<t.length;r++)t[r].x+=e.x*i,t[r].y+=e.y*i;else for(r=0;r<t.length;r++)t[r].x+=e.x,t[r].y+=e.y;return t},r.rotate=function(t,e,i){if(0!==e){for(var r=Math.cos(e),n=Math.sin(e),o=0;o<t.length;o++){var s=t[o],a=s.x-i.x,h=s.y-i.y;s.x=i.x+(a*r-h*n),s.y=i.y+(a*n+h*r)}return t}},r.contains=function(t,e){for(var i=0;i<t.length;i++){var r=t[i],n=t[(i+1)%t.length];if((e.x-r.x)*(n.y-r.y)+(e.y-r.y)*(r.x-n.x)>0)return!1}return!0},r.scale=function(t,e,i,o){if(1===e&&1===i)return t;var s,a;o=o||r.centre(t);for(var h=0;h<t.length;h++)s=t[h],a=n.sub(s,o),t[h].x=o.x+a.x*e,t[h].y=o.y+a.y*i;return t},r.chamfer=function(t,e,i,r,s){e="number"==typeof e?[e]:e||[8],i=void 0!==i?i:-1,r=r||2,s=s||14;for(var a=[],h=0;h<t.length;h++){var l=t[h-1>=0?h-1:t.length-1],u=t[h],c=t[(h+1)%t.length],d=e[h<e.length?h:e.length-1];if(0!==d){var p=n.normalise({x:u.y-l.y,y:l.x-u.x}),f=n.normalise({x:c.y-u.y,y:u.x-c.x}),m=Math.sqrt(2*Math.pow(d,2)),g=n.mult(o.clone(p),d),v=n.normalise(n.mult(n.add(p,f),.5)),y=n.sub(u,n.mult(v,m)),_=i;-1===i&&(_=1.75*Math.pow(d,.32)),(_=o.clamp(_,r,s))%2==1&&(_+=1);for(var b=Math.acos(n.dot(p,f))/_,x=0;x<_;x++)a.push(n.add(n.rotate(g,b*x),y))}else a.push(u)}return a},r.clockwiseSort=function(t){var e=r.mean(t);return t.sort((function(t,i){return n.angle(e,t)-n.angle(e,i)})),t},r.isConvex=function(t){var e,i,r,n,o=0,s=t.length;if(s<3)return null;for(e=0;e<s;e++)if(r=(e+2)%s,n=(t[i=(e+1)%s].x-t[e].x)*(t[r].y-t[i].y),(n-=(t[i].y-t[e].y)*(t[r].x-t[i].x))<0?o|=1:n>0&&(o|=2),3===o)return!1;return 0!==o||null},r.hull=function(t){var e,i,r=[],o=[];for((t=t.slice(0)).sort((function(t,e){var i=t.x-e.x;return 0!==i?i:t.y-e.y})),i=0;i<t.length;i+=1){for(e=t[i];o.length>=2&&n.cross3(o[o.length-2],o[o.length-1],e)<=0;)o.pop();o.push(e)}for(i=t.length-1;i>=0;i-=1){for(e=t[i];r.length>=2&&n.cross3(r[r.length-2],r[r.length-1],e)<=0;)r.pop();r.push(e)}return r.pop(),o.pop(),r.concat(o)}},{"../core/Common":14,"../geometry/Vector":28}],30:[function(t,e,i){var r=e.exports=t("../core/Matter");r.Body=t("../body/Body"),r.Composite=t("../body/Composite"),r.World=t("../body/World"),r.Contact=t("../collision/Contact"),r.Detector=t("../collision/Detector"),r.Grid=t("../collision/Grid"),r.Pairs=t("../collision/Pairs"),r.Pair=t("../collision/Pair"),r.Query=t("../collision/Query"),r.Resolver=t("../collision/Resolver"),r.SAT=t("../collision/SAT"),r.Constraint=t("../constraint/Constraint"),r.MouseConstraint=t("../constraint/MouseConstraint"),r.Common=t("../core/Common"),r.Engine=t("../core/Engine"),r.Events=t("../core/Events"),r.Mouse=t("../core/Mouse"),r.Runner=t("../core/Runner"),r.Sleeping=t("../core/Sleeping"),r.Plugin=t("../core/Plugin"),r.Bodies=t("../factory/Bodies"),r.Composites=t("../factory/Composites"),r.Axes=t("../geometry/Axes"),r.Bounds=t("../geometry/Bounds"),r.Svg=t("../geometry/Svg"),r.Vector=t("../geometry/Vector"),r.Vertices=t("../geometry/Vertices"),r.Render=t("../render/Render"),r.RenderPixi=t("../render/RenderPixi"),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,r.Engine.run=r.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/Matter":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(t,e,i){var r={};e.exports=r;var n=t("../core/Common"),o=t("../body/Composite"),s=t("../geometry/Bounds"),a=t("../core/Events"),h=t("../collision/Grid"),l=t("../geometry/Vector"),u=t("../core/Mouse");!function(){var t,e;"undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout((function(){t(n.now())}),1e3/60)},e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r.create=function(t){var e={controller:r,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#18181d",wireframeBackground:"#0f0f13",hasBounds:!!t.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},o=n.extend(e,t);return o.canvas&&(o.canvas.width=o.options.width||o.canvas.width,o.canvas.height=o.options.height||o.canvas.height),o.mouse=t.mouse,o.engine=t.engine,o.canvas=o.canvas||i(o.options.width,o.options.height),o.context=o.canvas.getContext("2d"),o.textures={},o.bounds=o.bounds||{min:{x:0,y:0},max:{x:o.canvas.width,y:o.canvas.height}},1!==o.options.pixelRatio&&r.setPixelRatio(o,o.options.pixelRatio),n.isElement(o.element)?o.element.appendChild(o.canvas):o.canvas.parentNode||n.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),o},r.run=function(e){!function i(n){e.frameRequestId=t(i),r.world(e)}()},r.stop=function(t){e(t.frameRequestId)},r.setPixelRatio=function(t,e){var i=t.options,r=t.canvas;"auto"===e&&(e=c(r)),i.pixelRatio=e,r.setAttribute("data-pixel-ratio",e),r.width=i.width*e,r.height=i.height*e,r.style.width=i.width+"px",r.style.height=i.height+"px",t.context.scale(e,e)},r.lookAt=function(t,e,i,r){r=void 0===r||r,e=n.isArray(e)?e:[e],i=i||{x:0,y:0};for(var o={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},s=0;s<e.length;s+=1){var a=e[s],h=a.bounds?a.bounds.min:a.min||a.position||a,l=a.bounds?a.bounds.max:a.max||a.position||a;h&&l&&(h.x<o.min.x&&(o.min.x=h.x),l.x>o.max.x&&(o.max.x=l.x),h.y<o.min.y&&(o.min.y=h.y),l.y>o.max.y&&(o.max.y=l.y))}var c=o.max.x-o.min.x+2*i.x,d=o.max.y-o.min.y+2*i.y,p=t.canvas.height,f=t.canvas.width/p,m=c/d,g=1,v=1;m>f?v=m/f:g=f/m,t.options.hasBounds=!0,t.bounds.min.x=o.min.x,t.bounds.max.x=o.min.x+c*g,t.bounds.min.y=o.min.y,t.bounds.max.y=o.min.y+d*v,r&&(t.bounds.min.x+=.5*c-c*g*.5,t.bounds.max.x+=.5*c-c*g*.5,t.bounds.min.y+=.5*d-d*v*.5,t.bounds.max.y+=.5*d-d*v*.5),t.bounds.min.x-=i.x,t.bounds.max.x-=i.x,t.bounds.min.y-=i.y,t.bounds.max.y-=i.y,t.mouse&&(u.setScale(t.mouse,{x:(t.bounds.max.x-t.bounds.min.x)/t.canvas.width,y:(t.bounds.max.y-t.bounds.min.y)/t.canvas.height}),u.setOffset(t.mouse,t.bounds.min))},r.startViewTransform=function(t){var e=t.bounds.max.x-t.bounds.min.x,i=t.bounds.max.y-t.bounds.min.y,r=e/t.options.width,n=i/t.options.height;t.context.scale(1/r,1/n),t.context.translate(-t.bounds.min.x,-t.bounds.min.y)},r.endViewTransform=function(t){t.context.setTransform(t.options.pixelRatio,0,0,t.options.pixelRatio,0,0)},r.world=function(t){var e,i=t.engine,n=i.world,c=t.canvas,d=t.context,f=t.options,m=o.allBodies(n),g=o.allConstraints(n),v=f.wireframes?f.wireframeBackground:f.background,y=[],_=[],b={timestamp:i.timing.timestamp};if(a.trigger(t,"beforeRender",b),t.currentBackground!==v&&p(t,v),d.globalCompositeOperation="source-in",d.fillStyle="transparent",d.fillRect(0,0,c.width,c.height),d.globalCompositeOperation="source-over",f.hasBounds){for(e=0;e<m.length;e++){var x=m[e];s.overlaps(x.bounds,t.bounds)&&y.push(x)}for(e=0;e<g.length;e++){var T=g[e],w=T.bodyA,E=T.bodyB,S=T.pointA,A=T.pointB;w&&(S=l.add(w.position,T.pointA)),E&&(A=l.add(E.position,T.pointB)),S&&A&&(s.contains(t.bounds,S)||s.contains(t.bounds,A))&&_.push(T)}r.startViewTransform(t),t.mouse&&(u.setScale(t.mouse,{x:(t.bounds.max.x-t.bounds.min.x)/t.canvas.width,y:(t.bounds.max.y-t.bounds.min.y)/t.canvas.height}),u.setOffset(t.mouse,t.bounds.min))}else _=g,y=m;!f.wireframes||i.enableSleeping&&f.showSleeping?r.bodies(t,y,d):(f.showConvexHulls&&r.bodyConvexHulls(t,y,d),r.bodyWireframes(t,y,d)),f.showBounds&&r.bodyBounds(t,y,d),(f.showAxes||f.showAngleIndicator)&&r.bodyAxes(t,y,d),f.showPositions&&r.bodyPositions(t,y,d),f.showVelocity&&r.bodyVelocity(t,y,d),f.showIds&&r.bodyIds(t,y,d),f.showSeparations&&r.separations(t,i.pairs.list,d),f.showCollisions&&r.collisions(t,i.pairs.list,d),f.showVertexNumbers&&r.vertexNumbers(t,y,d),f.showMousePosition&&r.mousePosition(t,t.mouse,d),r.constraints(_,d),f.showBroadphase&&i.broadphase.controller===h&&r.grid(t,i.broadphase,d),f.showDebug&&r.debug(t,d),f.hasBounds&&r.endViewTransform(t),a.trigger(t,"afterRender",b)},r.debug=function(t,e){var i=e,r=t.engine,n=r.world,s=r.metrics,a=t.options;if(o.allBodies(n),r.timing.timestamp-(t.debugTimestamp||0)>=500){var h="";s.timing&&(h+="fps: "+Math.round(s.timing.fps)+"    "),t.debugString=h,t.debugTimestamp=r.timing.timestamp}if(t.debugString){i.font="12px Arial",a.wireframes?i.fillStyle="rgba(255,255,255,0.5)":i.fillStyle="rgba(0,0,0,0.5)";for(var l=t.debugString.split("\n"),u=0;u<l.length;u++)i.fillText(l[u],50,50+18*u)}},r.constraints=function(t,e){for(var i=e,r=0;r<t.length;r++){var o=t[r];if(o.render.visible&&o.pointA&&o.pointB){var s,a,h=o.bodyA,u=o.bodyB;if(s=h?l.add(h.position,o.pointA):o.pointA,"pin"===o.render.type)i.beginPath(),i.arc(s.x,s.y,3,0,2*Math.PI),i.closePath();else{if(a=u?l.add(u.position,o.pointB):o.pointB,i.beginPath(),i.moveTo(s.x,s.y),"spring"===o.render.type)for(var c,d=l.sub(a,s),p=l.perp(l.normalise(d)),f=Math.ceil(n.clamp(o.length/5,12,20)),m=1;m<f;m+=1)c=m%2==0?1:-1,i.lineTo(s.x+d.x*(m/f)+p.x*c*4,s.y+d.y*(m/f)+p.y*c*4);i.lineTo(a.x,a.y)}o.render.lineWidth&&(i.lineWidth=o.render.lineWidth,i.strokeStyle=o.render.strokeStyle,i.stroke()),o.render.anchors&&(i.fillStyle=o.render.strokeStyle,i.beginPath(),i.arc(s.x,s.y,3,0,2*Math.PI),i.arc(a.x,a.y,3,0,2*Math.PI),i.closePath(),i.fill())}}},r.bodyShadows=function(t,e,i){for(var r=i,n=(t.engine,0);n<e.length;n++){var o=e[n];if(o.render.visible){if(o.circleRadius)r.beginPath(),r.arc(o.position.x,o.position.y,o.circleRadius,0,2*Math.PI),r.closePath();else{r.beginPath(),r.moveTo(o.vertices[0].x,o.vertices[0].y);for(var s=1;s<o.vertices.length;s++)r.lineTo(o.vertices[s].x,o.vertices[s].y);r.closePath()}var a=o.position.x-.5*t.options.width,h=o.position.y-.2*t.options.height,l=Math.abs(a)+Math.abs(h);r.shadowColor="rgba(0,0,0,0.15)",r.shadowOffsetX=.05*a,r.shadowOffsetY=.05*h,r.shadowBlur=1+12*Math.min(1,l/1e3),r.fill(),r.shadowColor=null,r.shadowOffsetX=null,r.shadowOffsetY=null,r.shadowBlur=null}}},r.bodies=function(t,e,i){var r,n,o,s,a=i,h=(t.engine,t.options),l=h.showInternalEdges||!h.wireframes;for(o=0;o<e.length;o++)if((r=e[o]).render.visible)for(s=r.parts.length>1?1:0;s<r.parts.length;s++)if((n=r.parts[s]).render.visible){if(h.showSleeping&&r.isSleeping?a.globalAlpha=.5*n.render.opacity:1!==n.render.opacity&&(a.globalAlpha=n.render.opacity),n.render.sprite&&n.render.sprite.texture&&!h.wireframes){var u=n.render.sprite,c=d(t,u.texture);a.translate(n.position.x,n.position.y),a.rotate(n.angle),a.drawImage(c,c.width*-u.xOffset*u.xScale,c.height*-u.yOffset*u.yScale,c.width*u.xScale,c.height*u.yScale),a.rotate(-n.angle),a.translate(-n.position.x,-n.position.y)}else{if(n.circleRadius)a.beginPath(),a.arc(n.position.x,n.position.y,n.circleRadius,0,2*Math.PI);else{a.beginPath(),a.moveTo(n.vertices[0].x,n.vertices[0].y);for(var p=1;p<n.vertices.length;p++)!n.vertices[p-1].isInternal||l?a.lineTo(n.vertices[p].x,n.vertices[p].y):a.moveTo(n.vertices[p].x,n.vertices[p].y),n.vertices[p].isInternal&&!l&&a.moveTo(n.vertices[(p+1)%n.vertices.length].x,n.vertices[(p+1)%n.vertices.length].y);a.lineTo(n.vertices[0].x,n.vertices[0].y),a.closePath()}h.wireframes?(a.lineWidth=1,a.strokeStyle="#bbb",a.stroke()):(a.fillStyle=n.render.fillStyle,n.render.lineWidth&&(a.lineWidth=n.render.lineWidth,a.strokeStyle=n.render.strokeStyle,a.stroke()),a.fill())}a.globalAlpha=1}},r.bodyWireframes=function(t,e,i){var r,n,o,s,a,h=i,l=t.options.showInternalEdges;for(h.beginPath(),o=0;o<e.length;o++)if((r=e[o]).render.visible)for(a=r.parts.length>1?1:0;a<r.parts.length;a++){for(n=r.parts[a],h.moveTo(n.vertices[0].x,n.vertices[0].y),s=1;s<n.vertices.length;s++)!n.vertices[s-1].isInternal||l?h.lineTo(n.vertices[s].x,n.vertices[s].y):h.moveTo(n.vertices[s].x,n.vertices[s].y),n.vertices[s].isInternal&&!l&&h.moveTo(n.vertices[(s+1)%n.vertices.length].x,n.vertices[(s+1)%n.vertices.length].y);h.lineTo(n.vertices[0].x,n.vertices[0].y)}h.lineWidth=1,h.strokeStyle="#bbb",h.stroke()},r.bodyConvexHulls=function(t,e,i){var r,n,o,s=i;for(s.beginPath(),n=0;n<e.length;n++)if((r=e[n]).render.visible&&1!==r.parts.length){for(s.moveTo(r.vertices[0].x,r.vertices[0].y),o=1;o<r.vertices.length;o++)s.lineTo(r.vertices[o].x,r.vertices[o].y);s.lineTo(r.vertices[0].x,r.vertices[0].y)}s.lineWidth=1,s.strokeStyle="rgba(255,255,255,0.2)",s.stroke()},r.vertexNumbers=function(t,e,i){var r,n,o,s=i;for(r=0;r<e.length;r++){var a=e[r].parts;for(o=a.length>1?1:0;o<a.length;o++){var h=a[o];for(n=0;n<h.vertices.length;n++)s.fillStyle="rgba(255,255,255,0.2)",s.fillText(r+"_"+n,h.position.x+.8*(h.vertices[n].x-h.position.x),h.position.y+.8*(h.vertices[n].y-h.position.y))}}},r.mousePosition=function(t,e,i){var r=i;r.fillStyle="rgba(255,255,255,0.8)",r.fillText(e.position.x+"  "+e.position.y,e.position.x+5,e.position.y-5)},r.bodyBounds=function(t,e,i){var r=i,n=(t.engine,t.options);r.beginPath();for(var o=0;o<e.length;o++)if(e[o].render.visible)for(var s=e[o].parts,a=s.length>1?1:0;a<s.length;a++){var h=s[a];r.rect(h.bounds.min.x,h.bounds.min.y,h.bounds.max.x-h.bounds.min.x,h.bounds.max.y-h.bounds.min.y)}n.wireframes?r.strokeStyle="rgba(255,255,255,0.08)":r.strokeStyle="rgba(0,0,0,0.1)",r.lineWidth=1,r.stroke()},r.bodyAxes=function(t,e,i){var r,n,o,s,a=i,h=(t.engine,t.options);for(a.beginPath(),n=0;n<e.length;n++){var l=e[n],u=l.parts;if(l.render.visible)if(h.showAxes)for(o=u.length>1?1:0;o<u.length;o++)for(r=u[o],s=0;s<r.axes.length;s++){var c=r.axes[s];a.moveTo(r.position.x,r.position.y),a.lineTo(r.position.x+20*c.x,r.position.y+20*c.y)}else for(o=u.length>1?1:0;o<u.length;o++)for(r=u[o],s=0;s<r.axes.length;s++)a.moveTo(r.position.x,r.position.y),a.lineTo((r.vertices[0].x+r.vertices[r.vertices.length-1].x)/2,(r.vertices[0].y+r.vertices[r.vertices.length-1].y)/2)}h.wireframes?(a.strokeStyle="indianred",a.lineWidth=1):(a.strokeStyle="rgba(255, 255, 255, 0.4)",a.globalCompositeOperation="overlay",a.lineWidth=2),a.stroke(),a.globalCompositeOperation="source-over"},r.bodyPositions=function(t,e,i){var r,n,o,s,a=i,h=(t.engine,t.options);for(a.beginPath(),o=0;o<e.length;o++)if((r=e[o]).render.visible)for(s=0;s<r.parts.length;s++)n=r.parts[s],a.arc(n.position.x,n.position.y,3,0,2*Math.PI,!1),a.closePath();for(h.wireframes?a.fillStyle="indianred":a.fillStyle="rgba(0,0,0,0.5)",a.fill(),a.beginPath(),o=0;o<e.length;o++)(r=e[o]).render.visible&&(a.arc(r.positionPrev.x,r.positionPrev.y,2,0,2*Math.PI,!1),a.closePath());a.fillStyle="rgba(255,165,0,0.8)",a.fill()},r.bodyVelocity=function(t,e,i){var r=i;r.beginPath();for(var n=0;n<e.length;n++){var o=e[n];o.render.visible&&(r.moveTo(o.position.x,o.position.y),r.lineTo(o.position.x+2*(o.position.x-o.positionPrev.x),o.position.y+2*(o.position.y-o.positionPrev.y)))}r.lineWidth=3,r.strokeStyle="cornflowerblue",r.stroke()},r.bodyIds=function(t,e,i){var r,n,o=i;for(r=0;r<e.length;r++)if(e[r].render.visible){var s=e[r].parts;for(n=s.length>1?1:0;n<s.length;n++){var a=s[n];o.font="12px Arial",o.fillStyle="rgba(255,255,255,0.5)",o.fillText(a.id,a.position.x+10,a.position.y-10)}}},r.collisions=function(t,e,i){var r,n,o,s,a=i,h=t.options;for(a.beginPath(),o=0;o<e.length;o++)if((r=e[o]).isActive)for(n=r.collision,s=0;s<r.activeContacts.length;s++){var l=r.activeContacts[s].vertex;a.rect(l.x-1.5,l.y-1.5,3.5,3.5)}for(h.wireframes?a.fillStyle="rgba(255,255,255,0.7)":a.fillStyle="orange",a.fill(),a.beginPath(),o=0;o<e.length;o++)if((r=e[o]).isActive&&(n=r.collision,r.activeContacts.length>0)){var u=r.activeContacts[0].vertex.x,c=r.activeContacts[0].vertex.y;2===r.activeContacts.length&&(u=(r.activeContacts[0].vertex.x+r.activeContacts[1].vertex.x)/2,c=(r.activeContacts[0].vertex.y+r.activeContacts[1].vertex.y)/2),n.bodyB===n.supports[0].body||!0===n.bodyA.isStatic?a.moveTo(u-8*n.normal.x,c-8*n.normal.y):a.moveTo(u+8*n.normal.x,c+8*n.normal.y),a.lineTo(u,c)}h.wireframes?a.strokeStyle="rgba(255,165,0,0.7)":a.strokeStyle="orange",a.lineWidth=1,a.stroke()},r.separations=function(t,e,i){var r,n,o,s,a,h=i,l=t.options;for(h.beginPath(),a=0;a<e.length;a++)if((r=e[a]).isActive){o=(n=r.collision).bodyA;var u=1;(s=n.bodyB).isStatic||o.isStatic||(u=.5),s.isStatic&&(u=0),h.moveTo(s.position.x,s.position.y),h.lineTo(s.position.x-n.penetration.x*u,s.position.y-n.penetration.y*u),u=1,s.isStatic||o.isStatic||(u=.5),o.isStatic&&(u=0),h.moveTo(o.position.x,o.position.y),h.lineTo(o.position.x+n.penetration.x*u,o.position.y+n.penetration.y*u)}l.wireframes?h.strokeStyle="rgba(255,165,0,0.5)":h.strokeStyle="orange",h.stroke()},r.grid=function(t,e,i){var r=i;t.options.wireframes?r.strokeStyle="rgba(255,180,0,0.1)":r.strokeStyle="rgba(255,180,0,0.5)",r.beginPath();for(var o=n.keys(e.buckets),s=0;s<o.length;s++){var a=o[s];if(!(e.buckets[a].length<2)){var h=a.split(/C|R/);r.rect(.5+parseInt(h[1],10)*e.bucketWidth,.5+parseInt(h[2],10)*e.bucketHeight,e.bucketWidth,e.bucketHeight)}}r.lineWidth=1,r.stroke()},r.inspector=function(t,e){t.engine;var i,r=t.selected,n=t.render,o=n.options;if(o.hasBounds){var s=n.bounds.max.x-n.bounds.min.x,a=n.bounds.max.y-n.bounds.min.y,h=s/n.options.width,l=a/n.options.height;e.scale(1/h,1/l),e.translate(-n.bounds.min.x,-n.bounds.min.y)}for(var u=0;u<r.length;u++){var c=r[u].data;switch(e.translate(.5,.5),e.lineWidth=1,e.strokeStyle="rgba(255,165,0,0.9)",e.setLineDash([1,2]),c.type){case"body":i=c.bounds,e.beginPath(),e.rect(Math.floor(i.min.x-3),Math.floor(i.min.y-3),Math.floor(i.max.x-i.min.x+6),Math.floor(i.max.y-i.min.y+6)),e.closePath(),e.stroke();break;case"constraint":var d=c.pointA;c.bodyA&&(d=c.pointB),e.beginPath(),e.arc(d.x,d.y,10,0,2*Math.PI),e.closePath(),e.stroke()}e.setLineDash([]),e.translate(-.5,-.5)}null!==t.selectStart&&(e.translate(.5,.5),e.lineWidth=1,e.strokeStyle="rgba(255,165,0,0.6)",e.fillStyle="rgba(255,165,0,0.1)",i=t.selectBounds,e.beginPath(),e.rect(Math.floor(i.min.x),Math.floor(i.min.y),Math.floor(i.max.x-i.min.x),Math.floor(i.max.y-i.min.y)),e.closePath(),e.stroke(),e.fill(),e.translate(-.5,-.5)),o.hasBounds&&e.setTransform(1,0,0,1,0,0)};var i=function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i.oncontextmenu=function(){return!1},i.onselectstart=function(){return!1},i},c=function(t){var e=t.getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},d=function(t,e){var i=t.textures[e];return i||((i=t.textures[e]=new Image).src=e,i)},p=function(t,e){var i=e;/(jpg|gif|png)$/.test(e)&&(i="url("+e+")"),t.canvas.style.background=i,t.canvas.style.backgroundSize="contain",t.currentBackground=e}}()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(t,e,i){var r={};e.exports=r;var n=t("../geometry/Bounds"),o=t("../body/Composite"),s=t("../core/Common"),a=t("../core/Events"),h=t("../geometry/Vector");!function(){var t,e;"undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout((function(){t(s.now())}),1e3/60)},e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r.create=function(t){s.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var e={controller:r,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},i=s.extend(e,t),n=!i.options.wireframes&&"transparent"===i.options.background;return i.pixiOptions=i.pixiOptions||{view:i.canvas,transparent:n,antialias:!0,backgroundColor:t.background},i.mouse=t.mouse,i.engine=t.engine,i.renderer=i.renderer||new PIXI.WebGLRenderer(i.options.width,i.options.height,i.pixiOptions),i.container=i.container||new PIXI.Container,i.spriteContainer=i.spriteContainer||new PIXI.Container,i.canvas=i.canvas||i.renderer.view,i.bounds=i.bounds||{min:{x:0,y:0},max:{x:i.options.width,y:i.options.height}},a.on(i.engine,"beforeUpdate",(function(){r.clear(i)})),i.textures={},i.sprites={},i.primitives={},i.container.addChild(i.spriteContainer),s.isElement(i.element)?i.element.appendChild(i.canvas):s.warn('No "render.element" passed, "render.canvas" was not inserted into document.'),i.canvas.oncontextmenu=function(){return!1},i.canvas.onselectstart=function(){return!1},i},r.run=function(e){!function i(n){e.frameRequestId=t(i),r.world(e)}()},r.stop=function(t){e(t.frameRequestId)},r.clear=function(t){for(var e=t.container,i=t.spriteContainer;e.children[0];)e.removeChild(e.children[0]);for(;i.children[0];)i.removeChild(i.children[0]);var r=t.sprites["bg-0"];t.textures={},t.sprites={},t.primitives={},t.sprites["bg-0"]=r,r&&e.addChildAt(r,0),t.container.addChild(t.spriteContainer),t.currentBackground=null,e.scale.set(1,1),e.position.set(0,0)},r.setBackground=function(t,e){if(t.currentBackground!==e){var i=e.indexOf&&-1!==e.indexOf("#"),r=t.sprites["bg-0"];if(i){var n=s.colorToNumber(e);t.renderer.backgroundColor=n,r&&t.container.removeChild(r)}else if(!r){var o=u(t,e);(r=t.sprites["bg-0"]=new PIXI.Sprite(o)).position.x=0,r.position.y=0,t.container.addChildAt(r,0)}t.currentBackground=e}},r.world=function(t){var e,i=t.engine.world,s=t.renderer,a=t.container,l=t.options,u=o.allBodies(i),c=o.allConstraints(i),d=[];l.wireframes?r.setBackground(t,l.wireframeBackground):r.setBackground(t,l.background);var p=t.bounds.max.x-t.bounds.min.x,f=t.bounds.max.y-t.bounds.min.y,m=p/t.options.width,g=f/t.options.height;if(l.hasBounds){for(e=0;e<u.length;e++){var v=u[e];v.render.sprite.visible=n.overlaps(v.bounds,t.bounds)}for(e=0;e<c.length;e++){var y=c[e],_=y.bodyA,b=y.bodyB,x=y.pointA,T=y.pointB;_&&(x=h.add(_.position,y.pointA)),b&&(T=h.add(b.position,y.pointB)),x&&T&&(n.contains(t.bounds,x)||n.contains(t.bounds,T))&&d.push(y)}a.scale.set(1/m,1/g),a.position.set(-t.bounds.min.x*(1/m),-t.bounds.min.y*(1/g))}else d=c;for(e=0;e<u.length;e++)r.body(t,u[e]);for(e=0;e<d.length;e++)r.constraint(t,d[e]);s.render(a)},r.constraint=function(t,e){t.engine;var i=e.bodyA,r=e.bodyB,n=e.pointA,o=e.pointB,a=t.container,h=e.render,l="c-"+e.id,u=t.primitives[l];u||(u=t.primitives[l]=new PIXI.Graphics),h.visible&&e.pointA&&e.pointB?(-1===s.indexOf(a.children,u)&&a.addChild(u),u.clear(),u.beginFill(0,0),u.lineStyle(h.lineWidth,s.colorToNumber(h.strokeStyle),1),i?u.moveTo(i.position.x+n.x,i.position.y+n.y):u.moveTo(n.x,n.y),r?u.lineTo(r.position.x+o.x,r.position.y+o.y):u.lineTo(o.x,o.y),u.endFill()):u.clear()},r.body=function(t,e){t.engine;var r=e.render;if(r.visible)if(r.sprite&&r.sprite.texture){var n="b-"+e.id,o=t.sprites[n],a=t.spriteContainer;o||(o=t.sprites[n]=i(t,e)),-1===s.indexOf(a.children,o)&&a.addChild(o),o.position.x=e.position.x,o.position.y=e.position.y,o.rotation=e.angle,o.scale.x=r.sprite.xScale||1,o.scale.y=r.sprite.yScale||1}else{var h="b-"+e.id,u=t.primitives[h],c=t.container;u||((u=t.primitives[h]=l(t,e)).initialAngle=e.angle),-1===s.indexOf(c.children,u)&&c.addChild(u),u.position.x=e.position.x,u.position.y=e.position.y,u.rotation=e.angle-u.initialAngle}};var i=function(t,e){var i=e.render.sprite.texture,r=u(t,i),n=new PIXI.Sprite(r);return n.anchor.x=e.render.sprite.xOffset,n.anchor.y=e.render.sprite.yOffset,n},l=function(t,e){var i,r=e.render,n=t.options,o=new PIXI.Graphics,a=s.colorToNumber(r.fillStyle),h=s.colorToNumber(r.strokeStyle),l=s.colorToNumber(r.strokeStyle),u=s.colorToNumber("#bbb"),c=s.colorToNumber("#CD5C5C");o.clear();for(var d=e.parts.length>1?1:0;d<e.parts.length;d++){i=e.parts[d],n.wireframes?(o.beginFill(0,0),o.lineStyle(1,u,1)):(o.beginFill(a,1),o.lineStyle(r.lineWidth,h,1)),o.moveTo(i.vertices[0].x-e.position.x,i.vertices[0].y-e.position.y);for(var p=1;p<i.vertices.length;p++)o.lineTo(i.vertices[p].x-e.position.x,i.vertices[p].y-e.position.y);o.lineTo(i.vertices[0].x-e.position.x,i.vertices[0].y-e.position.y),o.endFill(),(n.showAngleIndicator||n.showAxes)&&(o.beginFill(0,0),n.wireframes?o.lineStyle(1,c,1):o.lineStyle(1,l),o.moveTo(i.position.x-e.position.x,i.position.y-e.position.y),o.lineTo((i.vertices[0].x+i.vertices[i.vertices.length-1].x)/2-e.position.x,(i.vertices[0].y+i.vertices[i.vertices.length-1].y)/2-e.position.y),o.endFill())}return o},u=function(t,e){var i=t.textures[e];return i||(i=t.textures[e]=PIXI.Texture.fromImage(e)),i}}()},{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)}).call(this,i(14))},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));
/*!
 * @pixi/runner - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var r=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,r,n,o,s,a){if(arguments.length>8)throw new Error("max arguments reached");var h=this,l=h.name,u=h.items;this._aliasCount++;for(var c=0,d=u.length;c<d;c++)u[c][l](t,e,i,r,n,o,s,a);return u===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(r.prototype,{dispatch:{value:r.prototype.emit},run:{value:r.prototype.emit}})},function(t,e,i){"use strict";i.d(e,"a",(function(){return p})),i.d(e,"b",(function(){return d})),i.d(e,"c",(function(){return u}));var r=i(9),n=i(0),o=i(2),s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function a(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var h=function(t){function e(e,i,r,n){void 0===e&&(e=100),void 0===i&&(i=100),void 0===r&&(r=10),void 0===n&&(n=10);var o=t.call(this)||this;return o.segWidth=r,o.segHeight=n,o.width=e,o.height=i,o.build(),o}return a(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],r=[],n=this.segWidth-1,o=this.segHeight-1,s=this.width/n,a=this.height/o,h=0;h<t;h++){var l=h%this.segWidth,u=h/this.segWidth|0;e.push(l*s,u*a),i.push(l/n,u/o)}var c=n*o;for(h=0;h<c;h++){var d=h%n,p=h/n|0,f=p*this.segWidth+d,m=p*this.segWidth+d+1,g=(p+1)*this.segWidth+d,v=(p+1)*this.segWidth+d+1;r.push(f,m,g,m,v,g)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(r.b),l=function(t){function e(e,i,r){void 0===e&&(e=200),void 0===r&&(r=0);var n=t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))||this;return n.points=i,n._width=e,n.textureScale=r,n.build(),n}return a(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var n=i.data,o=r.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;for(var s=0,a=t[0],h=this._width*this.textureScale,l=t.length,u=0;u<l;u++){var c=4*u;if(this.textureScale>0){var d=a.x-t[u].x,p=a.y-t[u].y,f=Math.sqrt(d*d+p*p);a=t[u],s+=f/h}else s=u/(l-1);n[c]=s,n[c+1]=0,n[c+2]=s,n[c+3]=1}var m=0;for(u=0;u<l-1;u++){c=2*u;o[m++]=c,o[m++]=c+1,o[m++]=c+2,o[m++]=c+2,o[m++]=c+1,o[m++]=c+3}i.update(),r.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,i=t[0],r=0,n=0,o=this.buffers[0].data,s=t.length,a=0;a<s;a++){var h=t[a],l=4*a;n=-((e=a<t.length-1?t[a+1]:h).x-i.x),r=e.y-i.y;var u=Math.sqrt(r*r+n*n),c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=u,n/=u,r*=c,n*=c,o[l]=h.x+r,o[l+1]=h.y+n,o[l+2]=h.x-r,o[l+3]=h.y-n,i=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(r.b),u=function(t){function e(e,i,o){void 0===o&&(o=0);var s=this,a=new l(e.height,i,o),h=new r.c(e);return o>0&&(e.baseTexture.wrapMode=n.s.REPEAT),(s=t.call(this,a,h)||this).autoUpdate=!0,s}return a(e,t),e.prototype._render=function(e){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,e)},e}(r.a),c=function(t){function e(e,i,n){var s=this,a=new h(e.width,e.height,i,n),l=new r.c(o.t.WHITE);return(s=t.call(this,a,l)||this).texture=e,s.autoResize=!0,s}return a(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,e=this.shader.texture,i=e.width,r=e.height;!this.autoResize||t.width===i&&t.height===r||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(r.a),d=function(t){function e(e,i,n,s,a){void 0===e&&(e=o.t.EMPTY);var h=this,l=new r.b(i,n,s);l.getBuffer("aVertexPosition").static=!1;var u=new r.c(e);return(h=t.call(this,l,u,null,a)||this).autoUpdate=!0,h}return a(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(r.a),p=function(t){function e(e,i,r,n,s){void 0===i&&(i=10),void 0===r&&(r=10),void 0===n&&(n=10),void 0===s&&(s=10);var a=t.call(this,o.t.WHITE,4,4)||this;return a._origWidth=e.orig.width,a._origHeight=e.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=i,a._rightWidth=n,a._topHeight=r,a._bottomHeight=s,a.texture=e,a}return a(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,r=this._height>i?1:this._height/i;return Math.min(e,r)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(c)},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return Li}));var r=i(4),n=i(0),o=i(10),s=i(9),a=i(13),h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function l(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}var u=l((function(t){var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new n(r,o||t,s),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,s=new Array(o);n<o;n++)s[n]=r[n].fn;return s},a.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,n,o,s){var a=arguments,h=i?i+t:t;if(!this._events[h])return!1;var l,u,c=this._events[h],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,n),!0;case 5:return c.fn.call(c.context,e,r,n,o),!0;case 6:return c.fn.call(c.context,e,r,n,o,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=a[u];c.fn.apply(c.context,l)}else{var p,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,r);break;case 4:c[u].fn.call(c[u].context,e,r,n);break;default:if(!l)for(p=1,l=new Array(d-1);p<d;p++)l[p-1]=a[p];c[u].fn.apply(c[u].context,l)}}return!0},a.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,r,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||n&&!a.once||r&&a.context!==r||s(this,o);else{for(var h=0,l=[],u=a.length;h<u;h++)(a[h].fn!==e||n&&!a[h].once||r&&a[h].context!==r)&&l.push(a[h]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a})),c=l((function(t,e){!function(i){var r=e&&!e.nodeType&&e,n=t&&!t.nodeType&&t,o="object"==typeof h&&h;o.global!==o&&o.window!==o&&o.self!==o||(i=o);var s,a,l=2147483647,u=/^xn--/,c=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(t){throw RangeError(p[t])}function v(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function y(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+v((t=t.replace(d,".")).split("."),e).join(".")}function _(t){for(var e,i,r=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function b(t){return v(t,(function(t){var e="";return t>65535&&(e+=m((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=m(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function T(t,e,i){var r=0;for(t=i?f(t/700):t>>1,t+=f(t/e);t>455;r+=36)t=f(t/35);return f(r+36*t/(t+38))}function w(t){var e,i,r,n,o,s,a,h,u,c,d,p=[],m=t.length,v=0,y=128,_=72;for((i=t.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&g("not-basic"),p.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<m;){for(o=v,s=1,a=36;n>=m&&g("invalid-input"),((h=(d=t.charCodeAt(n++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||h>f((l-v)/s))&&g("overflow"),v+=h*s,!(h<(u=a<=_?1:a>=_+26?26:a-_));a+=36)s>f(l/(c=36-u))&&g("overflow"),s*=c;_=T(v-o,e=p.length+1,0==o),f(v/e)>l-y&&g("overflow"),y+=f(v/e),v%=e,p.splice(v++,0,y)}return b(p)}function E(t){var e,i,r,n,o,s,a,h,u,c,d,p,v,y,b,w=[];for(p=(t=_(t)).length,e=128,i=0,o=72,s=0;s<p;++s)(d=t[s])<128&&w.push(m(d));for(r=n=w.length,n&&w.push("-");r<p;){for(a=l,s=0;s<p;++s)(d=t[s])>=e&&d<a&&(a=d);for(a-e>f((l-i)/(v=r+1))&&g("overflow"),i+=(a-e)*v,e=a,s=0;s<p;++s)if((d=t[s])<e&&++i>l&&g("overflow"),d==e){for(h=i,u=36;!(h<(c=u<=o?1:u>=o+26?26:u-o));u+=36)b=h-c,y=36-c,w.push(m(x(c+b%y,0))),h=f(b/y);w.push(m(x(h,0))),o=T(i,v,r==n),i=0,++r}++i,++e}return w.join("")}if(s={version:"1.3.2",ucs2:{decode:_,encode:b},decode:w,encode:E,toASCII:function(t){return y(t,(function(t){return c.test(t)?"xn--"+E(t):t}))},toUnicode:function(t){return y(t,(function(t){return u.test(t)?w(t.slice(4).toLowerCase()):t}))}},r&&n)if(t.exports==r)n.exports=s;else for(a in s)s.hasOwnProperty(a)&&(r[a]=s[a]);else i.punycode=s}(h)})),d=function(t){return"string"==typeof t},p=function(t){return"object"==typeof t&&null!==t},f=function(t){return null===t},m=function(t){return null==t};function g(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var v=function(t,e,i,r){e=e||"&",i=i||"=";var n={};if("string"!=typeof t||0===t.length)return n;var o=/\+/g;t=t.split(e);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=t.length;s>0&&a>s&&(a=s);for(var h=0;h<a;++h){var l,u,c,d,p=t[h].replace(o,"%20"),f=p.indexOf(i);f>=0?(l=p.substr(0,f),u=p.substr(f+1)):(l=p,u=""),c=decodeURIComponent(l),d=decodeURIComponent(u),g(n,c)?Array.isArray(n[c])?n[c].push(d):n[c]=[n[c],d]:n[c]=d}return n},y=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},_=function(t,e,i,r){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(r){var n=encodeURIComponent(y(r))+i;return Array.isArray(t[r])?t[r].map((function(t){return n+encodeURIComponent(y(t))})).join(e):n+encodeURIComponent(y(t[r]))})).join(e):r?encodeURIComponent(y(r))+i+encodeURIComponent(y(t)):""},b=l((function(t,e){e.decode=e.parse=v,e.encode=e.stringify=_})),x=B,T=function(t,e){return B(t,!1,!0).resolve(e)},w=function(t){d(t)&&(t=B(t));if(!(t instanceof E))return E.prototype.format.call(t);return t.format()};function E(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var S=/^([a-z0-9.+-]+:)/i,A=/:[0-9]*$/,R=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,P=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),I=["'"].concat(P),O=["%","/","?",";","#"].concat(I),C=["/","?","#"],M=/^[+a-z0-9A-Z_-]{0,63}$/,D=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,N={javascript:!0,"javascript:":!0},F={javascript:!0,"javascript:":!0},L={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function B(t,e,i){if(t&&p(t)&&t instanceof E)return t;var r=new E;return r.parse(t,e,i),r}E.prototype.parse=function(t,e,i){if(!d(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),n=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(n);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(n);if(s=s.trim(),!i&&1===t.split("#").length){var a=R.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=S.exec(s);if(h){var l=(h=h[0]).toLowerCase();this.protocol=l,s=s.substr(h.length)}if(i||h||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===s.substr(0,2);!u||h&&F[h]||(s=s.substr(2),this.slashes=!0)}if(!F[h]&&(u||h&&!L[h])){for(var p,f,m=-1,g=0;g<C.length;g++){-1!==(v=s.indexOf(C[g]))&&(-1===m||v<m)&&(m=v)}-1!==(f=-1===m?s.lastIndexOf("@"):s.lastIndexOf("@",m))&&(p=s.slice(0,f),s=s.slice(f+1),this.auth=decodeURIComponent(p)),m=-1;for(g=0;g<O.length;g++){var v;-1!==(v=s.indexOf(O[g]))&&(-1===m||v<m)&&(m=v)}-1===m&&(m=s.length),this.host=s.slice(0,m),s=s.slice(m),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var _=this.hostname.split(/\./),x=(g=0,_.length);g<x;g++){var T=_[g];if(T&&!T.match(M)){for(var w="",E=0,A=T.length;E<A;E++)T.charCodeAt(E)>127?w+="x":w+=T[E];if(!w.match(M)){var P=_.slice(0,g),B=_.slice(g+1),k=T.match(D);k&&(P.push(k[1]),B.unshift(k[2])),B.length&&(s="/"+B.join(".")+s),this.hostname=P.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=c.toASCII(this.hostname));var U=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+U,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!N[l])for(g=0,x=I.length;g<x;g++){var X=I[g];if(-1!==s.indexOf(X)){var j=encodeURIComponent(X);j===X&&(j=escape(X)),s=s.split(X).join(j)}}var H=s.indexOf("#");-1!==H&&(this.hash=s.substr(H),s=s.slice(0,H));var V=s.indexOf("?");if(-1!==V?(this.search=s.substr(V),this.query=s.substr(V+1),e&&(this.query=b.parse(this.query)),s=s.slice(0,V)):e&&(this.search="",this.query={}),s&&(this.pathname=s),L[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var z=this.search||"";this.path=U+z}return this.href=this.format(),this},E.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",n=!1,o="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&p(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||L[e])&&!1!==n?(n="//"+(n||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):n||(n=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+n+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},E.prototype.resolve=function(t){return this.resolveObject(B(t,!1,!0)).format()},E.prototype.resolveObject=function(t){if(d(t)){var e=new E;e.parse(t,!1,!0),t=e}for(var i=new E,r=Object.keys(this),n=0;n<r.length;n++){var o=r[n];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var h=s[a];"protocol"!==h&&(i[h]=t[h])}return L[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!L[t.protocol]){for(var l=Object.keys(t),u=0;u<l.length;u++){var c=l[u];i[c]=t[c]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||F[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",v=i.search||"";i.path=g+v}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var y=i.pathname&&"/"===i.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=_||y||i.host&&t.pathname,x=b,T=i.pathname&&i.pathname.split("/")||[],w=(p=t.pathname&&t.pathname.split("/")||[],i.protocol&&!L[i.protocol]);if(w&&(i.hostname="",i.port=null,i.host&&(""===T[0]?T[0]=i.host:T.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),b=b&&(""===p[0]||""===T[0])),_)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,T=p;else if(p.length)T||(T=[]),T.pop(),T=T.concat(p),i.search=t.search,i.query=t.query;else if(!m(t.search)){if(w)i.hostname=i.host=T.shift(),(I=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=I.shift(),i.host=i.hostname=I.shift());return i.search=t.search,i.query=t.query,f(i.pathname)&&f(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!T.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var S=T.slice(-1)[0],A=(i.host||t.host||T.length>1)&&("."===S||".."===S)||""===S,R=0,P=T.length;P>=0;P--)"."===(S=T[P])?T.splice(P,1):".."===S?(T.splice(P,1),R++):R&&(T.splice(P,1),R--);if(!b&&!x)for(;R--;R)T.unshift("..");!b||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),A&&"/"!==T.join("/").substr(-1)&&T.push("");var I,O=""===T[0]||T[0]&&"/"===T[0].charAt(0);w&&(i.hostname=i.host=O?"":T.length?T.shift():"",(I=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=I.shift(),i.host=i.hostname=I.shift()));return(b=b||i.host&&T.length)&&!O&&T.unshift(""),T.length?i.pathname=T.join("/"):(i.pathname=null,i.path=null),f(i.pathname)&&f(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},E.prototype.parseHost=function(){var t=this.host,e=A.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};
/*!
 * @pixi/utils - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var k={parse:x,format:w,resolve:T};r.b.RETINA_PREFIX=/@([0-9\.]+)x/,r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var U,G=!1;var X=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[n.b.NORMAL_NPM]=n.b.NORMAL,t[n.b.ADD_NPM]=n.b.ADD,t[n.b.SCREEN_NPM]=n.b.SCREEN,e[n.b.NORMAL]=n.b.NORMAL_NPM,e[n.b.ADD]=n.b.ADD_NPM,e[n.b.SCREEN]=n.b.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function j(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}function H(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function V(t){return!(t&t-1||!t)}function z(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}var W=0;function Y(){return++W}var q={};function K(t,e,i){if(void 0===i&&(i=3),!q[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),q[e]=!0}}var $,Z={},Q=Object.create(null),J=Object.create(null);function tt(t,e){if(void 0===e&&(e=globalThis.location),0===t.indexOf("data:"))return"";e=e||globalThis.location,$||($=document.createElement("a")),$.href=t;var i=k.parse($.href),r=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&r&&i.protocol===e.protocol?"":"anonymous"}function et(t,e){var i=r.b.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}
/*!
 * @pixi/runner - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */!function(){function t(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||r.b.RESOLUTION,this.resize(t,e)}t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0})}();var it,rt=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,r,n,o,s,a){if(arguments.length>8)throw new Error("max arguments reached");var h=this,l=h.name,u=h.items;this._aliasCount++;for(var c=0,d=u.length;c<d;c++)u[c][l](t,e,i,r,n,o,s,a);return u===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(rt.prototype,{dispatch:{value:rt.prototype.emit},run:{value:rt.prototype.emit}}),
/*!
 * @pixi/ticker - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
r.b.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(it||(it={}));var nt,ot=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),st=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ot(null,null,1/0),this.deltaMS=1/r.b.TARGET_FPMS,this.elapsedMS=1/r.b.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=it.NORMAL),this._addListener(new ot(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=it.NORMAL),this._addListener(new ot(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*r.b.TARGET_FPMS;for(var n=this._head,o=n.next;o;)o=o.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,r.b.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),at=2*Math.PI;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(nt||(nt={}));var ht=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),lt=[new ht,new ht,new ht,new ht],ut=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=nt.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.intersects=function(t,e){if(!e){var i=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=i)return!1;var r=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>r}var n=this.left,o=this.right,s=this.top,a=this.bottom;if(o<=n||a<=s)return!1;var h=lt[0].set(t.left,t.top),l=lt[1].set(t.left,t.bottom),u=lt[2].set(t.right,t.top),c=lt[3].set(t.right,t.bottom);if(u.x<=h.x||l.y<=h.y)return!1;var d=Math.sign(e.a*e.d-e.b*e.c);if(0===d)return!1;if(e.apply(h,h),e.apply(l,l),e.apply(u,u),e.apply(c,c),Math.max(h.x,l.x,u.x,c.x)<=n||Math.min(h.x,l.x,u.x,c.x)>=o||Math.max(h.y,l.y,u.y,c.y)<=s||Math.min(h.y,l.y,u.y,c.y)>=a)return!1;var p=d*(l.y-h.y),f=d*(h.x-l.x),m=p*n+f*s,g=p*o+f*s,v=p*n+f*a,y=p*o+f*a;if(Math.max(m,g,v,y)<=p*h.x+f*h.y||Math.min(m,g,v,y)>=p*c.x+f*c.y)return!1;var _=d*(h.y-u.y),b=d*(u.x-h.x),x=_*n+b*s,T=_*o+b*s,w=_*n+b*a,E=_*o+b*a;return!(Math.max(x,T,w,E)<=_*h.x+b*h.y||Math.min(x,T,w,E)>=_*c.x+b*c.y)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),ct=function(){function t(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),this._x=i,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),dt=function(){function t(t,e,i,r,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,r,n,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new ht;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new ht;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,i,r,n,o,s,a,h){return this.a=Math.cos(s+h)*n,this.b=Math.sin(s+h)*n,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,o=t.pivot,s=-Math.atan2(-r,n),a=Math.atan2(i,e),h=Math.abs(s+a);return h<1e-5||Math.abs(at-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=a),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*i+o.y*n),t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),pt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ft=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],mt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],gt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],vt=[],yt=[],_t=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];vt.push(e);for(var i=0;i<16;i++)for(var r=_t(pt[t]*pt[i]+mt[t]*ft[i]),n=_t(ft[t]*pt[i]+gt[t]*ft[i]),o=_t(pt[t]*mt[i]+mt[t]*gt[i]),s=_t(ft[t]*mt[i]+gt[t]*gt[i]),a=0;a<16;a++)if(pt[a]===r&&ft[a]===n&&mt[a]===o&&gt[a]===s){e.push(a);break}}for(t=0;t<16;t++){var h=new dt;h.set(pt[t],ft[t],mt[t],gt[t],0,0),yt.push(h)}}();var bt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return pt[t]},uY:function(t){return ft[t]},vX:function(t){return mt[t]},vY:function(t){return gt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return vt[t][e]},sub:function(t,e){return vt[t][bt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?bt.S:bt.N:2*Math.abs(e)<=Math.abs(t)?t>0?bt.E:bt.W:e>0?t>0?bt.SE:bt.SW:t>0?bt.NE:bt.NW},matrixAppendRotationInv:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=yt[bt.inv(e)];n.tx=i,n.ty=r,t.append(n)}};!function(){function t(){this.worldTransform=new dt,this.localTransform=new dt,this.position=new ct(this.onChange,this,0,0),this.scale=new ct(this.onChange,this,1,1),this.pivot=new ct(this.onChange,this,0,0),this.skew=new ct(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t}(),
/*!
 * @pixi/core - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
r.b.PREFER_ENV=r.a.any?n.g.WEBGL:n.g.WEBGL2,r.b.STRICT_TEXTURE_CACHE=!1;var xt=[];function Tt(t,e){if(!t)return null;var i="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(i=r[1].toLowerCase())}for(var n=xt.length-1;n>=0;--n){var o=xt[n];if(o.test&&o.test(t,i))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var wt=function(t,e){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Et(t,e){function i(){this.constructor=t}wt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var St=function(){return(St=Object.assign||function(t){for(var e,i=arguments,r=1,n=arguments.length;r<n;r++)for(var o in e=i[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var At=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new rt("setRealSize"),this.onUpdate=new rt("update"),this.onError=new rt("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),Rt=function(t){function e(e,i){var r=this,n=i||{},o=n.width,s=n.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return(r=t.call(this,o,s)||this).data=e,r}return Et(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.a.UNPACK);var o=e.realWidth,s=e.realHeight;return i.width===o&&i.height===s?r.texSubImage2D(e.target,0,0,0,o,s,e.format,i.type,this.data):(i.width=o,i.height=s,r.texImage2D(e.target,0,i.internalFormat,o,s,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(At),Pt={scaleMode:n.p.NEAREST,format:n.h.RGBA,alphaMode:n.a.NPM},It=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var o=t.call(this)||this,s=(i=i||{}).alphaMode,a=i.mipmap,h=i.anisotropicLevel,l=i.scaleMode,u=i.width,c=i.height,d=i.wrapMode,p=i.format,f=i.type,m=i.target,g=i.resolution,v=i.resourceOptions;return!e||e instanceof At||((e=Tt(e,v)).internal=!0),o.resolution=g||r.b.RESOLUTION,o.width=Math.round((u||0)*o.resolution)/o.resolution,o.height=Math.round((c||0)*o.resolution)/o.resolution,o._mipmap=void 0!==a?a:r.b.MIPMAP_TEXTURES,o.anisotropicLevel=void 0!==h?h:r.b.ANISOTROPIC_LEVEL,o._wrapMode=d||r.b.WRAP_MODE,o._scaleMode=void 0!==l?l:r.b.SCALE_MODE,o.format=p||n.h.RGBA,o.type=f||n.r.UNSIGNED_BYTE,o.target=m||n.q.TEXTURE_2D,o.alphaMode=void 0!==s?s:n.a.UNPACK,o.uid=Y(),o.touched=0,o.isPowerOfTwo=!1,o._refreshPOT(),o._glTextures={},o.dirtyId=0,o.dirtyStyleId=0,o.cacheId=null,o.valid=u>0&&c>0,o.textureCacheIds=[],o.destroyed=!1,o.resource=null,o._batchEnabled=0,o._batchLocation=0,o.parentTextureArray=null,o.setResource(e),o}return Et(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=V(this.realWidth)&&V(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete J[this.cacheId],delete Q[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,i,n){void 0===n&&(n=r.b.STRICT_TEXTURE_CACHE);var o="string"==typeof t,s=null;if(o)s=t;else{if(!t._pixiId){var a=i&&i.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+Y()}s=t._pixiId}var h=J[s];if(o&&n&&!h)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return h||((h=new e(t,i)).cacheId=s,e.addToCache(h,s)),h},e.fromBuffer=function(t,i,r,o){t=t||new Float32Array(i*r*4);var s=new Rt(t,{width:i,height:r}),a=t instanceof Float32Array?n.r.FLOAT:n.r.UNSIGNED_BYTE;return new e(s,Object.assign(Pt,o||{width:i,height:r,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),J[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),J[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=J[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete J[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete J[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(u),Ot=function(t){function e(e,i){var r=this,n=i||{},o=n.width,s=n.height;(r=t.call(this,o,s)||this).items=[],r.itemDirtyIds=[];for(var a=0;a<e;a++){var h=new It;r.items.push(h),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return Et(e,t),e.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof At?this.addResourceAt(t[i],i):this.addResourceAt(Tt(t[i],e),i))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],i=e.realWidth,r=e.realHeight;return t.resize(i,r),Promise.resolve(t)})),this._load},e}(At),Ct=function(t){function e(e,i){var r,n,o=this,s=i||{},a=s.width,h=s.height;return Array.isArray(e)?(r=e,n=e.length):n=e,o=t.call(this,n,{width:a,height:h})||this,r&&o.initFromArray(r,i),o}return Et(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=n.q.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,i){var r=this.length,n=this.itemDirtyIds,o=this.items,s=t.gl;i.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,r,0,e.format,i.type,null);for(var a=0;a<r;a++){var h=o[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,i.type,h.resource.source))}return!0},e}(Ot),Mt=function(t){function e(e){var i=this,r=e,n=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(i=t.call(this,n,o)||this).source=e,i.noSubImage=!1,i}return Et(e,t),e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=tt(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,r){var o=t.gl,s=e.realWidth,a=e.realHeight;if((r=r||this.source)instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.a.UNPACK),this.noSubImage||e.target!==o.TEXTURE_2D||i.width!==s||i.height!==a?(i.width=s,i.height=a,o.texImage2D(e.target,0,i.internalFormat,e.format,i.type,r)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,i.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(i,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(At),Dt=function(t){function e(e){return t.call(this,e)||this}return Et(e,t),e.test=function(t){var e=globalThis.OffscreenCanvas;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(Mt),Nt=function(t){function e(i,r){var o=this,s=r||{},a=s.width,h=s.height,l=s.autoLoad,u=s.linkBaseTexture;if(i&&i.length!==e.SIDES)throw new Error("Invalid length. Got "+i.length+", expected 6");o=t.call(this,6,{width:a,height:h})||this;for(var c=0;c<e.SIDES;c++)o.items[c].target=n.q.TEXTURE_CUBE_MAP_POSITIVE_X+c;return o.linkBaseTexture=!1!==u,i&&o.initFromArray(i,r),!1!==l&&o.load(),o}return Et(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=n.q.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,i){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=n.q.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,i,r){for(var n=this.itemDirtyIds,o=0;o<e.SIDES;o++){var s=this.items[o];n[o]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),n[o]=s.dirtyId):n[o]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,i.realWidth,i.realHeight,0,i.format,r.type,null),n[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(Ot),Ft=function(t){function e(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var o=new Image;Mt.crossOrigin(o,e,i.crossorigin),o.src=e,e=o}return n=t.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(void 0!==i.createBitmap?i.createBitmap:r.b.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,n.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,n.bitmap=null,n._load=null,!1!==i.autoLoad&&n.load(),n}return Et(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,i){var r=e.source;e.url=r.src;var n=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?n():(r.onload=n,r.onerror=function(t){i(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(r){return i(r,0,0,e.width,e.height,{premultiplyAlpha:t.alphaMode===n.a.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,i,r){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,r,this.bitmap),!this.preserveBitmap){var n=!0,o=i._glTextures;for(var s in o){var a=o[s];if(a!==r&&a.dirtyId!==i.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(Mt),Lt=function(t){function e(e,i){var r=this;return i=i||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=i.scale||1,r._overrideWidth=i.width,r._overrideHeight=i.height,r._resolve=null,r._crossorigin=i.crossorigin,r._load=null,!1!==i.autoLoad&&r.load(),r}return Et(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(i){if(t._resolve=function(){t.resize(t.source.width,t.source.height),i(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;Mt.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(i){t._resolve&&(e.onerror=null,t.onError.emit(i))},e.onload=function(){if(t._resolve){var i=e.width,r=e.height;if(!i||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var n=i*t.scale,o=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(n=t._overrideWidth||t._overrideHeight/r*i,o=t._overrideHeight||t._overrideWidth/i*r),n=Math.round(n),o=Math.round(o);var s=t.source;s.width=n,s.height=o,s._pixiId="canvas_"+Y(),s.getContext("2d").drawImage(e,0,0,i,r,0,0,n,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),r={};return i&&(r[i[1]]=Math.round(parseFloat(i[3])),r[i[5]]=Math.round(parseFloat(i[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,i){return"svg"===i||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Mt),Bt=function(t){function e(i,r){var n=this;if(r=r||{},!(i instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof i&&(i=[i]);var s=i[0].src||i[0];Mt.crossOrigin(o,s,r.crossorigin);for(var a=0;a<i.length;++a){var h=document.createElement("source"),l=i[a],u=l.src,c=l.mime,d=(u=u||i[a]).split("?").shift().toLowerCase(),p=d.slice(d.lastIndexOf(".")+1);c=c||e.MIME_TYPES[p]||"video/"+p,h.src=u,h.type=c,o.appendChild(h)}i=o}return(n=t.call(this,i)||this).noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=r.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=!1!==r.autoPlay,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),!1!==r.autoLoad&&n.load(),n}return Et(e,t),e.prototype.update=function(e){if(!this.destroyed){var i=st.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(st.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(st.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(st.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(st.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(st.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,i){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Mt),kt=function(t){function e(e){return t.call(this,e)||this}return Et(e,t),e.test=function(t){return!!globalThis.createImageBitmap&&t instanceof ImageBitmap},e}(Mt);xt.push(Ft,kt,Dt,Bt,Lt,Rt,Nt,Ct);var Ut={__proto__:null,Resource:At,BaseImageResource:Mt,INSTALLED:xt,autoDetectResource:Tt,AbstractMultiResource:Ot,ArrayResource:Ct,BufferResource:Rt,CanvasResource:Dt,CubeResource:Nt,ImageResource:Ft,SVGResource:Lt,VideoResource:Bt,ImageBitmapResource:kt},Gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Et(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.a.UNPACK);var o=e.realWidth,s=e.realHeight;return i.width===o&&i.height===s?r.texSubImage2D(e.target,0,0,0,o,s,e.format,i.type,this.data):(i.width=o,i.height=s,r.texImage2D(e.target,0,i.internalFormat,o,s,0,e.format,i.type,this.data)),!0},e}(Rt),Xt=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new rt("disposeFramebuffer"),this.multisample=n.l.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new It(null,{scaleMode:n.p.NEAREST,resolution:1,mipmap:n.k.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new It(new Gt(null,{width:this.width,height:this.height}),{scaleMode:n.p.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:n.k.OFF,format:n.h.DEPTH_COMPONENT,type:n.r.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var r=this.colorTextures[i],n=r.resolution;r.setSize(t/n,e/n)}if(this.depthTexture){n=this.depthTexture.resolution;this.depthTexture.setSize(t/n,e/n)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),jt=function(t){function e(e){void 0===e&&(e={});var i=this;if("number"==typeof e){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];e={width:r,height:o,scaleMode:s,resolution:a}}return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:n.l.NONE,(i=t.call(this,null,e)||this).mipmap=n.k.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Xt(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return Et(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(It),Ht=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,i){var r=e.width,n=e.height;if(i){var o=t.width/2/r,s=t.height/2/n,a=t.x/r+o,h=t.y/n+s;i=bt.add(i,bt.NW),this.x0=a+o*bt.uX(i),this.y0=h+s*bt.uY(i),i=bt.add(i,2),this.x1=a+o*bt.uX(i),this.y1=h+s*bt.uY(i),i=bt.add(i,2),this.x2=a+o*bt.uX(i),this.y2=h+s*bt.uY(i),i=bt.add(i,2),this.x3=a+o*bt.uX(i),this.y3=h+s*bt.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),Vt=new Ht;function zt(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var Wt=function(t){function e(i,r,n,o,s,a){var h=t.call(this)||this;if(h.noFrame=!1,r||(h.noFrame=!0,r=new ut(0,0,1,1)),i instanceof e&&(i=i.baseTexture),h.baseTexture=i,h._frame=r,h.trim=o,h.valid=!1,h._uvs=Vt,h.uvMatrix=null,h.orig=n||r,h._rotate=Number(s||0),!0===s)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=a?new ht(a.x,a.y):new ht(0,0),h._updateID=0,h.textureCacheIds=[],i.valid?h.noFrame?i.valid&&h.onBaseTextureUpdated(i):h.frame=r:i.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&i.on("update",h.onBaseTextureUpdated,h),h}return Et(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&i.url&&Q[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===Vt&&(this._uvs=new Ht),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,n){void 0===i&&(i={}),void 0===n&&(n=r.b.STRICT_TEXTURE_CACHE);var o="string"==typeof t,s=null;if(o)s=t;else if(t instanceof It){if(!t.cacheId){var a=i&&i.pixiIdPrefix||"pixiid";t.cacheId=a+"-"+Y(),It.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){a=i&&i.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+Y()}s=t._pixiId}var h=Q[s];if(o&&n&&!h)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return h||t instanceof It?!h&&t instanceof It&&(h=new e(t),e.addToCache(h,s)):(i.resolution||(i.resolution=et(t)),(h=new e(new It(t,i))).baseTexture.cacheId=s,It.addToCache(h.baseTexture,s),e.addToCache(h,s)),h},e.fromURL=function(t,i){var r=Object.assign({autoLoad:!1},null==i?void 0:i.resourceOptions),n=e.from(t,Object.assign({resourceOptions:r},i),!1),o=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):o.load().then((function(){return Promise.resolve(n)}))},e.fromBuffer=function(t,i,r,n){return new e(It.fromBuffer(t,i,r,n))},e.fromLoader=function(t,i,n,o){var s=new It(t,Object.assign({scaleMode:r.b.SCALE_MODE,resolution:et(i)},o)),a=s.resource;a instanceof Ft&&(a.url=i);var h=new e(s);return n||(n=i),It.addToCache(h.baseTexture,n),e.addToCache(h,n),n!==i&&(It.addToCache(h.baseTexture,i),e.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise((function(t){h.baseTexture.once("loaded",(function(){return t(h)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Q[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),Q[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=Q[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete Q[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)Q[t.textureCacheIds[r]]===t&&delete Q[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,o=e+r>this.baseTexture.width,s=i+n>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",h="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,l="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+l)}this.valid=r&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new It),zt(e._EMPTY),zt(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=document.createElement("canvas"),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),e._WHITE=new e(new It(new Dt(t))),zt(e._WHITE),zt(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(u),Yt=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return Et(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,i){void 0===i&&(i=!0);var r=this.baseTexture.resolution,n=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=n>0&&o>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(n,o),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var i=arguments,r=[],n=1;n<arguments.length;n++)r[n-1]=i[n];return"number"==typeof t&&(K("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new jt(t))},e}(Wt),qt=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,i){void 0===i&&(i=n.l.NONE);var r=new jt(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new Yt(r)},t.prototype.getOptimalTexture=function(t,e,i,r){var o;void 0===i&&(i=1),void 0===r&&(r=n.l.NONE),t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?o=r>1?-r:-1:(o=((65535&(t=H(t)))<<16|65535&(e=H(e)))>>>0,r>1&&(o+=4294967296*r)),this.texturePool[o]||(this.texturePool[o]=[]);var s=this.texturePool[o].pop();return s||(s=this.createTexture(t,e,r)),s.filterPoolKey=o,s.setResolution(i),s},t.prototype.getFilterTexture=function(t,e,i){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||n.l.NONE);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),Kt=function(){function t(t,e,i,r,o,s,a){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===r&&(r=n.r.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=r,this.stride=o,this.start=s,this.instance=a}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,i,r,n,o){return new t(e,i,r,n,o)},t}(),$t=0,Zt=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=$t++,this.disposeRunner=new rt("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===n.d.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?n.d.ELEMENT_ARRAY_BUFFER:n.d.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),Qt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Jt={5126:4,5123:2,5121:1},te=0,ee={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},ie=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=te++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new rt("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,i,r,n,o,s,a){if(void 0===i&&(i=0),void 0===r&&(r=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Zt||(e instanceof Array&&(e=new Float32Array(e)),e=new Zt(e));var h=t.split("|");if(h.length>1){for(var l=0;l<h.length;l++)this.addAttribute(h[l],e,i,r,n);return this}var u=this.buffers.indexOf(e);return-1===u&&(this.buffers.push(e),u=this.buffers.length-1),this.attributes[t]=new Kt(u,i,r,n,o,s,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof Zt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Zt(t)),t.type=n.d.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],r=new Zt;for(t in this.attributes){var n=this.attributes[t],o=this.buffers[n.buffer];e.push(o.data),i.push(n.size*Jt[n.type]/4),n.buffer=0}for(r.data=function(t,e){for(var i=0,r=0,n={},o=0;o<t.length;o++)r+=e[o],i+=t[o].length;var s=new ArrayBuffer(4*i),a=null,h=0;for(o=0;o<t.length;o++){var l=e[o],u=t[o],c=j(u);n[c]||(n[c]=new Qt[c](s)),a=n[c];for(var d=0;d<u.length;d++){a[(d/l|0)*r+h+d%l]=u[d]}h+=l}return new Float32Array(s)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,i=0;i<this.buffers.length;i++)e.buffers[i]=new Zt(this.buffers[i].data.slice(0));for(var i in this.attributes){var r=this.attributes[i];e.attributes[i]=new Kt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=n.d.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var i,r=new t,o=[],s=[],a=[],h=0;h<e.length;h++){i=e[h];for(var l=0;l<i.buffers.length;l++)s[l]=s[l]||0,s[l]+=i.buffers[l].data.length,a[l]=0}for(h=0;h<i.buffers.length;h++)o[h]=new(ee[j(i.buffers[h].data)])(s[h]),r.buffers[h]=new Zt(o[h]);for(h=0;h<e.length;h++){i=e[h];for(l=0;l<i.buffers.length;l++)o[l].set(i.buffers[l].data,a[l]),a[l]+=i.buffers[l].data.length}if(r.attributes=i.attributes,i.indexBuffer){r.indexBuffer=r.buffers[i.buffers.indexOf(i.indexBuffer)],r.indexBuffer.type=n.d.ELEMENT_ARRAY_BUFFER;var u=0,c=0,d=0,p=0;for(h=0;h<i.buffers.length;h++)if(i.buffers[h]!==i.indexBuffer){p=h;break}for(var h in i.attributes){var f=i.attributes[h];(0|f.buffer)===p&&(c+=f.size*Jt[f.type]/4)}for(h=0;h<e.length;h++){var m=e[h].indexBuffer.data;for(l=0;l<m.length;l++)r.indexBuffer.data[l+d]+=u;u+=e[h].buffers[p].data.length/c,d+=m.length}}return r},t}(),re=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return Et(e,t),e}(ie),ne=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Zt(e.vertices),e.uvBuffer=new Zt(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return Et(e,t),e.prototype.map=function(t,e){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(ie),oe=0,se=function(){function t(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=oe++,this.static=!!e,this.ubo=!!i,t instanceof Zt?(this.buffer=t,this.buffer.type=n.d.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Zt(new Float32Array(1)),this.buffer.type=n.d.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,i,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(i,r)},t.from=function(e,i,r){return new t(e,i,r)},t.uboFrom=function(e,i){return new t(e,null==i||i,!0)},t}(),ae=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=n.l.NONE,this.sourceFrame=new ut,this.destinationFrame=new ut,this.bindingSourceFrame=new ut,this.bindingDestinationFrame=new ut,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),he=[new ht,new ht,new ht,new ht],le=new dt,ue=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new qt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new re,this.quadUv=new ne,this.tempRect=new ut,this.activeState={},this.globalUniforms=new se({outputFrame:new ut,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var i,r,n=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new ae,a=this.renderer.renderTexture,h=e[0].resolution,l=e[0].multisample,u=e[0].padding,c=e[0].autoFit,d=null===(i=e[0].legacy)||void 0===i||i,p=1;p<e.length;p++){var f=e[p];h=Math.min(h,f.resolution),l=Math.min(l,f.multisample),u=this.useMaxPadding?Math.max(u,f.padding):u+f.padding,c=c&&f.autoFit,d=d||null===(r=f.legacy)||void 0===r||r}1===o.length&&(this.defaultFilterStack[0].renderTexture=a.current),o.push(s),s.resolution=h,s.multisample=l,s.legacy=d,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u);var m=this.tempRect.copyFrom(a.sourceFrame);n.projection.transform&&this.transformAABB(le.copyFrom(n.projection.transform).invert(),m),c?(s.sourceFrame.fit(m),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(m)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,a.current?a.current.resolution:n.resolution,a.sourceFrame,a.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,h,l),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var g=this.tempRect;g.x=0,g.y=0,g.width=s.sourceFrame.width,g.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,g),n.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var o=r.inputSize,s=r.inputPixel,a=r.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],s[0]=Math.round(o[0]*e.resolution),s[1]=Math.round(o[1]*e.resolution),s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=e.sourceFrame.width*o[2]-.5*s[2],a[3]=e.sourceFrame.height*o[3]-.5*s[3],e.legacy){var h=r.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,l.renderTexture,n.e.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var u=e.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,e.resolution);c.filterFrame=u.filterFrame;var d=0;for(d=0;d<i.length-1;++d){1===d&&e.multisample>1&&((c=this.getOptimalFilterTexture(u.width,u.height,e.resolution)).filterFrame=u.filterFrame),i[d].apply(this,u,c,n.e.CLEAR,e);var p=u;u=c,c=p}i[d].apply(this,u,l.renderTexture,n.e.BLEND,e),d>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=n.e.CLEAR);var i=this.renderer,r=i.renderTexture,o=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var s=this.tempRect;s.x=0,s.y=0,s.width=t.filterFrame.width,s.height=t.filterFrame.height,r.bind(t,t.filterFrame,s)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&o.stateId||this.forceClear;(e===n.e.CLEAR||e===n.e.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,i,r){var o=this.renderer;o.state.set(t.state),this.bindAndClear(i,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(n.f.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(n.f.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,r=i.sourceFrame,n=i.destinationFrame,o=e._texture.orig,s=t.set(n.width,0,0,n.height,r.x,r.y),a=e.worldTransform.copyTo(dt.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,i,r){return void 0===i&&(i=1),void 0===r&&(r=n.l.NONE),this.texturePool.getOptimalTexture(t,e,i,r)},t.prototype.getFilterTexture=function(t,e,i){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||n.l.NONE);return o.filterFrame=t.filterFrame,o},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var i=he[0],r=he[1],n=he[2],o=he[3];i.set(e.left,e.top),r.set(e.left,e.bottom),n.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(i,i),t.apply(r,r),t.apply(n,n),t.apply(o,o);var s=Math.min(i.x,r.x,n.x,o.x),a=Math.min(i.y,r.y,n.y,o.y),h=Math.max(i.x,r.x,n.x,o.x),l=Math.max(i.y,r.y,n.y,o.y);e.x=s,e.y=a,e.width=h-s,e.height=l-a},t.prototype.roundFrame=function(t,e,i,r,n){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(n){var o=n.a,s=n.b,a=n.c,h=n.d;if((Math.abs(s)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}(n=n?le.copyFrom(n):le.identity()).translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)}},t}(),ce=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),de=function(){function t(t){this.renderer=t,this.emptyRenderer=new ce(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,i,r){for(var n=t.elements,o=t.ids,s=t.count,a=0,h=0;h<s;h++){var l=n[h],u=l._batchLocation;if(u>=0&&u<r&&e[u]===l)o[h]=u;else for(;a<r;){var c=e[a];if(!c||c._batchEnabled!==i||c._batchLocation!==a){o[h]=a,l._batchLocation=a,e[a]=l;break}a++}}},t.prototype.destroy=function(){this.renderer=null},t}(),pe=0,fe=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=pe++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=pe++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var i;if(r.b.PREFER_ENV>=n.g.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),me=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=n.l.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},ge=new ut,ve=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Xt(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ut,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;r.b.PREFER_ENV===n.g.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,i){void 0===i&&(i=0);var r=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var s=t.colorTextures[o];this.renderer.texture.unbind(s.parentTextureArray||s)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var a=e.width>>i,h=e.height>>i,l=a/e.width;this.setViewport(e.x*l,e.y*l,a,h)}else{a=t.width>>i,h=t.height>>i;this.setViewport(0,0,a,h)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,i,r){var n=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),r=Math.round(r),n.width===i&&n.height===r&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=i,n.height=r,this.gl.viewport(t,e,i,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,i,r,o){void 0===o&&(o=n.c.COLOR|n.c.DEPTH);var s=this.gl;s.clearColor(t,e,i,r),s.clear(o)},t.prototype.initFramebuffer=function(t){var e=this.gl,i=new me(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,n=r.length;e.drawBuffers||(n=Math.min(n,1));for(var o=0;o<n;o++){var s=r[o],a=s.parentTextureArray||s;this.renderer.texture.bind(a,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var i=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures,o=n.length;i.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var s=[],a=0;a<o;a++){var h=n[a],l=h.parentTextureArray||h;this.renderer.texture.bind(l,0),0===a&&r.msaaBuffer||(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+a,h.target,l._glTextures[this.CONTEXT_UID].texture,e),s.push(i.COLOR_ATTACHMENT0+a))}if((s.length>1&&i.drawBuffers(s),t.depthTexture)&&this.writeDepthTexture){var u=t.depthTexture;this.renderer.texture.bind(u,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,i=n.l.NONE;if(t<=1||null===e)return i;for(var r=0;r<e.length;r++)if(e[r]<=t){i=e[r];break}return 1===i&&(i=n.l.NONE),i},t.prototype.blit=function(t,e,i){var r=this.current,n=this.renderer,o=this.gl,s=this.CONTEXT_UID;if(2===n.context.webGLVersion&&r){var a=r.glFramebuffers[s];if(a){if(!t){if(!a.msaaBuffer)return;var h=r.colorTextures[0];if(!h)return;a.blitFramebuffer||(a.blitFramebuffer=new Xt(r.width,r.height),a.blitFramebuffer.addColorTexture(0,h)),(t=a.blitFramebuffer).colorTextures[0]!==h&&(t.colorTextures[0]=h,t.dirtyId++,t.dirtyFormat++),t.width===r.width&&t.height===r.height||(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||((e=ge).width=r.width,e.height=r.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,a.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var i=t.width,r=t.height,n=this.gl,o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),e.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,e.multisample,n.DEPTH24_STENCIL8,i,r):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,r),e.stencil=o,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ut},t.prototype.destroy=function(){this.renderer=null},t}(),ye={5126:4,5123:2,5121:1},_e=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var i=this.renderer.context.extensions.vertexArrayObject;r.b.PREFER_ENV===n.g.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var o=t.getExtension("ANGLE_instanced_arrays");o?(t.vertexAttribDivisor=function(t,e){return o.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,r,n){return o.drawElementsInstancedANGLE(t,e,i,r,n)},t.drawArraysInstanced=function(t,e,i,r){return o.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},n=!0);var o=r[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var r=t.buffers[i];e.update(r)}},t.prototype.checkCompatibility=function(t,e){var i=t.attributes,r=e.attributeData;for(var n in r)if(!i[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},t.prototype.getSignature=function(t,e){var i=t.attributes,r=e.attributeData,n=["g",t.id];for(var o in i)r[o]&&n.push(o,r[o].location);return n.join("-")},t.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0);var r=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,s=e.program;s.glPrograms[n]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,s);var a=this.getSignature(t,s),h=t.glVertexArrayObjects[this.CONTEXT_UID],l=h[a];if(l)return h[s.id]=l,l;var u=t.buffers,c=t.attributes,d={},p={};for(var f in u)d[f]=0,p[f]=0;for(var f in c)!c[f].size&&s.attributeData[f]?c[f].size=s.attributeData[f].size:c[f].size||console.warn("PIXI Geometry attribute '"+f+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[f].buffer]+=c[f].size*ye[c[f].type];for(var f in c){var m=c[f],g=m.size;void 0===m.stride&&(d[m.buffer]===g*ye[m.type]?m.stride=0:m.stride=d[m.buffer]),void 0===m.start&&(m.start=p[m.buffer],p[m.buffer]+=g*ye[m.type])}l=r.createVertexArray(),r.bindVertexArray(l);for(var v=0;v<u.length;v++){var y=u[v];o.bind(y),i&&y._glBuffers[n].refCount++}return this.activateVao(t,s),this._activeVao=l,h[s.id]=l,h[a]=l,l},t.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,o=t.buffers,s=null===(i=this.renderer)||void 0===i?void 0:i.buffer;if(t.disposeRunner.remove(this),r){if(s)for(var a=0;a<o.length;a++){var h=o[a]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,0!==h.refCount||e||s.dispose(o[a],e))}if(!e)for(var l in r)if("g"===l[0]){var u=r[l];this._activeVao===u&&this.unbind(),n.deleteVertexArray(u)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},t.prototype.activateVao=function(t,e){var i=this.gl,r=this.CONTEXT_UID,n=this.renderer.buffer,o=t.buffers,s=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);var a=null;for(var h in s){var l=s[h],u=o[l.buffer],c=u._glBuffers[r];if(e.attributeData[h]){a!==c&&(n.bind(u),a=c);var d=e.attributeData[h].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(d,1)}}}},t.prototype.draw=function(t,e,i,r){var n=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(i||0)*s,r||1):n.drawElements(t,e||o.indexBuffer.data.length,a,(i||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,i,e||o.getSize(),r||1):n.drawArrays(t,i,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),be=function(){function t(t){void 0===t&&(t=null),this.type=n.j.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=r.b.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=n.j.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function xe(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),r}function Te(t,e){var i=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),r=t.getShaderInfoLog(e),n=r.split("\n"),o={},s=n.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||o[t])&&(o[t]=!0,!0)})),a=[""];s.forEach((function(t){i[t-1]="%c"+i[t-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var h=i.join("\n");a[0]=h,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function we(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}function Ee(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return we(2*e);case"bvec3":return we(3*e);case"bvec4":return we(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Se,Ae={},Re=Ae;function Pe(){if(!Se){Se=n.m.MEDIUM;var t=function(){if(Re===Ae||Re&&Re.isContextLost()){var t=document.createElement("canvas"),e=void 0;r.b.PREFER_ENV>=n.g.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Re=e}return Re}();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Se=e.precision?n.m.HIGH:n.m.MEDIUM}}return Se}function Ie(t,e,i){if("precision"!==t.substring(0,9)){var r=e;return e===n.m.HIGH&&i!==n.m.HIGH&&(r=n.m.MEDIUM),"precision "+r+" float;\n"+t}return i!==n.m.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var Oe={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Ce(t){return Oe[t]}var Me=null,De={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Ne(t,e){if(!Me){var i=Object.keys(De);Me={};for(var r=0;r<i.length;++r){var n=i[r];Me[t[n]]=De[n]}}return Me[e]}var Fe=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Le={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Be={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var ke,Ue=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Ge(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}var Xe=0,je={},He=function(){function t(e,i,o){void 0===o&&(o="pixi-shader"),this.id=Xe++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(o=o.replace(/\s+/g,"-"),je[o]?(je[o]++,o+="-"+je[o]):je[o]=1,this.vertexSrc="#define SHADER_NAME "+o+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+o+"\n"+this.fragmentSrc,this.vertexSrc=Ie(this.vertexSrc,r.b.PRECISION_VERTEX,n.m.HIGH),this.fragmentSrc=Ie(this.fragmentSrc,r.b.PRECISION_FRAGMENT,Pe())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,i,r){var n=e+i,o=Z[n];return o||(Z[n]=o=new t(e,i,r)),o},t}(),Ve=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof se?e:new se(e):new se({})}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var r=e.uniforms[i];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,i,r){return new t(He.from(e,i),r)},t}(),ze=function(){function t(){this.data=0,this.blendMode=n.b.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==n.b.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),We=function(t){function e(i,n,o){var s=this,a=He.from(i||e.defaultVertexSrc,n||e.defaultFragmentSrc);return(s=t.call(this,a,o)||this).padding=0,s.resolution=r.b.FILTER_RESOLUTION,s.multisample=r.b.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new ze,s}return Et(e,t),e.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Ve),Ye=new dt,qe=function(){function t(t,e){this._texture=t,this.mapCoord=new dt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],o=t[r+1];e[r]=n*i.a+o*i.c+i.tx,e[r+1]=n*i.b+o*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(Ye.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Ye));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,h=this.clampOffset;return s[0]=(e._frame.x+a+h)/o.width,s[1]=(e._frame.y+a+h)/o.height,s[2]=(e._frame.x+e._frame.width-a+h)/o.width,s[3]=(e._frame.y+e._frame.height-a+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),Ke=function(t){function e(e,i,r){var n=this,o=null;return"string"!=typeof e&&void 0===i&&void 0===r&&(o=e,e=void 0,i=void 0,r=void 0),(n=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",i||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=o,n.maskMatrix=new dt,n}return Et(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,i,r){var n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new qe(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,r))},e}(We),$e=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var r=this.maskDataPool.pop()||new be;r.pooled=!0,r.maskObject=e,i=r}var o=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(o),i.autoDetect&&this.detect(i),i._target=t,i.type!==n.j.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case n.j.SCISSOR:this.renderer.scissor.push(i);break;case n.j.STENCIL:this.renderer.stencil.push(i);break;case n.j.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i)}i.type===n.j.SPRITE&&this.maskStack.push(i)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case n.j.SCISSOR:this.renderer.scissor.pop();break;case n.j.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case n.j.SPRITE:this.popSpriteMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var i=this.maskStack[this.maskStack.length-1];i.type===n.j.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},t.prototype.detect=function(t){t.maskObject.isSprite?t.type=n.j.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=n.j.SCISSOR:t.type=n.j.STENCIL},t.prototype.pushSpriteMask=function(t){var e,i,r=t.maskObject,n=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Ke]);var s,a,h=this.renderer,l=h.renderTexture;if(l.current){var u=l.current;s=t.resolution||u.resolution,a=null!==(e=t.multisample)&&void 0!==e?e:u.multisample}else s=t.resolution||h.resolution,a=null!==(i=t.multisample)&&void 0!==i?i:h.multisample;o[0].resolution=s,o[0].multisample=a,o[0].maskSprite=r;var c=n.filterArea;n.filterArea=r.getBounds(!0),h.filter.push(n,o),n.filterArea=c,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.destroy=function(){this.renderer=null},t}(),Ze=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==i&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Qe=new dt,Je=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return Et(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){if(!t._scissorRectLocal){var e=t._scissorRect,i=t.maskObject,r=this.renderer,n=r.renderTexture;i.renderable=!0;var o=i.getBounds();this.roundFrameToPixels(o,n.current?n.current.resolution:r.resolution,n.sourceFrame,n.destinationFrame,r.projection.transform),i.renderable=!1,e&&o.fit(e),t._scissorRectLocal=o}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,i=t.b,r=t.c,n=t.d;return(Math.abs(i)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4)},e.prototype.testScissor=function(t){var i=t.maskObject;if(!i.isFastRect||!i.isFastRect())return!1;if(e.isMatrixRotated(i.worldTransform))return!1;if(e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var r=t._scissorRectLocal;return r.width>0&&r.height>0},e.prototype.roundFrameToPixels=function(t,i,r,n,o){e.isMatrixRotated(o)||((o=o?Qe.copyFrom(o):Qe.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(o,t),t.fit(n),t.x=Math.round(t.x*i),t.y=Math.round(t.y*i),t.width=Math.round(t.width*i),t.height=Math.round(t.height*i))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(Ze),ti=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return Et(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?e.disable(e.STENCIL_TEST):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(Ze),ei=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new dt,this.transform=null}return t.prototype.update=function(t,e,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,i,r){var n=this.projectionMatrix,o=r?-1:1;n.identity(),n.a=1/e.width*2,n.d=o*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-o-e.y*n.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),ii=new ut,ri=new ut,ni=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ut,this.destinationFrame=new ut,this.viewportFrame=new ut}return t.prototype.bind=function(t,e,i){void 0===t&&(t=null);var r,n,o,s=this.renderer;this.current=t,t?(o=(r=t.baseTexture).resolution,e||(ii.width=t.frame.width,ii.height=t.frame.height,e=ii),i||(ri.x=t.frame.x,ri.y=t.frame.y,ri.width=e.width,ri.height=e.height,i=ri),n=r.framebuffer):(o=s.resolution,e||(ii.width=s.screen.width,ii.height=s.screen.height,e=ii),i||((i=ii).width=e.width,i.height=e.height));var a=this.viewportFrame;a.x=i.x*o,a.y=i.y*o,a.width=i.width*o,a.height=i.height*o,t||(a.y=s.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(i,e,o,!n),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var i=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,n=i.width!==r.width||i.height!==r.height;if(n){var o=this.viewportFrame,s=o.x,a=o.y,h=o.width,l=o.height;s=Math.round(s),a=Math.round(a),h=Math.round(h),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,a,h,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),n&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function oi(t,e,i,r,n){i.buffer.update(n)}var si={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},ai={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function hi(t,e){if(!t.autoManage)return{size:0,syncFunc:oi};for(var i=function(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),i=0,r=0,n=0,o=0;o<e.length;o++){var s=e[o];if(i=ai[s.data.type],s.data.size>1&&(i=Math.max(i,16)*s.data.size),s.dataLen=i,r%i!=0&&r<16){var a=r%i%16;r+=a,n+=a}r+i>16?(n=16*Math.ceil(n/16),s.offset=n,n+=i,r=i):(s.offset=n,r+=i,n+=i)}return{uboElements:e,size:n=16*Math.ceil(n/16)}}(function(t,e){var i=[];for(var r in t)e[r]&&i.push(e[r]);return i.sort((function(t,e){return t.index-e.index})),i}(t.uniforms,e)),r=i.uboElements,n=i.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],s=0;s<r.length;s++){for(var a=r[s],h=t.uniforms[a.data.name],l=a.data.name,u=!1,c=0;c<Fe.length;c++){var d=Fe[c];if(d.codeUbo&&d.test(a.data,h)){o.push("offset = "+a.offset/4+";",Fe[c].codeUbo(a.data.name,h)),u=!0;break}}if(!u)if(a.data.size>1){var p=Ce(a.data.type),f=Math.max(ai[a.data.type]/16,1),m=p/f,g=(4-m%4)%4;o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+a.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+a.data.size*f+"; i++)\n                {\n                    for(var j = 0; j < "+m+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+g+";\n                }\n\n                ")}else{var v=si[a.data.type];o.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+a.offset/4+";\n                "+v+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}var li=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function ui(t,e){var i=xe(t,t.VERTEX_SHADER,e.vertexSrc),r=xe(t,t.FRAGMENT_SHADER,e.fragmentSrc),n=t.createProgram();if(t.attachShader(n,i),t.attachShader(n,r),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||function(t,e,i,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||Te(t,i),t.getShaderParameter(r,t.COMPILE_STATUS)||Te(t,r),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,n,i,r),e.attributeData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var o=e.getActiveAttrib(t,n);if(0!==o.name.indexOf("gl_")){var s=Ne(e,o.type),a={type:s,name:o.name,size:Ce(s),location:e.getAttribLocation(t,o.name)};i[o.name]=a}}return i}(n,t),e.uniformData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;n++){var o=e.getActiveUniform(t,n),s=o.name.replace(/\[.*?\]$/,""),a=!!o.name.match(/\[.*?\]$/),h=Ne(e,o.type);i[s]={name:s,index:n,type:h,size:o.size,isArray:a,value:Ee(h,o.size)}}return i}(n,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort((function(t,e){return t>e?1:-1}));for(var s=0;s<o.length;s++)e.attributeData[o[s]].location=s,t.bindAttribLocation(n,s,o[s]);t.linkProgram(n)}t.deleteShader(i),t.deleteShader(r);var a={};for(var s in e.uniformData){var h=e.uniformData[s];a[s]={location:t.getUniformLocation(n,s),value:Ee(h.type,h.size)}}return new li(n,a)}var ci=0,di={textureCount:0,uboCount:0},pi=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=ci++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof ke)return ke;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");ke=!0===t({a:"b"},"a","b")}catch(t){ke=!1}return ke}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),e||(di.textureCount=0,di.uboCount=0,this.syncUniformGroup(t.uniformGroup,di)),r},t.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();t.static&&t.dirtyId===i.uniformDirtyGroups[t.id]||(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},t.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var i,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var n in t.uniforms){var o=e[n];if(o){for(var s=t.uniforms[n],a=!1,h=0;h<Fe.length;h++)if(Fe[h].test(o,s)){r.push(Fe[h].code(n,s)),a=!0;break}if(!a){var l=(1===o.size?Le:Be)[o.type].replace("location",'ud["'+n+'"].location');r.push('\n            cu = ud["'+n+'"];\n            cv = cu.value;\n            v = uv["'+n+'"];\n            '+l+";")}}else(null===(i=t.uniforms[n])||void 0===i?void 0:i.group)&&(t.uniforms[n].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+n+", '"+n+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+n+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||0!==t.dirtyId||!i.uniformGroups[t.id]){t.dirtyId=0;var r=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),r(i.uniformData,t.uniforms,this.renderer,di,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,i){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var n=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),s=this._uboCache[o];if(s||(s=this._uboCache[o]=hi(t,this.shader.program.uniformData)),t.autoManage){var a=new Float32Array(s.size/4);t.buffer.update(a)}return e.uniformGroups[t.id]=s.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,i){var r=t.uniforms,n=[i+"-"];for(var o in r)n.push(o),e[o]&&n.push(e[o].type);return n.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,i=t.program,r=ui(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();var fi=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=n.b.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new ze,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[n.b.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.ADD]=[t.ONE,t.ONE],e[n.b.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.NONE]=[0,0],e[n.b.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[n.b.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.b.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[n.b.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[n.b.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[n.b.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[n.b.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[n.b.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[n.b.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[n.b.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[n.b.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),mi=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=r.b.GC_MAX_IDLE,this.checkCountMax=r.b.GC_MAX_CHECK_COUNT,this.mode=r.b.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==n.i.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[r]=null,i=!0)}if(i){var o=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[o++]=e[r]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t.prototype.destroy=function(){this.renderer=null},t}();var gi=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=n.r.UNSIGNED_BYTE,this.internalFormat=n.h.RGBA,this.samplerType=0},vi=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new It,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){var e,i,r,o,s,a,h,l,u,c,d,p,f,m,g,v,y,_,b,x,T,w,E;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?((e={})[n.r.UNSIGNED_BYTE]=((i={})[n.h.RGBA]=t.RGBA8,i[n.h.RGB]=t.RGB8,i[n.h.RG]=t.RG8,i[n.h.RED]=t.R8,i[n.h.RGBA_INTEGER]=t.RGBA8UI,i[n.h.RGB_INTEGER]=t.RGB8UI,i[n.h.RG_INTEGER]=t.RG8UI,i[n.h.RED_INTEGER]=t.R8UI,i[n.h.ALPHA]=t.ALPHA,i[n.h.LUMINANCE]=t.LUMINANCE,i[n.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,i),e[n.r.BYTE]=((r={})[n.h.RGBA]=t.RGBA8_SNORM,r[n.h.RGB]=t.RGB8_SNORM,r[n.h.RG]=t.RG8_SNORM,r[n.h.RED]=t.R8_SNORM,r[n.h.RGBA_INTEGER]=t.RGBA8I,r[n.h.RGB_INTEGER]=t.RGB8I,r[n.h.RG_INTEGER]=t.RG8I,r[n.h.RED_INTEGER]=t.R8I,r),e[n.r.UNSIGNED_SHORT]=((o={})[n.h.RGBA_INTEGER]=t.RGBA16UI,o[n.h.RGB_INTEGER]=t.RGB16UI,o[n.h.RG_INTEGER]=t.RG16UI,o[n.h.RED_INTEGER]=t.R16UI,o[n.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,o),e[n.r.SHORT]=((s={})[n.h.RGBA_INTEGER]=t.RGBA16I,s[n.h.RGB_INTEGER]=t.RGB16I,s[n.h.RG_INTEGER]=t.RG16I,s[n.h.RED_INTEGER]=t.R16I,s),e[n.r.UNSIGNED_INT]=((a={})[n.h.RGBA_INTEGER]=t.RGBA32UI,a[n.h.RGB_INTEGER]=t.RGB32UI,a[n.h.RG_INTEGER]=t.RG32UI,a[n.h.RED_INTEGER]=t.R32UI,a[n.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,a),e[n.r.INT]=((h={})[n.h.RGBA_INTEGER]=t.RGBA32I,h[n.h.RGB_INTEGER]=t.RGB32I,h[n.h.RG_INTEGER]=t.RG32I,h[n.h.RED_INTEGER]=t.R32I,h),e[n.r.FLOAT]=((l={})[n.h.RGBA]=t.RGBA32F,l[n.h.RGB]=t.RGB32F,l[n.h.RG]=t.RG32F,l[n.h.RED]=t.R32F,l[n.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,l),e[n.r.HALF_FLOAT]=((u={})[n.h.RGBA]=t.RGBA16F,u[n.h.RGB]=t.RGB16F,u[n.h.RG]=t.RG16F,u[n.h.RED]=t.R16F,u),e[n.r.UNSIGNED_SHORT_5_6_5]=((c={})[n.h.RGB]=t.RGB565,c),e[n.r.UNSIGNED_SHORT_4_4_4_4]=((d={})[n.h.RGBA]=t.RGBA4,d),e[n.r.UNSIGNED_SHORT_5_5_5_1]=((p={})[n.h.RGBA]=t.RGB5_A1,p),e[n.r.UNSIGNED_INT_2_10_10_10_REV]=((f={})[n.h.RGBA]=t.RGB10_A2,f[n.h.RGBA_INTEGER]=t.RGB10_A2UI,f),e[n.r.UNSIGNED_INT_10F_11F_11F_REV]=((m={})[n.h.RGB]=t.R11F_G11F_B10F,m),e[n.r.UNSIGNED_INT_5_9_9_9_REV]=((g={})[n.h.RGB]=t.RGB9_E5,g),e[n.r.UNSIGNED_INT_24_8]=((v={})[n.h.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,v),e[n.r.FLOAT_32_UNSIGNED_INT_24_8_REV]=((y={})[n.h.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,y),E=e):((_={})[n.r.UNSIGNED_BYTE]=((b={})[n.h.RGBA]=t.RGBA,b[n.h.RGB]=t.RGB,b[n.h.ALPHA]=t.ALPHA,b[n.h.LUMINANCE]=t.LUMINANCE,b[n.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,b),_[n.r.UNSIGNED_SHORT_5_6_5]=((x={})[n.h.RGB]=t.RGB,x),_[n.r.UNSIGNED_SHORT_4_4_4_4]=((T={})[n.h.RGBA]=t.RGBA,T),_[n.r.UNSIGNED_SHORT_5_5_5_1]=((w={})[n.h.RGBA]=t.RGBA,w),E=_),E}(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var r=new gi(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new gi(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[r]=null)},t.prototype.ensureSamplerType=function(t){var e=this.boundTextures,i=this.hasIntegerTextures,r=this.CONTEXT_UID;if(i)for(var o=t-1;o>=0;--o){var s=e[o];if(s)s._glTextures[r].samplerType!==n.o.FLOAT&&this.renderer.texture.unbind(s)}},t.prototype.initTexture=function(t){var e=new gi(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var i,r;e.internalFormat=null!==(r=null===(i=this.internalFormats[t.type])||void 0===i?void 0:i[t.format])&&void 0!==r?r:t.format,2===this.webGLVersion&&t.type===n.r.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==n.o.FLOAT&&(this.hasIntegerTextures=!0);else{var r=t.realWidth,o=t.realHeight,s=i.gl;(e.width!==r||e.height!==o||e.dirtyId<0)&&(e.width=r,e.height=o,s.texImage2D(t.target,0,e.internalFormat,r,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&function(t,e,i){var r,n=t.length;if(!(e>=n||0===i)){var o=n-(i=e+i>n?n-e:i);for(r=e;r<o;++r)t[r]=t[r+i];t.length=o}}(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==n.k.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=n.s.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==n.k.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===n.p.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===n.p.LINEAR){var o=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===n.p.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===n.p.LINEAR?i.LINEAR:i.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),yi={__proto__:null,FilterSystem:ue,BatchSystem:de,ContextSystem:fe,FramebufferSystem:ve,GeometrySystem:_e,MaskSystem:$e,ScissorSystem:Je,StencilSystem:ti,ProjectionSystem:ei,RenderTextureSystem:ni,ShaderSystem:pi,StateSystem:fi,TextureGCSystem:mi,TextureSystem:vi},_i=new dt,bi=function(t){function e(e,i){void 0===e&&(e=n.n.UNKNOWN);var o=t.call(this)||this;return i=Object.assign({},r.b.RENDER_OPTIONS,i),o.options=i,o.type=e,o.screen=new ut(0,0,i.width,i.height),o.view=i.view||document.createElement("canvas"),o.resolution=i.resolution||r.b.RESOLUTION,o.useContextAlpha=i.useContextAlpha,o.autoDensity=!!i.autoDensity,o.preserveDrawingBuffer=i.preserveDrawingBuffer,o.clearBeforeRender=i.clearBeforeRender,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,1],o._backgroundColorString="#000000",o.backgroundColor=i.backgroundColor||o._backgroundColor,o.backgroundAlpha=i.backgroundAlpha,void 0!==i.transparent&&(K("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),o.useContextAlpha=i.transparent,o.backgroundAlpha=i.transparent?0:1),o._lastObjectRendered=null,o.plugins={},o}return Et(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var i=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=r+"px"),this.emit("resize",i,r)},e.prototype.generateTexture=function(t,e,i,r){void 0===e&&(e={}),"number"==typeof e&&(K("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:i,region:r});var n=e.region,o=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&(i[r[n]]=t[r[n]])}return i}(e,["region"]);0===(r=n||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var s=Yt.create(St({width:r.width,height:r.height},o));return _i.tx=-r.x,_i.ty=-r.y,this.render(t,{renderTexture:s,clear:!1,transform:_i,skipUpdateTransform:!!t.parent}),s},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=n.n.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=t.toString(16),"#"+(e="000000".substring(0,6-e.length)+e)),function(t,e){void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(u),xi=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Ti=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,i=this.CONTEXT_UID,r=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)},t.prototype.bindBufferBase=function(t,e){var i=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var n=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,n.buffer)}},t.prototype.bindBufferRange=function(t,e,i){var r=this.gl,n=this.CONTEXT_UID;i=i||0;var o=t._glBuffers[n]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,256*i,256)},t.prototype.update=function(t){var e=this.gl,i=this.CONTEXT_UID,r=t._glBuffers[i];if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var n=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,n)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),i&&(e||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,i=this.gl;return t._glBuffers[e]=new xi(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}();!function(t){function e(i){var r=t.call(this,n.n.WEBGL,i)||this;return i=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new rt("destroy"),contextChange:new rt("contextChange"),reset:new rt("reset"),update:new rt("update"),postrender:new rt("postrender"),prerender:new rt("prerender"),resize:new rt("resize")},r.runners.contextChange.add(r),r.globalUniforms=new se({projectionMatrix:new dt},!0),r.addSystem($e,"mask").addSystem(fe,"context").addSystem(fi,"state").addSystem(pi,"shader").addSystem(vi,"texture").addSystem(Ti,"buffer").addSystem(_e,"geometry").addSystem(ve,"framebuffer").addSystem(Je,"scissor").addSystem(ti,"stencil").addSystem(ei,"projection").addSystem(mi,"textureGC").addSystem(ue,"filter").addSystem(ni,"renderTexture").addSystem(de,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,i.context?r.context.initFromContext(i.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:i.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,function(t){var e;if(!G){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS 6.3.2 - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,i)}else globalThis.console&&globalThis.console.log("PixiJS 6.3.2 - "+t+" - http://www.pixijs.com/");G=!0}}(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}Et(e,t),e.create=function(t){if(void 0===U&&(U=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,n}catch(t){return!1}}()),U)return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}t>=n.l.HIGH?this.multisample=n.l.HIGH:t>=n.l.MEDIUM?this.multisample=n.l.MEDIUM:t>=n.l.LOW?this.multisample=n.l.LOW:this.multisample=n.l.NONE},e.prototype.addSystem=function(t,e){var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=i,this.runners)this.runners[r].add(i);return this},e.prototype.render=function(t,e){var i,r,n,o;if(e&&(e instanceof Yt?(K("6.0.0","Renderer#render arguments changed, use options instead."),i=e,r=arguments[2],n=arguments[3],o=arguments[4]):(i=e.renderTexture,r=e.clear,n=e.transform,o=e.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,!this.context.isLost){if(i||(this._lastObjectRendered=t),!o){var s=t.enableTempParent();t.updateTransform(),t.disableTempParent(s)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,i,r,n){void 0===i&&(i={});var o=t.prototype.generateTexture.call(this,e,i,r,n);return this.framebuffer.blit(),o},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.emit(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return K("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,i){e.__plugins=e.__plugins||{},e.__plugins[t]=i}}(bi);var wi=function(){this.texArray=null,this.blend=0,this.type=n.f.TRIANGLES,this.start=0,this.size=0,this.data=null},Ei=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),Si=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),Ai=function(t){function e(e){var i=t.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=ze.for2d(),i.size=4*r.b.SPRITE_BATCH_SIZE,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return Et(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;r.b.PREFER_ENV===n.g.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var r=Ue.replace(/%forloop%/gi,Ge(t));if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,r=this.size/4,n=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new wi);for(;i.length<n;)i.push(new Ei);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,r=e._textureArrayPool,n=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++It._globalBatch,h=0,l=r[0],u=0;n.copyBoundTextures(o,i);for(var c=0;c<this._bufferSize;++c){var d=t[c];t[c]=null,d._batchEnabled!==a&&(l.count>=i&&(n.boundArray(l,o,a,i),this.buildDrawCalls(l,u,c),u=c,l=r[++h],++a),d._batchEnabled=a,d.touched=s,l.elements[l.count++]=d)}l.count>0&&(n.boundArray(l,o,a,i),this.buildDrawCalls(l,u,this._bufferSize),++h,++a);for(c=0;c<o.length;c++)o[c]=null;It._globalBatch=a},e.prototype.buildDrawCalls=function(t,i,r){var n=this._bufferedElements,o=this._attributeBuffer,s=this._indexBuffer,a=this.vertexSize,h=e._drawCallPool,l=this._dcIndex,u=this._aIndex,c=this._iIndex,d=h[l];d.start=this._iIndex,d.texArray=t;for(var p=i;p<r;++p){var f=n[p],m=f._texture.baseTexture,g=X[m.alphaMode?1:0][f.blendMode];n[p]=null,i<p&&d.blend!==g&&(d.size=c-d.start,i=p,(d=h[++l]).texArray=t,d.start=c),this.packInterleavedGeometry(f,o,s,u,c),u+=f.vertexData.length/2*a,c+=f.indices.length,d.blend=g}i<r&&(d.size=c-d.start,++l),this._dcIndex=l,this._aIndex=u,this._iIndex=c},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;r.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,r=i.gl,n=i.state,o=e._drawCallPool,s=null,a=0;a<t;a++){var h=o[a],l=h.texArray,u=h.type,c=h.size,d=h.start,p=h.blend;s!==l&&(s=l,this.bindAndClearTexArray(l)),this.state.blendMode=p,n.set(this.state),r.drawElements(u,c,r.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),r.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=H(Math.ceil(t/8)),i=z(e),r=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._aBuffers[r];return n||(this._aBuffers[r]=n=new Si(r*this.vertexSize*4)),n},e.prototype.getIndexBuffer=function(t){var e=H(Math.ceil(t/12)),i=z(e),r=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(r)),n},e.prototype.packInterleavedGeometry=function(t,e,i,r,n){for(var o=e.uint32View,s=e.float32View,a=r/this.vertexSize,h=t.uvs,l=t.indices,u=t.vertexData,c=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),p=d<1&&t._texture.baseTexture.alphaMode?function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255,n=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(n=n*e+.5|0)}(t._tintRGB,d):t._tintRGB+(255*d<<24),f=0;f<u.length;f+=2)s[r++]=u[f],s[r++]=u[f+1],s[r++]=h[f],s[r++]=h[f+1],o[r++]=p,s[r++]=c;for(f=0;f<l.length;f++)i[n++]=a+l[f]},e._drawCallPool=[],e._textureArrayPool=[],e}(ce),Ri=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=se.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new He(this.vertexSrc,r)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new dt,default:this.defaultGroupCache[t]};return new Ve(this.programCache[t],n)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),Pi=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i._buffer=new Zt(null,e,!1),i._indexBuffer=new Zt(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,n.r.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,n.r.FLOAT).addAttribute("aColor",i._buffer,4,!0,n.r.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,n.r.FLOAT).addIndex(i._indexBuffer),i}return Et(e,t),e}(ie),Ii="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Oi="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";(function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:Ii,fragment:Oi,geometryClass:Pi,vertexSize:6},t),i=e.vertex,r=e.fragment,n=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var s=t.call(this,e)||this;return s.shaderGenerator=new Ri(i,r),s.geometryClass=o,s.vertexSize=n,s}return Et(e,t),e}(Ai)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Ii},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Oi},enumerable:!1,configurable:!0}),t})().create();var Ci={},Mi=function(t){Object.defineProperty(Ci,t,{get:function(){return K("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),Ut[t]}})};for(var Di in Ut)Mi(Di);var Ni={},Fi=function(t){Object.defineProperty(Ni,t,{get:function(){return K("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),yi[t]}})};for(var Di in yi)Fi(Di);var Li=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=this.renderer,i=t.worldTransform;e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),e.setContextTransform(i,t.roundPixels),t.drawMode!==n.f.TRIANGLES?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.geometry.buffers[0].data.length,i=0;i<e-2;i++){var r=2*i;this._renderDrawTriangle(t,r,r+2,r+4)}},t.prototype._renderTriangles=function(t){for(var e=t.geometry.getIndex().data,i=e.length,r=0;r<i;r+=3){var n=2*e[r],o=2*e[r+1],s=2*e[r+2];this._renderDrawTriangle(t,n,o,s)}},t.prototype._renderDrawTriangle=function(t,e,i,r){var n=this.renderer.context,s=t.geometry.buffers[0].data,a=t.uvs,h=t.texture;if(h.valid){var l=16777215!==t.tint,u=h.baseTexture,c=u.width,d=u.height;l&&t._cachedTint!==t.tint&&(t._cachedTint=t.tint,t._cachedTexture=t._cachedTexture||new Wt(u),t._tintedCanvas=o.b.getTintedCanvas({texture:t._cachedTexture},t.tint));var p=l?t._tintedCanvas:u.getDrawableSource(),f=a[e]*u.width,m=a[i]*u.width,g=a[r]*u.width,v=a[e+1]*u.height,y=a[i+1]*u.height,_=a[r+1]*u.height,b=s[e],x=s[i],T=s[r],w=s[e+1],E=s[i+1],S=s[r+1],A=t.canvasPadding/this.renderer.resolution;if(A>0){var R=t.worldTransform,P=R.a,I=R.b,O=R.c,C=R.d,M=(b+x+T)/3,D=(w+E+S)/3,N=b-M,F=w-D,L=P*N+O*F,B=I*N+C*F,k=Math.sqrt(L*L+B*B),U=1+A/k;b=M+N*U,w=D+F*U,L=P*(N=x-M)+O*(F=E-D),B=I*N+C*F,x=M+N*(U=1+A/(k=Math.sqrt(L*L+B*B))),E=D+F*U,L=P*(N=T-M)+O*(F=S-D),B=I*N+C*F,T=M+N*(U=1+A/(k=Math.sqrt(L*L+B*B))),S=D+F*U}n.save(),n.beginPath(),n.moveTo(b,w),n.lineTo(x,E),n.lineTo(T,S),n.closePath(),n.clip();var G=f*y+v*g+m*_-y*g-v*m-f*_,X=b*y+v*T+x*_-y*T-v*x-b*_,j=f*x+b*g+m*T-x*g-b*m-f*T,H=f*y*T+v*x*g+b*m*_-b*y*g-v*m*T-f*x*_,V=w*y+v*S+E*_-y*S-v*E-w*_,z=f*E+w*g+m*S-E*g-w*m-f*S,W=f*y*S+v*E*g+w*m*_-w*y*g-v*m*S-f*E*_;n.transform(X/G,V/G,j/G,z/G,H/G,W/G),n.drawImage(p,0,0,c*u.resolution,d*u.resolution,0,0,c,d),n.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.geometry.getBuffer("aVertexPosition").data,r=i.length/2;e.beginPath();for(var n=1;n<r-2;++n){var o=2*n,s=i[o],a=i[o+1],h=i[o+2],l=i[o+3],u=i[o+4],c=i[o+5];e.moveTo(s,a),e.lineTo(h,l),e.lineTo(u,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.b.MESH_CANVAS_PADDING=0,s.c.prototype._renderCanvas=function(t,e){t.plugins.mesh.render(e)},a.a.prototype._cachedTint=16777215,a.a.prototype._tintedCanvas=null,a.a.prototype._canvasUvs=null,a.a.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform,r=16777215!==this.tint,n=this.texture;if(n.valid){r&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedCanvas=o.b.getTintedCanvas(this,this.tint));var s=r?this._tintedCanvas:n.baseTexture.getDrawableSource();this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var a=this.vertices,h=this._canvasUvs,l=r?0:n.frame.x,u=r?0:n.frame.y,c=l+n.frame.width,d=u+n.frame.height;h[0]=l,h[1]=l+this._leftWidth,h[2]=c-this._rightWidth,h[3]=c,h[4]=u,h[5]=u+this._topHeight,h[6]=d-this._bottomHeight,h[7]=d;for(var p=0;p<8;p++)h[p]*=n.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.setContextTransform(i,this.roundPixels);for(var f=0;f<3;f++)for(var m=0;m<3;m++){var g=2*m+8*f,v=Math.max(1,h[m+1]-h[m]),y=Math.max(1,h[f+5]-h[f+4]),_=Math.max(1,a[g+10]-a[g]),b=Math.max(1,a[g+11]-a[g+1]);e.drawImage(s,h[m],h[f+4],v,y,a[g],a[g+1],_,b)}}};var Bi=!1;s.a.prototype._cachedTint=16777215,s.a.prototype._tintedCanvas=null,s.a.prototype._cachedTexture=null,s.a.prototype._renderCanvas=function(t){this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.material._renderCanvas?this.material._renderCanvas(t,this):Bi||(Bi=!0,globalThis.console&&console.warn("Mesh with custom shaders are not supported in CanvasRenderer."))},s.a.prototype._canvasPadding=null,Object.defineProperty(s.a.prototype,"canvasPadding",{get:function(){return null!==this._canvasPadding?this._canvasPadding:r.b.MESH_CANVAS_PADDING},set:function(t){this._canvasPadding=t}}),a.b.prototype._renderCanvas=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(t,this)},a.c.prototype._renderCanvas=function(t){(this.autoUpdate||this.geometry._width!==this.shader.texture.height)&&(this.geometry._width=this.shader.texture.height,this.geometry.update()),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(t,this)}}).call(this,i(14))},function(t,e,i){"use strict";var r,n="object"==typeof Reflect?Reflect:null,o=n&&"function"==typeof n.apply?n.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};r=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(i,r){function n(i){t.removeListener(e,o),r(i)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}v(t,e,o,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&v(t,"error",e,i)}(t,n,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var h=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function c(t,e,i,r){var n,o,s,a;if(l(i),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),o=t._events),s=o[e]),void 0===s)s=o[e]=i,++t._eventsCount;else if("function"==typeof s?s=o[e]=r?[i,s]:[s,i]:r?s.unshift(i):s.push(i),(n=u(t))>0&&s.length>n&&!s.warned){s.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=s.length,a=h,console&&console.warn&&console.warn(a)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=d.bind(r);return n.listener=i,r.wrapFn=n,n}function f(t,e,i){var r=t._events;if(void 0===r)return[];var n=r[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):g(n,n.length)}function m(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function g(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function v(t,e,i,r){if("function"==typeof t.on)r.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(o){r.once&&t.removeEventListener(e,n),i(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var h=n[t];if(void 0===h)return!1;if("function"==typeof h)o(h,this,e);else{var l=h.length,u=g(h,l);for(i=0;i<l;++i)o(u[i],this,e)}return!0},a.prototype.addListener=function(t,e){return c(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return c(this,t,e,!0)},a.prototype.once=function(t,e){return l(e),this.on(t,p(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,p(this,t,e)),this},a.prototype.removeListener=function(t,e){var i,r,n,o,s;if(l(e),void 0===(r=this._events))return this;if(void 0===(i=r[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,o=i.length-1;o>=0;o--)if(i[o]===e||i[o].listener===e){s=i[o].listener,n=o;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(r[t]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var n,o=Object.keys(i);for(r=0;r<o.length;++r)"removeListener"!==(n=o[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return f(this,t,!0)},a.prototype.rawListeners=function(t){return f(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,i){t.exports=function(){var t=Object.prototype.toString,e=Array.prototype.slice;return function(){var i=0,r=0,n=[],o=[],s=0,a="[object Array]"===t.call(arguments[0])?arguments[0]:e.call(arguments);for(a.push({p:0,f:function(){}}),i=0,r=a.length;i<r;i++){var h=Math.abs(parseFloat(a[i].p)),l=a[i].f;if(isNaN(h)||"function"!=typeof l)throw new TypeError("Probability.js: Invalid probability object in argument "+i+".");if(/%/.test(a[i].p)&&(h/=100),(s+=h)>1)throw new TypeError('Probability.js: Probability exceeds "1.0" (=100%) in argument '+i+': p="'+h+'" (='+100*h+'%), sum="'+s+'" (='+100*s+"%).");n[i]=s,o[i]=l}return function(){var t=Math.random();for(i=0,r=n.length-1;i<r&&t>=n[i];i++);return o[i].apply(this,arguments)}}}()},function(t,e,i){"use strict";var r=i(31),n=i(33);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){n.isString(t)&&(t=_(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),c=["%","/","?",";","#"].concat(u),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=i(34);function _(t,e,i){if(t&&n.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,i),r}o.prototype.parse=function(t,e,i){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",l=t.split(a);l[0]=l[0].replace(/\\/g,"/");var _=t=l.join(a);if(_=_.trim(),!i&&1===t.split("#").length){var b=h.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=s.exec(_);if(x){var T=(x=x[0]).toLowerCase();this.protocol=T,_=_.substr(x.length)}if(i||x||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===_.substr(0,2);!w||x&&g[x]||(_=_.substr(2),this.slashes=!0)}if(!g[x]&&(w||x&&!v[x])){for(var E,S,A=-1,R=0;R<d.length;R++){-1!==(P=_.indexOf(d[R]))&&(-1===A||P<A)&&(A=P)}-1!==(S=-1===A?_.lastIndexOf("@"):_.lastIndexOf("@",A))&&(E=_.slice(0,S),_=_.slice(S+1),this.auth=decodeURIComponent(E)),A=-1;for(R=0;R<c.length;R++){var P;-1!==(P=_.indexOf(c[R]))&&(-1===A||P<A)&&(A=P)}-1===A&&(A=_.length),this.host=_.slice(0,A),_=_.slice(A),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var O=this.hostname.split(/\./),C=(R=0,O.length);R<C;R++){var M=O[R];if(M&&!M.match(p)){for(var D="",N=0,F=M.length;N<F;N++)M.charCodeAt(N)>127?D+="x":D+=M[N];if(!D.match(p)){var L=O.slice(0,R),B=O.slice(R+1),k=M.match(f);k&&(L.push(k[1]),B.unshift(k[2])),B.length&&(_="/"+B.join(".")+_),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+U,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!m[T])for(R=0,C=u.length;R<C;R++){var X=u[R];if(-1!==_.indexOf(X)){var j=encodeURIComponent(X);j===X&&(j=escape(X)),_=_.split(X).join(j)}}var H=_.indexOf("#");-1!==H&&(this.hash=_.substr(H),_=_.slice(0,H));var V=_.indexOf("?");if(-1!==V?(this.search=_.substr(V),this.query=_.substr(V+1),e&&(this.query=y.parse(this.query)),_=_.slice(0,V)):e&&(this.search="",this.query={}),_&&(this.pathname=_),v[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var z=this.search||"";this.path=U+z}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(n.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var i=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),l=0;l<h.length;l++){var u=h[l];"protocol"!==u&&(i[u]=t[u])}return v[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!v[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var p=c[d];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||g[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",y=i.search||"";i.path=m+y}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var _=i.pathname&&"/"===i.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||_||i.host&&t.pathname,T=x,w=i.pathname&&i.pathname.split("/")||[],E=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!v[i.protocol]);if(E&&(i.hostname="",i.port=null,i.host&&(""===w[0]?w[0]=i.host:w.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),x=x&&(""===f[0]||""===w[0])),b)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),i.search=t.search,i.query=t.query;else if(!n.isNullOrUndefined(t.search)){if(E)i.hostname=i.host=w.shift(),(I=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=I.shift(),i.host=i.hostname=I.shift());return i.search=t.search,i.query=t.query,n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!w.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var S=w.slice(-1)[0],A=(i.host||t.host||w.length>1)&&("."===S||".."===S)||""===S,R=0,P=w.length;P>=0;P--)"."===(S=w[P])?w.splice(P,1):".."===S?(w.splice(P,1),R++):R&&(w.splice(P,1),R--);if(!x&&!T)for(;R--;R)w.unshift("..");!x||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),A&&"/"!==w.join("/").substr(-1)&&w.push("");var I,O=""===w[0]||w[0]&&"/"===w[0].charAt(0);E&&(i.hostname=i.host=O?"":w.length?w.shift():"",(I=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=I.shift(),i.host=i.hostname=I.shift()));return(x=x||i.host&&w.length)&&!O&&w.unshift(""),w.length?i.pathname=w.join("/"):(i.pathname=null,i.path=null),n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(n.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(n.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(29),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(14))},function(t,e,i){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function o(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,i,r,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new s(i,r||t,o),h=n?n+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),l.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)r.call(t,e)&&i.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},l.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},l.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},l.prototype.emit=function(t,e,i,r,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var h,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,r),!0;case 5:return u.fn.call(u.context,e,i,r,o),!0;case 6:return u.fn.call(u.context,e,i,r,o,s),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,i);break;case 4:u[l].fn.call(u[l].context,e,i,r);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},l.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},l.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},l.prototype.removeListener=function(t,e,i,r){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return h(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||i&&s.context!==i||h(this,o);else{for(var a=0,l=[],u=s.length;a<u;a++)(s[a].fn!==e||r&&!s[a].once||i&&s[a].context!==i)&&l.push(s[a]);l.length?this._events[o]=1===l.length?l[0]:l:h(this,o)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&h(this,e)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l},function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r,a,h,l,u,p,f,g=e&&e.length,v=g?e[0]*i:t.length,y=n(t,0,v,i,!0),_=[];if(!y||y.next===y.prev)return _;if(g&&(y=function(t,e,i,r){var s,a,h,l,u,p=[];for(s=0,a=e.length;s<a;s++)h=e[s]*r,l=s<a-1?e[s+1]*r:t.length,(u=n(t,h,l,r,!1))===u.next&&(u.steiner=!0),p.push(m(u));for(p.sort(c),s=0;s<p.length;s++)i=o(i=d(p[s],i),i.next);return i}(t,e,y,i)),t.length>80*i){r=h=t[0],a=l=t[1];for(var b=i;b<v;b+=i)(u=t[b])<r&&(r=u),(p=t[b+1])<a&&(a=p),u>h&&(h=u),p>l&&(l=p);f=0!==(f=Math.max(h-r,l-a))?1/f:0}return s(y,_,i,r,a,f),_}function n(t,e,i,r,n){var o,s;if(n===P(t,e,i,r)>0)for(o=e;o<i;o+=r)s=S(o,t[o],t[o+1],s);else for(o=i-r;o>=e;o-=r)s=S(o,t[o],t[o+1],s);return s&&_(s,s.next)&&(A(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!_(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(A(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function s(t,e,i,r,n,c,d){if(t){!d&&c&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=f(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,s,a,h,l=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,r=i,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(h=l;a>0||h>0&&r;)0!==a&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,h--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,l*=2}while(s>1)}(n)}(t,r,n,c);for(var p,m,g=t;t.prev!==t.next;)if(p=t.prev,m=t.next,c?h(t,r,n,c):a(t))e.push(p.i/i),e.push(t.i/i),e.push(m.i/i),A(t),t=m.next,g=m.next;else if((t=m)===g){d?1===d?s(t=l(o(t),e,i),e,i,r,n,c,2):2===d&&u(t,e,i,r,n,c):s(o(t),e,i,r,n,c,1);break}}}function a(t){var e=t.prev,i=t,r=t.next;if(y(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(g(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&y(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function h(t,e,i,r){var n=t.prev,o=t,s=t.next;if(y(n,o,s)>=0)return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,h=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,l=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,u=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,c=f(a,h,e,i,r),d=f(l,u,e,i,r),p=t.prevZ,m=t.nextZ;p&&p.z>=c&&m&&m.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,m!==t.prev&&m!==t.next&&g(n.x,n.y,o.x,o.y,s.x,s.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;m&&m.z<=d;){if(m!==t.prev&&m!==t.next&&g(n.x,n.y,o.x,o.y,s.x,s.y,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function l(t,e,i){var r=t;do{var n=r.prev,s=r.next.next;!_(n,s)&&b(n,r,r.next,s)&&w(n,s)&&w(s,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(s.i/i),A(r),A(r.next),r=t=s),r=r.next}while(r!==t);return o(r)}function u(t,e,i,r,n,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&v(h,l)){var u=E(h,l);return h=o(h,h.next),u=o(u,u.next),s(h,e,i,r,n,a),void s(u,e,i,r,n,a)}l=l.next}h=h.next}while(h!==t)}function c(t,e){return t.x-e.x}function d(t,e){var i=function(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s){if(s=a,a===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===s)return i;var h,l=i,u=i.x,c=i.y,d=1/0;r=i;do{n>=r.x&&r.x>=u&&n!==r.x&&g(o<c?n:s,o,u,c,o<c?s:n,o,r.x,r.y)&&(h=Math.abs(o-r.y)/(n-r.x),w(r,t)&&(h<d||h===d&&(r.x>i.x||r.x===i.x&&p(i,r)))&&(i=r,d=h)),r=r.next}while(r!==l);return i}(t,e);if(!i)return e;var r=E(i,t),n=o(i,i.next);return o(r,r.next),e===i?n:e}function p(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function f(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function m(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function g(t,e,i,r,n,o,s,a){return(n-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(n-s)*(r-a)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&b(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(w(t,e)&&w(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||_(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,i,r){var n=T(y(t,e,i)),o=T(y(t,e,r)),s=T(y(i,r,t)),a=T(y(i,r,e));return n!==o&&s!==a||(!(0!==n||!x(t,i,e))||(!(0!==o||!x(t,r,e))||(!(0!==s||!x(i,t,r))||!(0!==a||!x(i,e,r)))))}function x(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function T(t){return t>0?1:t<0?-1:0}function w(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function E(t,e){var i=new R(t.i,t.x,t.y),r=new R(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function S(t,e,i,r){var n=new R(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function R(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}t.exports=r,t.exports.default=r,r.deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,s=Math.abs(P(t,0,o,i));if(n)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,u=a<h-1?e[a+1]*i:t.length;s-=Math.abs(P(t,l,u,i))}var c=0;for(a=0;a<r.length;a+=3){var d=r[a]*i,p=r[a+1]*i,f=r[a+2]*i;c+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[n][o][s]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}},function(t,e,i){"use strict";(function(t){var r=i(23),n=i(24),o=setTimeout;function s(t){return Boolean(t&&void 0!==t.length)}function a(){}function h(t){if(!(this instanceof h))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(t,this)}function l(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,h._immediateFn((function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var r;try{r=i(t._value)}catch(t){return void c(e.promise,t)}u(e.promise,r)}else(1===t._state?u:c)(e.promise,t._value)}))):t._deferreds.push(e)}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof h)return t._state=3,t._value=e,void d(t);if("function"==typeof i)return void f((r=i,n=e,function(){r.apply(n,arguments)}),t)}t._state=1,t._value=e,d(t)}catch(e){c(t,e)}var r,n}function c(t,e){t._state=2,t._value=e,d(t)}function d(t){2===t._state&&0===t._deferreds.length&&h._immediateFn((function(){t._handled||h._unhandledRejectionFn(t._value)}));for(var e=0,i=t._deferreds.length;e<i;e++)l(t,t._deferreds[e]);t._deferreds=null}function p(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function f(t,e){var i=!1;try{t((function(t){i||(i=!0,u(e,t))}),(function(t){i||(i=!0,c(e,t))}))}catch(t){if(i)return;i=!0,c(e,t)}}h.prototype.catch=function(t){return this.then(null,t)},h.prototype.then=function(t,e){var i=new this.constructor(a);return l(this,new p(t,e,i)),i},h.prototype.finally=r.a,h.all=function(t){return new h((function(e,i){if(!s(t))return i(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var n=r.length;function o(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(e){o(t,e)}),i)}r[t]=s,0==--n&&e(r)}catch(t){i(t)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},h.allSettled=n.a,h.resolve=function(t){return t&&"object"==typeof t&&t.constructor===h?t:new h((function(e){e(t)}))},h.reject=function(t){return new h((function(e,i){i(t)}))},h.race=function(t){return new h((function(e,i){if(!s(t))return i(new TypeError("Promise.race accepts an array"));for(var r=0,n=t.length;r<n;r++)h.resolve(t[r]).then(e,i)}))},h._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){o(t,0)},h._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=h}).call(this,i(19).setImmediate)},function(t,e,i){"use strict";e.a=function(t){var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){return e.reject(i)}))}))}},function(t,e,i){"use strict";e.a=function(t){return new this((function(e,i){if(!t||void 0===t.length)return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var n=r.length;function o(t,i){if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,(function(e){o(t,e)}),(function(i){r[t]={status:"rejected",reason:i},0==--n&&e(r)}))}r[t]={status:"fulfilled",value:i},0==--n&&e(r)}for(var s=0;s<r.length;s++)o(s,r[s])}))}},function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,h=s(t),l=1;l<arguments.length;l++){for(var u in i=Object(arguments[l]))n.call(i,u)&&(h[u]=i[u]);if(r){a=r(i);for(var c=0;c<a.length;c++)o.call(i,a[c])&&(h[a[c]]=i[a[c]])}}return h}},function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return G}));var r=i(1),n=i(7),o=i(8);
/*!
 * pixi-viewport - v4.34.3
 * Compiled Wed, 01 Dec 2021 19:28:04 UTC
 *
 * pixi-viewport is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 * 
 * Copyright 2019-2020, David Figatner, All Rights Reserved
 */
class s{constructor(t){this.parent=t,this.paused=!1}destroy(){}down(t){return!1}move(t){return!1}up(t){return!1}wheel(t){return!1}update(t){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};var h=function(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}((function(t,e){(function(){var e;(function(e){t.exports=e})(e={linear:function(t,e,i,r){return i*t/r+e},easeInQuad:function(t,e,i,r){return i*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,r){return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,r){return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,i,r){return(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,r){var n,o,s;return s=1.70158,0===t||(t/=r),(o=0)||(o=.3*r),(n=i)<Math.abs(i)?(n=i,s=o/4):s=o/(2*Math.PI)*Math.asin(i/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o)+e},easeOutElastic:function(t,e,i,r){var n,o,s;return s=1.70158,0===t||(t/=r),(o=0)||(o=.3*r),(n=i)<Math.abs(i)?(n=i,s=o/4):s=o/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin((t*r-s)*(2*Math.PI)/o)+i+e},easeInOutElastic:function(t,e,i,r){var n,o,s;return s=1.70158,0===t||(t/=r/2),(o=0)||(o=r*(.3*1.5)),(n=i)<Math.abs(i)?(n=i,s=o/4):s=o/(2*Math.PI)*Math.asin(i/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o)*.5+i+e},easeInBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*(t/=r)*t*((n+1)*t-n)+e},easeOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*((t=t/r-1)*t*((n+1)*t+n)+1)+e},easeInOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),(t/=r/2)<1?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},easeInBounce:function(t,i,r,n){return r-e.easeOutBounce(n-t,0,r,n)+i},easeOutBounce:function(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,i,r,n){return t<n/2?.5*e.easeInBounce(2*t,0,r,n)+i:.5*e.easeOutBounce(2*t-n,0,r,n)+.5*r+i}})}).call(a)}));function l(t,e){return t?"function"==typeof t?t:"string"==typeof t?h[t]:void 0:h[e]}const u={removeOnInterrupt:!1,ease:"linear",time:1e3};class c extends s{__init(){this.startWidth=null}__init2(){this.startHeight=null}__init3(){this.deltaWidth=null}__init4(){this.deltaHeight=null}__init5(){this.width=null}__init6(){this.height=null}__init7(){this.time=0}constructor(t,e={}){super(t),c.prototype.__init.call(this),c.prototype.__init2.call(this),c.prototype.__init3.call(this),c.prototype.__init4.call(this),c.prototype.__init5.call(this),c.prototype.__init6.call(this),c.prototype.__init7.call(this),this.options=Object.assign({},u,e),this.options.ease=l(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){void 0!==this.options.position?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,void 0!==this.options.scale?this.width=this.parent.screenWidth/this.options.scale:void 0!==this.options.scaleX||void 0!==this.options.scaleY?(void 0!==this.options.scaleX&&(this.width=this.parent.screenWidth/this.options.scaleX),void 0!==this.options.scaleY&&(this.height=this.parent.screenHeight/this.options.scaleY)):(void 0!==this.options.width&&(this.width=this.options.width),void 0!==this.options.height&&(this.height=this.options.height)),null!==this.width&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),null!==this.height&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),null!==this.width&&this.parent.fitWidth(this.width,this.keepCenter,null===this.height),null!==this.height&&this.parent.fitHeight(this.height,this.keepCenter,null===this.width),this.keepCenter||this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(t){if(!this.paused)if(this.time+=t,this.time>=this.options.time)this.complete();else{const t=new r.g(this.parent.scale.x,this.parent.scale.y),e=this.options.ease(this.time,0,1,this.options.time);if(null!==this.width){const t=this.startWidth,i=this.deltaWidth;this.parent.fitWidth(t+i*e,this.keepCenter,null===this.height)}if(null!==this.height){const t=this.startHeight,i=this.deltaHeight;this.parent.fitHeight(t+i*e,this.keepCenter,null===this.width)}if(null===this.width?this.parent.scale.x=this.parent.scale.y:null===this.height&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const t=this.startX,i=this.startY,n=this.deltaX,o=this.deltaY,s=new r.g(this.parent.x,this.parent.y);this.parent.moveCenter(t+n*e,i+o*e),this.parent.emit("moved",{viewport:this.parent,original:s,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:t,type:"animate"})}}}function d(t){let e=void 0,i=t[0],r=1;for(;r<t.length;){const n=t[r],o=t[r+1];if(r+=2,("optionalAccess"===n||"optionalCall"===n)&&null==i)return;"access"===n||"optionalAccess"===n?(e=i,i=o(i)):"call"!==n&&"optionalCall"!==n||(i=o((...t)=>i.call(e,...t)),e=void 0)}return i}const p={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class f extends s{constructor(t,e={}){super(t),this.options=Object.assign({},p,e),this.ease=l(this.options.ease,"easeInOutSine"),this.options.sides?"all"===this.options.sides?this.top=this.bottom=this.left=this.right=!0:"horizontal"===this.options.sides?(this.right=this.left=!0,this.top=this.bottom=!1):"vertical"===this.options.sides?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=-1!==this.options.sides.indexOf("top"),this.bottom=-1!==this.options.sides.indexOf("bottom"),this.left=-1!==this.options.sides.indexOf("left"),this.right=-1!==this.options.sides.indexOf("right")):this.left=this.top=this.right=this.bottom=!1;const i=this.options.underflow.toLowerCase();"center"===i?(this.underflowX=0,this.underflowY=0):(this.underflowX=-1!==i.indexOf("left")?-1:-1!==i.indexOf("right")?1:0,this.underflowY=-1!==i.indexOf("top")?-1:-1!==i.indexOf("bottom")?1:0),this.reset()}isActive(){return null!==this.toX||null!==this.toY}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(t){if(!this.paused){if(this.bounce(),this.toX){const e=this.toX;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),e.time>=this.options.time?(this.parent.x=e.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(e.time,e.start,e.delta,this.options.time)}if(this.toY){const e=this.toY;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),e.time>=this.options.time?(this.parent.y=e.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(e.time,e.start,e.delta,this.options.time)}}}calcUnderflowX(){let t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}calcUnderflowY(){let t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}oob(){const t=this.options.bounceBox;if(t){const e=void 0===t.x?0:t.x,i=void 0===t.y?0:t.y,n=void 0===t.width?this.parent.worldWidth:t.width,o=void 0===t.height?this.parent.worldHeight:t.height;return{left:this.parent.left<e,right:this.parent.right>n,top:this.parent.top<i,bottom:this.parent.bottom>o,topLeft:new r.g(e*this.parent.scale.x,i*this.parent.scale.y),bottomRight:new r.g(n*this.parent.scale.x-this.parent.screenWidth,o*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new r.g(0,0),bottomRight:new r.g(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){if(this.paused)return;let t,e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.x&&e.percentChangeX===d([e,"access",t=>t.options,"optionalAccess",t=>t.friction])||e.y&&e.percentChangeY===d([e,"access",t=>t.options,"optionalAccess",t=>t.friction]))&&(t=this.oob(),(t.left&&this.left||t.right&&this.right)&&(e.percentChangeX=this.options.friction),(t.top&&this.top||t.bottom&&this.bottom)&&(e.percentChangeY=this.options.friction));const i=this.parent.plugins.get("drag",!0)||{},r=this.parent.plugins.get("pinch",!0)||{};if(e=e||{},!(d([i,"optionalAccess",t=>t.active])||d([r,"optionalAccess",t=>t.active])||this.toX&&this.toY||e.x&&e.y)){t=t||this.oob();const i=t.topLeft,r=t.bottomRight;if(!this.toX&&!e.x){let e=null;t.left&&this.left?e=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-i.x:t.right&&this.right&&(e=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-r.x),null!==e&&this.parent.x!==e&&(this.toX={time:0,start:this.parent.x,delta:e-this.parent.x,end:e},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!e.y){let e=null;t.top&&this.top?e=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-i.y:t.bottom&&this.bottom&&(e=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-r.y),null!==e&&this.parent.y!==e&&(this.toY={time:0,start:this.parent.y,delta:e-this.parent.y,end:e},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const m={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class g extends s{constructor(t,e={}){super(t),this.options=Object.assign({},m,e),this.options.direction&&(this.options.left="x"===this.options.direction||"all"===this.options.direction||null,this.options.right="x"===this.options.direction||"all"===this.options.direction||null,this.options.top="y"===this.options.direction||"all"===this.options.direction||null,this.options.bottom="y"===this.options.direction||"all"===this.options.direction||null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const t=this.options.underflow.toLowerCase();"none"===t?this.noUnderflow=!0:"center"===t?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused)return;if(this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const t={x:this.parent.x,y:this.parent.y},e=this.parent.plugins.decelerate||{};if(null!==this.options.left||null!==this.options.right){let i=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:0!==this.parent.x&&(this.parent.x=0,i=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,i=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,i=!0)}else null!==this.options.left&&this.parent.left<(!0===this.options.left?0:this.options.left)&&(this.parent.x=-(!0===this.options.left?0:this.options.left)*this.parent.scale.x,e.x=0,i=!0),null!==this.options.right&&this.parent.right>(!0===this.options.right?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(!0===this.options.right?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,e.x=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-x"})}if(null!==this.options.top||null!==this.options.bottom){let i=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:0!==this.parent.y&&(this.parent.y=0,i=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,i=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,i=!0)}else null!==this.options.top&&this.parent.top<(!0===this.options.top?0:this.options.top)&&(this.parent.y=-(!0===this.options.top?0:this.options.top)*this.parent.scale.y,e.y=0,i=!0),null!==this.options.bottom&&this.parent.bottom>(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,e.y=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const v={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class y extends s{constructor(t,e={}){super(t),this.options=Object.assign({},v,e),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused)if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight;if(null!==this.options.minWidth&&t<this.options.minWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxWidth&&t>this.options.maxWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.minHeight&&e<this.options.minHeight){const i=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxHeight&&e>this.options.maxHeight){const t=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/t,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const t={x:null,y:null},e={x:null,y:null};if("number"==typeof this.options.minScale)t.x=this.options.minScale,t.y=this.options.minScale;else if(null!==this.options.minScale){const e=this.options.minScale;t.x=void 0===e.x?null:e.x,t.y=void 0===e.y?null:e.y}if("number"==typeof this.options.maxScale)e.x=this.options.maxScale,e.y=this.options.maxScale;else if(null!==this.options.maxScale){const t=this.options.maxScale;e.x=void 0===t.x?null:t.x,e.y=void 0===t.y?null:t.y}let i=this.parent.scale.x,r=this.parent.scale.y;null!==t.x&&i<t.x&&(i=t.x),null!==e.x&&i>e.x&&(i=e.x),null!==t.y&&r<t.y&&(r=t.y),null!==e.y&&r>e.y&&(r=e.y),i===this.parent.scale.x&&r===this.parent.scale.y||(this.parent.scale.set(i,r),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}reset(){this.clamp()}}const _={friction:.98,bounce:.8,minSpeed:.01};class b extends s{constructor(t,e={}){super(t),this.options=Object.assign({},_,e),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",t=>this.moved(t))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!(!this.x&&!this.y)}move(){if(this.paused)return!1;const t=this.parent.input.count();return(1===t||t>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}moved(t){if(this.saved.length){const e=this.saved[this.saved.length-1];"clamp-x"===t.type?e.x===t.original.x&&(e.x=this.parent.x):"clamp-y"===t.type&&e.y===t.original.y&&(e.y=this.parent.y)}}up(){if(0===this.parent.input.count()&&this.saved.length){const t=performance.now();for(const e of this.saved)if(e.time>=t-100){const i=t-e.time;this.x=(this.parent.x-e.x)/i,this.y=(this.parent.y-e.y)/i,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(t){void 0!==(t=t||{}).x&&(this.x=t.x,this.percentChangeX=this.options.friction),void 0!==t.y&&(this.y=t.y,this.percentChangeY=this.options.friction)}update(t){if(this.paused)return;const e=this.x||this.y,i=this.timeSinceRelease,r=this.timeSinceRelease+t;if(this.x){const e=this.percentChangeX,n=Math.log(e);this.parent.x+=16*this.x/n*(Math.pow(e,r/16)-Math.pow(e,i/16)),this.x*=Math.pow(this.percentChangeX,t/16)}if(this.y){const e=this.percentChangeY,n=Math.log(e);this.parent.y+=16*this.y/n*(Math.pow(e,r/16)-Math.pow(e,i/16)),this.y*=Math.pow(this.percentChangeY,t/16)}this.timeSinceRelease+=t,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),e&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const x={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20};class T extends s{constructor(t,e={}){super(t),this.options=Object.assign({},x,e),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||"all"===this.options.direction||"x"===this.options.direction,this.yDirection=!this.options.direction||"all"===this.options.direction||"y"===this.options.direction,this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){window.addEventListener("keydown",e=>{t.includes(e.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",e=>{t.includes(e.code)&&(this.keyIsPressed=!1)})}mouseButtons(t){this.mouse=t&&"all"!==t?[-1!==t.indexOf("left"),-1!==t.indexOf("middle"),-1!==t.indexOf("right")]:[!0,!0,!0]}parseUnderflow(){const t=this.options.underflow.toLowerCase();"center"===t?(this.underflowX=0,this.underflowY=0):(t.includes("left")?this.underflowX=-1:t.includes("right")?this.underflowX=1:this.underflowX=0,t.includes("top")?this.underflowY=-1:t.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(t){const e="mouse"===t.data.pointerType,i=this.parent.input.count();return!(!(1===i||i>1&&!this.parent.plugins.get("pinch",!0))||e&&!this.mouse[t.data.button])}checkKeyPress(t){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&"touch"===t.data.pointerType}down(t){return!(this.paused||!this.options.pressDrag)&&(this.checkButtons(t)&&this.checkKeyPress(t)?(this.last={x:t.data.global.x,y:t.data.global.y},this.current=t.data.pointerId,!0):(this.last=null,!1))}get active(){return this.moved}move(t){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===t.data.pointerId){const e=t.data.global.x,i=t.data.global.y,n=this.parent.input.count();if(1===n||n>1&&!this.parent.plugins.get("pinch",!0)){const n=e-this.last.x,o=i-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(n)||this.yDirection&&this.parent.input.checkThreshold(o)){const n={x:e,y:i};return this.xDirection&&(this.parent.x+=(n.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(n.y-this.last.y)*this.options.factor),this.last=n,this.moved||this.parent.emit("drag-start",{event:t,screen:new r.g(this.last.x,this.last.y),world:this.parent.toWorld(new r.g(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(t){if(this.paused)return!1;const e=this.parent.input.touches;if(1===e.length){const t=e[0];return t.last&&(this.last={x:t.last.x,y:t.last.y},this.current=t.id),this.moved=!1,!0}if(this.last&&this.moved){const e=new r.g(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:t,screen:e,world:this.parent.toWorld(e),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(t){if(this.paused)return!1;if(this.options.wheel){const e=this.parent.plugins.get("wheel",!0);if(!e||!e.options.wheelZoom&&!t.ctrlKey){const e=t.deltaMode?this.options.lineHeight:1;return this.xDirection&&(this.parent.x+=t.deltaX*e*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=t.deltaY*e*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),this.parent.options.stopPropagation&&t.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const t=this.parent.plugins.get("decelerate",!0)||{};if("y"!==this.options.clampWheel)if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if("x"!==this.options.clampWheel)if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}}const w={speed:0,acceleration:null,radius:null};class E extends s{constructor(t,e,i={}){super(t),this.target=e,this.options=Object.assign({},w,i),this.velocity={x:0,y:0}}update(t){if(this.paused)return;const e=this.parent.center;let i=this.target.x,r=this.target.y;if(this.options.radius){if(!(Math.sqrt(Math.pow(this.target.y-e.y,2)+Math.pow(this.target.x-e.x,2))>this.options.radius))return;{const t=Math.atan2(this.target.y-e.y,this.target.x-e.x);i=this.target.x-Math.cos(t)*this.options.radius,r=this.target.y-Math.sin(t)*this.options.radius}}const n=i-e.x,o=r-e.y;if(n||o)if(this.options.speed)if(this.options.acceleration){const s=Math.atan2(r-e.y,i-e.x),a=Math.sqrt(Math.pow(n,2)+Math.pow(o,2));if(a){const h=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);this.velocity=a>h?{x:Math.min(this.velocity.x+this.options.acceleration*t,this.options.speed),y:Math.min(this.velocity.y+this.options.acceleration*t,this.options.speed)}:{x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const l=Math.cos(s)*this.velocity.x,u=Math.sin(s)*this.velocity.y,c=Math.abs(l)>Math.abs(n)?i:e.x+l,d=Math.abs(u)>Math.abs(o)?r:e.y+u;this.parent.moveCenter(c,d),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const t=Math.atan2(r-e.y,i-e.x),s=Math.cos(t)*this.options.speed,a=Math.sin(t)*this.options.speed,h=Math.abs(s)>Math.abs(n)?i:e.x+s,l=Math.abs(a)>Math.abs(o)?r:e.y+a;this.parent.moveCenter(h,l),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(i,r),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const S={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class A extends s{constructor(t,e={}){super(t),this.options=Object.assign({},S,e),this.reverse=this.options.reverse?1:-1,this.radiusSquared="number"==typeof this.options.radius?Math.pow(this.options.radius,2):null,this.resize()}resize(){const t=this.options.distance;null!==t?(this.left=t,this.top=t,this.right=this.parent.worldScreenWidth-t,this.bottom=this.parent.worldScreenHeight-t):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=null===this.options.right?null:this.parent.worldScreenWidth-this.options.right,this.bottom=null===this.options.bottom?null:this.parent.worldScreenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(t){if(this.paused)return!1;if("mouse"!==t.data.pointerType&&1!==t.data.identifier||!this.options.allowButtons&&0!==t.data.buttons)return!1;const e=t.data.global.x,i=t.data.global.y;if(this.radiusSquared){const t=this.parent.toScreen(this.parent.center);if(Math.pow(t.x-e,2)+Math.pow(t.y-i,2)>=this.radiusSquared){const r=Math.atan2(t.y-i,t.x-e);this.options.linear?(this.horizontal=Math.round(Math.cos(r))*this.options.speed*this.reverse*.06,this.vertical=Math.round(Math.sin(r))*this.options.speed*this.reverse*.06):(this.horizontal=Math.cos(r)*this.options.speed*this.reverse*.06,this.vertical=Math.sin(r)*this.options.speed*this.reverse*.06)}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else null!==this.left&&e<this.left?this.horizontal=Number(this.reverse)*this.options.speed*.06:null!==this.right&&e>this.right?this.horizontal=-1*this.reverse*this.options.speed*.06:(this.decelerateHorizontal(),this.horizontal=0),null!==this.top&&i<this.top?this.vertical=Number(this.reverse)*this.options.speed*.06:null!==this.bottom&&i>this.bottom?this.vertical=-1*this.reverse*this.options.speed*.06:(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const t=this.parent.plugins.get("decelerate",!0);this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const t=this.parent.plugins.get("decelerate",!0);this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const t=this.parent.center;this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const R={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class P extends s{__init(){this.active=!1}__init2(){this.pinching=!1}__init3(){this.moved=!1}constructor(t,e={}){super(t),P.prototype.__init.call(this),P.prototype.__init2.call(this),P.prototype.__init3.call(this),this.options=Object.assign({},R,e)}down(){return this.parent.input.count()>=2&&(this.active=!0,!0)}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(t){if(this.paused||!this.active)return!1;const e=t.data.global.x,i=t.data.global.y,r=this.parent.input.touches;if(r.length>=2){const n=r[0],o=r[1],s=n.last&&o.last?Math.sqrt(Math.pow(o.last.x-n.last.x,2)+Math.pow(o.last.y-n.last.y,2)):null;if(n.id===t.data.pointerId?n.last={x:e,y:i,data:t.data}:o.id===t.data.pointerId&&(o.last={x:e,y:i,data:t.data}),s){let t;const e={x:n.last.x+(o.last.x-n.last.x)/2,y:n.last.y+(o.last.y-n.last.y)/2};this.options.center||(t=this.parent.toLocal(e));let i=Math.sqrt(Math.pow(o.last.x-n.last.x,2)+Math.pow(o.last.y-n.last.y,2));i=0===i?i=1e-10:i;const r=(1-s/i)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=r),this.isAxisY()&&(this.parent.scale.y+=r),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:e});const a=this.parent.plugins.get("clamp-zoom",!0);if(a&&a.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const i=this.parent.toGlobal(t);this.parent.x+=(e.x-i.x)*this.options.factor,this.parent.y+=(e.y-i.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(e.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(e.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=e,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return!!(this.pinching&&this.parent.input.touches.length<=1)&&(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0)}}const I={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class O extends s{constructor(t,e,i,r={}){super(t),this.options=Object.assign({},I,r),this.ease=l(r.ease,"easeInOutSine"),this.x=e,this.y=i,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(0===this.parent.input.count()){const t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction)}return!1}update(t){if(!(this.paused||this.options.interrupt&&0!==this.parent.input.count()))if(this.snapping){const e=this.snapping;let i,r,n;e.time+=t;const o=this.startX,s=this.startY,a=this.deltaX,h=this.deltaY;if(e.time>this.options.time)i=!0,r=o+a,n=s+h;else{const t=this.ease(e.time,0,1,this.options.time);r=o+a*t,n=s+h*t}this.options.topLeft?this.parent.moveCorner(r,n):this.parent.moveCenter(r,n),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),i&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const t=this.options.topLeft?this.parent.corner:this.parent.center;t.x===this.x&&t.y===this.y||this.snapStart()}}}const C={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class M extends s{constructor(t,e={}){super(t),this.options=Object.assign({},C,e),this.ease=l(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=t.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=t.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,0===this.options.time?(t.container.scale.x=this.xScale,t.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):e.forceStart&&this.createSnapping()}createSnapping(){const t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,i=this.parent.screenWidth/this.xScale,r=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:t,startY:e,deltaX:i-t,deltaY:r-e},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(t){if(this.paused)return;if(this.options.interrupt&&0!==this.parent.input.count())return;let e;if(this.options.center||this.options.noMove||(e=this.parent.center),this.snapping){if(this.snapping){const i=this.snapping;if(i.time+=t,i.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const t=this.snapping,e=this.ease(t.time,t.startX,t.deltaX,this.options.time),i=this.ease(t.time,t.startY,t.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/e,this.parent.scale.y=this.parent.screenHeight/i}const r=this.parent.plugins.get("clamp-zoom",!0);r&&r.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(e))}}else this.parent.scale.x===this.xScale&&this.parent.scale.y===this.yScale||this.createSnapping()}resume(){this.snapping=null,super.resume()}}const D={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class N extends s{constructor(t,e={}){super(t),this.options=Object.assign({},D,e),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){window.addEventListener("keydown",e=>{t.includes(e.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",e=>{t.includes(e.code)&&(this.keyIsPressed=!1)})}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const t=this.smoothingCenter,e=this.smoothing;let i;this.options.center||(i=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x+=e.x),this.isAxisY()&&(this.parent.scale.y+=e.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const r=this.parent.plugins.get("clamp-zoom",!0);if(r&&r.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const e=this.parent.toGlobal(i);this.parent.x+=t.x-e.x,this.parent.y+=t.y-e.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(t){if(this.paused)return;const e=this.parent.input.getPointerPosition(t),i=-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/200,r=Math.pow(2,(1+this.options.percent)*i);let n;this.options.center||(n=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=r),this.isAxisY()&&(this.parent.scale.y*=r),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const t=this.parent.toGlobal(n);this.parent.x+=e.x-t.x,this.parent.y+=e.y-t.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:t.deltaX,dy:t.deltaY,dz:t.deltaZ},event:t,viewport:this.parent})}wheel(t){if(this.paused)return!1;if(!this.checkKeyPress())return!1;if(t.ctrlKey&&this.options.trackpadPinch)this.pinch(t);else if(this.options.wheelZoom){const e=this.parent.input.getPointerPosition(t),i=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/500,r=Math.pow(2,(1+this.options.percent)*i);if(this.options.smooth){const t={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+t.x)*r-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+t.y)*r-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=e}else{let t;this.options.center||(t=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=r),this.isAxisY()&&(this.parent.scale.y*=r),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const i=this.parent.toGlobal(t);this.parent.x+=e.x-i.x,this.parent.y+=e.y-i.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:t.deltaX,dy:t.deltaY,dz:t.deltaZ},event:t,viewport:this.parent})}return!this.parent.options.passiveWheel}}class F{constructor(t){this.viewport=t,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new r.j(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.on("pointerout",this.up,this),this.wheelFunction=t=>this.handleWheel(t),this.viewport.options.divWheel.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.divWheel.removeEventListener("wheel",this.wheelFunction)}down(t){if(this.viewport.pause||!this.viewport.worldVisible)return;if("mouse"===t.data.pointerType?this.isMouseDown=!0:this.get(t.data.pointerId)||this.touches.push({id:t.data.pointerId,last:null}),1===this.count()){this.last=t.data.global.clone();const e=this.viewport.plugins.get("decelerate",!0),i=this.viewport.plugins.get("bounce",!0);e&&e.isActive()||i&&i.isActive()?this.clickedAvailable=!1:this.clickedAvailable=!0}else this.clickedAvailable=!1;this.viewport.plugins.down(t)&&this.viewport.options.stopPropagation&&t.stopPropagation()}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(t){return Math.abs(t)>=this.viewport.threshold}move(t){if(this.viewport.pause||!this.viewport.worldVisible)return;const e=this.viewport.plugins.move(t);if(this.clickedAvailable&&this.last){const e=t.data.global.x-this.last.x,i=t.data.global.y-this.last.y;(this.checkThreshold(e)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}e&&this.viewport.options.stopPropagation&&t.stopPropagation()}up(t){if(this.viewport.pause||!this.viewport.worldVisible)return;"mouse"===t.data.pointerType&&(this.isMouseDown=!1),"mouse"!==t.data.pointerType&&this.remove(t.data.pointerId);const e=this.viewport.plugins.up(t);this.clickedAvailable&&0===this.count()&&this.last&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this}),this.clickedAvailable=!1),e&&this.viewport.options.stopPropagation&&t.stopPropagation()}getPointerPosition(t){const e=new r.g;return this.viewport.options.interaction?this.viewport.options.interaction.mapPositionToPoint(e,t.clientX,t.clientY):(e.x=t.clientX,e.y=t.clientY),e}handleWheel(t){if(this.viewport.pause||!this.viewport.worldVisible)return;if(this.viewport.options.interaction&&this.viewport.options.interaction.interactionDOMElement!==t.target)return;const e=this.viewport.toLocal(this.getPointerPosition(t));if(this.viewport.left<=e.x&&e.x<=this.viewport.right&&this.viewport.top<=e.y&&e.y<=this.viewport.bottom){this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}}pause(){this.touches=[],this.isMouseDown=!1}get(t){for(const e of this.touches)if(e.id===t)return e;return null}remove(t){for(let e=0;e<this.touches.length;e++)if(this.touches[e].id===t)return void this.touches.splice(e,1)}count(){return(this.isMouseDown?1:0)+this.touches.length}}function L(t){let e=void 0,i=t[0],r=1;for(;r<t.length;){const n=t[r],o=t[r+1];if(r+=2,("optionalAccess"===n||"optionalCall"===n)&&null==i)return;"access"===n||"optionalAccess"===n?(e=i,i=o(i)):"call"!==n&&"optionalCall"!==n||(i=o((...t)=>i.call(e,...t)),e=void 0)}return i}const B=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class k{constructor(t){this.viewport=t,this.list=[],this.plugins={}}add(t,e,i=B.length){this.plugins[t]=e;const r=B.indexOf(t);-1!==r&&B.splice(r,1),B.splice(i,0,t),this.sort()}get(t,e){return e&&L([this,"access",t=>t.plugins,"access",e=>e[t],"optionalAccess",t=>t.paused])?null:this.plugins[t]}update(t){for(const e of this.list)e.update(t)}resize(){for(const t of this.list)t.resize()}reset(){for(const t of this.list)t.reset()}removeAll(){this.plugins={},this.sort()}remove(t){this.plugins[t]&&(delete this.plugins[t],this.viewport.emit(t+"-remove"),this.sort())}pause(t){L([this,"access",t=>t.plugins,"access",e=>e[t],"optionalAccess",t=>t.pause,"call",t=>t()])}resume(t){L([this,"access",t=>t.plugins,"access",e=>e[t],"optionalAccess",t=>t.resume,"call",t=>t()])}sort(){this.list=[];for(const t of B)this.plugins[t]&&this.list.push(this.plugins[t])}down(t){let e=!1;for(const i of this.list)i.down(t)&&(e=!0);return e}move(t){let e=!1;for(const i of this.viewport.plugins.list)i.move(t)&&(e=!0);return e}up(t){let e=!1;for(const i of this.list)i.up(t)&&(e=!0);return e}wheel(t){let e=!1;for(const i of this.list)i.wheel(t)&&(e=!0);return e}}const U={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,interaction:null,disableOnContextMenu:!1,ticker:o.a.shared};class G extends n.b{__init(){this._disableOnContextMenu=t=>t.preventDefault()}constructor(t={}){super(),G.prototype.__init.call(this),this.options=Object.assign({},{divWheel:document.body},U,t),this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.divWheel=this.options.divWheel||document.body,this.options.disableOnContextMenu&&this.options.divWheel.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new F(this),this.plugins=new k(this)}destroy(t){!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&this.options.divWheel.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(t)}update(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new r.j(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(t=window.innerWidth,e=window.innerHeight,i,r){this.screenWidth=t,this.screenHeight=e,void 0!==i&&(this._worldWidth=i),void 0!==r&&(this._worldHeight=r),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(t){this._worldWidth=t,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(t){this._worldHeight=t,this.plugins.resize()}getVisibleBounds(){return new r.j(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(t,e){return 2===arguments.length?this.toLocal(new r.g(t,e)):this.toLocal(t)}toScreen(t,e){return 2===arguments.length?this.toGlobal(new r.g(t,e)):this.toGlobal(t)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new r.g(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(t){this.moveCenter(t)}moveCenter(...t){let e,i;"number"==typeof t[0]?(e=t[0],i=t[1]):(e=t[0].x,i=t[0].y);const r=(this.worldScreenWidth/2-e)*this.scale.x,n=(this.worldScreenHeight/2-i)*this.scale.y;return this.x===r&&this.y===n||(this.position.set(r,n),this.plugins.reset(),this.dirty=!0),this}get corner(){return new r.g(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(t){this.moveCorner(t)}moveCorner(...t){let e,i;return 1===t.length?(e=-t[0].x*this.scale.x,i=-t[0].y*this.scale.y):(e=-t[0]*this.scale.x,i=-t[1]*this.scale.y),e===this.x&&i===this.y||(this.position.set(e,i),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(t){return this.screenWidth/t}findFitHeight(t){return this.screenHeight/t}findFit(t,e){const i=this.screenWidth/t,r=this.screenHeight/e;return Math.min(i,r)}findCover(t,e){const i=this.screenWidth/t,r=this.screenHeight/e;return Math.max(i,r)}fitWidth(t=this.worldWidth,e,i=!0,r){let n;e&&(n=this.center),this.scale.x=this.screenWidth/t,i&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!r&&o&&o.clamp(),e&&n&&this.moveCenter(n),this}fitHeight(t=this.worldHeight,e,i=!0,r){let n;e&&(n=this.center),this.scale.y=this.screenHeight/t,i&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!r&&o&&o.clamp(),e&&n&&this.moveCenter(n),this}fitWorld(t){let e;t&&(e=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),t&&e&&this.moveCenter(e),this}fit(t,e=this.worldWidth,i=this.worldHeight){let r;t&&(r=this.center),this.scale.x=this.screenWidth/e,this.scale.y=this.screenHeight/i,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const n=this.plugins.get("clamp-zoom",!0);return n&&n.clamp(),t&&r&&this.moveCenter(r),this}setZoom(t,e){let i;e&&(i=this.center),this.scale.set(t);const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),e&&i&&this.moveCenter(i),this}zoomPercent(t,e){return this.setZoom(this.scale.x+this.scale.x*t,e)}zoom(t,e){return this.fitWidth(t+this.worldScreenWidth,e),this}get scaled(){return this.scale.x}set scaled(t){this.setZoom(t,!0)}snapZoom(t){return this.plugins.add("snap-zoom",new M(this,t)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new r.g(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(t){this.x=-t*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(t){this.y=-t*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(t){this._dirty=t}get forceHitArea(){return this._forceHitArea}set forceHitArea(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new r.j(0,0,this.worldWidth,this.worldHeight))}drag(t){return this.plugins.add("drag",new T(this,t)),this}clamp(t){return this.plugins.add("clamp",new g(this,t)),this}decelerate(t){return this.plugins.add("decelerate",new b(this,t)),this}bounce(t){return this.plugins.add("bounce",new f(this,t)),this}pinch(t){return this.plugins.add("pinch",new P(this,t)),this}snap(t,e,i){return this.plugins.add("snap",new O(this,t,e,i)),this}follow(t,e){return this.plugins.add("follow",new E(this,t,e)),this}wheel(t){return this.plugins.add("wheel",new N(this,t)),this}animate(t){return this.plugins.add("animate",new c(this,t)),this}clampZoom(t){return this.plugins.add("clamp-zoom",new y(this,t)),this}mouseEdges(t){return this.plugins.add("mouse-edges",new A(this,t)),this}get pause(){return!!this._pause}set pause(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}ensureVisible(t,e,i,r,n){n&&(i>this.worldScreenWidth||r>this.worldScreenHeight)&&(this.fit(!0,i,r),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;t<this.left?(this.left=t,o=!0):t+i>this.right&&(this.right=t+i,o=!0),e<this.top?(this.top=e,o=!0):e+r>this.bottom&&(this.bottom=e+r,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}}).call(this,i(14))},function(t,e,i){"use strict";(function(t,i){
/*!
 * Vue.js v2.6.14
 * (c) 2014-2021 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({});function n(t){return null==t}function o(t){return null!=t}function s(t){return!0===t}function a(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function h(t){return null!==t&&"object"==typeof t}var l=Object.prototype.toString;function u(t){return"[object Object]"===l.call(t)}function c(t){return"[object RegExp]"===l.call(t)}function d(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return o(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function f(t){return null==t?"":Array.isArray(t)||u(t)&&t.toString===l?JSON.stringify(t,null,2):String(t)}function m(t){var e=parseFloat(t);return isNaN(e)?t:e}function g(t,e){for(var i=Object.create(null),r=t.split(","),n=0;n<r.length;n++)i[r[n]]=!0;return e?function(t){return i[t.toLowerCase()]}:function(t){return i[t]}}g("slot,component",!0);var v=g("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var i=t.indexOf(e);if(i>-1)return t.splice(i,1)}}var _=Object.prototype.hasOwnProperty;function b(t,e){return _.call(t,e)}function x(t){var e=Object.create(null);return function(i){return e[i]||(e[i]=t(i))}}var T=/-(\w)/g,w=x((function(t){return t.replace(T,(function(t,e){return e?e.toUpperCase():""}))})),E=x((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),S=/\B([A-Z])/g,A=x((function(t){return t.replace(S,"-$1").toLowerCase()}));var R=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function i(i){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,i):t.call(e)}return i._length=t.length,i};function P(t,e){e=e||0;for(var i=t.length-e,r=new Array(i);i--;)r[i]=t[i+e];return r}function I(t,e){for(var i in e)t[i]=e[i];return t}function O(t){for(var e={},i=0;i<t.length;i++)t[i]&&I(e,t[i]);return e}function C(t,e,i){}var M=function(t,e,i){return!1},D=function(t){return t};function N(t,e){if(t===e)return!0;var i=h(t),r=h(e);if(!i||!r)return!i&&!r&&String(t)===String(e);try{var n=Array.isArray(t),o=Array.isArray(e);if(n&&o)return t.length===e.length&&t.every((function(t,i){return N(t,e[i])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(n||o)return!1;var s=Object.keys(t),a=Object.keys(e);return s.length===a.length&&s.every((function(i){return N(t[i],e[i])}))}catch(t){return!1}}function F(t,e){for(var i=0;i<t.length;i++)if(N(t[i],e))return i;return-1}function L(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var B=["component","directive","filter"],k=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:M,isReservedAttr:M,isUnknownElement:M,getTagNamespace:C,parsePlatformTagName:D,mustUseProp:M,async:!0,_lifecycleHooks:k},G=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function X(t,e,i,r){Object.defineProperty(t,e,{value:i,enumerable:!!r,writable:!0,configurable:!0})}var j=new RegExp("[^"+G.source+".$_\\d]");var H,V="__proto__"in{},z="undefined"!=typeof window,W="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Y=W&&WXEnvironment.platform.toLowerCase(),q=z&&window.navigator.userAgent.toLowerCase(),K=q&&/msie|trident/.test(q),$=q&&q.indexOf("msie 9.0")>0,Z=q&&q.indexOf("edge/")>0,Q=(q&&q.indexOf("android"),q&&/iphone|ipad|ipod|ios/.test(q)||"ios"===Y),J=(q&&/chrome\/\d+/.test(q),q&&/phantomjs/.test(q),q&&q.match(/firefox\/(\d+)/)),tt={}.watch,et=!1;if(z)try{var it={};Object.defineProperty(it,"passive",{get:function(){et=!0}}),window.addEventListener("test-passive",null,it)}catch(t){}var rt=function(){return void 0===H&&(H=!z&&!W&&void 0!==t&&(t.process&&"server"===t.process.env.VUE_ENV)),H},nt=z&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ot(t){return"function"==typeof t&&/native code/.test(t.toString())}var st,at="undefined"!=typeof Symbol&&ot(Symbol)&&"undefined"!=typeof Reflect&&ot(Reflect.ownKeys);st="undefined"!=typeof Set&&ot(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ht=C,lt=0,ut=function(){this.id=lt++,this.subs=[]};ut.prototype.addSub=function(t){this.subs.push(t)},ut.prototype.removeSub=function(t){y(this.subs,t)},ut.prototype.depend=function(){ut.target&&ut.target.addDep(this)},ut.prototype.notify=function(){var t=this.subs.slice();for(var e=0,i=t.length;e<i;e++)t[e].update()},ut.target=null;var ct=[];function dt(t){ct.push(t),ut.target=t}function pt(){ct.pop(),ut.target=ct[ct.length-1]}var ft=function(t,e,i,r,n,o,s,a){this.tag=t,this.data=e,this.children=i,this.text=r,this.elm=n,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},mt={child:{configurable:!0}};mt.child.get=function(){return this.componentInstance},Object.defineProperties(ft.prototype,mt);var gt=function(t){void 0===t&&(t="");var e=new ft;return e.text=t,e.isComment=!0,e};function vt(t){return new ft(void 0,void 0,void 0,String(t))}function yt(t){var e=new ft(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var _t=Array.prototype,bt=Object.create(_t);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(t){var e=_t[t];X(bt,t,(function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];var n,o=e.apply(this,i),s=this.__ob__;switch(t){case"push":case"unshift":n=i;break;case"splice":n=i.slice(2)}return n&&s.observeArray(n),s.dep.notify(),o}))}));var xt=Object.getOwnPropertyNames(bt),Tt=!0;function wt(t){Tt=t}var Et=function(t){this.value=t,this.dep=new ut,this.vmCount=0,X(t,"__ob__",this),Array.isArray(t)?(V?function(t,e){t.__proto__=e}(t,bt):function(t,e,i){for(var r=0,n=i.length;r<n;r++){var o=i[r];X(t,o,e[o])}}(t,bt,xt),this.observeArray(t)):this.walk(t)};function St(t,e){var i;if(h(t)&&!(t instanceof ft))return b(t,"__ob__")&&t.__ob__ instanceof Et?i=t.__ob__:Tt&&!rt()&&(Array.isArray(t)||u(t))&&Object.isExtensible(t)&&!t._isVue&&(i=new Et(t)),e&&i&&i.vmCount++,i}function At(t,e,i,r,n){var o=new ut,s=Object.getOwnPropertyDescriptor(t,e);if(!s||!1!==s.configurable){var a=s&&s.get,h=s&&s.set;a&&!h||2!==arguments.length||(i=t[e]);var l=!n&&St(i);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=a?a.call(t):i;return ut.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(e)&&It(e))),e},set:function(e){var r=a?a.call(t):i;e===r||e!=e&&r!=r||a&&!h||(h?h.call(t,e):i=e,l=!n&&St(e),o.notify())}})}}function Rt(t,e,i){if(Array.isArray(t)&&d(e))return t.length=Math.max(t.length,e),t.splice(e,1,i),i;if(e in t&&!(e in Object.prototype))return t[e]=i,i;var r=t.__ob__;return t._isVue||r&&r.vmCount?i:r?(At(r.value,e,i),r.dep.notify(),i):(t[e]=i,i)}function Pt(t,e){if(Array.isArray(t)&&d(e))t.splice(e,1);else{var i=t.__ob__;t._isVue||i&&i.vmCount||b(t,e)&&(delete t[e],i&&i.dep.notify())}}function It(t){for(var e=void 0,i=0,r=t.length;i<r;i++)(e=t[i])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&It(e)}Et.prototype.walk=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)At(t,e[i])},Et.prototype.observeArray=function(t){for(var e=0,i=t.length;e<i;e++)St(t[e])};var Ot=U.optionMergeStrategies;function Ct(t,e){if(!e)return t;for(var i,r,n,o=at?Reflect.ownKeys(e):Object.keys(e),s=0;s<o.length;s++)"__ob__"!==(i=o[s])&&(r=t[i],n=e[i],b(t,i)?r!==n&&u(r)&&u(n)&&Ct(r,n):Rt(t,i,n));return t}function Mt(t,e,i){return i?function(){var r="function"==typeof e?e.call(i,i):e,n="function"==typeof t?t.call(i,i):t;return r?Ct(r,n):n}:e?t?function(){return Ct("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Dt(t,e){var i=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return i?function(t){for(var e=[],i=0;i<t.length;i++)-1===e.indexOf(t[i])&&e.push(t[i]);return e}(i):i}function Nt(t,e,i,r){var n=Object.create(t||null);return e?I(n,e):n}Ot.data=function(t,e,i){return i?Mt(t,e,i):e&&"function"!=typeof e?t:Mt(t,e)},k.forEach((function(t){Ot[t]=Dt})),B.forEach((function(t){Ot[t+"s"]=Nt})),Ot.watch=function(t,e,i,r){if(t===tt&&(t=void 0),e===tt&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var n={};for(var o in I(n,t),e){var s=n[o],a=e[o];s&&!Array.isArray(s)&&(s=[s]),n[o]=s?s.concat(a):Array.isArray(a)?a:[a]}return n},Ot.props=Ot.methods=Ot.inject=Ot.computed=function(t,e,i,r){if(!t)return e;var n=Object.create(null);return I(n,t),e&&I(n,e),n},Ot.provide=Mt;var Ft=function(t,e){return void 0===e?t:e};function Lt(t,e,i){if("function"==typeof e&&(e=e.options),function(t,e){var i=t.props;if(i){var r,n,o={};if(Array.isArray(i))for(r=i.length;r--;)"string"==typeof(n=i[r])&&(o[w(n)]={type:null});else if(u(i))for(var s in i)n=i[s],o[w(s)]=u(n)?n:{type:n};else 0;t.props=o}}(e),function(t,e){var i=t.inject;if(i){var r=t.inject={};if(Array.isArray(i))for(var n=0;n<i.length;n++)r[i[n]]={from:i[n]};else if(u(i))for(var o in i){var s=i[o];r[o]=u(s)?I({from:o},s):{from:s}}else 0}}(e),function(t){var e=t.directives;if(e)for(var i in e){var r=e[i];"function"==typeof r&&(e[i]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(t=Lt(t,e.extends,i)),e.mixins))for(var r=0,n=e.mixins.length;r<n;r++)t=Lt(t,e.mixins[r],i);var o,s={};for(o in t)a(o);for(o in e)b(t,o)||a(o);function a(r){var n=Ot[r]||Ft;s[r]=n(t[r],e[r],i,r)}return s}function Bt(t,e,i,r){if("string"==typeof i){var n=t[e];if(b(n,i))return n[i];var o=w(i);if(b(n,o))return n[o];var s=E(o);return b(n,s)?n[s]:n[i]||n[o]||n[s]}}function kt(t,e,i,r){var n=e[t],o=!b(i,t),s=i[t],a=jt(Boolean,n.type);if(a>-1)if(o&&!b(n,"default"))s=!1;else if(""===s||s===A(t)){var h=jt(String,n.type);(h<0||a<h)&&(s=!0)}if(void 0===s){s=function(t,e,i){if(!b(e,"default"))return;var r=e.default;0;if(t&&t.$options.propsData&&void 0===t.$options.propsData[i]&&void 0!==t._props[i])return t._props[i];return"function"==typeof r&&"Function"!==Gt(e.type)?r.call(t):r}(r,n,t);var l=Tt;wt(!0),St(s),wt(l)}return s}var Ut=/^\s*function (\w+)/;function Gt(t){var e=t&&t.toString().match(Ut);return e?e[1]:""}function Xt(t,e){return Gt(t)===Gt(e)}function jt(t,e){if(!Array.isArray(e))return Xt(e,t)?0:-1;for(var i=0,r=e.length;i<r;i++)if(Xt(e[i],t))return i;return-1}function Ht(t,e,i){dt();try{if(e)for(var r=e;r=r.$parent;){var n=r.$options.errorCaptured;if(n)for(var o=0;o<n.length;o++)try{if(!1===n[o].call(r,t,e,i))return}catch(t){zt(t,r,"errorCaptured hook")}}zt(t,e,i)}finally{pt()}}function Vt(t,e,i,r,n){var o;try{(o=i?t.apply(e,i):t.call(e))&&!o._isVue&&p(o)&&!o._handled&&(o.catch((function(t){return Ht(t,r,n+" (Promise/async)")})),o._handled=!0)}catch(t){Ht(t,r,n)}return o}function zt(t,e,i){if(U.errorHandler)try{return U.errorHandler.call(null,t,e,i)}catch(e){e!==t&&Wt(e,null,"config.errorHandler")}Wt(t,e,i)}function Wt(t,e,i){if(!z&&!W||"undefined"==typeof console)throw t;console.error(t)}var Yt,qt=!1,Kt=[],$t=!1;function Zt(){$t=!1;var t=Kt.slice(0);Kt.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&ot(Promise)){var Qt=Promise.resolve();Yt=function(){Qt.then(Zt),Q&&setTimeout(C)},qt=!0}else if(K||"undefined"==typeof MutationObserver||!ot(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Yt=void 0!==i&&ot(i)?function(){i(Zt)}:function(){setTimeout(Zt,0)};else{var Jt=1,te=new MutationObserver(Zt),ee=document.createTextNode(String(Jt));te.observe(ee,{characterData:!0}),Yt=function(){Jt=(Jt+1)%2,ee.data=String(Jt)},qt=!0}function ie(t,e){var i;if(Kt.push((function(){if(t)try{t.call(e)}catch(t){Ht(t,e,"nextTick")}else i&&i(e)})),$t||($t=!0,Yt()),!t&&"undefined"!=typeof Promise)return new Promise((function(t){i=t}))}var re=new st;function ne(t){!function t(e,i){var r,n,o=Array.isArray(e);if(!o&&!h(e)||Object.isFrozen(e)||e instanceof ft)return;if(e.__ob__){var s=e.__ob__.dep.id;if(i.has(s))return;i.add(s)}if(o)for(r=e.length;r--;)t(e[r],i);else for(n=Object.keys(e),r=n.length;r--;)t(e[n[r]],i)}(t,re),re.clear()}var oe=x((function(t){var e="&"===t.charAt(0),i="~"===(t=e?t.slice(1):t).charAt(0),r="!"===(t=i?t.slice(1):t).charAt(0);return{name:t=r?t.slice(1):t,once:i,capture:r,passive:e}}));function se(t,e){function i(){var t=arguments,r=i.fns;if(!Array.isArray(r))return Vt(r,null,arguments,e,"v-on handler");for(var n=r.slice(),o=0;o<n.length;o++)Vt(n[o],null,t,e,"v-on handler")}return i.fns=t,i}function ae(t,e,i,r,o,a){var h,l,u,c;for(h in t)l=t[h],u=e[h],c=oe(h),n(l)||(n(u)?(n(l.fns)&&(l=t[h]=se(l,a)),s(c.once)&&(l=t[h]=o(c.name,l,c.capture)),i(c.name,l,c.capture,c.passive,c.params)):l!==u&&(u.fns=l,t[h]=u));for(h in e)n(t[h])&&r((c=oe(h)).name,e[h],c.capture)}function he(t,e,i){var r;t instanceof ft&&(t=t.data.hook||(t.data.hook={}));var a=t[e];function h(){i.apply(this,arguments),y(r.fns,h)}n(a)?r=se([h]):o(a.fns)&&s(a.merged)?(r=a).fns.push(h):r=se([a,h]),r.merged=!0,t[e]=r}function le(t,e,i,r,n){if(o(e)){if(b(e,i))return t[i]=e[i],n||delete e[i],!0;if(b(e,r))return t[i]=e[r],n||delete e[r],!0}return!1}function ue(t){return a(t)?[vt(t)]:Array.isArray(t)?function t(e,i){var r,h,l,u,c=[];for(r=0;r<e.length;r++)n(h=e[r])||"boolean"==typeof h||(l=c.length-1,u=c[l],Array.isArray(h)?h.length>0&&(ce((h=t(h,(i||"")+"_"+r))[0])&&ce(u)&&(c[l]=vt(u.text+h[0].text),h.shift()),c.push.apply(c,h)):a(h)?ce(u)?c[l]=vt(u.text+h):""!==h&&c.push(vt(h)):ce(h)&&ce(u)?c[l]=vt(u.text+h.text):(s(e._isVList)&&o(h.tag)&&n(h.key)&&o(i)&&(h.key="__vlist"+i+"_"+r+"__"),c.push(h)));return c}(t):void 0}function ce(t){return o(t)&&o(t.text)&&!1===t.isComment}function de(t,e){if(t){for(var i=Object.create(null),r=at?Reflect.ownKeys(t):Object.keys(t),n=0;n<r.length;n++){var o=r[n];if("__ob__"!==o){for(var s=t[o].from,a=e;a;){if(a._provided&&b(a._provided,s)){i[o]=a._provided[s];break}a=a.$parent}if(!a)if("default"in t[o]){var h=t[o].default;i[o]="function"==typeof h?h.call(e):h}else 0}}return i}}function pe(t,e){if(!t||!t.length)return{};for(var i={},r=0,n=t.length;r<n;r++){var o=t[r],s=o.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,o.context!==e&&o.fnContext!==e||!s||null==s.slot)(i.default||(i.default=[])).push(o);else{var a=s.slot,h=i[a]||(i[a]=[]);"template"===o.tag?h.push.apply(h,o.children||[]):h.push(o)}}for(var l in i)i[l].every(fe)&&delete i[l];return i}function fe(t){return t.isComment&&!t.asyncFactory||" "===t.text}function me(t){return t.isComment&&t.asyncFactory}function ge(t,e,i){var n,o=Object.keys(e).length>0,s=t?!!t.$stable:!o,a=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(s&&i&&i!==r&&a===i.$key&&!o&&!i.$hasNormal)return i;for(var h in n={},t)t[h]&&"$"!==h[0]&&(n[h]=ve(e,h,t[h]))}else n={};for(var l in e)l in n||(n[l]=ye(e,l));return t&&Object.isExtensible(t)&&(t._normalized=n),X(n,"$stable",s),X(n,"$key",a),X(n,"$hasNormal",o),n}function ve(t,e,i){var r=function(){var t=arguments.length?i.apply(null,arguments):i({}),e=(t=t&&"object"==typeof t&&!Array.isArray(t)?[t]:ue(t))&&t[0];return t&&(!e||1===t.length&&e.isComment&&!me(e))?void 0:t};return i.proxy&&Object.defineProperty(t,e,{get:r,enumerable:!0,configurable:!0}),r}function ye(t,e){return function(){return t[e]}}function _e(t,e){var i,r,n,s,a;if(Array.isArray(t)||"string"==typeof t)for(i=new Array(t.length),r=0,n=t.length;r<n;r++)i[r]=e(t[r],r);else if("number"==typeof t)for(i=new Array(t),r=0;r<t;r++)i[r]=e(r+1,r);else if(h(t))if(at&&t[Symbol.iterator]){i=[];for(var l=t[Symbol.iterator](),u=l.next();!u.done;)i.push(e(u.value,i.length)),u=l.next()}else for(s=Object.keys(t),i=new Array(s.length),r=0,n=s.length;r<n;r++)a=s[r],i[r]=e(t[a],a,r);return o(i)||(i=[]),i._isVList=!0,i}function be(t,e,i,r){var n,o=this.$scopedSlots[t];o?(i=i||{},r&&(i=I(I({},r),i)),n=o(i)||("function"==typeof e?e():e)):n=this.$slots[t]||("function"==typeof e?e():e);var s=i&&i.slot;return s?this.$createElement("template",{slot:s},n):n}function xe(t){return Bt(this.$options,"filters",t)||D}function Te(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function we(t,e,i,r,n){var o=U.keyCodes[e]||i;return n&&r&&!U.keyCodes[e]?Te(n,r):o?Te(o,t):r?A(r)!==e:void 0===t}function Ee(t,e,i,r,n){if(i)if(h(i)){var o;Array.isArray(i)&&(i=O(i));var s=function(s){if("class"===s||"style"===s||v(s))o=t;else{var a=t.attrs&&t.attrs.type;o=r||U.mustUseProp(e,a,s)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var h=w(s),l=A(s);h in o||l in o||(o[s]=i[s],n&&((t.on||(t.on={}))["update:"+s]=function(t){i[s]=t}))};for(var a in i)s(a)}else;return t}function Se(t,e){var i=this._staticTrees||(this._staticTrees=[]),r=i[t];return r&&!e||Re(r=i[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),r}function Ae(t,e,i){return Re(t,"__once__"+e+(i?"_"+i:""),!0),t}function Re(t,e,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&Pe(t[r],e+"_"+r,i);else Pe(t,e,i)}function Pe(t,e,i){t.isStatic=!0,t.key=e,t.isOnce=i}function Ie(t,e){if(e)if(u(e)){var i=t.on=t.on?I({},t.on):{};for(var r in e){var n=i[r],o=e[r];i[r]=n?[].concat(n,o):o}}else;return t}function Oe(t,e,i,r){e=e||{$stable:!i};for(var n=0;n<t.length;n++){var o=t[n];Array.isArray(o)?Oe(o,e,i):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function Ce(t,e){for(var i=0;i<e.length;i+=2){var r=e[i];"string"==typeof r&&r&&(t[e[i]]=e[i+1])}return t}function Me(t,e){return"string"==typeof t?e+t:t}function De(t){t._o=Ae,t._n=m,t._s=f,t._l=_e,t._t=be,t._q=N,t._i=F,t._m=Se,t._f=xe,t._k=we,t._b=Ee,t._v=vt,t._e=gt,t._u=Oe,t._g=Ie,t._d=Ce,t._p=Me}function Ne(t,e,i,n,o){var a,h=this,l=o.options;b(n,"_uid")?(a=Object.create(n))._original=n:(a=n,n=n._original);var u=s(l._compiled),c=!u;this.data=t,this.props=e,this.children=i,this.parent=n,this.listeners=t.on||r,this.injections=de(l.inject,n),this.slots=function(){return h.$slots||ge(t.scopedSlots,h.$slots=pe(i,n)),h.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ge(t.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=ge(t.scopedSlots,this.$slots)),l._scopeId?this._c=function(t,e,i,r){var o=Xe(a,t,e,i,r,c);return o&&!Array.isArray(o)&&(o.fnScopeId=l._scopeId,o.fnContext=n),o}:this._c=function(t,e,i,r){return Xe(a,t,e,i,r,c)}}function Fe(t,e,i,r,n){var o=yt(t);return o.fnContext=i,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function Le(t,e){for(var i in e)t[w(i)]=e[i]}De(Ne.prototype);var Be={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var i=t;Be.prepatch(i,i)}else{(t.componentInstance=function(t,e){var i={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;o(r)&&(i.render=r.render,i.staticRenderFns=r.staticRenderFns);return new t.componentOptions.Ctor(i)}(t,$e)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var i=e.componentOptions;!function(t,e,i,n,o){0;var s=n.data.scopedSlots,a=t.$scopedSlots,h=!!(s&&!s.$stable||a!==r&&!a.$stable||s&&t.$scopedSlots.$key!==s.$key||!s&&t.$scopedSlots.$key),l=!!(o||t.$options._renderChildren||h);t.$options._parentVnode=n,t.$vnode=n,t._vnode&&(t._vnode.parent=n);if(t.$options._renderChildren=o,t.$attrs=n.data.attrs||r,t.$listeners=i||r,e&&t.$options.props){wt(!1);for(var u=t._props,c=t.$options._propKeys||[],d=0;d<c.length;d++){var p=c[d],f=t.$options.props;u[p]=kt(p,f,e,t)}wt(!0),t.$options.propsData=e}i=i||r;var m=t.$options._parentListeners;t.$options._parentListeners=i,Ke(t,i,m),l&&(t.$slots=pe(o,n.context),t.$forceUpdate());0}(e.componentInstance=t.componentInstance,i.propsData,i.listeners,e,i.children)},insert:function(t){var e,i=t.context,r=t.componentInstance;r._isMounted||(r._isMounted=!0,ti(r,"mounted")),t.data.keepAlive&&(i._isMounted?((e=r)._inactive=!1,ii.push(e)):Je(r,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?function t(e,i){if(i&&(e._directInactive=!0,Qe(e)))return;if(!e._inactive){e._inactive=!0;for(var r=0;r<e.$children.length;r++)t(e.$children[r]);ti(e,"deactivated")}}(e,!0):e.$destroy())}},ke=Object.keys(Be);function Ue(t,e,i,a,l){if(!n(t)){var u=i.$options._base;if(h(t)&&(t=u.extend(t)),"function"==typeof t){var c;if(n(t.cid)&&void 0===(t=function(t,e){if(s(t.error)&&o(t.errorComp))return t.errorComp;if(o(t.resolved))return t.resolved;var i=He;i&&o(t.owners)&&-1===t.owners.indexOf(i)&&t.owners.push(i);if(s(t.loading)&&o(t.loadingComp))return t.loadingComp;if(i&&!o(t.owners)){var r=t.owners=[i],a=!0,l=null,u=null;i.$on("hook:destroyed",(function(){return y(r,i)}));var c=function(t){for(var e=0,i=r.length;e<i;e++)r[e].$forceUpdate();t&&(r.length=0,null!==l&&(clearTimeout(l),l=null),null!==u&&(clearTimeout(u),u=null))},d=L((function(i){t.resolved=Ve(i,e),a?r.length=0:c(!0)})),f=L((function(e){o(t.errorComp)&&(t.error=!0,c(!0))})),m=t(d,f);return h(m)&&(p(m)?n(t.resolved)&&m.then(d,f):p(m.component)&&(m.component.then(d,f),o(m.error)&&(t.errorComp=Ve(m.error,e)),o(m.loading)&&(t.loadingComp=Ve(m.loading,e),0===m.delay?t.loading=!0:l=setTimeout((function(){l=null,n(t.resolved)&&n(t.error)&&(t.loading=!0,c(!1))}),m.delay||200)),o(m.timeout)&&(u=setTimeout((function(){u=null,n(t.resolved)&&f(null)}),m.timeout)))),a=!1,t.loading?t.loadingComp:t.resolved}}(c=t,u)))return function(t,e,i,r,n){var o=gt();return o.asyncFactory=t,o.asyncMeta={data:e,context:i,children:r,tag:n},o}(c,e,i,a,l);e=e||{},Ti(t),o(e.model)&&function(t,e){var i=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[i]=e.model.value;var n=e.on||(e.on={}),s=n[r],a=e.model.callback;o(s)?(Array.isArray(s)?-1===s.indexOf(a):s!==a)&&(n[r]=[a].concat(s)):n[r]=a}(t.options,e);var d=function(t,e,i){var r=e.options.props;if(!n(r)){var s={},a=t.attrs,h=t.props;if(o(a)||o(h))for(var l in r){var u=A(l);le(s,h,l,u,!0)||le(s,a,l,u,!1)}return s}}(e,t);if(s(t.options.functional))return function(t,e,i,n,s){var a=t.options,h={},l=a.props;if(o(l))for(var u in l)h[u]=kt(u,l,e||r);else o(i.attrs)&&Le(h,i.attrs),o(i.props)&&Le(h,i.props);var c=new Ne(i,h,s,n,t),d=a.render.call(null,c._c,c);if(d instanceof ft)return Fe(d,i,c.parent,a,c);if(Array.isArray(d)){for(var p=ue(d)||[],f=new Array(p.length),m=0;m<p.length;m++)f[m]=Fe(p[m],i,c.parent,a,c);return f}}(t,d,e,i,a);var f=e.on;if(e.on=e.nativeOn,s(t.options.abstract)){var m=e.slot;e={},m&&(e.slot=m)}!function(t){for(var e=t.hook||(t.hook={}),i=0;i<ke.length;i++){var r=ke[i],n=e[r],o=Be[r];n===o||n&&n._merged||(e[r]=n?Ge(o,n):o)}}(e);var g=t.options.name||l;return new ft("vue-component-"+t.cid+(g?"-"+g:""),e,void 0,void 0,void 0,i,{Ctor:t,propsData:d,listeners:f,tag:l,children:a},c)}}}function Ge(t,e){var i=function(i,r){t(i,r),e(i,r)};return i._merged=!0,i}function Xe(t,e,i,r,l,u){return(Array.isArray(i)||a(i))&&(l=r,r=i,i=void 0),s(u)&&(l=2),function(t,e,i,r,a){if(o(i)&&o(i.__ob__))return gt();o(i)&&o(i.is)&&(e=i.is);if(!e)return gt();0;Array.isArray(r)&&"function"==typeof r[0]&&((i=i||{}).scopedSlots={default:r[0]},r.length=0);2===a?r=ue(r):1===a&&(r=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(r));var l,u;if("string"==typeof e){var c;u=t.$vnode&&t.$vnode.ns||U.getTagNamespace(e),l=U.isReservedTag(e)?new ft(U.parsePlatformTagName(e),i,r,void 0,void 0,t):i&&i.pre||!o(c=Bt(t.$options,"components",e))?new ft(e,i,r,void 0,void 0,t):Ue(c,i,t,r,e)}else l=Ue(e,i,t,r);return Array.isArray(l)?l:o(l)?(o(u)&&function t(e,i,r){e.ns=i,"foreignObject"===e.tag&&(i=void 0,r=!0);if(o(e.children))for(var a=0,h=e.children.length;a<h;a++){var l=e.children[a];o(l.tag)&&(n(l.ns)||s(r)&&"svg"!==l.tag)&&t(l,i,r)}}(l,u),o(i)&&function(t){h(t.style)&&ne(t.style);h(t.class)&&ne(t.class)}(i),l):gt()}(t,e,i,r,l)}var je,He=null;function Ve(t,e){return(t.__esModule||at&&"Module"===t[Symbol.toStringTag])&&(t=t.default),h(t)?e.extend(t):t}function ze(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var i=t[e];if(o(i)&&(o(i.componentOptions)||me(i)))return i}}function We(t,e){je.$on(t,e)}function Ye(t,e){je.$off(t,e)}function qe(t,e){var i=je;return function r(){var n=e.apply(null,arguments);null!==n&&i.$off(t,r)}}function Ke(t,e,i){je=t,ae(e,i||{},We,Ye,qe,t),je=void 0}var $e=null;function Ze(t){var e=$e;return $e=t,function(){$e=e}}function Qe(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Je(t,e){if(e){if(t._directInactive=!1,Qe(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var i=0;i<t.$children.length;i++)Je(t.$children[i]);ti(t,"activated")}}function ti(t,e){dt();var i=t.$options[e],r=e+" hook";if(i)for(var n=0,o=i.length;n<o;n++)Vt(i[n],t,null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),pt()}var ei=[],ii=[],ri={},ni=!1,oi=!1,si=0;var ai=0,hi=Date.now;if(z&&!K){var li=window.performance;li&&"function"==typeof li.now&&hi()>document.createEvent("Event").timeStamp&&(hi=function(){return li.now()})}function ui(){var t,e;for(ai=hi(),oi=!0,ei.sort((function(t,e){return t.id-e.id})),si=0;si<ei.length;si++)(t=ei[si]).before&&t.before(),e=t.id,ri[e]=null,t.run();var i=ii.slice(),r=ei.slice();si=ei.length=ii.length=0,ri={},ni=oi=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Je(t[e],!0)}(i),function(t){var e=t.length;for(;e--;){var i=t[e],r=i.vm;r._watcher===i&&r._isMounted&&!r._isDestroyed&&ti(r,"updated")}}(r),nt&&U.devtools&&nt.emit("flush")}var ci=0,di=function(t,e,i,r,n){this.vm=t,n&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++ci,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new st,this.newDepIds=new st,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!j.test(t)){var e=t.split(".");return function(t){for(var i=0;i<e.length;i++){if(!t)return;t=t[e[i]]}return t}}}(e),this.getter||(this.getter=C)),this.value=this.lazy?void 0:this.get()};di.prototype.get=function(){var t;dt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Ht(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ne(t),pt(),this.cleanupDeps()}return t},di.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},di.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},di.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==ri[e]){if(ri[e]=!0,oi){for(var i=ei.length-1;i>si&&ei[i].id>t.id;)i--;ei.splice(i+1,0,t)}else ei.push(t);ni||(ni=!0,ie(ui))}}(this)},di.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||h(t)||this.deep){var e=this.value;if(this.value=t,this.user){var i='callback for watcher "'+this.expression+'"';Vt(this.cb,this.vm,[t,e],this.vm,i)}else this.cb.call(this.vm,t,e)}}},di.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},di.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},di.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var pi={enumerable:!0,configurable:!0,get:C,set:C};function fi(t,e,i){pi.get=function(){return this[e][i]},pi.set=function(t){this[e][i]=t},Object.defineProperty(t,i,pi)}function mi(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var i=t.$options.propsData||{},r=t._props={},n=t.$options._propKeys=[];t.$parent&&wt(!1);var o=function(o){n.push(o);var s=kt(o,e,i,t);At(r,o,s),o in t||fi(t,"_props",o)};for(var s in e)o(s);wt(!0)}(t,e.props),e.methods&&function(t,e){t.$options.props;for(var i in e)t[i]="function"!=typeof e[i]?C:R(e[i],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;u(e=t._data="function"==typeof e?function(t,e){dt();try{return t.call(e,e)}catch(t){return Ht(t,e,"data()"),{}}finally{pt()}}(e,t):e||{})||(e={});var i=Object.keys(e),r=t.$options.props,n=(t.$options.methods,i.length);for(;n--;){var o=i[n];0,r&&b(r,o)||(s=void 0,36!==(s=(o+"").charCodeAt(0))&&95!==s&&fi(t,"_data",o))}var s;St(e,!0)}(t):St(t._data={},!0),e.computed&&function(t,e){var i=t._computedWatchers=Object.create(null),r=rt();for(var n in e){var o=e[n],s="function"==typeof o?o:o.get;0,r||(i[n]=new di(t,s||C,C,gi)),n in t||vi(t,n,o)}}(t,e.computed),e.watch&&e.watch!==tt&&function(t,e){for(var i in e){var r=e[i];if(Array.isArray(r))for(var n=0;n<r.length;n++)bi(t,i,r[n]);else bi(t,i,r)}}(t,e.watch)}var gi={lazy:!0};function vi(t,e,i){var r=!rt();"function"==typeof i?(pi.get=r?yi(e):_i(i),pi.set=C):(pi.get=i.get?r&&!1!==i.cache?yi(e):_i(i.get):C,pi.set=i.set||C),Object.defineProperty(t,e,pi)}function yi(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),ut.target&&e.depend(),e.value}}function _i(t){return function(){return t.call(this,this)}}function bi(t,e,i,r){return u(i)&&(r=i,i=i.handler),"string"==typeof i&&(i=t[i]),t.$watch(e,i,r)}var xi=0;function Ti(t){var e=t.options;if(t.super){var i=Ti(t.super);if(i!==t.superOptions){t.superOptions=i;var r=function(t){var e,i=t.options,r=t.sealedOptions;for(var n in i)i[n]!==r[n]&&(e||(e={}),e[n]=i[n]);return e}(t);r&&I(t.extendOptions,r),(e=t.options=Lt(i,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function wi(t){this._init(t)}function Ei(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var i=this,r=i.cid,n=t._Ctor||(t._Ctor={});if(n[r])return n[r];var o=t.name||i.options.name;var s=function(t){this._init(t)};return(s.prototype=Object.create(i.prototype)).constructor=s,s.cid=e++,s.options=Lt(i.options,t),s.super=i,s.options.props&&function(t){var e=t.options.props;for(var i in e)fi(t.prototype,"_props",i)}(s),s.options.computed&&function(t){var e=t.options.computed;for(var i in e)vi(t.prototype,i,e[i])}(s),s.extend=i.extend,s.mixin=i.mixin,s.use=i.use,B.forEach((function(t){s[t]=i[t]})),o&&(s.options.components[o]=s),s.superOptions=i.options,s.extendOptions=t,s.sealedOptions=I({},s.options),n[r]=s,s}}function Si(t){return t&&(t.Ctor.options.name||t.tag)}function Ai(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!c(t)&&t.test(e)}function Ri(t,e){var i=t.cache,r=t.keys,n=t._vnode;for(var o in i){var s=i[o];if(s){var a=s.name;a&&!e(a)&&Pi(i,o,r,n)}}}function Pi(t,e,i,r){var n=t[e];!n||r&&n.tag===r.tag||n.componentInstance.$destroy(),t[e]=null,y(i,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=xi++,e._isVue=!0,t&&t._isComponent?function(t,e){var i=t.$options=Object.create(t.constructor.options),r=e._parentVnode;i.parent=e.parent,i._parentVnode=r;var n=r.componentOptions;i.propsData=n.propsData,i._parentListeners=n.listeners,i._renderChildren=n.children,i._componentTag=n.tag,e.render&&(i.render=e.render,i.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=Lt(Ti(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,i=e.parent;if(i&&!e.abstract){for(;i.$options.abstract&&i.$parent;)i=i.$parent;i.$children.push(t)}t.$parent=i,t.$root=i?i.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Ke(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,i=t.$vnode=e._parentVnode,n=i&&i.context;t.$slots=pe(e._renderChildren,n),t.$scopedSlots=r,t._c=function(e,i,r,n){return Xe(t,e,i,r,n,!1)},t.$createElement=function(e,i,r,n){return Xe(t,e,i,r,n,!0)};var o=i&&i.data;At(t,"$attrs",o&&o.attrs||r,null,!0),At(t,"$listeners",e._parentListeners||r,null,!0)}(e),ti(e,"beforeCreate"),function(t){var e=de(t.$options.inject,t);e&&(wt(!1),Object.keys(e).forEach((function(i){At(t,i,e[i])})),wt(!0))}(e),mi(e),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(e),ti(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(wi),function(t){var e={get:function(){return this._data}},i={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",i),t.prototype.$set=Rt,t.prototype.$delete=Pt,t.prototype.$watch=function(t,e,i){if(u(e))return bi(this,t,e,i);(i=i||{}).user=!0;var r=new di(this,t,e,i);if(i.immediate){var n='callback for immediate watcher "'+r.expression+'"';dt(),Vt(e,this,[r.value],this,n),pt()}return function(){r.teardown()}}}(wi),function(t){var e=/^hook:/;t.prototype.$on=function(t,i){var r=this;if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)r.$on(t[n],i);else(r._events[t]||(r._events[t]=[])).push(i),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var i=this;function r(){i.$off(t,r),e.apply(i,arguments)}return r.fn=e,i.$on(t,r),i},t.prototype.$off=function(t,e){var i=this;if(!arguments.length)return i._events=Object.create(null),i;if(Array.isArray(t)){for(var r=0,n=t.length;r<n;r++)i.$off(t[r],e);return i}var o,s=i._events[t];if(!s)return i;if(!e)return i._events[t]=null,i;for(var a=s.length;a--;)if((o=s[a])===e||o.fn===e){s.splice(a,1);break}return i},t.prototype.$emit=function(t){var e=this,i=e._events[t];if(i){i=i.length>1?P(i):i;for(var r=P(arguments,1),n='event handler for "'+t+'"',o=0,s=i.length;o<s;o++)Vt(i[o],e,r,e,n)}return e}}(wi),function(t){t.prototype._update=function(t,e){var i=this,r=i.$el,n=i._vnode,o=Ze(i);i._vnode=t,i.$el=n?i.__patch__(n,t):i.__patch__(i.$el,t,e,!1),o(),r&&(r.__vue__=null),i.$el&&(i.$el.__vue__=i),i.$vnode&&i.$parent&&i.$vnode===i.$parent._vnode&&(i.$parent.$el=i.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){ti(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();for(var i=t._watchers.length;i--;)t._watchers[i].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),ti(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(wi),function(t){De(t.prototype),t.prototype.$nextTick=function(t){return ie(t,this)},t.prototype._render=function(){var t,e=this,i=e.$options,r=i.render,n=i._parentVnode;n&&(e.$scopedSlots=ge(n.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=n;try{He=e,t=r.call(e._renderProxy,e.$createElement)}catch(i){Ht(i,e,"render"),t=e._vnode}finally{He=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof ft||(t=gt()),t.parent=n,t}}(wi);var Ii=[String,RegExp,Array],Oi={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Ii,exclude:Ii,max:[String,Number]},methods:{cacheVNode:function(){var t=this.cache,e=this.keys,i=this.vnodeToCache,r=this.keyToCache;if(i){var n=i.tag,o=i.componentInstance,s=i.componentOptions;t[r]={name:Si(s),tag:n,componentInstance:o},e.push(r),this.max&&e.length>parseInt(this.max)&&Pi(t,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Pi(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){Ri(t,(function(t){return Ai(e,t)}))})),this.$watch("exclude",(function(e){Ri(t,(function(t){return!Ai(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=ze(t),i=e&&e.componentOptions;if(i){var r=Si(i),n=this.include,o=this.exclude;if(n&&(!r||!Ai(n,r))||o&&r&&Ai(o,r))return e;var s=this.cache,a=this.keys,h=null==e.key?i.Ctor.cid+(i.tag?"::"+i.tag:""):e.key;s[h]?(e.componentInstance=s[h].componentInstance,y(a,h),a.push(h)):(this.vnodeToCache=e,this.keyToCache=h),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return U}};Object.defineProperty(t,"config",e),t.util={warn:ht,extend:I,mergeOptions:Lt,defineReactive:At},t.set=Rt,t.delete=Pt,t.nextTick=ie,t.observable=function(t){return St(t),t},t.options=Object.create(null),B.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,I(t.options.components,Oi),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var i=P(arguments,1);return i.unshift(this),"function"==typeof t.install?t.install.apply(t,i):"function"==typeof t&&t.apply(null,i),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Lt(this.options,t),this}}(t),Ei(t),function(t){B.forEach((function(e){t[e]=function(t,i){return i?("component"===e&&u(i)&&(i.name=i.name||t,i=this.options._base.extend(i)),"directive"===e&&"function"==typeof i&&(i={bind:i,update:i}),this.options[e+"s"][t]=i,i):this.options[e+"s"][t]}}))}(t)}(wi),Object.defineProperty(wi.prototype,"$isServer",{get:rt}),Object.defineProperty(wi.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(wi,"FunctionalRenderContext",{value:Ne}),wi.version="2.6.14";var Ci=g("style,class"),Mi=g("input,textarea,option,select,progress"),Di=g("contenteditable,draggable,spellcheck"),Ni=g("events,caret,typing,plaintext-only"),Fi=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Li="http://www.w3.org/1999/xlink",Bi=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},ki=function(t){return Bi(t)?t.slice(6,t.length):""},Ui=function(t){return null==t||!1===t};function Gi(t){for(var e=t.data,i=t,r=t;o(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=Xi(r.data,e));for(;o(i=i.parent);)i&&i.data&&(e=Xi(e,i.data));return function(t,e){if(o(t)||o(e))return ji(t,Hi(e));return""}(e.staticClass,e.class)}function Xi(t,e){return{staticClass:ji(t.staticClass,e.staticClass),class:o(t.class)?[t.class,e.class]:e.class}}function ji(t,e){return t?e?t+" "+e:t:e||""}function Hi(t){return Array.isArray(t)?function(t){for(var e,i="",r=0,n=t.length;r<n;r++)o(e=Hi(t[r]))&&""!==e&&(i&&(i+=" "),i+=e);return i}(t):h(t)?function(t){var e="";for(var i in t)t[i]&&(e&&(e+=" "),e+=i);return e}(t):"string"==typeof t?t:""}var Vi={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},zi=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Wi=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Yi=function(t){return zi(t)||Wi(t)};var qi=Object.create(null);var Ki=g("text,number,password,search,email,tel,url");var $i=Object.freeze({createElement:function(t,e){var i=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&i.setAttribute("multiple","multiple"),i},createElementNS:function(t,e){return document.createElementNS(Vi[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,i){t.insertBefore(e,i)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),Zi={create:function(t,e){Qi(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Qi(t,!0),Qi(e))},destroy:function(t){Qi(t,!0)}};function Qi(t,e){var i=t.data.ref;if(o(i)){var r=t.context,n=t.componentInstance||t.elm,s=r.$refs;e?Array.isArray(s[i])?y(s[i],n):s[i]===n&&(s[i]=void 0):t.data.refInFor?Array.isArray(s[i])?s[i].indexOf(n)<0&&s[i].push(n):s[i]=[n]:s[i]=n}}var Ji=new ft("",{},[]),tr=["create","activate","update","remove","destroy"];function er(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&o(t.data)===o(e.data)&&function(t,e){if("input"!==t.tag)return!0;var i,r=o(i=t.data)&&o(i=i.attrs)&&i.type,n=o(i=e.data)&&o(i=i.attrs)&&i.type;return r===n||Ki(r)&&Ki(n)}(t,e)||s(t.isAsyncPlaceholder)&&n(e.asyncFactory.error))}function ir(t,e,i){var r,n,s={};for(r=e;r<=i;++r)o(n=t[r].key)&&(s[n]=r);return s}var rr={create:nr,update:nr,destroy:function(t){nr(t,Ji)}};function nr(t,e){(t.data.directives||e.data.directives)&&function(t,e){var i,r,n,o=t===Ji,s=e===Ji,a=sr(t.data.directives,t.context),h=sr(e.data.directives,e.context),l=[],u=[];for(i in h)r=a[i],n=h[i],r?(n.oldValue=r.value,n.oldArg=r.arg,hr(n,"update",e,t),n.def&&n.def.componentUpdated&&u.push(n)):(hr(n,"bind",e,t),n.def&&n.def.inserted&&l.push(n));if(l.length){var c=function(){for(var i=0;i<l.length;i++)hr(l[i],"inserted",e,t)};o?he(e,"insert",c):c()}u.length&&he(e,"postpatch",(function(){for(var i=0;i<u.length;i++)hr(u[i],"componentUpdated",e,t)}));if(!o)for(i in a)h[i]||hr(a[i],"unbind",t,t,s)}(t,e)}var or=Object.create(null);function sr(t,e){var i,r,n=Object.create(null);if(!t)return n;for(i=0;i<t.length;i++)(r=t[i]).modifiers||(r.modifiers=or),n[ar(r)]=r,r.def=Bt(e.$options,"directives",r.name);return n}function ar(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function hr(t,e,i,r,n){var o=t.def&&t.def[e];if(o)try{o(i.elm,t,i,r,n)}catch(r){Ht(r,i.context,"directive "+t.name+" "+e+" hook")}}var lr=[Zi,rr];function ur(t,e){var i=e.componentOptions;if(!(o(i)&&!1===i.Ctor.options.inheritAttrs||n(t.data.attrs)&&n(e.data.attrs))){var r,s,a=e.elm,h=t.data.attrs||{},l=e.data.attrs||{};for(r in o(l.__ob__)&&(l=e.data.attrs=I({},l)),l)s=l[r],h[r]!==s&&cr(a,r,s,e.data.pre);for(r in(K||Z)&&l.value!==h.value&&cr(a,"value",l.value),h)n(l[r])&&(Bi(r)?a.removeAttributeNS(Li,ki(r)):Di(r)||a.removeAttribute(r))}}function cr(t,e,i,r){r||t.tagName.indexOf("-")>-1?dr(t,e,i):Fi(e)?Ui(i)?t.removeAttribute(e):(i="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,i)):Di(e)?t.setAttribute(e,function(t,e){return Ui(e)||"false"===e?"false":"contenteditable"===t&&Ni(e)?e:"true"}(e,i)):Bi(e)?Ui(i)?t.removeAttributeNS(Li,ki(e)):t.setAttributeNS(Li,e,i):dr(t,e,i)}function dr(t,e,i){if(Ui(i))t.removeAttribute(e);else{if(K&&!$&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==i&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,i)}}var pr={create:ur,update:ur};function fr(t,e){var i=e.elm,r=e.data,s=t.data;if(!(n(r.staticClass)&&n(r.class)&&(n(s)||n(s.staticClass)&&n(s.class)))){var a=Gi(e),h=i._transitionClasses;o(h)&&(a=ji(a,Hi(h))),a!==i._prevClass&&(i.setAttribute("class",a),i._prevClass=a)}}var mr,gr={create:fr,update:fr};function vr(t,e,i){var r=mr;return function n(){var o=e.apply(null,arguments);null!==o&&br(t,n,i,r)}}var yr=qt&&!(J&&Number(J[1])<=53);function _r(t,e,i,r){if(yr){var n=ai,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=n||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}mr.addEventListener(t,e,et?{capture:i,passive:r}:i)}function br(t,e,i,r){(r||mr).removeEventListener(t,e._wrapper||e,i)}function xr(t,e){if(!n(t.data.on)||!n(e.data.on)){var i=e.data.on||{},r=t.data.on||{};mr=e.elm,function(t){if(o(t.__r)){var e=K?"change":"input";t[e]=[].concat(t.__r,t[e]||[]),delete t.__r}o(t.__c)&&(t.change=[].concat(t.__c,t.change||[]),delete t.__c)}(i),ae(i,r,_r,br,vr,e.context),mr=void 0}}var Tr,wr={create:xr,update:xr};function Er(t,e){if(!n(t.data.domProps)||!n(e.data.domProps)){var i,r,s=e.elm,a=t.data.domProps||{},h=e.data.domProps||{};for(i in o(h.__ob__)&&(h=e.data.domProps=I({},h)),a)i in h||(s[i]="");for(i in h){if(r=h[i],"textContent"===i||"innerHTML"===i){if(e.children&&(e.children.length=0),r===a[i])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===i&&"PROGRESS"!==s.tagName){s._value=r;var l=n(r)?"":String(r);Sr(s,l)&&(s.value=l)}else if("innerHTML"===i&&Wi(s.tagName)&&n(s.innerHTML)){(Tr=Tr||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var u=Tr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;u.firstChild;)s.appendChild(u.firstChild)}else if(r!==a[i])try{s[i]=r}catch(t){}}}}function Sr(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var i=!0;try{i=document.activeElement!==t}catch(t){}return i&&t.value!==e}(t,e)||function(t,e){var i=t.value,r=t._vModifiers;if(o(r)){if(r.number)return m(i)!==m(e);if(r.trim)return i.trim()!==e.trim()}return i!==e}(t,e))}var Ar={create:Er,update:Er},Rr=x((function(t){var e={},i=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach((function(t){if(t){var r=t.split(i);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function Pr(t){var e=Ir(t.style);return t.staticStyle?I(t.staticStyle,e):e}function Ir(t){return Array.isArray(t)?O(t):"string"==typeof t?Rr(t):t}var Or,Cr=/^--/,Mr=/\s*!important$/,Dr=function(t,e,i){if(Cr.test(e))t.style.setProperty(e,i);else if(Mr.test(i))t.style.setProperty(A(e),i.replace(Mr,""),"important");else{var r=Fr(e);if(Array.isArray(i))for(var n=0,o=i.length;n<o;n++)t.style[r]=i[n];else t.style[r]=i}},Nr=["Webkit","Moz","ms"],Fr=x((function(t){if(Or=Or||document.createElement("div").style,"filter"!==(t=w(t))&&t in Or)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<Nr.length;i++){var r=Nr[i]+e;if(r in Or)return r}}));function Lr(t,e){var i=e.data,r=t.data;if(!(n(i.staticStyle)&&n(i.style)&&n(r.staticStyle)&&n(r.style))){var s,a,h=e.elm,l=r.staticStyle,u=r.normalizedStyle||r.style||{},c=l||u,d=Ir(e.data.style)||{};e.data.normalizedStyle=o(d.__ob__)?I({},d):d;var p=function(t,e){var i,r={};if(e)for(var n=t;n.componentInstance;)(n=n.componentInstance._vnode)&&n.data&&(i=Pr(n.data))&&I(r,i);(i=Pr(t.data))&&I(r,i);for(var o=t;o=o.parent;)o.data&&(i=Pr(o.data))&&I(r,i);return r}(e,!0);for(a in c)n(p[a])&&Dr(h,a,"");for(a in p)(s=p[a])!==c[a]&&Dr(h,a,null==s?"":s)}}var Br={create:Lr,update:Lr},kr=/\s+/;function Ur(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(kr).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var i=" "+(t.getAttribute("class")||"")+" ";i.indexOf(" "+e+" ")<0&&t.setAttribute("class",(i+e).trim())}}function Gr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(kr).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var i=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";i.indexOf(r)>=0;)i=i.replace(r," ");(i=i.trim())?t.setAttribute("class",i):t.removeAttribute("class")}}function Xr(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&I(e,jr(t.name||"v")),I(e,t),e}return"string"==typeof t?jr(t):void 0}}var jr=x((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),Hr=z&&!$,Vr="transition",zr="transitionend",Wr="animation",Yr="animationend";Hr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Vr="WebkitTransition",zr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Wr="WebkitAnimation",Yr="webkitAnimationEnd"));var qr=z?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Kr(t){qr((function(){qr(t)}))}function $r(t,e){var i=t._transitionClasses||(t._transitionClasses=[]);i.indexOf(e)<0&&(i.push(e),Ur(t,e))}function Zr(t,e){t._transitionClasses&&y(t._transitionClasses,e),Gr(t,e)}function Qr(t,e,i){var r=tn(t,e),n=r.type,o=r.timeout,s=r.propCount;if(!n)return i();var a="transition"===n?zr:Yr,h=0,l=function(){t.removeEventListener(a,u),i()},u=function(e){e.target===t&&++h>=s&&l()};setTimeout((function(){h<s&&l()}),o+1),t.addEventListener(a,u)}var Jr=/\b(transform|all)(,|$)/;function tn(t,e){var i,r=window.getComputedStyle(t),n=(r[Vr+"Delay"]||"").split(", "),o=(r[Vr+"Duration"]||"").split(", "),s=en(n,o),a=(r[Wr+"Delay"]||"").split(", "),h=(r[Wr+"Duration"]||"").split(", "),l=en(a,h),u=0,c=0;return"transition"===e?s>0&&(i="transition",u=s,c=o.length):"animation"===e?l>0&&(i="animation",u=l,c=h.length):c=(i=(u=Math.max(s,l))>0?s>l?"transition":"animation":null)?"transition"===i?o.length:h.length:0,{type:i,timeout:u,propCount:c,hasTransform:"transition"===i&&Jr.test(r[Vr+"Property"])}}function en(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,i){return rn(e)+rn(t[i])})))}function rn(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function nn(t,e){var i=t.elm;o(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var r=Xr(t.data.transition);if(!n(r)&&!o(i._enterCb)&&1===i.nodeType){for(var s=r.css,a=r.type,l=r.enterClass,u=r.enterToClass,c=r.enterActiveClass,d=r.appearClass,p=r.appearToClass,f=r.appearActiveClass,g=r.beforeEnter,v=r.enter,y=r.afterEnter,_=r.enterCancelled,b=r.beforeAppear,x=r.appear,T=r.afterAppear,w=r.appearCancelled,E=r.duration,S=$e,A=$e.$vnode;A&&A.parent;)S=A.context,A=A.parent;var R=!S._isMounted||!t.isRootInsert;if(!R||x||""===x){var P=R&&d?d:l,I=R&&f?f:c,O=R&&p?p:u,C=R&&b||g,M=R&&"function"==typeof x?x:v,D=R&&T||y,N=R&&w||_,F=m(h(E)?E.enter:E);0;var B=!1!==s&&!$,k=an(M),U=i._enterCb=L((function(){B&&(Zr(i,O),Zr(i,I)),U.cancelled?(B&&Zr(i,P),N&&N(i)):D&&D(i),i._enterCb=null}));t.data.show||he(t,"insert",(function(){var e=i.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),M&&M(i,U)})),C&&C(i),B&&($r(i,P),$r(i,I),Kr((function(){Zr(i,P),U.cancelled||($r(i,O),k||(sn(F)?setTimeout(U,F):Qr(i,a,U)))}))),t.data.show&&(e&&e(),M&&M(i,U)),B||k||U()}}}function on(t,e){var i=t.elm;o(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var r=Xr(t.data.transition);if(n(r)||1!==i.nodeType)return e();if(!o(i._leaveCb)){var s=r.css,a=r.type,l=r.leaveClass,u=r.leaveToClass,c=r.leaveActiveClass,d=r.beforeLeave,p=r.leave,f=r.afterLeave,g=r.leaveCancelled,v=r.delayLeave,y=r.duration,_=!1!==s&&!$,b=an(p),x=m(h(y)?y.leave:y);0;var T=i._leaveCb=L((function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[t.key]=null),_&&(Zr(i,u),Zr(i,c)),T.cancelled?(_&&Zr(i,l),g&&g(i)):(e(),f&&f(i)),i._leaveCb=null}));v?v(w):w()}function w(){T.cancelled||(!t.data.show&&i.parentNode&&((i.parentNode._pending||(i.parentNode._pending={}))[t.key]=t),d&&d(i),_&&($r(i,l),$r(i,c),Kr((function(){Zr(i,l),T.cancelled||($r(i,u),b||(sn(x)?setTimeout(T,x):Qr(i,a,T)))}))),p&&p(i,T),_||b||T())}}function sn(t){return"number"==typeof t&&!isNaN(t)}function an(t){if(n(t))return!1;var e=t.fns;return o(e)?an(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function hn(t,e){!0!==e.data.show&&nn(e)}var ln=function(t){var e,i,r={},h=t.modules,l=t.nodeOps;for(e=0;e<tr.length;++e)for(r[tr[e]]=[],i=0;i<h.length;++i)o(h[i][tr[e]])&&r[tr[e]].push(h[i][tr[e]]);function u(t){var e=l.parentNode(t);o(e)&&l.removeChild(e,t)}function c(t,e,i,n,a,h,u){if(o(t.elm)&&o(h)&&(t=h[u]=yt(t)),t.isRootInsert=!a,!function(t,e,i,n){var a=t.data;if(o(a)){var h=o(t.componentInstance)&&a.keepAlive;if(o(a=a.hook)&&o(a=a.init)&&a(t,!1),o(t.componentInstance))return d(t,e),p(i,t.elm,n),s(h)&&function(t,e,i,n){var s,a=t;for(;a.componentInstance;)if(a=a.componentInstance._vnode,o(s=a.data)&&o(s=s.transition)){for(s=0;s<r.activate.length;++s)r.activate[s](Ji,a);e.push(a);break}p(i,t.elm,n)}(t,e,i,n),!0}}(t,e,i,n)){var c=t.data,m=t.children,g=t.tag;o(g)?(t.elm=t.ns?l.createElementNS(t.ns,g):l.createElement(g,t),y(t),f(t,m,e),o(c)&&v(t,e),p(i,t.elm,n)):s(t.isComment)?(t.elm=l.createComment(t.text),p(i,t.elm,n)):(t.elm=l.createTextNode(t.text),p(i,t.elm,n))}}function d(t,e){o(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,m(t)?(v(t,e),y(t)):(Qi(t),e.push(t))}function p(t,e,i){o(t)&&(o(i)?l.parentNode(i)===t&&l.insertBefore(t,e,i):l.appendChild(t,e))}function f(t,e,i){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)c(e[r],i,t.elm,null,!0,e,r)}else a(t.text)&&l.appendChild(t.elm,l.createTextNode(String(t.text)))}function m(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return o(t.tag)}function v(t,i){for(var n=0;n<r.create.length;++n)r.create[n](Ji,t);o(e=t.data.hook)&&(o(e.create)&&e.create(Ji,t),o(e.insert)&&i.push(t))}function y(t){var e;if(o(e=t.fnScopeId))l.setStyleScope(t.elm,e);else for(var i=t;i;)o(e=i.context)&&o(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e),i=i.parent;o(e=$e)&&e!==t.context&&e!==t.fnContext&&o(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e)}function _(t,e,i,r,n,o){for(;r<=n;++r)c(i[r],o,t,e,!1,i,r)}function b(t){var e,i,n=t.data;if(o(n))for(o(e=n.hook)&&o(e=e.destroy)&&e(t),e=0;e<r.destroy.length;++e)r.destroy[e](t);if(o(e=t.children))for(i=0;i<t.children.length;++i)b(t.children[i])}function x(t,e,i){for(;e<=i;++e){var r=t[e];o(r)&&(o(r.tag)?(T(r),b(r)):u(r.elm))}}function T(t,e){if(o(e)||o(t.data)){var i,n=r.remove.length+1;for(o(e)?e.listeners+=n:e=function(t,e){function i(){0==--i.listeners&&u(t)}return i.listeners=e,i}(t.elm,n),o(i=t.componentInstance)&&o(i=i._vnode)&&o(i.data)&&T(i,e),i=0;i<r.remove.length;++i)r.remove[i](t,e);o(i=t.data.hook)&&o(i=i.remove)?i(t,e):e()}else u(t.elm)}function w(t,e,i,r){for(var n=i;n<r;n++){var s=e[n];if(o(s)&&er(t,s))return n}}function E(t,e,i,a,h,u){if(t!==e){o(e.elm)&&o(a)&&(e=a[h]=yt(e));var d=e.elm=t.elm;if(s(t.isAsyncPlaceholder))o(e.asyncFactory.resolved)?R(t.elm,e,i):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(t.isStatic)&&e.key===t.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=t.componentInstance;else{var p,f=e.data;o(f)&&o(p=f.hook)&&o(p=p.prepatch)&&p(t,e);var g=t.children,v=e.children;if(o(f)&&m(e)){for(p=0;p<r.update.length;++p)r.update[p](t,e);o(p=f.hook)&&o(p=p.update)&&p(t,e)}n(e.text)?o(g)&&o(v)?g!==v&&function(t,e,i,r,s){var a,h,u,d=0,p=0,f=e.length-1,m=e[0],g=e[f],v=i.length-1,y=i[0],b=i[v],T=!s;for(0;d<=f&&p<=v;)n(m)?m=e[++d]:n(g)?g=e[--f]:er(m,y)?(E(m,y,r,i,p),m=e[++d],y=i[++p]):er(g,b)?(E(g,b,r,i,v),g=e[--f],b=i[--v]):er(m,b)?(E(m,b,r,i,v),T&&l.insertBefore(t,m.elm,l.nextSibling(g.elm)),m=e[++d],b=i[--v]):er(g,y)?(E(g,y,r,i,p),T&&l.insertBefore(t,g.elm,m.elm),g=e[--f],y=i[++p]):(n(a)&&(a=ir(e,d,f)),n(h=o(y.key)?a[y.key]:w(y,e,d,f))?c(y,r,t,m.elm,!1,i,p):er(u=e[h],y)?(E(u,y,r,i,p),e[h]=void 0,T&&l.insertBefore(t,u.elm,m.elm)):c(y,r,t,m.elm,!1,i,p),y=i[++p]);d>f?_(t,n(i[v+1])?null:i[v+1].elm,i,p,v,r):p>v&&x(e,d,f)}(d,g,v,i,u):o(v)?(o(t.text)&&l.setTextContent(d,""),_(d,null,v,0,v.length-1,i)):o(g)?x(g,0,g.length-1):o(t.text)&&l.setTextContent(d,""):t.text!==e.text&&l.setTextContent(d,e.text),o(f)&&o(p=f.hook)&&o(p=p.postpatch)&&p(t,e)}}}function S(t,e,i){if(s(i)&&o(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var A=g("attrs,class,staticClass,staticStyle,key");function R(t,e,i,r){var n,a=e.tag,h=e.data,l=e.children;if(r=r||h&&h.pre,e.elm=t,s(e.isComment)&&o(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(o(h)&&(o(n=h.hook)&&o(n=n.init)&&n(e,!0),o(n=e.componentInstance)))return d(e,i),!0;if(o(a)){if(o(l))if(t.hasChildNodes())if(o(n=h)&&o(n=n.domProps)&&o(n=n.innerHTML)){if(n!==t.innerHTML)return!1}else{for(var u=!0,c=t.firstChild,p=0;p<l.length;p++){if(!c||!R(c,l[p],i,r)){u=!1;break}c=c.nextSibling}if(!u||c)return!1}else f(e,l,i);if(o(h)){var m=!1;for(var g in h)if(!A(g)){m=!0,v(e,i);break}!m&&h.class&&ne(h.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,i,a){if(!n(e)){var h,u=!1,d=[];if(n(t))u=!0,c(e,d);else{var p=o(t.nodeType);if(!p&&er(t,e))E(t,e,d,null,null,a);else{if(p){if(1===t.nodeType&&t.hasAttribute("data-server-rendered")&&(t.removeAttribute("data-server-rendered"),i=!0),s(i)&&R(t,e,d))return S(e,d,!0),t;h=t,t=new ft(l.tagName(h).toLowerCase(),{},[],void 0,h)}var f=t.elm,g=l.parentNode(f);if(c(e,d,f._leaveCb?null:g,l.nextSibling(f)),o(e.parent))for(var v=e.parent,y=m(e);v;){for(var _=0;_<r.destroy.length;++_)r.destroy[_](v);if(v.elm=e.elm,y){for(var T=0;T<r.create.length;++T)r.create[T](Ji,v);var w=v.data.hook.insert;if(w.merged)for(var A=1;A<w.fns.length;A++)w.fns[A]()}else Qi(v);v=v.parent}o(g)?x([t],0,0):o(t.tag)&&b(t)}}return S(e,d,u),e.elm}o(t)&&b(t)}}({nodeOps:$i,modules:[pr,gr,wr,Ar,Br,z?{create:hn,activate:hn,remove:function(t,e){!0!==t.data.show?on(t,e):e()}}:{}].concat(lr)});$&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&vn(t,"input")}));var un={inserted:function(t,e,i,r){"select"===i.tag?(r.elm&&!r.elm._vOptions?he(i,"postpatch",(function(){un.componentUpdated(t,e,i)})):cn(t,e,i.context),t._vOptions=[].map.call(t.options,fn)):("textarea"===i.tag||Ki(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",mn),t.addEventListener("compositionend",gn),t.addEventListener("change",gn),$&&(t.vmodel=!0)))},componentUpdated:function(t,e,i){if("select"===i.tag){cn(t,e,i.context);var r=t._vOptions,n=t._vOptions=[].map.call(t.options,fn);if(n.some((function(t,e){return!N(t,r[e])})))(t.multiple?e.value.some((function(t){return pn(t,n)})):e.value!==e.oldValue&&pn(e.value,n))&&vn(t,"change")}}};function cn(t,e,i){dn(t,e,i),(K||Z)&&setTimeout((function(){dn(t,e,i)}),0)}function dn(t,e,i){var r=e.value,n=t.multiple;if(!n||Array.isArray(r)){for(var o,s,a=0,h=t.options.length;a<h;a++)if(s=t.options[a],n)o=F(r,fn(s))>-1,s.selected!==o&&(s.selected=o);else if(N(fn(s),r))return void(t.selectedIndex!==a&&(t.selectedIndex=a));n||(t.selectedIndex=-1)}}function pn(t,e){return e.every((function(e){return!N(e,t)}))}function fn(t){return"_value"in t?t._value:t.value}function mn(t){t.target.composing=!0}function gn(t){t.target.composing&&(t.target.composing=!1,vn(t.target,"input"))}function vn(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),t.dispatchEvent(i)}function yn(t){return!t.componentInstance||t.data&&t.data.transition?t:yn(t.componentInstance._vnode)}var _n={model:un,show:{bind:function(t,e,i){var r=e.value,n=(i=yn(i)).data&&i.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&n?(i.data.show=!0,nn(i,(function(){t.style.display=o}))):t.style.display=r?o:"none"},update:function(t,e,i){var r=e.value;!r!=!e.oldValue&&((i=yn(i)).data&&i.data.transition?(i.data.show=!0,r?nn(i,(function(){t.style.display=t.__vOriginalDisplay})):on(i,(function(){t.style.display="none"}))):t.style.display=r?t.__vOriginalDisplay:"none")},unbind:function(t,e,i,r,n){n||(t.style.display=t.__vOriginalDisplay)}}},bn={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function xn(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?xn(ze(e.children)):t}function Tn(t){var e={},i=t.$options;for(var r in i.propsData)e[r]=t[r];var n=i._parentListeners;for(var o in n)e[w(o)]=n[o];return e}function wn(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var En=function(t){return t.tag||me(t)},Sn=function(t){return"show"===t.name},An={name:"transition",props:bn,abstract:!0,render:function(t){var e=this,i=this.$slots.default;if(i&&(i=i.filter(En)).length){0;var r=this.mode;0;var n=i[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return n;var o=xn(n);if(!o)return n;if(this._leaving)return wn(t,n);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var h=(o.data||(o.data={})).transition=Tn(this),l=this._vnode,u=xn(l);if(o.data.directives&&o.data.directives.some(Sn)&&(o.data.show=!0),u&&u.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(o,u)&&!me(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var c=u.data.transition=I({},h);if("out-in"===r)return this._leaving=!0,he(c,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),wn(t,n);if("in-out"===r){if(me(o))return l;var d,p=function(){d()};he(h,"afterEnter",p),he(h,"enterCancelled",p),he(c,"delayLeave",(function(t){d=t}))}}return n}}},Rn=I({tag:String,moveClass:String},bn);function Pn(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function In(t){t.data.newPos=t.elm.getBoundingClientRect()}function On(t){var e=t.data.pos,i=t.data.newPos,r=e.left-i.left,n=e.top-i.top;if(r||n){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+n+"px)",o.transitionDuration="0s"}}delete Rn.mode;var Cn={Transition:An,TransitionGroup:{props:Rn,beforeMount:function(){var t=this,e=this._update;this._update=function(i,r){var n=Ze(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,n(),e.call(t,i,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),r=this.prevChildren=this.children,n=this.$slots.default||[],o=this.children=[],s=Tn(this),a=0;a<n.length;a++){var h=n[a];if(h.tag)if(null!=h.key&&0!==String(h.key).indexOf("__vlist"))o.push(h),i[h.key]=h,(h.data||(h.data={})).transition=s;else;}if(r){for(var l=[],u=[],c=0;c<r.length;c++){var d=r[c];d.data.transition=s,d.data.pos=d.elm.getBoundingClientRect(),i[d.key]?l.push(d):u.push(d)}this.kept=t(e,null,l),this.removed=u}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Pn),t.forEach(In),t.forEach(On),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var i=t.elm,r=i.style;$r(i,e),r.transform=r.WebkitTransform=r.transitionDuration="",i.addEventListener(zr,i._moveCb=function t(r){r&&r.target!==i||r&&!/transform$/.test(r.propertyName)||(i.removeEventListener(zr,t),i._moveCb=null,Zr(i,e))})}})))},methods:{hasMove:function(t,e){if(!Hr)return!1;if(this._hasMove)return this._hasMove;var i=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){Gr(i,t)})),Ur(i,e),i.style.display="none",this.$el.appendChild(i);var r=tn(i);return this.$el.removeChild(i),this._hasMove=r.hasTransform}}}};wi.config.mustUseProp=function(t,e,i){return"value"===i&&Mi(t)&&"button"!==e||"selected"===i&&"option"===t||"checked"===i&&"input"===t||"muted"===i&&"video"===t},wi.config.isReservedTag=Yi,wi.config.isReservedAttr=Ci,wi.config.getTagNamespace=function(t){return Wi(t)?"svg":"math"===t?"math":void 0},wi.config.isUnknownElement=function(t){if(!z)return!0;if(Yi(t))return!1;if(t=t.toLowerCase(),null!=qi[t])return qi[t];var e=document.createElement(t);return t.indexOf("-")>-1?qi[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:qi[t]=/HTMLUnknownElement/.test(e.toString())},I(wi.options.directives,_n),I(wi.options.components,Cn),wi.prototype.__patch__=z?ln:C,wi.prototype.$mount=function(t,e){return function(t,e,i){var r;return t.$el=e,t.$options.render||(t.$options.render=gt),ti(t,"beforeMount"),r=function(){t._update(t._render(),i)},new di(t,r,C,{before:function(){t._isMounted&&!t._isDestroyed&&ti(t,"beforeUpdate")}},!0),i=!1,null==t.$vnode&&(t._isMounted=!0,ti(t,"mounted")),t}(this,t=t&&z?function(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}(t):void 0,e)},z&&setTimeout((function(){U.devtools&&nt&&nt.emit("init",wi)}),0),e.a=wi}).call(this,i(14),i(19).setImmediate)},function(t,e,i){"use strict";(function(t){var e=i(22),r=i(25),n=i.n(r);
/*!
 * @pixi/polyfill - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
"undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:void 0!==t&&(t.globalThis=t)),globalThis.Promise||(globalThis.Promise=e.a),Object.assign||(Object.assign=n.a);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var o=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-o}}for(var s=Date.now(),a=["ms","moz","webkit","o"],h=0;h<a.length&&!globalThis.requestAnimationFrame;++h){var l=a[h];globalThis.requestAnimationFrame=globalThis[l+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[l+"CancelAnimationFrame"]||globalThis[l+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+s-e;return i<0&&(i=0),s=e,globalThis.self.setTimeout((function(){s=Date.now(),t(performance.now())}),i)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array)}).call(this,i(14))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var r,n,o,s,a,h=1,l={},u=!1,c=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){f(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){f(t.data)},r=function(t){o.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,r=function(t){var e=c.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):r=function(t){setTimeout(f,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&f(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(s+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={callback:t,args:e};return l[h]=n,r(h),h++},d.clearImmediate=p}function p(t){delete l[t]}function f(t){if(u)setTimeout(f,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{p(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(14),i(30))},function(t,e){var i,r,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var h,l=[],u=!1,c=-1;function d(){u&&h&&(u=!1,h.length?l=h.concat(l):c=-1,l.length&&p())}function p(){if(!u){var t=a(d);u=!0;for(var e=l.length;e;){for(h=l,l=[];++c<e;)h&&h[c].run();c=-1,e=l.length}h=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new f(t,e)),1!==l.length||u||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){(function(t,r){var n;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,h=2147483647,l=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(t){throw new RangeError(d[t])}function g(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function v(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+g((t=t.replace(c,".")).split("."),e).join(".")}function y(t){for(var e,i,r=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function _(t){return g(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=f(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,i){var r=0;for(t=i?p(t/700):t>>1,t+=p(t/e);t>455;r+=36)t=p(t/35);return p(r+36*t/(t+38))}function T(t){var e,i,r,n,o,s,a,l,u,c,d,f=[],g=t.length,v=0,y=128,b=72;for((i=t.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&m("not-basic"),f.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<g;){for(o=v,s=1,a=36;n>=g&&m("invalid-input"),((l=(d=t.charCodeAt(n++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||l>p((h-v)/s))&&m("overflow"),v+=l*s,!(l<(u=a<=b?1:a>=b+26?26:a-b));a+=36)s>p(h/(c=36-u))&&m("overflow"),s*=c;b=x(v-o,e=f.length+1,0==o),p(v/e)>h-y&&m("overflow"),y+=p(v/e),v%=e,f.splice(v++,0,y)}return _(f)}function w(t){var e,i,r,n,o,s,a,l,u,c,d,g,v,_,T,w=[];for(g=(t=y(t)).length,e=128,i=0,o=72,s=0;s<g;++s)(d=t[s])<128&&w.push(f(d));for(r=n=w.length,n&&w.push("-");r<g;){for(a=h,s=0;s<g;++s)(d=t[s])>=e&&d<a&&(a=d);for(a-e>p((h-i)/(v=r+1))&&m("overflow"),i+=(a-e)*v,e=a,s=0;s<g;++s)if((d=t[s])<e&&++i>h&&m("overflow"),d==e){for(l=i,u=36;!(l<(c=u<=o?1:u>=o+26?26:u-o));u+=36)T=l-c,_=36-c,w.push(f(b(c+T%_,0))),l=p(T/_);w.push(f(b(l,0))),o=x(i,v,r==n),i=0,++r}++i,++e}return w.join("")}a={version:"1.4.1",ucs2:{decode:y,encode:_},decode:T,encode:w,toASCII:function(t){return v(t,(function(t){return u.test(t)?"xn--"+w(t):t}))},toUnicode:function(t){return v(t,(function(t){return l.test(t)?T(t.slice(4).toLowerCase()):t}))}},void 0===(n=function(){return a}.call(e,i,e,t))||(t.exports=n)}()}).call(this,i(32)(t),i(14))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(35),e.encode=e.stringify=i(36)},function(t,e,i){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var h=1e3;o&&"number"==typeof o.maxKeys&&(h=o.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var u=0;u<l;++u){var c,d,p,f,m=t[u].replace(a,"%20"),g=m.indexOf(i);g>=0?(c=m.substr(0,g),d=m.substr(g+1)):(c=m,d=""),p=decodeURIComponent(c),f=decodeURIComponent(d),r(s,p)?n(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(r(s))+i;return n(t[s])?o(t[s],(function(t){return a+encodeURIComponent(r(t))})).join(e):a+encodeURIComponent(r(t[s]))})).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r++)i.push(e(t[r],r));return i}var s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";i.r(e),i.d(e,"Runtime",(function(){return pu}));i(28);var r=i(3),n=i(7);n.c.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var o=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(r.o.tablet||r.o.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){var t=performance.now();if(!(r.o.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=e.left,n=e.top,o=e.width,s=e.height,a=this.renderer,h=a.width,l=a.height,u=a.resolution,c=o/h*u,d=s/l*u,p=this.div;p.style.left=i+"px",p.style.top=n+"px",p.style.width=h+"px",p.style.height=l+"px";for(var f=0;f<this.children.length;f++){var m=this.children[f];if(m.renderId!==this.renderId)m._accessibleActive=!1,Object(r.x)(this.children,f,1),this.div.removeChild(m._accessibleDiv),this.pool.push(m._accessibleDiv),m._accessibleDiv=null,f--;else{p=m._accessibleDiv;var g=m.hitArea,v=m.worldTransform;m.hitArea?(p.style.left=(v.tx+g.x*v.a)*c+"px",p.style.top=(v.ty+g.y*v.d)*d+"px",p.style.width=g.width*v.a*c+"px",p.style.height=g.height*v.d*d+"px"):(g=m.getBounds(),this.capHitArea(g),p.style.left=g.x*c+"px",p.style.top=g.y*d+"px",p.style.width=g.width*c+"px",p.style.height=g.height*d+"px",p.title!==m.accessibleTitle&&null!==m.accessibleTitle&&(p.title=m.accessibleTitle),p.getAttribute("aria-label")!==m.accessibleHint&&null!==m.accessibleHint&&p.setAttribute("aria-label",m.accessibleHint)),m.accessibleTitle===p.title&&m.tabIndex===p.tabIndex||(p.title=m.accessibleTitle,p.tabIndex=m.tabIndex,this.debug&&this.updateDebugHTML(p))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,i=e.width,r=e.height;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>r&&(t.height=r-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,i=t.target.displayObject,r=e.eventData;e.dispatchEvent(i,"click",r),e.dispatchEvent(i,"pointertap",r),e.dispatchEvent(i,"tap",r)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,i=t.target.displayObject,r=e.eventData;e.dispatchEvent(i,"mouseover",r)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,i=t.target.displayObject,r=e.eventData;e.dispatchEvent(i,"mouseout",r)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}(),s=i(1),a=i(8),h=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new s.g,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var u=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),c=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),d=function(){function t(){this._tempPoint=new s.g}return t.prototype.recursiveFindHit=function(t,e,i,r,n){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=n=e.interactive||n,h=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(r=!1,h=!1)),a=!1):e._mask&&r&&(e._mask.containsPoint&&e._mask.containsPoint(o)||(r=!1)),h&&e.interactiveChildren&&e.children)for(var l=e.children,u=l.length-1;u>=0;u--){var c=l[u],d=this.recursiveFindHit(t,c,i,r,a);if(d){if(!c.parent)continue;a=!1,d&&(t.target&&(r=!1),s=!0)}}return n&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),i&&i(t,e,!!s))),s},t.prototype.findHit=function(t,e,i,r){this.recursiveFindHit(t,e,i,r,!1)},t}(),p={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};n.c.mixin(p);var f={target:null,data:{global:null}},m=function(t){function e(e,i){var r=t.call(this)||this;return i=i||{},r.renderer=e,r.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,r.interactionFrequency=i.interactionFrequency||10,r.mouse=new h,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new u,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in globalThis),r.supportsTouchEvents="ontouchstart"in globalThis,r.supportsPointerEvents=!!globalThis.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new d,r._tempDisplayObject=new n.d,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return f.target=null,f.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(f,e,null,!0),f.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(a.a.system.add(this.tickerUpdate,this,a.c.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(a.a.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,i)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var n=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*n,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},e.prototype.processInteractive=function(t,e,i,r){var n=this.search.findHit(t,e,i,r),o=this.delayedEvents;if(!o.length)return n;t.stopPropagationHint=!1;var s=o.length;this.delayedEvents=[];for(var a=0;a<s;a++){var h=o[a],l=h.displayObject,u=h.eventString,c=h.eventData;c.stopsPropagatingAt===l&&(c.stopPropagationHint=!0),this.dispatchEvent(l,u,c)}return n},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,r=0;r<i;r++){var n=e[r],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);if(s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===n.pointerType)this.emit("touchstart",s);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var r=t.data,n=t.data.identifier;if(i)if(e.trackedPointers[n]||(e.trackedPointers[n]=new c(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var r=this.normalizeToPointerData(t),n=r.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var a=r[s],h=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,i,e||!o),this.emit(e?"pointercancel":"pointerup"+o,l),"mouse"===a.pointerType||"pen"===a.pointerType){var u=2===a.button;this.emit(u?"rightup"+o:"mouseup"+o,l)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(a.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var r=t.data,n=t.data.identifier,o=e.trackedPointers[n],s="touch"===r.pointerType,a="mouse"===r.pointerType||"pen"===r.pointerType,h=!1;if(a){var l=2===r.button,u=c.FLAGS,d=l?u.RIGHT_DOWN:u.LEFT_DOWN,p=void 0!==o&&o.flags&d;i?(this.dispatchEvent(e,l?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,l?"rightclick":"click",t),h=!0)):p&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),o&&(l?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!h||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[n]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=e.length,r=0;r<i;r++){var n=e[r],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===n.pointerType&&this.emit("touchmove",s),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var r=t.data,n="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var r=t.data,n=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,s=e.trackedPointers[n];i&&!s&&(s=e.trackedPointers[n]=new c(n)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[n]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new h).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,r=t.changedTouches.length;i<r;i++){var n=t.changedTouches[i];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else if(globalThis.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof globalThis.PointerEvent))e.push(t);else{var o=t;void 0===o.isPrimary&&(o.isPrimary=!0),void 0===o.width&&(o.width=1),void 0===o.height&&(o.height=1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="mouse"),void 0===o.pointerId&&(o.pointerId=1),void 0===o.pressure&&(o.pressure=.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(r.c),v=i(2),y=function(){function t(e){var i=this;this.stage=new n.b,e=Object.assign({forceCanvas:!1},e),this.renderer=Object(v.x)(e),t._plugins.forEach((function(t){t.init.call(i,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,i){var r=this,n=t._plugins.slice(0);n.reverse(),n.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}(),_=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,i;if(e.cancelResize(),e._resizeTo===globalThis.window)t=globalThis.innerWidth,i=globalThis.innerHeight;else{var r=e._resizeTo;t=r.clientWidth,i=r.clientHeight}e.renderer.resize(t,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();y.registerPlugin(_);
/*!
 * @pixi/extract - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var b=new s.j,x=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,i){var r=new Image;return r.src=this.base64(t,e,i),r},t.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},t.prototype.canvas=function(e){var i,n,o,s=this.renderer,a=!1,h=!1;e&&(e instanceof v.p?o=e:(o=this.renderer.generateTexture(e),h=!0)),o?(i=o.baseTexture.resolution,n=o.frame,a=!1,s.renderTexture.bind(o)):(i=this.renderer.resolution,a=!0,(n=b).width=this.renderer.width,n.height=this.renderer.height,s.renderTexture.bind(null));var l=Math.floor(n.width*i+1e-4),u=Math.floor(n.height*i+1e-4),c=new r.b(l,u,1),d=new Uint8Array(4*l*u),p=s.gl;p.readPixels(n.x*i,n.y*i,l,u,p.RGBA,p.UNSIGNED_BYTE,d);var f=c.context.getImageData(0,0,l,u);if(t.arrayPostDivide(d,f.data),c.context.putImageData(f,0,0),a){var m=new r.b(c.width,c.height,1);m.context.scale(1,-1),m.context.drawImage(c.canvas,0,-u),c.destroy(),c=m}return h&&o.destroy(!0),c.canvas},t.prototype.pixels=function(e){var i,r,n,o=this.renderer,s=!1;e&&(e instanceof v.p?n=e:(n=this.renderer.generateTexture(e),s=!0)),n?(i=n.baseTexture.resolution,r=n.frame,o.renderTexture.bind(n)):(i=o.resolution,(r=b).width=o.width,r.height=o.height,o.renderTexture.bind(null));var a=r.width*i,h=r.height*i,l=new Uint8Array(4*a*h),u=o.gl;return u.readPixels(r.x*i,r.y*i,a,h,u.RGBA,u.UNSIGNED_BYTE,l),s&&n.destroy(!0),t.arrayPostDivide(l,l),l},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var r=e[i+3]=t[i+3];0!==r?(e[i]=Math.round(Math.min(255*t[i]/r,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/r,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/r,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},t}(),T=function(){function t(t,e,i){void 0===e&&(e=!1),this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},t}();function w(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var E,S=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(t){void 0===t&&(t=!1);var e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i},t.prototype.has=function(t){if(!(t instanceof T))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},t.prototype.dispatch=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,e),r=r._next;return!0},t.prototype.add=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return w(this,new T(t,!1,e))},t.prototype.once=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return w(this,new T(t,!0,e))},t.prototype.detach=function(t){if(!(t instanceof T))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this},t.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},t}();function A(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[e.strictMode?"strict":"loose"].exec(t),n={},o=14;o--;)n[i.key[o]]=r[o]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,(function(t,e,r){e&&(n[i.q.name][e]=r)})),n}var R=null;function P(){}function I(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function O(t){return t.toString().replace("object ","")}var C=function(){function t(e,i,r){if(this._dequeue=P,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=P,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new S,this.onProgress=new S,this.onComplete=new S,this.onAfterMiddleware=new S}return t.setExtensionLoadType=function(e,i){I(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){I(t._xhrTypeMap,e,i)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:void 0===E&&(E=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),E&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==globalThis.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==globalThis.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{e=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=i,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(O(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(O(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(O(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===r&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var n=new DOMParser;this.data=n.parseFromString(i,"text/xml")}else{var o=document.createElement("div");o.innerHTML=i,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";e=e||globalThis.location,R||(R=document.createElement("a")),R.href=t;var i=A(R.href,{strictMode:!0}),r=!i.port&&""===e.port||i.port===e.port,n=i.protocol?i.protocol+":":"";return i.host===e.hostname&&r&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(t){void 0===t&&(t=this.url);var e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var r=t.indexOf("?"),n=t.indexOf("#"),o=Math.min(r>-1?r:t.length,n>-1?n:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();function M(){}function D(t){return function(){for(var e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];if(null===t)throw new Error("Callback was already called.");var n=t;t=null,n.apply(this,i)}}!function(t){var e,i,r,n;(e=t.STATUS_FLAGS||(t.STATUS_FLAGS={}))[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING",(i=t.TYPE||(t.TYPE={}))[i.UNKNOWN=0]="UNKNOWN",i[i.JSON=1]="JSON",i[i.XML=2]="XML",i[i.IMAGE=3]="IMAGE",i[i.AUDIO=4]="AUDIO",i[i.VIDEO=5]="VIDEO",i[i.TEXT=6]="TEXT",(r=t.LOAD_TYPE||(t.LOAD_TYPE={}))[r.XHR=1]="XHR",r[r.IMAGE=2]="IMAGE",r[r.AUDIO=3]="AUDIO",r[r.VIDEO=4]="VIDEO",(n=t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})).DEFAULT="text",n.BUFFER="arraybuffer",n.BLOB="blob",n.DOCUMENT="document",n.JSON="json",n.TEXT="text",t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(C||(C={}));var N=function(t,e){this.data=t,this.callback=e},F=function(){function t(t,e){var i=this;if(void 0===e&&(e=1),this.workers=0,this.saturated=M,this.unsaturated=M,this.empty=M,this.drain=M,this.error=M,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(t,e,r){if(r&&"function"!=typeof r)throw new Error("task callback must be a function");if(i.started=!0,null==t&&i.idle())setTimeout((function(){return i.drain()}),1);else{var n=new N(t,"function"==typeof r?r:M);e?i._tasks.unshift(n):i._tasks.push(n),setTimeout(i.process,1)}},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var t=i._tasks.shift();0===i._tasks.length&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(t.data,D(i._next(t)))}},this._worker=t,0===e)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(t){var e=this;return function(){for(var i=arguments,r=[],n=0;n<arguments.length;n++)r[n]=i[n];e.workers-=1,t.callback.apply(t,r),null!=r[0]&&e.error(r[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(t,e){this._insert(t,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=M,this.started=!1,this._tasks=[]},t.prototype.unshift=function(t,e){this._insert(t,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},t.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},t.eachSeries=function(t,e,i,r){var n=0,o=t.length;!function s(a){a||n===o?i&&i(a):r?setTimeout((function(){e(t[n++],s)}),1):e(t[n++],s)}()},t.queue=function(e,i){return new t(e,i)},t}(),L=/(#[\w-]+)?$/,B=function(){function t(e,i){var r=this;void 0===e&&(e=""),void 0===i&&(i=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=F.queue(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new S,this.onError=new S,this.onLoad=new S,this.onStart=new S,this.onComplete=new S;for(var n=0;n<t._plugins.length;++n){var o=t._plugins[n],s=o.pre,a=o.use;s&&this.pre(s),a&&this.use(a)}this._protected=!1}return t.prototype._add=function(t,e,i,r){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new C(t,e,i),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var n=i.parentResource,o=[],s=0;s<n.children.length;++s)n.children[s].isComplete||o.push(n.children[s]);var a=n.progressChunk*(o.length+1)/(o.length+2);n.children.push(this.resources[t]),n.progressChunk=a;for(s=0;s<o.length;++s)o[s].progressChunk=a;this.resources[t].progressChunk=a}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(t){var e,i=A(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=L.exec(e)[0];-1!==(e=e.slice(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,F.eachSeries(this._beforeMiddleware,(function(e,r){e.call(i,t,(function(){r(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),F.eachSeries(this._afterMiddleware,(function(i,r){i.call(e,t,r)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}();B.prototype.add=function(t,e,i,r){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=t,r=e||i.callback||i.onComplete,e=i.url,t=i.name||i.key||i.url),"string"!=typeof e&&(r=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");return"function"==typeof i&&(r=i,i=null),this._add(t,e,i,r)};var k=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?B.shared:new B},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),U=function(){function t(){}return t.add=function(){C.setExtensionLoadType("svg",C.LOAD_TYPE.XHR),C.setExtensionXhrType("svg",C.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==C.TYPE.IMAGE&&"svg"!==t.extension)e();else{var i=t.data,r=t.url,n=t.name,o=t.metadata;v.t.fromLoader(i,r,n,o).then((function(i){t.texture=i,e()})).catch(e)}},t}();B.registerPlugin({use:function(t,e){if(t.data){if(t.xhr&&t.xhrType===C.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=globalThis.URL||globalThis.webkitURL,r=i.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=C.TYPE.IMAGE,void(t.data.onload=function(){i.revokeObjectURL(r),t.data.onload=null,e()})}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],n=[0,0,0,0],o=0;o<r.length;++o)i<t.length?r[o]=255&t.charCodeAt(i++):r[o]=0;switch(n[0]=r[0]>>2,n[1]=(3&r[0])<<4|r[1]>>4,n[2]=(15&r[1])<<2|r[2]>>6,n[3]=63&r[2],i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(o=0;o<n.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n[o])}return e}(t.xhr.responseText),t.type=C.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}}),B.registerPlugin(U);var G,X,j=i(0);
/*!
 * @pixi/compressed-textures - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */!function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(X||(X={}));var H=((G={})[X.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,G[X.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,G[X.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,G[X.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,G[X.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,G[X.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,G[X.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,G[X.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,G[X.COMPRESSED_R11_EAC]=.5,G[X.COMPRESSED_SIGNED_R11_EAC]=.5,G[X.COMPRESSED_RG11_EAC]=1,G[X.COMPRESSED_SIGNED_RG11_EAC]=1,G[X.COMPRESSED_RGB8_ETC2]=.5,G[X.COMPRESSED_RGBA8_ETC2_EAC]=1,G[X.COMPRESSED_SRGB8_ETC2]=.5,G[X.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,G[X.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,G[X.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,G[X.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,G[X.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,G[X.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,G[X.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,G[X.COMPRESSED_RGB_ETC1_WEBGL]=.5,G[X.COMPRESSED_RGB_ATC_WEBGL]=.5,G[X.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,G[X.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,G),V=function(t,e){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function z(t,e){function i(){this.constructor=t}V(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function W(t,e){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var Y,q,K=function(t){function e(i,r){var n=t.call(this,i,r)||this;return n.format=r.format,n.levels=r.levels||1,n._width=r.width,n._height=r.height,n._extension=e._formatToExtension(n.format),(r.levelBuffers||n.buffer)&&(n._levelBuffers=r.levelBuffers||e._createLevelBuffers(i instanceof Uint8Array?i:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return z(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var n=0,o=this.levels;n<o;n++){var s=this._levelBuffers[n],a=s.levelID,h=s.levelWidth,l=s.levelHeight,u=s.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,a,this.format,h,l,0,u)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,i,r,n,o,s){for(var a=new Array(i),h=t.byteOffset,l=o,u=s,c=l+r-1&~(r-1),d=u+n-1&~(n-1),p=c*d*H[e],f=0;f<i;f++)a[f]={levelID:f,levelWidth:i>1?l:c,levelHeight:i>1?u:d,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,p=(c=(l=l>>1||1)+r-1&~(r-1))*(d=(u=u>>1||1)+n-1&~(n-1))*H[e];return a},e}(function(t){function e(e,i){void 0===i&&(i={width:1,height:1,autoLoad:!0});var r,n,o=this;return"string"==typeof e?(r=e,n=new Uint8Array):(r=null,n=e),(o=t.call(this,n,i)||this).origin=r,o.buffer=n?new v.w(n):null,o.origin&&!1!==i.autoLoad&&o.load(),n&&n.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return z(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return t=this,e=void 0,r=function(){var t;return W(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new v.w(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))},new((i=Promise)||(i=Promise))((function(n,o){function s(t){try{h(r.next(t))}catch(t){o(t)}}function a(t){try{h(r.throw(t))}catch(t){o(t)}}function h(t){t.done?n(t.value):new i((function(e){e(t.value)})).then(s,a)}h((r=r.apply(t,e||[])).next())}));var t,e,i,r},e}(v.i)),$=function(){function t(){}return t.use=function(e,i){var n=e.data;if(e.type===C.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var o=n.textures,s=void 0,a=void 0,h=0,l=o.length;h<l;h++){var u=o[h],c=u.src,d=u.format;if(d||(a=c),t.textureFormats[d]){s=c;break}}if(!(s=s||a))return void i(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(s===e.url)return void i(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var p={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},f=r.E.resolve(e.url.replace(this.baseUrl,""),s),m=n.cacheID;this.add(m,f,p,(function(t){if(t.error)i(t.error);else{var r=t.texture,n=void 0===r?null:r,o=t.textures,s=void 0===o?{}:o;Object.assign(e,{texture:n,textures:s}),i()}}))}else i()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=document.createElement("canvas").getContext("webgl");if(!e)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var i={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=i}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;for(var i in t._textureFormats={},e){var r=e[i];r&&Object.assign(t._textureFormats,Object.getPrototypeOf(r))}}return t._textureFormats},enumerable:!1,configurable:!0}),t}();function Z(t,e,i){var r={textures:{},texture:null};return e?(e.map((function(t){return new v.t(new v.c(t,Object.assign({mipmap:j.k.OFF,alphaMode:j.a.NO_PREMULTIPLIED_ALPHA},i)))})).forEach((function(e,i){var n=e.baseTexture,o=t+"-"+(i+1);v.c.addToCache(n,o),v.t.addToCache(e,o),0===i&&(v.c.addToCache(n,t),v.t.addToCache(e,t),r.texture=e),r.textures[o]=e})),r):r}C.setExtensionXhrType("dds",C.XHR_RESPONSE_TYPE.BUFFER);var Q,J,tt=3,et=4,it=7,rt=19,nt=2,ot=0,st=1,at=2,ht=3;!function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(Q||(Q={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(J||(J={}));var lt,ut,ct,dt=((Y={})[827611204]=X.COMPRESSED_RGBA_S3TC_DXT1_EXT,Y[861165636]=X.COMPRESSED_RGBA_S3TC_DXT3_EXT,Y[894720068]=X.COMPRESSED_RGBA_S3TC_DXT5_EXT,Y),pt=((q={})[Q.DXGI_FORMAT_BC1_TYPELESS]=X.COMPRESSED_RGBA_S3TC_DXT1_EXT,q[Q.DXGI_FORMAT_BC1_UNORM]=X.COMPRESSED_RGBA_S3TC_DXT1_EXT,q[Q.DXGI_FORMAT_BC2_TYPELESS]=X.COMPRESSED_RGBA_S3TC_DXT3_EXT,q[Q.DXGI_FORMAT_BC2_UNORM]=X.COMPRESSED_RGBA_S3TC_DXT3_EXT,q[Q.DXGI_FORMAT_BC3_TYPELESS]=X.COMPRESSED_RGBA_S3TC_DXT5_EXT,q[Q.DXGI_FORMAT_BC3_UNORM]=X.COMPRESSED_RGBA_S3TC_DXT5_EXT,q[Q.DXGI_FORMAT_BC1_UNORM_SRGB]=X.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,q[Q.DXGI_FORMAT_BC2_UNORM_SRGB]=X.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,q[Q.DXGI_FORMAT_BC3_UNORM_SRGB]=X.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,q),ft=function(){function t(){}return t.use=function(e,i){if("dds"===e.extension&&e.data)try{Object.assign(e,Z(e.name||e.url,t.parse(e.data),e.metadata))}catch(t){return void i(t)}i()},t.parse=function(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),r=i[tt],n=i[et],o=i[it],s=new Uint32Array(t,rt*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),a=s[1];if(4&a){var h=s[nt];if(808540228!==h){var l=dt[h],u=new Uint8Array(t,128);return[new K(u,{format:l,width:n,height:r,levels:o})]}var c=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),d=c[ot],p=c[st],f=c[at],m=c[ht],g=pt[d];if(void 0===g)throw new Error("DDSLoader cannot parse texture data with DXGI format "+d);if(4===f)throw new Error("DDSLoader does not support cubemap textures");if(p===J.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var v=new Array;if(1===m)v.push(new Uint8Array(t,148));else{for(var y=H[g],_=0,b=n,x=r,T=0;T<o;T++){_+=Math.max(1,b+3&-4)*Math.max(1,x+3&-4)*y,b>>>=1,x>>>=1}var w=148;for(T=0;T<m;T++)v.push(new Uint8Array(t,w,_)),w+=_}return v.map((function(t){return new K(t,{format:g,width:n,height:r,levels:o})}))}if(64&a)throw new Error("DDSLoader does not support uncompressed texture data.");if(512&a)throw new Error("DDSLoader does not supported YUV uncompressed texture data.");if(131072&a)throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");if(2&a)throw new Error("DDSLoader does not support single-channel (alpha) texture data!");throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")},t}();C.setExtensionXhrType("ktx",C.XHR_RESPONSE_TYPE.BUFFER);var mt=[171,75,84,88,32,49,49,187,13,10,26,10],gt=12,vt=16,yt=24,_t=28,bt=36,xt=40,Tt=44,wt=48,Et=52,St=56,At=60,Rt=((lt={})[j.r.UNSIGNED_BYTE]=1,lt[j.r.UNSIGNED_SHORT]=2,lt[j.r.INT]=4,lt[j.r.UNSIGNED_INT]=4,lt[j.r.FLOAT]=4,lt[j.r.HALF_FLOAT]=8,lt),Pt=((ut={})[j.h.RGBA]=4,ut[j.h.RGB]=3,ut[j.h.RG]=2,ut[j.h.RED]=1,ut[j.h.LUMINANCE]=1,ut[j.h.LUMINANCE_ALPHA]=2,ut[j.h.ALPHA]=1,ut),It=((ct={})[j.r.UNSIGNED_SHORT_4_4_4_4]=2,ct[j.r.UNSIGNED_SHORT_5_5_5_1]=2,ct[j.r.UNSIGNED_SHORT_5_6_5]=2,ct),Ot=function(){function t(){}return t.use=function(e,i){if("ktx"===e.extension&&e.data)try{var r=e.name||e.url,n=t.parse(r,e.data),o=n.compressed,s=n.uncompressed;if(o)Object.assign(e,Z(r,o,e.metadata));else if(s){var a={};s.forEach((function(t,e){var i=new v.t(new v.c(t.resource,{mipmap:j.k.OFF,alphaMode:j.a.NO_PREMULTIPLIED_ALPHA,type:t.type,format:t.format})),n=r+"-"+(e+1);v.c.addToCache(i.baseTexture,n),v.t.addToCache(i,n),0===e&&(a[r]=i,v.c.addToCache(i.baseTexture,r),v.t.addToCache(i,r)),a[n]=i})),Object.assign(e,{textures:a})}}catch(t){return void i(t)}i()},t.parse=function(e,i){var r=new DataView(i);if(!t.validate(e,r))return null;var n=67305985===r.getUint32(gt,!0),o=r.getUint32(vt,n),s=r.getUint32(yt,n),a=r.getUint32(_t,n),h=r.getUint32(bt,n),l=r.getUint32(xt,n)||1,u=r.getUint32(Tt,n)||1,c=r.getUint32(wt,n)||1,d=r.getUint32(Et,n),p=r.getUint32(St,n),f=r.getUint32(At,n);if(0===l||1!==u)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==c)throw new Error("WebGL does not support array textures");var m,g=h+3&-4,y=l+3&-4,_=new Array(c),b=h*l;if(0===o&&(b=g*y),void 0===(m=0!==o?Rt[o]?Rt[o]*Pt[s]:It[o]:H[a]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var x=b*m,T=h,w=l,E=g,S=y,A=64+f,R=0;R<p;R++){for(var P=r.getUint32(A,n),I=A+4,O=0;O<c;O++){var C=_[O];C||(C=_[O]=new Array(p)),C[R]={levelID:R,levelWidth:p>1||0!==o?T:E,levelHeight:p>1||0!==o?w:S,levelBuffer:new Uint8Array(i,I,x)},I+=x}A=(A+=P+4)%4!=0?A+4-A%4:A,x=(E=(T=T>>1||1)+4-1&-4)*(S=(w=w>>1||1)+4-1&-4)*m}return 0!==o?{uncompressed:_.map((function(e){var i=e[0].levelBuffer,r=!1;return o===j.r.FLOAT?i=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):o===j.r.UNSIGNED_INT?(r=!0,i=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):o===j.r.INT&&(r=!0,i=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new v.i(i,{width:e[0].levelWidth,height:e[0].levelHeight}),type:o,format:r?t.convertFormatToInteger(s):s}}))}:{compressed:_.map((function(t){return new K(null,{format:a,width:h,height:l,levels:p,levelBuffers:t})}))}},t.validate=function(t,e){for(var i=0;i<mt.length;i++)if(e.getUint8(i)!==mt[i])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},t.convertFormatToInteger=function(t){switch(t){case j.h.RGBA:return j.h.RGBA_INTEGER;case j.h.RGB:return j.h.RGB_INTEGER;case j.h.RG:return j.h.RG_INTEGER;case j.h.RED:return j.h.RED_INTEGER;default:return t}},t}(),Ct=function(t,e){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Mt(t,e){function i(){this.constructor=t}Ct(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Dt,Nt,Ft=function(t){function e(e,i,r,n){void 0===e&&(e=1500),void 0===r&&(r=16384),void 0===n&&(n=!1);var o=t.call(this)||this;return r>16384&&(r=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=r,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=j.b.NORMAL,o.autoResize=n,o.roundPixels=!0,o.baseTexture=null,o.setProperties(i),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return Mt(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Object(r.m)(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(n.b),Lt=function(){function t(t,e,i){this.geometry=new v.l,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<t.length;++r){var n=t[r];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||j.r.FLOAT,offset:n.offset},e[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new v.h(Object(r.g)(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){(a=this.dynamicProperties[i]).offset=e,e+=a.size,this.dynamicStride+=a.size}var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new v.h(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(i=0;i<this.staticProperties.length;++i){(a=this.staticProperties[i]).offset=o,o+=a.size,this.staticStride+=a.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new v.h(this.staticData,!0,!1);for(i=0;i<this.dynamicProperties.length;++i){var a=this.dynamicProperties[i];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===j.r.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(i=0;i<this.staticProperties.length;++i){a=this.staticProperties[i];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===j.r.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var r=0;r<this.dynamicProperties.length;r++){var n=this.dynamicProperties[r];n.uploadFunction(t,e,i,n.type===j.r.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,i){for(var r=0;r<this.staticProperties.length;r++){var n=this.staticProperties[r];n.uploadFunction(t,e,i,n.type===j.r.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),Bt=function(t){function e(e){var i=t.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new s.d,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:j.r.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=v.r.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),i.state=v.s.for2d(),i}return Mt(e,t),e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,o=this.renderer,s=e.length;if(0!==s){s>i&&!t.autoResize&&(s=i);var a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));var h=e[0]._texture.baseTexture;this.state.blendMode=Object(r.f)(t.blendMode,h.alphaMode),o.state.set(this.state);var l=o.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=Object(r.u)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h.alphaMode),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);for(var c=!1,d=0,p=0;d<s;d+=n,p+=1){var f=s-d;f>n&&(f=n),p>=a.length&&a.push(this._generateOneMoreBuffer(t));var m=a[p];m.uploadDynamic(e,d,f);var g=t._bufferUpdateIDs[p]||0;(c=c||m._updateID<g)&&(m._updateID=t._updateID,m.uploadStatic(e,d,f)),o.geometry.bind(m.geometry),l.drawElements(l.TRIANGLES,6*f,l.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,r=t._batchSize,n=t._properties,o=0;o<i;o+=r)e.push(new Lt(this.properties,n,r));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new Lt(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,r,n,o){for(var s=0,a=0,h=0,l=0,u=0;u<i;++u){var c=t[e+u],d=c._texture,p=c.scale.x,f=c.scale.y,m=d.trim,g=d.orig;m?(s=(a=m.x-c.anchor.x*g.width)+m.width,h=(l=m.y-c.anchor.y*g.height)+m.height):(s=g.width*(1-c.anchor.x),a=g.width*-c.anchor.x,h=g.height*(1-c.anchor.y),l=g.height*-c.anchor.y),r[o]=a*p,r[o+1]=l*f,r[o+n]=s*p,r[o+n+1]=l*f,r[o+2*n]=s*p,r[o+2*n+1]=h*f,r[o+3*n]=a*p,r[o+3*n+1]=h*f,o+=4*n}},e.prototype.uploadPosition=function(t,e,i,r,n,o){for(var s=0;s<i;s++){var a=t[e+s].position;r[o]=a.x,r[o+1]=a.y,r[o+n]=a.x,r[o+n+1]=a.y,r[o+2*n]=a.x,r[o+2*n+1]=a.y,r[o+3*n]=a.x,r[o+3*n+1]=a.y,o+=4*n}},e.prototype.uploadRotation=function(t,e,i,r,n,o){for(var s=0;s<i;s++){var a=t[e+s].rotation;r[o]=a,r[o+n]=a,r[o+2*n]=a,r[o+3*n]=a,o+=4*n}},e.prototype.uploadUvs=function(t,e,i,r,n,o){for(var s=0;s<i;++s){var a=t[e+s]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+n]=a.x1,r[o+n+1]=a.y1,r[o+2*n]=a.x2,r[o+2*n+1]=a.y2,r[o+3*n]=a.x3,r[o+3*n+1]=a.y3,o+=4*n):(r[o]=0,r[o+1]=0,r[o+n]=0,r[o+n+1]=0,r[o+2*n]=0,r[o+2*n+1]=0,r[o+3*n]=0,r[o+3*n+1]=0,o+=4*n)}},e.prototype.uploadTint=function(t,e,i,n,o,s){for(var a=0;a<i;++a){var h=t[e+a],l=h._texture.baseTexture.alphaMode>0,u=h.alpha,c=u<1&&l?Object(r.v)(h._tintRGB,u):h._tintRGB+(255*u<<24);n[s]=c,n[s+o]=c,n[s+2*o]=c,n[s+3*o]=c,s+=4*o}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(v.m),kt=i(4);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(Dt||(Dt={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(Nt||(Nt={}));var Ut={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},Gt=function(){function t(){this.color=16777215,this.alpha=1,this.texture=v.t.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=v.t.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),Xt=function(t,e){return(Xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function jt(t,e){function i(){this.constructor=t}Xt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function Ht(t,e){var i,r;void 0===e&&(e=!1);var n=t.length;if(!(n<6)){for(var o=0,s=0,a=t[n-2],h=t[n-1];s<n;s+=2){var l=t[s],u=t[s+1];o+=(l-a)*(u+h),a=l,h=u}if(!e&&o>0||e&&o<=0){var c=n/2;for(s=c+c%2;s<n;s+=2){var d=n-s-2,p=n-s-1,f=s,m=s+1;i=[t[f],t[d]],t[d]=i[0],t[f]=i[1],r=[t[m],t[p]],t[p]=r[0],t[m]=r[1]}}}}var Vt={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,n=t.holes,o=e.points,s=e.indices;if(i.length>=6){Ht(i,!1);for(var a=[],h=0;h<n.length;h++){var l=n[h];Ht(l.points,!0),a.push(i.length/2),i=i.concat(l.points)}var u=Object(r.j)(i,a,2);if(!u)return;var c=o.length/2;for(h=0;h<u.length;h+=3)s.push(u[h]+c),s.push(u[h+1]+c),s.push(u[h+2]+c);for(h=0;h<i.length;h++)o.push(i[h])}}},zt={build:function(t){var e,i,r,n,o,a,h=t.points;if(t.type===s.l.CIRC){var l=t.shape;e=l.x,i=l.y,o=a=l.radius,r=n=0}else if(t.type===s.l.ELIP){var u=t.shape;e=u.x,i=u.y,o=u.width,a=u.height,r=n=0}else{var c=t.shape,d=c.width/2,p=c.height/2;e=c.x+d,i=c.y+p,r=d-(o=a=Math.max(0,Math.min(c.radius,Math.min(d,p)))),n=p-a}var f=Math.ceil(2.3*Math.sqrt(o+a)),m=8*f+(r?4:0)+(n?4:0);if(h.length=m,0!==m){if(0===f)return h.length=8,h[0]=h[6]=e+r,h[1]=h[3]=i+n,h[2]=h[4]=e-r,void(h[5]=h[7]=i-n);var g=0,v=4*f+(r?2:0)+2,y=v,_=m,b=e+(A=r+o),x=e-A,T=i+(R=n);if(h[g++]=b,h[g++]=T,h[--v]=T,h[--v]=x,n){var w=i-R;h[y++]=x,h[y++]=w,h[--_]=w,h[--_]=b}for(var E=1;E<f;E++){var S=Math.PI/2*(E/f);b=e+(A=r+Math.cos(S)*o),x=e-A,T=i+(R=n+Math.sin(S)*a),w=i-R;h[g++]=b,h[g++]=T,h[--v]=T,h[--v]=x,h[y++]=x,h[y++]=w,h[--_]=w,h[--_]=b}var A,R;b=e+(A=r),x=e-A,T=i+(R=n+a),w=i-R;h[g++]=b,h[g++]=T,h[--_]=w,h[--_]=b,r&&(h[g++]=x,h[g++]=T,h[--_]=w,h[--_]=x)}},triangulate:function(t,e){var i,r,n=t.points,o=e.points,a=e.indices,h=o.length/2,l=h;if(t.type!==s.l.RREC){var u=t.shape;i=u.x,r=u.y}else{var c=t.shape;i=c.x+c.width/2,r=c.y+c.height/2}var d=t.matrix;o.push(t.matrix?d.a*i+d.c*r+d.tx:i,t.matrix?d.b*i+d.d*r+d.ty:r),h++,o.push(n[0],n[1]);for(var p=2;p<n.length;p+=2)o.push(n[p],n[p+1]),a.push(h++,l,h);a.push(l+1,l,h)}},Wt={build:function(t){var e=t.shape,i=e.x,r=e.y,n=e.width,o=e.height,s=t.points;s.length=0,s.push(i,r,i+n,r,i+n,r+o,i,r+o)},triangulate:function(t,e){var i=t.points,r=e.points,n=r.length/2;r.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function Yt(t,e,i){return t+(e-t)*i}function qt(t,e,i,r,n,o,s){void 0===s&&(s=[]);for(var a=s,h=0,l=0,u=0,c=0,d=0,p=0,f=0,m=0;f<=20;++f)h=Yt(t,i,m=f/20),l=Yt(e,r,m),u=Yt(i,n,m),c=Yt(r,o,m),d=Yt(h,u,m),p=Yt(l,c,m),0===f&&a[a.length-2]===d&&a[a.length-1]===p||a.push(d,p);return a}var Kt={build:function(t){if(fe.nextRoundedRectBehavior)zt.build(t);else{var e=t.shape,i=t.points,r=e.x,n=e.y,o=e.width,s=e.height,a=Math.max(0,Math.min(e.radius,Math.min(o,s)/2));i.length=0,a?(qt(r,n+a,r,n,r+a,n,i),qt(r+o-a,n,r+o,n,r+o,n+a,i),qt(r+o,n+s-a,r+o,n+s,r+o-a,n+s,i),qt(r+a,n+s,r,n+s,r,n+s-a,i)):i.push(r,n,r+o,n,r+o,n+s,r,n+s)}},triangulate:function(t,e){if(fe.nextRoundedRectBehavior)zt.triangulate(t,e);else{for(var i=t.points,n=e.points,o=e.indices,s=n.length/2,a=Object(r.j)(i,null,2),h=0,l=a.length;h<l;h+=3)o.push(a[h]+s),o.push(a[h+1]+s),o.push(a[h+2]+s);for(h=0,l=i.length;h<l;h++)n.push(i[h],i[++h])}}};function $t(t,e,i,r,n,o,s,a){var h,l;s?(h=r,l=-i):(h=-r,l=i);var u=t-i*n+h,c=e-r*n+l,d=t+i*o+h,p=e+r*o+l;return a.push(u,c),a.push(d,p),2}function Zt(t,e,i,r,n,o,s,a){var h=i-t,l=r-e,u=Math.atan2(h,l),c=Math.atan2(n-t,o-e);a&&u<c?u+=2*Math.PI:!a&&u>c&&(c+=2*Math.PI);var d=u,p=c-u,f=Math.abs(p),m=Math.sqrt(h*h+l*l),g=1+(15*f*Math.sqrt(m)/Math.PI>>0),v=p/g;if(d+=v,a){s.push(t,e),s.push(i,r);for(var y=1,_=d;y<g;y++,_+=v)s.push(t,e),s.push(t+Math.sin(_)*m,e+Math.cos(_)*m);s.push(t,e),s.push(n,o)}else{s.push(i,r),s.push(t,e);for(y=1,_=d;y<g;y++,_+=v)s.push(t+Math.sin(_)*m,e+Math.cos(_)*m),s.push(t,e);s.push(n,o),s.push(t,e)}return 2*g}function Qt(t,e){t.lineStyle.native?function(t,e){var i=0,r=t.shape,n=t.points||r.points,o=r.type!==s.l.POLY||r.closeStroke;if(0!==n.length){var a=e.points,h=e.indices,l=n.length/2,u=a.length/2,c=u;for(a.push(n[0],n[1]),i=1;i<l;i++)a.push(n[2*i],n[2*i+1]),h.push(c,c+1),c++;o&&h.push(c,u)}}(t,e):function(t,e){var i=t.shape,r=t.points||i.points.slice(),n=e.closePointEps;if(0!==r.length){var o=t.lineStyle,a=new s.g(r[0],r[1]),h=new s.g(r[r.length-2],r[r.length-1]),l=i.type!==s.l.POLY||i.closeStroke,u=Math.abs(a.x-h.x)<n&&Math.abs(a.y-h.y)<n;if(l){r=r.slice(),u&&(r.pop(),r.pop(),h.set(r[r.length-2],r[r.length-1]));var c=.5*(a.x+h.x),d=.5*(h.y+a.y);r.unshift(c,d),r.push(c,d)}var p=e.points,f=r.length/2,m=r.length,g=p.length/2,v=o.width/2,y=v*v,_=o.miterLimit*o.miterLimit,b=r[0],x=r[1],T=r[2],w=r[3],E=0,S=0,A=-(x-w),R=b-T,P=0,I=0,O=Math.sqrt(A*A+R*R);A/=O,R/=O,A*=v,R*=v;var C=o.alignment,M=2*(1-C),D=2*C;l||(o.cap===Nt.ROUND?m+=Zt(b-A*(M-D)*.5,x-R*(M-D)*.5,b-A*M,x-R*M,b+A*D,x+R*D,p,!0)+2:o.cap===Nt.SQUARE&&(m+=$t(b,x,A,R,M,D,!0,p))),p.push(b-A*M,x-R*M),p.push(b+A*D,x+R*D);for(var N=1;N<f-1;++N){b=r[2*(N-1)],x=r[2*(N-1)+1],T=r[2*N],w=r[2*N+1],E=r[2*(N+1)],S=r[2*(N+1)+1],A=-(x-w),R=b-T,A/=O=Math.sqrt(A*A+R*R),R/=O,A*=v,R*=v,P=-(w-S),I=T-E,P/=O=Math.sqrt(P*P+I*I),I/=O,P*=v,I*=v;var F=T-b,L=x-w,B=T-E,k=S-w,U=L*B-k*F,G=U<0;if(Math.abs(U)<.1)p.push(T-A*M,w-R*M),p.push(T+A*D,w+R*D);else{var X=(-A+b)*(-R+w)-(-A+T)*(-R+x),j=(-P+E)*(-I+w)-(-P+T)*(-I+S),H=(F*j-B*X)/U,V=(k*X-L*j)/U,z=(H-T)*(H-T)+(V-w)*(V-w),W=T+(H-T)*M,Y=w+(V-w)*M,q=T-(H-T)*D,K=w-(V-w)*D,$=G?M:D;z<=Math.min(F*F+L*L,B*B+k*k)+$*$*y?o.join===Dt.BEVEL||z/y>_?(G?(p.push(W,Y),p.push(T+A*D,w+R*D),p.push(W,Y),p.push(T+P*D,w+I*D)):(p.push(T-A*M,w-R*M),p.push(q,K),p.push(T-P*M,w-I*M),p.push(q,K)),m+=2):o.join===Dt.ROUND?G?(p.push(W,Y),p.push(T+A*D,w+R*D),m+=Zt(T,w,T+A*D,w+R*D,T+P*D,w+I*D,p,!0)+4,p.push(W,Y),p.push(T+P*D,w+I*D)):(p.push(T-A*M,w-R*M),p.push(q,K),m+=Zt(T,w,T-A*M,w-R*M,T-P*M,w-I*M,p,!1)+4,p.push(T-P*M,w-I*M),p.push(q,K)):(p.push(W,Y),p.push(q,K)):(p.push(T-A*M,w-R*M),p.push(T+A*D,w+R*D),o.join===Dt.BEVEL||z/y>_||(o.join===Dt.ROUND?m+=G?Zt(T,w,T+A*D,w+R*D,T+P*D,w+I*D,p,!0)+2:Zt(T,w,T-A*M,w-R*M,T-P*M,w-I*M,p,!1)+2:(G?(p.push(q,K),p.push(q,K)):(p.push(W,Y),p.push(W,Y)),m+=2)),p.push(T-P*M,w-I*M),p.push(T+P*D,w+I*D),m+=2)}}b=r[2*(f-2)],x=r[2*(f-2)+1],T=r[2*(f-1)],A=-(x-(w=r[2*(f-1)+1])),R=b-T,A/=O=Math.sqrt(A*A+R*R),R/=O,A*=v,R*=v,p.push(T-A*M,w-R*M),p.push(T+A*D,w+R*D),l||(o.cap===Nt.ROUND?m+=Zt(T-A*(M-D)*.5,w-R*(M-D)*.5,T-A*M,w-R*M,T+A*D,w+R*D,p,!1)+2:o.cap===Nt.SQUARE&&(m+=$t(T,w,A,R,M,D,!1,p)));var Z=e.indices,Q=Ut.epsilon*Ut.epsilon;for(N=g;N<m+g-2;++N)b=p[2*N],x=p[2*N+1],T=p[2*(N+1)],w=p[2*(N+1)+1],E=p[2*(N+2)],S=p[2*(N+2)+1],Math.abs(b*(w-S)+T*(S-x)+E*(x-w))<Q||Z.push(N,N+1,N+2)}}(t,e)}var Jt,te=function(){function t(){}return t.curveTo=function(t,e,i,r,n,o){var s=o[o.length-2],a=o[o.length-1]-e,h=s-t,l=r-e,u=i-t,c=Math.abs(a*u-h*l);if(c<1e-8||0===n)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var d=a*a+h*h,p=l*l+u*u,f=a*l+h*u,m=n*Math.sqrt(d)/c,g=n*Math.sqrt(p)/c,v=m*f/d,y=g*f/p,_=m*u+g*h,b=m*l+g*a,x=h*(g+v),T=a*(g+v),w=u*(m+y),E=l*(m+y);return{cx:_+t,cy:b+e,radius:n,startAngle:Math.atan2(T-b,x-_),endAngle:Math.atan2(E-b,w-_),anticlockwise:h*l>u*a}},t.arc=function(t,e,i,r,n,o,a,h,l){for(var u=a-o,c=Ut._segmentsCount(Math.abs(u)*n,40*Math.ceil(Math.abs(u)/s.f)),d=u/(2*c),p=2*d,f=Math.cos(d),m=Math.sin(d),g=c-1,v=g%1/g,y=0;y<=g;++y){var _=d+o+p*(y+v*y),b=Math.cos(_),x=-Math.sin(_);l.push((f*b+m*x)*n+i,(f*-x+m*b)*n+r)}},t}(),ee=function(){function t(){}return t.curveLength=function(t,e,i,r,n,o,s,a){for(var h=0,l=0,u=0,c=0,d=0,p=0,f=0,m=0,g=0,v=0,y=0,_=t,b=e,x=1;x<=10;++x)v=_-(m=(f=(p=(d=1-(l=x/10))*d)*d)*t+3*p*l*i+3*d*(u=l*l)*n+(c=u*l)*s),y=b-(g=f*e+3*p*l*r+3*d*u*o+c*a),_=m,b=g,h+=Math.sqrt(v*v+y*y);return h},t.curveTo=function(e,i,r,n,o,s,a){var h=a[a.length-2],l=a[a.length-1];a.length-=2;var u=Ut._segmentsCount(t.curveLength(h,l,e,i,r,n,o,s)),c=0,d=0,p=0,f=0,m=0;a.push(h,l);for(var g=1,v=0;g<=u;++g)p=(d=(c=1-(v=g/u))*c)*c,m=(f=v*v)*v,a.push(p*h+3*d*v*e+3*c*f*r+m*o,p*l+3*d*v*i+3*c*f*n+m*s)},t}(),ie=function(){function t(){}return t.curveLength=function(t,e,i,r,n,o){var s=t-2*i+n,a=e-2*r+o,h=2*i-2*t,l=2*r-2*e,u=4*(s*s+a*a),c=4*(s*h+a*l),d=h*h+l*l,p=2*Math.sqrt(u+c+d),f=Math.sqrt(u),m=2*u*f,g=2*Math.sqrt(d),v=c/f;return(m*p+f*c*(p-g)+(4*d*u-c*c)*Math.log((2*f+v+p)/(v+g)))/(4*m)},t.curveTo=function(e,i,r,n,o){for(var s=o[o.length-2],a=o[o.length-1],h=Ut._segmentsCount(t.curveLength(s,a,e,i,r,n)),l=0,u=0,c=1;c<=h;++c){var d=c/h;l=s+(e-s)*d,u=a+(i-a)*d,o.push(l+(e+(r-e)*d-l)*d,u+(i+(n-i)*d-u)*d)}},t}(),re=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),ne=((Jt={})[s.l.POLY]=Vt,Jt[s.l.CIRC]=zt,Jt[s.l.ELIP]=zt,Jt[s.l.RECT]=Wt,Jt[s.l.RREC]=Kt,Jt),oe=[],se=[],ae=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=r,this.type=t.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),he=new s.g,le=new n.a,ue=function(t){function e(){var e=t.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new n.a,e.boundsDirty=-1,e}return jt(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),se.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),oe.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null);var n=new ae(t,e,i,r);return this.graphicsData.push(n),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var i=new ae(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=r.lineStyle,r.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var r=e[i];if(r.fillStyle.visible&&(r.shape&&(r.matrix?r.matrix.applyInverse(t,he):he.copyFrom(t),r.shape.contains(he.x,he.y)))){var n=!1;if(r.holes)for(var o=0;o<r.holes.length;o++){if(r.holes[o].shape.contains(he.x,he.y)){n=!0;break}}if(!n)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,i=this.graphicsData,r=null,n=null;this.batches.length>0&&(n=(r=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<i.length;o++){this.shapeIndex++;var s=i[o],a=s.fillStyle,h=s.lineStyle;ne[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(a.visible||h.visible)&&this.processHoles(s.holes);for(var l=0;l<2;l++){var u=0===l?a:h;if(u.visible){var c=u.texture.baseTexture,d=this.indices.length,p=this.points.length/2;c.wrapMode=j.s.REPEAT,0===l?this.processFill(s):this.processLine(s);var f=this.points.length/2-p;0!==f&&(r&&!this._compareStyles(n,u)&&(r.end(d,p),r=null),r||((r=oe.pop()||new re).begin(u,d,p),this.batches.push(r),n=u),this.addUvs(this.points,e,u.texture,p,f,u.matrix))}}}var m=this.indices.length,g=this.points.length/2;if(r&&r.end(m,g),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var v=g>65535&&t;this.indicesUint16=v?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],r=i.fillStyle,n=i.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var r=t[e],n=0;n<r.size;n++){var o=r.start+n;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++v.c._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),se.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,r=this.textureIds,n=se.pop();n||((n=new v.d).texArray=new v.g),n.texArray.count=0,n.start=0,n.size=0,n.type=j.f.TRIANGLES;var o=0,s=null,a=0,h=!1,l=j.f.TRIANGLES,u=0;this.drawCalls.push(n);for(e=0;e<this.batches.length;e++){var c=this.batches[e],d=c.style,p=d.texture.baseTexture;h!==!!d.native&&(l=(h=!!d.native)?j.f.LINES:j.f.TRIANGLES,s=null,o=8,t++),s!==p&&(s=p,p._batchEnabled!==t&&(8===o&&(t++,o=0,n.size>0&&((n=se.pop())||((n=new v.d).texArray=new v.g),this.drawCalls.push(n)),n.start=u,n.size=0,n.texArray.count=0,n.type=l),p.touched=1,p._batchEnabled=t,p._batchLocation=o,p.wrapMode=j.s.REPEAT,n.texArray.elements[n.texArray.count++]=p,o++)),n.size+=c.size,u+=c.size,a=p._batchLocation,this.addColors(i,d.color,d.alpha,c.attribSize,c.attribStart),this.addTextureIds(r,a,c.attribSize,c.attribStart)}v.c._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,r=this.textureIds,n=new ArrayBuffer(3*t.length*4),o=new Float32Array(n),s=new Uint32Array(n),a=0,h=0;h<t.length/2;h++)o[a++]=t[2*h],o[a++]=t[2*h+1],o[a++]=e[2*h],o[a++]=e[2*h+1],s[a++]=i[h],o[a++]=r[h];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?Vt.triangulate(t,this):ne[t.type].triangulate(t,this)},e.prototype.processLine=function(t){Qt(t,this);for(var e=0;e<t.holes.length;e++)Qt(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];ne[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=le,i=s.d.IDENTITY;this._bounds.clear(),e.clear();for(var r=0;r<this.graphicsData.length;r++){var n=this.graphicsData[r],o=n.shape,a=n.type,h=n.lineStyle,l=n.matrix||s.d.IDENTITY,u=0;if(h&&h.visible&&(u=h.width,a!==s.l.POLY||n.fillStyle.visible?u*=Math.max(0,h.alignment):u*=Math.max(h.alignment,1-h.alignment)),i!==l&&(e.isEmpty()||(t.addBoundsMatrix(e,i),e.clear()),i=l),a===s.l.RECT||a===s.l.RREC){var c=o;e.addFramePad(c.x,c.y,c.x+c.width,c.y+c.height,u,u)}else if(a===s.l.CIRC){var d=o;e.addFramePad(d.x,d.y,d.x,d.y,d.radius+u,d.radius+u)}else if(a===s.l.ELIP){var p=o;e.addFramePad(p.x,p.y,p.x,p.y,p.width+u,p.height+u)}else{var f=o;t.addVerticesMatrix(i,f.points,0,f.points.length,u,u)}}e.isEmpty()||t.addBoundsMatrix(e,i),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var r=t[2*i],n=t[2*i+1];t[2*i]=e.a*r+e.c*n+e.tx,t[2*i+1]=e.b*r+e.d*n+e.ty}},e.prototype.addColors=function(t,e,i,n,o){void 0===o&&(o=0);var s=(e>>16)+(65280&e)+((255&e)<<16),a=Object(r.v)(s,i);t.length=Math.max(t.length,o+n);for(var h=0;h<n;h++)t[o+h]=a},e.prototype.addTextureIds=function(t,e,i,r){void 0===r&&(r=0),t.length=Math.max(t.length,r+i);for(var n=0;n<i;n++)t[r+n]=e},e.prototype.addUvs=function(t,e,i,r,n,o){void 0===o&&(o=null);for(var s=0,a=e.length,h=i.frame;s<n;){var l=t[2*(r+s)],u=t[2*(r+s)+1];if(o){var c=o.a*l+o.c*u+o.tx;u=o.b*l+o.d*u+o.ty,l=c}s++,e.push(l/h.width,u/h.height)}var d=i.baseTexture;(h.width<d.width||h.height<d.height)&&this.adjustUvs(e,i,a,n)},e.prototype.adjustUvs=function(t,e,i,r){for(var n=e.baseTexture,o=1e-6,s=i+2*r,a=e.frame,h=a.width/n.width,l=a.height/n.height,u=a.x/a.width,c=a.y/a.height,d=Math.floor(t[i]+o),p=Math.floor(t[i+1]+o),f=i+2;f<s;f+=2)d=Math.min(d,Math.floor(t[f]+o)),p=Math.min(p,Math.floor(t[f+1]+o));u-=d,c-=p;for(f=i;f<s;f+=2)t[f]=(t[f]+u)*h,t[f+1]=(t[f+1]+c)*l},e.BATCHABLE_SIZE=100,e}(v.e),ce=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=Nt.BUTT,e.join=Dt.MITER,e.miterLimit=10,e}return jt(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Gt),de=new Float32Array(3),pe={},fe=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new Gt,i._lineStyle=new ce,i._matrix=null,i._holeMode=!1,i.state=v.s.for2d(),i._geometry=e||new ue,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=j.b.NORMAL,i}return jt(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,i,r,n){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=.5),void 0===n&&(n=!1),"number"==typeof t&&(t={width:t,color:e,alpha:i,alignment:r,native:n}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:v.t.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Nt.BUTT,join:Dt.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new s.h,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new s.h,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,r=i[i.length-2],n=i[i.length-1];return r===t&&n===e||i.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,i,r){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),ie.curveTo(t,e,i,r,n),this},e.prototype.bezierCurveTo=function(t,e,i,r,n,o){return this._initCurve(),ee.curveTo(t,e,i,r,n,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,i,r,n){this._initCurve(t,e);var o=this.currentPath.points,s=te.curveTo(t,e,i,r,n,o);if(s){var a=s.cx,h=s.cy,l=s.radius,u=s.startAngle,c=s.endAngle,d=s.anticlockwise;this.arc(a,h,l,u,c,d)}return this},e.prototype.arc=function(t,e,i,r,n,o){if(void 0===o&&(o=!1),r===n)return this;if(!o&&n<=r?n+=s.f:o&&r<=n&&(r+=s.f),0===n-r)return this;var a=t+Math.cos(r)*i,h=e+Math.sin(r)*i,l=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var c=Math.abs(u[u.length-2]-a),d=Math.abs(u[u.length-1]-h);c<l&&d<l||u.push(a,h)}else this.moveTo(a,h),u=this.currentPath.points;return te.arc(a,h,t,e,i,r,n,o,u),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:v.t.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:v.t.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,i,r){return this.drawShape(new s.j(t,e,i,r))},e.prototype.drawRoundedRect=function(t,e,i,r,n){return this.drawShape(new s.k(t,e,i,r,n))},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new s.a(t,e,i))},e.prototype.drawEllipse=function(t,e,i,r){return this.drawShape(new s.c(t,e,i,r))},e.prototype.drawPolygon=function(){for(var t,e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];var n=!0,o=i[0];o.points?(n=o.closeStroke,t=o.points):t=Array.isArray(i[0])?i[0]:i;var a=new s.h(t);return a.closeStroke=n,this.drawShape(a),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==s.l.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,i=t.context.supports.uint32Indices;e.updateBatches(i),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var n=0;n<i;n++){var o=t.batches[n],s=o.style.color,a=new Float32Array(this.vertexData.buffer,4*o.attribStart*2,2*o.attribSize),h=new Float32Array(t.uvsFloat32.buffer,4*o.attribStart*2,2*o.attribSize),l={vertexData:a,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*o.start,o.size),uvs:h,_batchRGB:Object(r.m)(s),_tintRGB:s,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[n]=l}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this._geometry,r=this.tint,n=this.worldAlpha,o=e.uniforms,s=i.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(r>>16&255)/255*n,o.tint[1]=(r>>8&255)/255*n,o.tint[2]=(255&r)/255*n,o.tint[3]=n,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var a=0,h=s.length;a<h;a++)this._renderDrawCallDirect(t,i.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var i=e.texArray,r=e.type,n=e.size,o=e.start,s=i.count,a=0;a<s;a++)t.texture.bind(i.elements[a],a);t.geometry.draw(r,n,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!pe[i]){for(var r=t.plugins[i].MAX_TEXTURES,n=new Int32Array(r),o=0;o<r;o++)n[o]=o;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new s.d,default:v.v.from({uSamplers:n},!0)},h=t.plugins[i]._shader.program;pe[i]=new v.r(h,a)}e=pe[i]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,r=e.minY,n=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,i,r,n,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Object(r.m)(this.tint,de),e=0;e<this.batches.length;e++){var i=this.batches[e],n=i._batchRGB,o=(t[0]*n[0]*255<<16)+(t[1]*n[1]*255<<8)+(0|t[2]*n[2]*255);i._tintRGB=(o>>16)+(65280&o)+((255&o)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,o=e.d,s=e.tx,a=e.ty,h=this._geometry.points,l=this.vertexData,u=0,c=0;c<h.length;c+=2){var d=h[c],p=h[c+1];l[u++]=i*d+n*p+s,l[u++]=o*p+r*d+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new s.g,e}(n.b),me=function(t,e){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var ge,ve=new s.g,ye=new Uint16Array([0,1,2,0,2,3]),_e=function(t){function e(e){var i=t.call(this)||this;return i._anchor=new s.e(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=j.b.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||v.t.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=ye,i.pluginName="batch",i.isSprite=!0,i._roundPixels=kt.b.ROUND_PIXELS,i}return function(t,e){function i(){this.constructor=t}me(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Object(r.A)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Object(r.A)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,o=e.d,s=e.tx,a=e.ty,h=this.vertexData,l=t.trim,u=t.orig,c=this._anchor,d=0,p=0,f=0,m=0;if(l?(d=(p=l.x-c._x*u.width)+l.width,f=(m=l.y-c._y*u.height)+l.height):(d=(p=-c._x*u.width)+u.width,f=(m=-c._y*u.height)+u.height),h[0]=i*p+n*m+s,h[1]=o*m+r*p+a,h[2]=i*d+n*m+s,h[3]=o*m+r*d+a,h[4]=i*d+n*f+s,h[5]=o*f+r*d+a,h[6]=i*p+n*f+s,h[7]=o*f+r*p+a,this._roundPixels)for(var g=kt.b.RESOLUTION,v=0;v<h.length;++v)h[v]=Math.round((h[v]*g|0)/g)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,o=n.a,s=n.b,a=n.c,h=n.d,l=n.tx,u=n.ty,c=-r._x*i.width,d=c+i.width,p=-r._y*i.height,f=p+i.height;e[0]=o*c+a*p+l,e[1]=h*p+s*c+u,e[2]=o*d+a*p+l,e[3]=h*p+s*d+u,e[4]=o*d+a*f+l,e[5]=h*f+s*d+u,e[6]=o*c+a*f+l,e[7]=h*f+s*c+u},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new n.a),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new s.j),e=this._localBoundsRect),this._localBounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ve);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,n=0;return ve.x>=r&&ve.x<r+e&&(n=-i*this.anchor.y,ve.y>=n&&ve.y<n+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(t,i){return new e(t instanceof v.t?t:v.t.from(t,i))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Object(r.A)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Object(r.A)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||v.t.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(n.b),be=function(t,e){return(be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(ge||(ge={}));var xe={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ge.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Te=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],we=function(){function t(t){this.styleID=0,this.reset(),Ae(this,t,t)}return t.prototype.clone=function(){var e={};return Ae(e,this,xe),new t(e)},t.prototype.reset=function(){Ae(this,xe,xe)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=Se(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=Se(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=Se(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var r=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&Te.indexOf(r)<0&&(r='"'+r+'"'),e[i]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function Ee(t){return"number"==typeof t?Object(r.n)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function Se(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Ee(t[e]);return t}return Ee(t)}function Ae(t,e,i){for(var r in i)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}var Re=function(){function t(t,e,i,r,n,o,s,a,h){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=n,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=h}return t.measureText=function(e,i,r,n){void 0===n&&(n=t._canvas),r=null==r?i.wordWrap:r;var o=i.toFontString(),s=t.measureFont(o);0===s.fontSize&&(s.fontSize=i.fontSize,s.ascent=i.fontSize);var a=n.getContext("2d");a.font=o;for(var h=(r?t.wordWrap(e,i,n):e).split(/(?:\r\n|\r|\n)/),l=new Array(h.length),u=0,c=0;c<h.length;c++){var d=a.measureText(h[c]).width+(h[c].length-1)*i.letterSpacing;l[c]=d,u=Math.max(u,d)}var p=u+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var f=i.lineHeight||s.fontSize+i.strokeThickness,m=Math.max(f,s.fontSize+i.strokeThickness)+(h.length-1)*(f+i.leading);return i.dropShadow&&(m+=i.dropShadowDistance),new t(e,i,p,m,h,l,f+i.leading,u,s)},t.wordWrap=function(e,i,r){void 0===r&&(r=t._canvas);for(var n=r.getContext("2d"),o=0,s="",a="",h=Object.create(null),l=i.letterSpacing,u=i.whiteSpace,c=t.collapseSpaces(u),d=t.collapseNewlines(u),p=!c,f=i.wordWrapWidth+l,m=t.tokenize(e),g=0;g<m.length;g++){var v=m[g];if(t.isNewline(v)){if(!d){a+=t.addLine(s),p=!c,s="",o=0;continue}v=" "}if(c){var y=t.isBreakingSpace(v),_=t.isBreakingSpace(s[s.length-1]);if(y&&_)continue}var b=t.getFromCache(v,l,h,n);if(b>f)if(""!==s&&(a+=t.addLine(s),s="",o=0),t.canBreakWords(v,i.breakWords))for(var x=t.wordWrapSplit(v),T=0;T<x.length;T++){for(var w=x[T],E=1;x[T+E];){var S=x[T+E],A=w[w.length-1];if(t.canBreakChars(A,S,v,T,i.breakWords))break;w+=S,E++}T+=w.length-1;var R=t.getFromCache(w,l,h,n);R+o>f&&(a+=t.addLine(s),p=!1,s="",o=0),s+=w,o+=R}else{s.length>0&&(a+=t.addLine(s),s="",o=0);var P=g===m.length-1;a+=t.addLine(v,!P),p=!1,s="",o=0}else b+o>f&&(p=!1,a+=t.addLine(s),s="",o=0),(s.length>0||!t.isBreakingSpace(v)||p)&&(s+=v,o+=b)}return a+=t.addLine(s,!1)},t.addLine=function(e,i){return void 0===i&&(i=!0),e=t.trimRight(e),e=i?e+"\n":e},t.getFromCache=function(t,e,i,r){var n=i[t];if("number"!=typeof n){var o=t.length*e;n=r.measureText(t).width+o,i[t]=n}return n},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var r=e[i];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,i){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],r="";if("string"!=typeof e)return i;for(var n=0;n<e.length;n++){var o=e[n],s=e[n+1];t.isBreakingSpace(o,s)||t.isNewline(o)?(""!==r&&(i.push(r),r=""),i.push(o)):r+=o}return""!==r&&i.push(r),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,r,n){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={ascent:0,descent:0,fontSize:0},r=t._canvas,n=t._context;n.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(n.measureText(o).width),a=Math.ceil(n.measureText(t.BASELINE_SYMBOL).width),h=Math.ceil(t.HEIGHT_MULTIPLIER*a);a=a*t.BASELINE_MULTIPLIER|0,r.width=s,r.height=h,n.fillStyle="#f00",n.fillRect(0,0,s,h),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(o,0,a);var l=n.getImageData(0,0,s,h).data,u=l.length,c=4*s,d=0,p=0,f=!1;for(d=0;d<a;++d){for(var m=0;m<c;m+=4)if(255!==l[p+m]){f=!0;break}if(f)break;p+=c}for(i.ascent=a-d,p=u-c,f=!1,d=h;d>a;--d){for(m=0;m<c;m+=4)if(255!==l[p+m]){f=!0;break}if(f)break;p-=c}return i.descent=d-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var i=new OffscreenCanvas(0,0),r=i.getContext("2d");if(r&&r.measureText)return t.__canvas=i,i;e=document.createElement("canvas")}catch(t){e=document.createElement("canvas")}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d")),t.__context},enumerable:!1,configurable:!0}),t}();Re._fonts={},Re.METRICS_STRING="|ÉqÅ",Re.BASELINE_SYMBOL="M",Re.BASELINE_MULTIPLIER=1.4,Re.HEIGHT_MULTIPLIER=2,Re._newlines=[10,13],Re._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Pe={texture:!0,children:!1,baseTexture:!0},Ie=function(t){function e(e,i,r){var n=this,o=!1;r||(r=document.createElement("canvas"),o=!0),r.width=3,r.height=3;var a=v.t.from(r);return a.orig=new s.j,a.trim=new s.j,(n=t.call(this,a)||this)._ownCanvas=o,n.canvas=r,n.context=n.canvas.getContext("2d"),n._resolution=kt.b.RESOLUTION,n._autoResolution=!0,n._text=null,n._style=null,n._styleListener=null,n._font="",n.text=e,n.style=i,n.localStyleID=-1,n}return function(t,e){function i(){this.constructor=t}be(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(t){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),this.dirty||!t){this._font=this._style.toFontString();var n,o,s=this.context,a=Re.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),h=a.width,l=a.height,u=a.lines,c=a.lineHeight,d=a.lineWidths,p=a.maxLineWidth,f=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,h)+2*i.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,l)+2*i.padding)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=i.strokeThickness,s.textBaseline=i.textBaseline,s.lineJoin=i.lineJoin,s.miterLimit=i.miterLimit;for(var m=i.dropShadow?2:1,g=0;g<m;++g){var v=i.dropShadow&&0===g,y=v?Math.ceil(Math.max(1,l)+2*i.padding):0,_=y*this._resolution;if(v){s.fillStyle="black",s.strokeStyle="black";var b=i.dropShadowColor,x=Object(r.m)("number"==typeof b?b:Object(r.B)(b)),T=i.dropShadowBlur*this._resolution,w=i.dropShadowDistance*this._resolution;s.shadowColor="rgba("+255*x[0]+","+255*x[1]+","+255*x[2]+","+i.dropShadowAlpha+")",s.shadowBlur=T,s.shadowOffsetX=Math.cos(i.dropShadowAngle)*w,s.shadowOffsetY=Math.sin(i.dropShadowAngle)*w+_}else s.fillStyle=this._generateFillStyle(i,u,a),s.strokeStyle=i.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;var E=(c-f.fontSize)/2;(!e.nextLineHeightBehavior||c-f.fontSize<0)&&(E=0);for(var S=0;S<u.length;S++)n=i.strokeThickness/2,o=i.strokeThickness/2+S*c+f.ascent+E,"right"===i.align?n+=p-d[S]:"center"===i.align&&(n+=(p-d[S])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(u[S],n+i.padding,o+i.padding-y,!0),i.fill&&this.drawLetterSpacing(u[S],n+i.padding,o+i.padding-y)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,i,r,n){void 0===n&&(n=!1);var o=this._style.letterSpacing,s=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===o||s)return s&&(this.context.letterSpacing=o,this.context.textLetterSpacing=o),void(n?this.context.strokeText(t,i,r):this.context.fillText(t,i,r));for(var a=i,h=Array.from?Array.from(t):t.split(""),l=this.context.measureText(t).width,u=0,c=0;c<h.length;++c){var d=h[c];n?this.context.strokeText(d,a,r):this.context.fillText(d,a,r);for(var p="",f=c+1;f<h.length;++f)p+=h[f];a+=l-(u=this.context.measureText(p).width)+o,l=u}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=Object(r.C)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,n=this._style,o=n.trim?0:n.padding,s=i.baseTexture;i.trim.width=i._frame.width=t.width/this._resolution,i.trim.height=i._frame.height=t.height/this._resolution,i.trim.x=-o,i.trim.y=-o,i.orig.width=i._frame.width-2*o,i.orig.height=i._frame.height-2*o,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),i.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,i){var r,n=t.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];var o=t.dropShadow?t.dropShadowDistance:0,s=t.padding||0,a=this.canvas.width/this._resolution-o-2*s,h=this.canvas.height/this._resolution-o-2*s,l=n.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var c=l.length+1,d=1;d<c;++d)u.push(d/c);if(l.unshift(n[0]),u.unshift(0),l.push(n[n.length-1]),u.push(1),t.fillGradientType===ge.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,s,a/2,h+s);var p=i.fontProperties.fontSize+t.strokeThickness;for(d=0;d<e.length;d++){var f=i.lineHeight*(d-1)+p,m=i.lineHeight*d,g=m;d>0&&f>m&&(g=(m+f)/2);var v=m+p,y=i.lineHeight*(d+1),_=v;d+1<e.length&&y<v&&(_=(v+y)/2);for(var b=(_-g)/h,x=0;x<l.length;x++){var T=0;T="number"==typeof u[x]?u[x]:x/l.length;var w=Math.min(1,Math.max(0,g/h+T*b));w=Number(w.toFixed(5)),r.addColorStop(w,l[x])}}}else{r=this.context.createLinearGradient(s,h/2,a+s,h/2);var E=l.length+1,S=1;for(d=0;d<l.length;d++){var A=void 0;A="number"==typeof u[d]?u[d]:S/E,r.addColorStop(A,l[d]),S++}}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},Pe,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Object(r.A)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Object(r.A)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof we?t:new we(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(_e);
/*!
 * @pixi/prepare - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
kt.b.UPLOADS_PER_FRAME=4;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Oe=function(t,e){return(Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Ce=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function Me(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof v.t){var n=t._textures[r].baseTexture;-1===e.indexOf(n)&&(e.push(n),i=!0)}return i}function De(t,e){if(t.baseTexture instanceof v.c){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Ne(t,e){if(t._texture&&t._texture instanceof v.t){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Fe(t,e){return e instanceof Ie&&(e.updateText(!0),!0)}function Le(t,e){if(e instanceof we){var i=e.toFontString();return Re.measureFont(i),!0}return!1}function Be(t,e){if(t instanceof Ie){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function ke(t,e){return t instanceof we&&(-1===e.indexOf(t)&&e.push(t),!0)}var Ue=function(){function t(t){var e=this;this.limiter=new Ce(kt.b.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Be),this.registerFindHook(ke),this.registerFindHook(Me),this.registerFindHook(De),this.registerFindHook(Ne),this.registerUploadHook(Fe),this.registerUploadHook(Le)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,a.a.system.addOnce(this.tick,this,a.c.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)a.a.system.addOnce(this.tick,this,a.c.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);this.completes.length=0;for(i=0,r=n.length;i<r;i++)n[i]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof n.b)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&a.a.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function Ge(t,e){return e instanceof v.c&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function Xe(t,e){if(!(e instanceof fe))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var r=i.batches,n=0;n<r.length;n++){var o=r[n].style.texture;o&&Ge(t,o.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader(t)),!0}function je(t,e){return t instanceof fe&&(e.push(t),!0)}var He=function(t){function e(e){var i=t.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(je),i.registerUploadHook(Ge),i.registerUploadHook(Xe),i}return function(t,e){function i(){this.constructor=t}Oe(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(Ue),Ve=(function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function t(t,e,i){void 0===i&&(i=null),this._texture=t instanceof v.t?t:null,this.baseTexture=t instanceof v.c?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var r=this.baseTexture.resource;this.resolution=this._updateResolution(i||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,i=Object(r.l)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,r=t.BATCH_SIZE;i-e<r&&i<this._frameKeys.length;){var n=this._frameKeys[i],o=this._frames[n],a=o.frame;if(a){var h=null,l=null,u=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,c=new s.j(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);h=o.rotated?new s.j(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new s.j(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new s.j(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[n]=new v.t(this.baseTexture,h,c,l,o.rotated?2:0,o.anchor),v.t.addToCache(this.textures[n],n)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var r=t[e][i];this.animations[e].push(this.textures[r])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var i in void 0===t&&(t=!1),this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}()),ze=function(){function t(){}return t.use=function(e,i){var n,o,s=this,a=e.name+"_image";if(e.data&&e.type===C.TYPE.JSON&&e.data.frames&&!s.resources[a]){var h=null===(o=null===(n=e.data)||void 0===n?void 0:n.meta)||void 0===o?void 0:o.related_multi_packs;if(Array.isArray(h))for(var l=function(t){if("string"!=typeof t)return"continue";var i=t.replace(".json",""),n=r.E.resolve(e.url.replace(s.baseUrl,""),t);if(s.resources[i]||Object.values(s.resources).some((function(t){return r.E.format(r.E.parse(t.url))===n})))return"continue";var o={crossOrigin:e.crossOrigin,loadType:C.LOAD_TYPE.XHR,xhrType:C.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};s.add(i,n,o)},u=0,c=h;u<c.length;u++){l(c[u])}var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},p=t.getResourcePath(e,s.baseUrl);s.add(a,p,d,(function(t){if(t.error)i(t.error);else{var r=new Ve(t.texture,e.data,e.url);r.parse((function(){e.spritesheet=r,e.textures=r.textures,i()}))}}))}else i()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:r.E.resolve(t.url.replace(e,""),t.data.meta.image)},t}(),We=function(t,e){return(We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Ye(t,e){function i(){this.constructor=t}We(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var qe=new s.g,Ke=function(t){function e(e,i,r){void 0===i&&(i=100),void 0===r&&(r=100);var n=t.call(this,e)||this;return n.tileTransform=new s.m,n._width=i,n._height=r,n.uvMatrix=n.texture.uvMatrix||new v.u(e),n.pluginName="tilingSprite",n.uvRespectAnchor=!1,n}return Ye(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new s.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,qe);var e=this._width,i=this._height,r=-e*this.anchor._x;if(qe.x>=r&&qe.x<r+e){var n=-i*this.anchor._y;if(qe.y>=n&&qe.y<n+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i){return new e(t instanceof v.t?t:v.t.from(t,i),i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(_e),$e="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Ze=new s.d,Qe=function(t){function e(e){var i=t.call(this,e)||this;return e.runners.contextChange.add(i),i.quad=new v.o,i.state=v.s.for2d(),i}return Ye(e,t),e.prototype.contextChange=function(){var t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=v.r.from($e,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=t.context.webGLVersion>1?v.r.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):v.r.from($e,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)},e.prototype.render=function(t){var e=this.renderer,i=this.quad,n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);var o=t.uvRespectAnchor?t.anchor.x:0,s=t.uvRespectAnchor?t.anchor.y:0;(n=i.uvs)[0]=n[6]=-o,n[1]=n[3]=-s,n[2]=n[4]=1-o,n[5]=n[7]=1-s,i.invalidate();var a=t._texture,h=a.baseTexture,l=t.tileTransform.localTransform,u=t.uvMatrix,c=h.isPowerOfTwo&&a.frame.width===h.width&&a.frame.height===h.height;c&&(h._glTextures[e.CONTEXT_UID]?c=h.wrapMode!==j.s.CLAMP:h.wrapMode===j.s.CLAMP&&(h.wrapMode=j.s.REPEAT));var d=c?this.simpleShader:this.shader,p=a.width,f=a.height,m=t._width,g=t._height;Ze.set(l.a*p/m,l.b*p/g,l.c*f/m,l.d*f/g,l.tx/m,l.ty/g),Ze.invert(),c?Ze.prepend(u.mapCoord):(d.uniforms.uMapCoord=u.mapCoord.toArray(!0),d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset),d.uniforms.uTransform=Ze.toArray(!0),d.uniforms.uColor=Object(r.w)(t.tint,t.worldAlpha,d.uniforms.uColor,h.alphaMode),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=a,e.shader.bind(d),e.geometry.bind(i),this.state.blendMode=Object(r.f)(t.blendMode,h.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(v.m),Je=i(9),ti=function(t,e){return(ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var ei=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},ii=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var r in e){var n=e[r].match(/^[a-z]+/gm)[0],o=e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var a in o){var h=o[a].split("="),l=h[0],u=h[1].replace(/"/gm,""),c=parseFloat(u),d=isNaN(c)?u:c;s[l]=d}i[n].push(s)}var p=new ei;return i.info.forEach((function(t){return p.info.push({face:t.face,size:parseInt(t.size,10)})})),i.common.forEach((function(t){return p.common.push({lineHeight:parseInt(t.lineHeight,10)})})),i.page.forEach((function(t){return p.page.push({id:parseInt(t.id,10),file:t.file})})),i.char.forEach((function(t){return p.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),i.kerning.forEach((function(t){return p.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),i.distanceField.forEach((function(t){return p.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})})),p},t}(),ri=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new ei,i=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),a=t.getElementsByTagName("distanceField"),h=0;h<i.length;h++)e.info.push({face:i[h].getAttribute("face"),size:parseInt(i[h].getAttribute("size"),10)});for(h=0;h<r.length;h++)e.common.push({lineHeight:parseInt(r[h].getAttribute("lineHeight"),10)});for(h=0;h<n.length;h++)e.page.push({id:parseInt(n[h].getAttribute("id"),10)||0,file:n[h].getAttribute("file")});for(h=0;h<o.length;h++){var l=o[h];e.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(h=0;h<s.length;h++)e.kerning.push({first:parseInt(s[h].getAttribute("first"),10),second:parseInt(s[h].getAttribute("second"),10),amount:parseInt(s[h].getAttribute("amount"),10)});for(h=0;h<a.length;h++)e.distanceField.push({fieldType:a[h].getAttribute("fieldType"),distanceRange:parseInt(a[h].getAttribute("distanceRange"),10)});return e},t}(),ni=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return ri.test(e)}return!1},t.parse=function(t){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return ri.parse(e)},t}(),oi=[ii,ri,ni];function si(t){for(var e=0;e<oi.length;e++)if(oi[e].test(t))return oi[e];return null}function ai(t,e,i,n,o,s,a){var h=i.text,l=i.fontProperties;e.translate(n,o),e.scale(s,s);var u=a.strokeThickness/2,c=-a.strokeThickness/2;if(e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=function(t,e,i,r,n,o){var s,a=i.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var h=i.dropShadow?i.dropShadowDistance:0,l=i.padding||0,u=t.width/r-h-2*l,c=t.height/r-h-2*l,d=a.slice(),p=i.fillGradientStops.slice();if(!p.length)for(var f=d.length+1,m=1;m<f;++m)p.push(m/f);if(d.unshift(a[0]),p.unshift(0),d.push(a[a.length-1]),p.push(1),i.fillGradientType===ge.LINEAR_VERTICAL){s=e.createLinearGradient(u/2,l,u/2,c+l);var g=0,v=(o.fontProperties.fontSize+i.strokeThickness)/c;for(m=0;m<n.length;m++)for(var y=o.lineHeight*m,_=0;_<d.length;_++){var b=y/c+("number"==typeof p[_]?p[_]:_/d.length)*v,x=Math.max(g,b);x=Math.min(x,1),s.addColorStop(x,d[_]),g=x}}else{s=e.createLinearGradient(l,c/2,u+l,c/2);var T=d.length+1,w=1;for(m=0;m<d.length;m++){var E=void 0;E="number"==typeof p[m]?p[m]:w/T,s.addColorStop(E,d[m]),w++}}return s}(t,e,a,s,[h],i),e.strokeStyle=a.stroke,a.dropShadow){var d=a.dropShadowColor,p=Object(r.m)("number"==typeof d?d:Object(r.B)(d)),f=a.dropShadowBlur*s,m=a.dropShadowDistance*s;e.shadowColor="rgba("+255*p[0]+","+255*p[1]+","+255*p[2]+","+a.dropShadowAlpha+")",e.shadowBlur=f,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*m,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*m}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;a.stroke&&a.strokeThickness&&e.strokeText(h,u,c+i.lineHeight-l.descent),a.fill&&e.fillText(h,u,c+i.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function hi(t){return Array.from?Array.from(t):t.split("")}function li(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var ui=function(){function t(t,e,i){var n,o,a=t.info[0],h=t.common[0],l=t.page[0],u=t.distanceField[0],c=Object(r.l)(l.file),d={};this._ownsTextures=i,this.font=a.face,this.size=a.size,this.lineHeight=h.lineHeight/c,this.chars={},this.pageTextures=d;for(var p=0;p<t.page.length;p++){var f=t.page[p],m=f.id,g=f.file;d[m]=e instanceof Array?e[p]:e[g],(null==u?void 0:u.fieldType)&&"none"!==u.fieldType&&(d[m].baseTexture.alphaMode=j.a.NO_PREMULTIPLIED_ALPHA)}for(p=0;p<t.char.length;p++){var y=t.char[p],_=(m=y.id,y.page),b=t.char[p],x=b.x,T=b.y,w=b.width,E=b.height,S=b.xoffset,A=b.yoffset,R=b.xadvance;x/=c,T/=c,w/=c,E/=c,S/=c,A/=c,R/=c;var P=new s.j(x+d[_].frame.x/c,T+d[_].frame.y/c,w,E);this.chars[m]={xOffset:S,yOffset:A,xAdvance:R,kerning:{},texture:new v.t(d[_].baseTexture,P),page:_}}for(p=0;p<t.kerning.length;p++){var I=t.kerning[p],O=I.first,C=I.second,M=I.amount;O/=c,C/=c,M/=c,this.chars[C]&&(this.chars[C].kerning[O]=M)}this.distanceFieldRange=null==u?void 0:u.distanceRange,this.distanceFieldType=null!==(o=null===(n=null==u?void 0:u.fieldType)||void 0===n?void 0:n.toLowerCase())&&void 0!==o?o:"none"}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,i,r){var n;if(e instanceof ei)n=e;else{var o=si(e);if(!o)throw new Error("Unrecognized data format for font.");n=o.parse(e)}i instanceof v.t&&(i=[i]);var s=new t(n,i,r);return t.available[s.font]=s,s},t.uninstall=function(e){var i=t.available[e];if(!i)throw new Error("No font found named '"+e+"'");i.destroy(),delete t.available[e]},t.from=function(e,i,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},t.defaultOptions,r),o=n.chars,s=n.padding,a=n.resolution,h=n.textureWidth,l=n.textureHeight,u=function(t){"string"==typeof t&&(t=[t]);for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];if(Array.isArray(n)){if(2!==n.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var o=n[0].charCodeAt(0),s=n[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,h=s;a<=h;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,hi(n))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(o),c=i instanceof we?i:new we(i),d=h,p=new ei;p.info[0]={face:c.fontFamily,size:c.fontSize},p.common[0]={lineHeight:c.fontSize};for(var f,m,g,y=0,_=0,b=0,x=[],T=0;T<u.length;T++){f||((f=document.createElement("canvas")).width=h,f.height=l,m=f.getContext("2d"),g=new v.c(f,{resolution:a}),x.push(new v.t(g)),p.page.push({id:x.length-1,file:""}));var w=Re.measureText(u[T],c,!1,f),E=w.width,S=Math.ceil(w.height),A=Math.ceil(("italic"===c.fontStyle?2:1)*E);if(_>=l-S*a){if(0===_)throw new Error("[BitmapFont] textureHeight "+l+"px is too small for "+c.fontSize+"px fonts");--T,f=null,m=null,g=null,_=0,y=0,b=0}else if(b=Math.max(S+w.fontProperties.descent,b),A*a+y>=d)--T,_+=b*a,_=Math.ceil(_),y=0,b=0;else{ai(f,m,w,y,_,a,c);var R=li(w.text);p.char.push({id:R,page:x.length-1,x:y/a,y:_/a,width:A,height:S,xoffset:0,yoffset:0,xadvance:Math.ceil(E-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),y+=(A+2*s)*a,y=Math.ceil(y)}}T=0;for(var P=u.length;T<P;T++)for(var I=u[T],O=0;O<P;O++){var C=u[O],M=m.measureText(I).width,D=m.measureText(C).width,N=m.measureText(I+C).width-(M+D);N&&p.kerning.push({first:li(I),second:li(C),amount:N})}var F=new t(p,x,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=F,F},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),ci=[],di=[],pi=[],fi=(function(t){function e(i,r){void 0===r&&(r={});var n=t.call(this)||this;n._tint=16777215;var o=Object.assign({},e.styleDefaults,r),a=o.align,h=o.tint,l=o.maxWidth,u=o.letterSpacing,c=o.fontName,d=o.fontSize;if(!ui.available[c])throw new Error('Missing BitmapFont "'+c+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=a,n._tint=h,n._fontName=c,n._fontSize=d||ui.available[c].size,n.text=i,n._maxWidth=l,n._maxLineHeight=0,n._letterSpacing=u,n._anchor=new s.e((function(){n.dirty=!0}),n,0,0),n._roundPixels=kt.b.ROUND_PIXELS,n.dirty=!0,n._textureCache={},n}(function(t,e){function i(){this.constructor=t}ti(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(e,t),e.prototype.updateText=function(){for(var t,e=ui.available[this._fontName],i=this._fontSize/e.size,n=new s.g,o=[],a=[],h=[],l=hi(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),u=this._maxWidth*e.size/this._fontSize,c="none"===e.distanceFieldType?ci:di,d=null,p=0,f=0,m=0,g=-1,y=0,_=0,b=0,x=0,T=0;T<l.length;T++){var w=li(V=l[T]);if(/(?:\s)/.test(V)&&(g=T,y=p,x++),"\r"!==V&&"\n"!==V){var E=e.chars[w];if(E){d&&E.kerning[d]&&(n.x+=E.kerning[d]);var S=pi.pop()||{texture:v.t.EMPTY,line:0,charCode:0,prevSpaces:0,position:new s.g};S.texture=E.texture,S.line=m,S.charCode=w,S.position.x=n.x+E.xOffset+this._letterSpacing/2,S.position.y=n.y+E.yOffset,S.prevSpaces=x,o.push(S),p=S.position.x+Math.max(E.xAdvance,E.texture.orig.width),n.x+=E.xAdvance+this._letterSpacing,b=Math.max(b,E.yOffset+E.texture.height),d=w,-1!==g&&u>0&&n.x>u&&(++_,Object(r.x)(o,1+g-_,1+T-g),T=g,g=-1,a.push(y),h.push(o.length>0?o[o.length-1].prevSpaces:0),f=Math.max(f,y),m++,n.x=0,n.y+=e.lineHeight,d=null,x=0)}}else a.push(p),h.push(-1),f=Math.max(f,p),++m,++_,n.x=0,n.y+=e.lineHeight,d=null,x=0}var A=l[l.length-1];"\r"!==A&&"\n"!==A&&(/(?:\s)/.test(A)&&(p=y),a.push(p),f=Math.max(f,p),h.push(-1));var R=[];for(T=0;T<=m;T++){var P=0;"right"===this._align?P=f-a[T]:"center"===this._align?P=(f-a[T])/2:"justify"===this._align&&(P=h[T]<0?0:(f-a[T])/h[T]),R.push(P)}var I=o.length,O={},C=[],M=this._activePagesMeshData;for(T=0;T<M.length;T++)c.push(M[T]);for(T=0;T<I;T++){var D=(W=o[T].texture).baseTexture.uid;if(!O[D]){if(!(J=c.pop())){var N=new Je.b,F=void 0,L=void 0;"none"===e.distanceFieldType?(F=new Je.c(v.t.EMPTY),L=j.b.NORMAL):(F=new Je.c(v.t.EMPTY,{program:v.n.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),L=j.b.NORMAL_NPM);var B=new Je.a(N,F);B.blendMode=L,J={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:B,vertices:null,uvs:null,indices:null}}J.index=0,J.indexCount=0,J.vertexCount=0,J.uvsCount=0,J.total=0;var k=this._textureCache;k[D]=k[D]||new v.t(W.baseTexture),J.mesh.texture=k[D],J.mesh.tint=this._tint,C.push(J),O[D]=J}O[D].total++}for(T=0;T<M.length;T++)-1===C.indexOf(M[T])&&this.removeChild(M[T].mesh);for(T=0;T<C.length;T++)C[T].mesh.parent!==this&&this.addChild(C[T].mesh);for(var T in this._activePagesMeshData=C,O){var U=(J=O[T]).total;if(!((null===(t=J.indices)||void 0===t?void 0:t.length)>6*U)||J.vertices.length<2*Je.a.BATCHABLE_SIZE)J.vertices=new Float32Array(8*U),J.uvs=new Float32Array(8*U),J.indices=new Uint16Array(6*U);else for(var G=J.total,X=J.vertices,H=4*G*2;H<X.length;H++)X[H]=0;J.mesh.size=6*U}for(T=0;T<I;T++){var V,z=(V=o[T]).position.x+R[V.line]*("justify"===this._align?V.prevSpaces:1);this._roundPixels&&(z=Math.round(z));var W,Y=z*i,q=V.position.y*i,K=O[(W=V.texture).baseTexture.uid],$=W.frame,Z=W._uvs,Q=K.index++;K.indices[6*Q+0]=0+4*Q,K.indices[6*Q+1]=1+4*Q,K.indices[6*Q+2]=2+4*Q,K.indices[6*Q+3]=0+4*Q,K.indices[6*Q+4]=2+4*Q,K.indices[6*Q+5]=3+4*Q,K.vertices[8*Q+0]=Y,K.vertices[8*Q+1]=q,K.vertices[8*Q+2]=Y+$.width*i,K.vertices[8*Q+3]=q,K.vertices[8*Q+4]=Y+$.width*i,K.vertices[8*Q+5]=q+$.height*i,K.vertices[8*Q+6]=Y,K.vertices[8*Q+7]=q+$.height*i,K.uvs[8*Q+0]=Z.x0,K.uvs[8*Q+1]=Z.y0,K.uvs[8*Q+2]=Z.x1,K.uvs[8*Q+3]=Z.y1,K.uvs[8*Q+4]=Z.x2,K.uvs[8*Q+5]=Z.y2,K.uvs[8*Q+6]=Z.x3,K.uvs[8*Q+7]=Z.y3}for(var T in this._textWidth=f*i,this._textHeight=(n.y+e.lineHeight)*i,O){var J=O[T];if(0!==this.anchor.x||0!==this.anchor.y)for(var tt=0,et=this._textWidth*this.anchor.x,it=this._textHeight*this.anchor.y,rt=0;rt<J.total;rt++)J.vertices[tt++]-=et,J.vertices[tt++]-=it,J.vertices[tt++]-=et,J.vertices[tt++]-=it,J.vertices[tt++]-=et,J.vertices[tt++]-=it,J.vertices[tt++]-=et,J.vertices[tt++]-=it;this._maxLineHeight=b*i;var nt=J.mesh.geometry.getBuffer("aVertexPosition"),ot=J.mesh.geometry.getBuffer("aTextureCoord"),st=J.mesh.geometry.getIndex();nt.data=J.vertices,ot.data=J.uvs,st.data=J.indices,nt.update(),ot.update(),st.update()}for(T=0;T<o.length;T++)pi.push(o[T])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(e){var i=ui.available[this._fontName],r=i.distanceFieldRange,n=i.distanceFieldType,o=i.size;if("none"!==n)for(var s=this.worldTransform,a=s.a,h=s.b,l=s.c,u=s.d,c=Math.sqrt(a*a+h*h),d=Math.sqrt(l*l+u*u),p=(Math.abs(c)+Math.abs(d))/2,f=this._fontSize/o,m=0,g=this._activePagesMeshData;m<g.length;m++){g[m].mesh.shader.uniforms.uFWidth=p*r*f*e.resolution}t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!ui.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var i=this._textureCache;for(var r in i){i[r].destroy(),delete i[r]}this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(n.b),function(){function t(){}return t.add=function(){C.setExtensionXhrType("fnt",C.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,i){var r=si(e.data);if(r)for(var n=t.getBaseUrl(this,e),o=r.parse(e.data),s={},a=function(t){s[t.metadata.pageFile]=t.texture,Object.keys(s).length===o.page.length&&(e.bitmapFont=ui.install(o,s,!0),i())},h=0;h<o.page.length;++h){var l=o.page[h].file,u=n+l,c=!1;for(var d in this.resources){var p=this.resources[d];if(p.url===u){p.metadata.pageFile=l,p.texture?a(p):p.onAfterMiddleware.add(a),c=!0;break}}if(!c){var f={crossOrigin:e.crossOrigin,loadType:C.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(u,f,a)}}else i()},t.getBaseUrl=function(e,i){var r=i.isDataUrl?"":t.dirname(i.url);return i.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}()),mi=function(t,e){return(mi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};!function(t){function e(e){void 0===e&&(e=1);var i=t.call(this,v.z,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return i.alpha=e,i}(function(t,e){function i(){this.constructor=t}mi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0})}(v.k);var gi=function(t,e){return(gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function vi(t,e){function i(){this.constructor=t}gi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var yi,_i,bi,xi,Ti,wi,Ei,Si,Ai,Ri,Pi,Ii,Oi,Ci,Mi,Di,Ni,Fi,Li,Bi={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ki=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(yi||(yi={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(_i||(_i={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(bi||(bi={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(xi||(xi={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Ti||(Ti={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(wi||(wi={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Ei||(Ei={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Si||(Si={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Ai||(Ai={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Ri||(Ri={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Pi||(Pi={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Ii||(Ii={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Oi||(Oi={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Ci||(Ci={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Mi||(Mi={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Di||(Di={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(Ni||(Ni={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Fi||(Fi={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Li||(Li={}));var Ui=function(t){function e(e,i,r,n,o){void 0===i&&(i=8),void 0===r&&(r=4),void 0===n&&(n=kt.b.FILTER_RESOLUTION),void 0===o&&(o=5);var s=this,a=function(t,e){var i,r=Math.ceil(t/2),n="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=i.replace("%index%",s.toString());o+=a=a.replace("%sampleIndex%",s-(r-1)+".0"),o+="\n"}return n=(n=n.replace("%blur%",o)).replace("%size%",t.toString())}(o,e),h=function(t){for(var e,i=Bi[t],r=i.length,n=ki,o="",s=0;s<t;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());e=s,s>=r&&(e=t-s-1),o+=a=a.replace("%value%",i[e].toString()),o+="\n"}return n=(n=n.replace("%blur%",o)).replace("%size%",t.toString())}
/*!
 * @pixi/constants - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */(o);return(s=t.call(this,a,h)||this).horizontal=e,s.resolution=n,s._quality=0,s.quality=r,s.blur=i,s}return vi(e,t),e.prototype.apply=function(t,e,i,r){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{var n=t.getFilterTexture(),o=t.renderer,s=e,a=n;this.state.blend=!1,t.applyFilter(this,s,a,Ci.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(s,Ci.BLIT),this.uniforms.uSampler=a;var l=a;a=s,s=l,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,i,r),t.returnFilterTexture(n)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(v.k),Gi=(function(t){function e(e,i,r,n){void 0===e&&(e=8),void 0===i&&(i=4),void 0===r&&(r=kt.b.FILTER_RESOLUTION),void 0===n&&(n=5);var o=t.call(this)||this;return o.blurXFilter=new Ui(!0,e,i,r,n),o.blurYFilter=new Ui(!1,e,i,r,n),o.resolution=r,o.quality=i,o.blur=e,o.repeatEdgePixels=!1,o}vi(e,t),e.prototype.apply=function(t,e,i,r){var n=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(n&&o){var s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,Ci.CLEAR),this.blurYFilter.apply(t,s,i,r),t.returnFilterTexture(s)}else o?this.blurYFilter.apply(t,e,i,r):this.blurXFilter.apply(t,e,i,r)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0})}(v.k),function(t,e){return(Gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)});var Xi=function(t){function e(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,v.y,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",i)||this).alpha=1,e}return function(t,e){function i(){this.constructor=t}Gi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.tint=function(t,e){var i=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=1/3,o=(0,Math.sqrt)(n),s=[i+(1-i)*n,n*(1-i)-o*r,n*(1-i)+o*r,0,0,n*(1-i)+o*r,i+n*(1-i),n*(1-i)-o*r,0,0,n*(1-i)-o*r,n*(1-i)+o*r,i+n*(1-i),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,r=-.5*(i-1),n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,r,n){var o=((i=i||16770432)>>16&255)/255,s=(i>>8&255)/255,a=(255&i)/255,h=((r=r||3375104)>>16&255)/255,l=(r>>8&255)/255,u=(255&r)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,h,l,u,e=e||.15,0,o-h,s-l,a-u,0,0];this._loadMatrix(c,n)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(v.k);Xi.prototype.grayscale=Xi.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var ji=function(t,e){return(ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};!function(t){function e(e,i){var r=this,n=new s.d;return e.renderable=!1,(r=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,r.maskMatrix=n,null==i&&(i=20),r.scale=new s.g(i,i),r}(function(t,e){function i(){this.constructor=t}ji(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(e,t),e.prototype.apply=function(t,e,i,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),s=Math.sqrt(n.c*n.c+n.d*n.d);0!==o&&0!==s&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/s,this.uniforms.rotation[3]=n.d/s),t.applyFilter(this,e,i,r)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0})}(v.k);var Hi=function(t,e){return(Hi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};!function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}(function(t,e){function i(){this.constructor=t}Hi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(e,t)}(v.k);var Vi=function(t,e){return(Vi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var zi,Wi,Yi,qi,Ki,$i,Zi,Qi,Ji,tr,er,ir,rr,nr,or,sr,ar,hr,lr;!function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random());var r=t.call(this,v.y,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=e,r.seed=i,r}(function(t,e){function i(){this.constructor=t}Vi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0})}(v.k);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(zi||(zi={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Wi||(Wi={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Yi||(Yi={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(qi||(qi={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Ki||(Ki={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}($i||($i={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Zi||(Zi={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Qi||(Qi={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Ji||(Ji={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(tr||(tr={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(er||(er={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(ir||(ir={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(rr||(rr={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(nr||(nr={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(or||(or={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(sr||(sr={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(ar||(ar={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(hr||(hr={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(lr||(lr={}));var ur=new s.d;n.c.prototype._cacheAsBitmap=!1,n.c.prototype._cacheData=null,n.c.prototype._cacheAsBitmapResolution=null,n.c.prototype._cacheAsBitmapMultisample=hr.NONE;var cr=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(n.c.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new cr),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),n.c.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},n.c.prototype._initCachedDisplayObject=function(t){var e;if(!this._cacheData||!this._cacheData.sprite){var i=this.alpha;this.alpha=1,t.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var o=this.filters[0].padding;n.pad(o)}n.ceil(kt.b.RESOLUTION);var s=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),h=t.renderTexture.destinationFrame.clone(),l=t.projection.transform,u=v.p.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:null!==(e=this.cacheAsBitmapMultisample)&&void 0!==e?e:t.multisample}),c="cacheAsBitmap_"+Object(r.D)();this._cacheData.textureCacheId=c,v.c.addToCache(u.baseTexture,c),v.t.addToCache(u,c);var d=this.transform.localTransform.copyTo(ur).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:u,clear:!0,transform:d,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=l,t.renderTexture.bind(s,a,h),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var p=new _e(u);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-n.x/n.width,p.anchor.y=-n.y/n.height,p.alpha=i,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)}},n.c.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},n.c.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var n=t.context,o=t._projTransform;e.ceil(kt.b.RESOLUTION);var s=v.p.create({width:e.width,height:e.height}),a="cacheAsBitmap_"+Object(r.D)();this._cacheData.textureCacheId=a,v.c.addToCache(s.baseTexture,a),v.t.addToCache(s,a);var h=ur;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=e.x,h.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:s,clear:!0,transform:h,skipUpdateTransform:!1}),t.context=n,t._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var l=new _e(s);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-e.x/e.width,l.anchor.y=-e.y/e.height,l.alpha=i,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},n.c.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},n.c.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},n.c.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,v.c.removeFromCache(this._cacheData.textureCacheId),v.t.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},n.c.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},
/*!
 * @pixi/mixin-get-child-by-name - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
n.c.prototype.name=null,n.b.prototype.getChildByName=function(t,e){for(var i=0,r=this.children.length;i<r;i++)if(this.children[i].name===t)return this.children[i];if(e)for(i=0,r=this.children.length;i<r;i++){if(this.children[i].getChildByName){var n=this.children[i].getChildByName(t,!0);if(n)return n}}return null},
/*!
 * @pixi/mixin-get-global-position - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
n.c.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new s.g),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};i(13),i(12);var dr=function(t,e){return(dr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};!function(t){function e(e,i){void 0===i&&(i=!0);var r=t.call(this,e[0]instanceof v.t?e[0]:e[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=i,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}(function(t,e){function i(){this.constructor=t}dr(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(a.a.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(a.a.shared.add(this.update,this,a.c.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],r=0;r<t.length;++r)i.push(v.t.from(t[r]));return new e(i)},e.fromImages=function(t){for(var i=[],r=0;r<t.length;++r)i.push(v.t.from(t[r]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof v.t)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(a.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(a.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})}(_e);
/*!
 * pixi.js - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */v.q.registerPlugin("accessibility",o),v.q.registerPlugin("extract",x),v.q.registerPlugin("interaction",m),v.q.registerPlugin("particle",Bt),v.q.registerPlugin("prepare",He),v.q.registerPlugin("batch",v.f),v.q.registerPlugin("tilingSprite",Qe),B.registerPlugin(fi),B.registerPlugin($),B.registerPlugin(ft),B.registerPlugin(Ot),B.registerPlugin(ze),y.registerPlugin(a.b),y.registerPlugin(k);var pr,fr=i(10),mr=i(15),gr=function(){function t(){}return t.offsetPolygon=function(e,i){var r=[],n=e.length;i=t.isPolygonClockwise(e)?i:-1*i;for(var o=0;o<n;o+=2){var s=o-2;s<0&&(s+=n);var a=(o+2)%n,h=e[o]-e[s],l=e[o+1]-e[s+1],u=Math.sqrt(h*h+l*l);h/=u,l/=u;var c=-(l*=i),d=h*=i,p=[e[s]+c,e[s+1]+d],f=[e[o]+c,e[o+1]+d],m=e[a]-e[o],g=e[a+1]-e[o+1];m/=u=Math.sqrt(m*m+g*g),g/=u;var v=-(g*=i),y=m*=i,_=[e[o]+v,e[o+1]+y],b=[e[a]+v,e[a+1]+y],x=t.findIntersection(p[0],p[1],f[0],f[1],_[0],_[1],b[0],b[1]);x&&r.push.apply(r,x)}return r},t.findIntersection=function(t,e,i,r,n,o,s,a){var h=(a-o)*(i-t)-(s-n)*(r-e),l=(s-n)*(e-o)-(a-o)*(t-n);if(0===h)return 0===l&&0===(i-t)*(e-o)-(r-e)*(t-n)?[(t+i)/2,(e+r)/2]:null;var u=l/h;return[t+u*(i-t),e+u*(r-e)]},t.isPolygonClockwise=function(t){for(var e=0,i=0,r=t.length-2;i<t.length;r=i,i+=2)e+=(t[i]-t[r])*(t[i+1]+t[r+1]);return e>0},t}(),vr=function(){function t(t){this._svgMatrix=null,this._tempMatrix=new s.d,this.renderer=t}return t.prototype._calcCanvasStyle=function(t,e){var i;return t.texture&&t.texture.baseTexture!==v.t.WHITE.baseTexture?t.texture.valid?(i=fr.b.getTintedPattern(t.texture,e),this.setPatternTransform(i,t.matrix||s.d.IDENTITY)):i="#808080":i="#"+("00000"+(0|e).toString(16)).slice(-6),i},t.prototype.render=function(t){var e=this.renderer,i=e.context,r=t.worldAlpha,n=t.transform.worldTransform;e.setContextTransform(n),e.setBlendMode(t.blendMode);for(var o,a,h=t.geometry.graphicsData,l=(t.tint>>16&255)/255,u=(t.tint>>8&255)/255,c=(255&t.tint)/255,d=0;d<h.length;d++){var p=h[d],f=p.shape,m=p.fillStyle,g=p.lineStyle,v=0|p.fillStyle.color,y=0|p.lineStyle.color;if(p.matrix&&e.setContextTransform(n.copyTo(this._tempMatrix).append(p.matrix)),m.visible){var _=((v>>16&255)/255*l*255<<16)+((v>>8&255)/255*u*255<<8)+(255&v)/255*c*255;o=this._calcCanvasStyle(m,_)}if(g.visible){var b=((y>>16&255)/255*l*255<<16)+((y>>8&255)/255*u*255<<8)+(255&y)/255*c*255;a=this._calcCanvasStyle(g,b)}if(i.lineWidth=g.width,i.lineCap=g.cap,i.lineJoin=g.join,i.miterLimit=g.miterLimit,p.type===s.l.POLY){i.beginPath();var x=(O=f).points,T=p.holes,w=void 0,E=void 0,S=void 0,A=void 0,R=void 0;i.moveTo(x[0],x[1]);for(var P=2;P<x.length;P+=2)i.lineTo(x[P],x[P+1]);if(O.closeStroke&&i.closePath(),T.length>0){R=[],w=0,S=x[0],A=x[1];for(P=2;P+2<x.length;P+=2)w+=(x[P]-S)*(x[P+3]-A)-(x[P+2]-S)*(x[P+1]-A);for(var I=0;I<T.length;I++)if(x=T[I].shape.points){E=0,S=x[0],A=x[1];for(P=2;P+2<x.length;P+=2)E+=(x[P]-S)*(x[P+3]-A)-(x[P+2]-S)*(x[P+1]-A);if(E*w<0){i.moveTo(x[0],x[1]);for(P=2;P<x.length;P+=2)i.lineTo(x[P],x[P+1])}else{i.moveTo(x[x.length-2],x[x.length-1]);for(P=x.length-4;P>=0;P-=2)i.lineTo(x[P],x[P+1])}T[I].shape.closeStroke&&i.closePath(),R[I]=E*w<0}}m.visible&&(i.globalAlpha=m.alpha*r,i.fillStyle=o,i.fill()),g.visible&&this.paintPolygonStroke(O,g,a,T,R,r,i)}else if(p.type===s.l.RECT){var O=f;if(m.visible&&(i.globalAlpha=m.alpha*r,i.fillStyle=o,i.fillRect(O.x,O.y,O.width,O.height)),g.visible){var C=g.width*(.5-(1-g.alignment)),M=O.width+2*C,D=O.height+2*C;i.globalAlpha=g.alpha*r,i.strokeStyle=a,i.strokeRect(O.x-C,O.y-C,M,D)}}else if(p.type===s.l.CIRC){O=f;if(i.beginPath(),i.arc(O.x,O.y,O.radius,0,2*Math.PI),i.closePath(),m.visible&&(i.globalAlpha=m.alpha*r,i.fillStyle=o,i.fill()),g.visible){if(.5!==g.alignment){C=g.width*(.5-(1-g.alignment));i.beginPath(),i.arc(O.x,O.y,O.radius+C,0,2*Math.PI),i.closePath()}i.globalAlpha=g.alpha*r,i.strokeStyle=a,i.stroke()}}else if(p.type===s.l.ELIP){O=f;if((V=1===g.alignment)||this.paintEllipse(O,m,g,o,r,i),g.visible){if(.5!==g.alignment){C=g.width*(.5-(1-g.alignment));var N=2*(O.width+C),F=2*(O.height+C),L=O.x-N/2,B=O.y-F/2,k=N/2*.5522848,U=F/2*.5522848,G=L+N,X=B+F,j=L+N/2,H=B+F/2;i.beginPath(),i.moveTo(L,H),i.bezierCurveTo(L,H-U,j-k,B,j,B),i.bezierCurveTo(j+k,B,G,H-U,G,H),i.bezierCurveTo(G,H+U,j+k,X,j,X),i.bezierCurveTo(j-k,X,L,H+U,L,H),i.closePath()}i.globalAlpha=g.alpha*r,i.strokeStyle=a,i.stroke()}V&&this.paintEllipse(O,m,g,o,r,i)}else if(p.type===s.l.RREC){var V;O=f;if((V=1===g.alignment)||this.paintRoundedRectangle(O,m,g,o,r,i),g.visible){if(.5!==g.alignment){M=O.width,D=O.height,C=g.width*(.5-(1-g.alignment));var z=O.x-C,W=O.y-C,Y=O.width+2*C,q=O.height+2*C,K=C*(g.alignment>=1?Math.min(Y/M,q/D):Math.min(M/Y,D/q)),$=O.radius+K,Z=Math.min(Y,q)/2;$=$>Z?Z:$,i.beginPath(),i.moveTo(z,W+$),i.lineTo(z,W+q-$),i.quadraticCurveTo(z,W+q,z+$,W+q),i.lineTo(z+Y-$,W+q),i.quadraticCurveTo(z+Y,W+q,z+Y,W+q-$),i.lineTo(z+Y,W+$),i.quadraticCurveTo(z+Y,W,z+Y-$,W),i.lineTo(z+$,W),i.quadraticCurveTo(z,W,z,W+$),i.closePath()}i.globalAlpha=g.alpha*r,i.strokeStyle=a,i.stroke()}V&&this.paintRoundedRectangle(O,m,g,o,r,i)}}},t.prototype.paintPolygonStroke=function(t,e,i,r,n,o,s){if(.5!==e.alignment){var a=e.width*(.5-(1-e.alignment)),h=gr.offsetPolygon(t.points,a),l=void 0;s.beginPath(),s.moveTo(h[0],h[1]);for(var u=2;u<h.length;u+=2)s.lineTo(h[u],h[u+1]);t.closeStroke&&s.closePath();for(var c=0;c<r.length;c++){if(l=r[c].shape.points,h=gr.offsetPolygon(l,a),n[c]){s.moveTo(h[0],h[1]);for(u=2;u<h.length;u+=2)s.lineTo(h[u],h[u+1])}else{s.moveTo(h[h.length-2],h[h.length-1]);for(u=h.length-4;u>=0;u-=2)s.lineTo(h[u],h[u+1])}r[c].shape.closeStroke&&s.closePath()}}s.globalAlpha=e.alpha*o,s.strokeStyle=i,s.stroke()},t.prototype.paintEllipse=function(t,e,i,r,n,o){var s=2*t.width,a=2*t.height,h=t.x-s/2,l=t.y-a/2,u=s/2*.5522848,c=a/2*.5522848,d=h+s,p=l+a,f=h+s/2,m=l+a/2;0===i.alignment&&o.save(),o.beginPath(),o.moveTo(h,m),o.bezierCurveTo(h,m-c,f-u,l,f,l),o.bezierCurveTo(f+u,l,d,m-c,d,m),o.bezierCurveTo(d,m+c,f+u,p,f,p),o.bezierCurveTo(f-u,p,h,m+c,h,m),o.closePath(),0===i.alignment&&o.clip(),e.visible&&(o.globalAlpha=e.alpha*n,o.fillStyle=r,o.fill()),0===i.alignment&&o.restore()},t.prototype.paintRoundedRectangle=function(t,e,i,r,n,o){var s=t.x,a=t.y,h=t.width,l=t.height,u=t.radius,c=Math.min(h,l)/2;u=u>c?c:u,0===i.alignment&&o.save(),o.beginPath(),o.moveTo(s,a+u),o.lineTo(s,a+l-u),o.quadraticCurveTo(s,a+l,s+u,a+l),o.lineTo(s+h-u,a+l),o.quadraticCurveTo(s+h,a+l,s+h,a+l-u),o.lineTo(s+h,a+u),o.quadraticCurveTo(s+h,a,s+h-u,a),o.lineTo(s+u,a),o.quadraticCurveTo(s,a,s,a+u),o.closePath(),0===i.alignment&&o.clip(),e.visible&&(o.globalAlpha=e.alpha*n,o.fillStyle=r,o.fill()),0===i.alignment&&o.restore()},t.prototype.setPatternTransform=function(t,e){if(!1!==this._svgMatrix){if(!this._svgMatrix){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i&&i.createSVGMatrix&&(this._svgMatrix=i.createSVGMatrix()),!this._svgMatrix||!t.setTransform)return void(this._svgMatrix=!1)}this._svgMatrix.a=e.a,this._svgMatrix.b=e.b,this._svgMatrix.c=e.c,this._svgMatrix.d=e.d,this._svgMatrix.e=e.tx,this._svgMatrix.f=e.ty,t.setTransform(this._svgMatrix.inverse())}},t.prototype.destroy=function(){this.renderer=null,this._svgMatrix=null,this._tempMatrix=null},t}(),yr=new s.d;fe.prototype.generateCanvasTexture=function(t,e){void 0===e&&(e=1);var i=this.getLocalBounds(),r=v.p.create({width:i.width,height:i.height,scaleMode:t,resolution:e});pr||(pr=new fr.a),this.transform.updateLocalTransform(),this.transform.localTransform.copyTo(yr),yr.invert(),yr.tx-=i.x,yr.ty-=i.y,pr.render(this,{renderTexture:r,clear:!0,transform:yr});var n=v.t.from(r.baseTexture._canvasRenderTarget.canvas,{scaleMode:t});return n.baseTexture.setResolution(e),n},fe.prototype.cachedGraphicsData=[],fe.prototype._renderCanvas=function(t){!0!==this.isMask&&(this.finishPoly(),t.plugins.graphics.render(this))};
/*!
 * @pixi/canvas-sprite - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/canvas-sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var br=new s.d,xr=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,r=i.context;if(e.valid){var n=e._frame.width,o=e._frame.height,a=t.transform.worldTransform,h=0,l=0,u=e.baseTexture.getDrawableSource();if(!(e.orig.width<=0||e.orig.height<=0)&&e.valid&&u){i.setBlendMode(t.blendMode,!0),i.context.globalAlpha=t.worldAlpha;var c=e.baseTexture.scaleMode===j.p.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==c&&(r[i.smoothProperty]=c),e.trim?(h=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,l=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(h=(.5-t.anchor.x)*e.orig.width,l=(.5-t.anchor.y)*e.orig.height),e.rotate&&(a.copyTo(br),a=br,s.n.matrixAppendRotationInv(a,e.rotate,h,l),h=0,l=0),h-=n/2,l-=o/2,i.setContextTransform(a,t.roundPixels,1),t.roundPixels&&(h|=0,l|=0);var d=e.baseTexture.resolution,p=i._outerBlend;p&&(r.save(),r.beginPath(),r.rect(h*i.resolution,l*i.resolution,n*i.resolution,o*i.resolution),r.clip()),16777215!==t.tint?(t._cachedTint===t.tint&&t._tintedCanvas.tintId===t._texture._updateID||(t._cachedTint=t.tint,t._tintedCanvas=fr.b.getTintedCanvas(t,t.tint)),r.drawImage(t._tintedCanvas,0,0,Math.floor(n*d),Math.floor(o*d),Math.floor(h*i.resolution),Math.floor(l*i.resolution),Math.floor(n*i.resolution),Math.floor(o*i.resolution))):r.drawImage(u,e._frame.x*d,e._frame.y*d,Math.floor(n*d),Math.floor(o*d),Math.floor(h*i.resolution),Math.floor(l*i.resolution),Math.floor(n*i.resolution),Math.floor(o*i.resolution)),p&&r.restore(),i.setBlendMode(j.b.NORMAL)}}},t.prototype.destroy=function(){this.renderer=null},t}();_e.prototype._tintedCanvas=null,_e.prototype._renderCanvas=function(t){t.plugins.sprite.render(this)};
/*!
 * @pixi/canvas-extract - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/canvas-extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Tr=new s.j,wr=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,i){var r=new Image;return r.src=this.base64(t,e,i),r},t.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},t.prototype.canvas=function(t){var e,i,n,o,s=this.renderer;t&&(o=t instanceof v.p?t:s.generateTexture(t)),o?(e=o.baseTexture._canvasRenderTarget.context,i=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(e=s.rootContext,i=s.resolution,(n=Tr).width=this.renderer.width,n.height=this.renderer.height);var a=Math.floor(n.width*i+1e-4),h=Math.floor(n.height*i+1e-4),l=new r.b(a,h,1),u=e.getImageData(n.x*i,n.y*i,a,h);return l.context.putImageData(u,0,0),l.canvas},t.prototype.pixels=function(t){var e,i,r,n,o=this.renderer;t&&(n=t instanceof v.p?t:o.generateTexture(t)),n?(e=n.baseTexture._canvasRenderTarget.context,i=n.baseTexture._canvasRenderTarget.resolution,r=n.frame):(e=o.rootContext,i=o.resolution,(r=Tr).width=o.width,r.height=o.height);var s=r.x*i,a=r.y*i,h=r.width*i,l=r.height*i;return e.getImageData(s,a,h,l).data},t.prototype.destroy=function(){this.renderer=null},t}(),Er=function(t,e){return(Er=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Sr(t,e){var i=t;if(e instanceof v.c){var r=e.source,n=0===r.width?i.canvas.width:Math.min(i.canvas.width,r.width),o=0===r.height?i.canvas.height:Math.min(i.canvas.height,r.height);return i.ctx.drawImage(r,0,0,n,o,0,0,i.canvas.width,i.canvas.height),!0}return!1}var Ar=function(t){function e(e){var i=t.call(this,e)||this;return i.uploadHookHelper=i,i.canvas=document.createElement("canvas"),i.canvas.width=16,i.canvas.height=16,i.ctx=i.canvas.getContext("2d"),i.registerUploadHook(Sr),i}return function(t,e){function i(){this.constructor=t}Er(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(Ue),Rr=new s.d,Pr=new s.d,Ir=[new s.g,new s.g,new s.g,new s.g];
/*!
 * @pixi/canvas-sprite-tiling - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/canvas-sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */function Or(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}
/*!
 * GSAP 3.8.0
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/Ke.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.valid){var i=t.context,n=this.worldTransform,o=e.baseTexture,s=o.getDrawableSource(),a=o.resolution;if(this._textureID!==this._texture._updateID||this._cachedTint!==this.tint){this._textureID=this._texture._updateID;var h=new r.b(e._frame.width,e._frame.height,a);16777215!==this.tint?(this._tintedCanvas=fr.b.getTintedCanvas(this,this.tint),h.context.drawImage(this._tintedCanvas,0,0)):h.context.drawImage(s,-e._frame.x*a,-e._frame.y*a),this._cachedTint=this.tint,this._canvasPattern=h.context.createPattern(h.canvas,"repeat")}i.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),this.tileTransform.updateLocalTransform();var l=this.tileTransform.localTransform,u=this._width,c=this._height;Rr.identity(),Pr.copyFrom(l),this.uvRespectAnchor||Pr.translate(-this.anchor.x*u,-this.anchor.y*c),Pr.scale(this.tileScale.x/a,this.tileScale.y/a),Rr.prepend(Pr),Rr.prepend(n),t.setContextTransform(Rr),i.fillStyle=this._canvasPattern;var d=this.anchor.x*-u,p=this.anchor.y*-c;Ir[0].set(d,p),Ir[1].set(d+u,p),Ir[2].set(d+u,p+c),Ir[3].set(d,p+c);for(var f=0;f<4;f++)Pr.applyInverse(Ir[f],Ir[f]);i.beginPath(),i.moveTo(Ir[0].x,Ir[0].y);for(f=1;f<4;f++)i.lineTo(Ir[f].x,Ir[f].y);i.closePath(),i.fill()}},
/*!
 * @pixi/canvas-particle-container - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/canvas-particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Ft.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,r=!0,n=0,o=0,s=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var l=this.children[h];if(l.visible&&l._texture.valid){var u=l._texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)==0)r&&(t.setContextTransform(i,!1,1),r=!1),n=l.anchor.x*(-u.width*l.scale.x)+l.position.x+.5,o=l.anchor.y*(-u.height*l.scale.y)+l.position.y+.5,s=u.width*l.scale.x,a=u.height*l.scale.y;else{r||(r=!0),l.displayObjectUpdateTransform();var c=l.worldTransform;t.setContextTransform(c,this.roundPixels,1),n=l.anchor.x*-u.width+.5,o=l.anchor.y*-u.height+.5,s=u.width,a=u.height}var d=l._texture.baseTexture.resolution;e.drawImage(l._texture.baseTexture.getDrawableSource(),u.x*d,u.y*d,u.width*d,u.height*d,n*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},
/*!
 * @pixi/canvas-display - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/canvas-display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
n.b.prototype._renderCanvas=function(t){},n.b.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.c.prototype.renderCanvas=function(t){},
/*!
 * @pixi/canvas-text - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * @pixi/canvas-text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Ie.prototype._renderCanvas=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),_e.prototype._renderCanvas.call(this,t)},
/*!
 * pixi.js-legacy - v6.3.2
 * Compiled Wed, 04 May 2022 17:49:13 UTC
 *
 * pixi.js-legacy is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
fr.a.registerPlugin("accessibility",o),fr.a.registerPlugin("extract",wr),fr.a.registerPlugin("graphics",vr),fr.a.registerPlugin("interaction",m),fr.a.registerPlugin("mesh",mr.a),fr.a.registerPlugin("prepare",Ar),fr.a.registerPlugin("sprite",xr);var Mr,Dr,Nr,Fr,Lr,Br,kr,Ur,Gr,Xr,jr,Hr,Vr,zr,Wr,Yr,qr,Kr,$r,Zr,Qr,Jr,tn,en,rn,nn,on,sn,an={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},hn={duration:.5,overwrite:!1,delay:0},ln=1e8,un=2*Math.PI,cn=un/4,dn=0,pn=Math.sqrt,fn=Math.cos,mn=Math.sin,gn=function(t){return"string"==typeof t},vn=function(t){return"function"==typeof t},yn=function(t){return"number"==typeof t},_n=function(t){return void 0===t},bn=function(t){return"object"==typeof t},xn=function(t){return!1!==t},Tn=function(){return"undefined"!=typeof window},wn=function(t){return vn(t)||gn(t)},En="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Sn=Array.isArray,An=/(?:-?\.?\d|\.)+/gi,Rn=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Pn=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,In=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,On=/[+-]=-?[.\d]+/,Cn=/[^,'"\[\]\s]+/gi,Mn=/[\d.+\-=]+(?:e[-+]\d*)*/i,Dn={},Nn={},Fn=function(t){return(Nn=ho(t,Dn))&&Ys},Ln=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Bn=function(t,e){return!e&&console.warn(t)},kn=function(t,e){return t&&(Dn[t]=e)&&Nn&&(Nn[t]=e)||Dn},Un=function(){return 0},Gn={},Xn=[],jn={},Hn={},Vn={},zn=30,Wn=[],Yn="",qn=function(t){var e,i,r=t[0];if(bn(r)||vn(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(i=Wn.length;i--&&!Wn[i].targetTest(r););e=Wn[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new ys(t[i],e)))||t.splice(i,1);return t},Kn=function(t){return t._gsap||qn(ko(t))[0]._gsap},$n=function(t,e,i){return(i=t[e])&&vn(i)?t[e]():_n(i)&&t.getAttribute&&t.getAttribute(e)||i},Zn=function(t,e){return(t=t.split(",")).forEach(e)||t},Qn=function(t){return Math.round(1e5*t)/1e5||0},Jn=function(t){return Math.round(1e7*t)/1e7||0},to=function(t,e){for(var i=e.length,r=0;t.indexOf(e[r])<0&&++r<i;);return r<i},eo=function(){var t,e,i=Xn.length,r=Xn.slice(0);for(jn={},Xn.length=0,t=0;t<i;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},io=function(t,e,i,r){Xn.length&&eo(),t.render(e,i,r),Xn.length&&eo()},ro=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Cn).length<2?e:gn(t)?t.trim():t},no=function(t){return t},so=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},ao=function(t,e){for(var i in e)i in t||"duration"===i||"ease"===i||(t[i]=e[i])},ho=function(t,e){for(var i in e)t[i]=e[i];return t},lo=function t(e,i){for(var r in i)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=bn(i[r])?t(e[r]||(e[r]={}),i[r]):i[r]);return e},uo=function(t,e){var i,r={};for(i in t)i in e||(r[i]=t[i]);return r},co=function(t){var e=t.parent||Dr,i=t.keyframes?ao:so;if(xn(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},po=function(t,e,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var n=e._prev,o=e._next;n?n._next=o:t[i]===e&&(t[i]=o),o?o._prev=n:t[r]===e&&(t[r]=n),e._next=e._prev=e.parent=null},fo=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},mo=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},go=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},vo=function(t){return t._repeat?yo(t._tTime,t=t.duration()+t._rDelay)*t:0},yo=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},_o=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},bo=function(t){return t._end=Jn(t._start+(t._tDur/Math.abs(t._ts||t._rts||1e-8)||0))},xo=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Jn(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),bo(t),i._dirty||mo(i,t)),t},To=function(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=_o(t.rawTime(),e),(!e._dur||Do(0,e.totalDuration(),i)-e._tTime>1e-8)&&e.render(i,!0)),mo(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},wo=function(t,e,i,r){return e.parent&&fo(e),e._start=Jn((yn(i)?i:i||t!==Dr?Oo(t,i,e):t._time)+e._delay),e._end=Jn(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,i,r,n){void 0===i&&(i="_first"),void 0===r&&(r="_last");var o,s=t[r];if(n)for(o=e[n];s&&s[n]>o;)s=s._prev;s?(e._next=s._next,s._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[r]=e,e._prev=s,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),Ao(e)||(t._recent=e),r||To(t,e),t},Eo=function(t,e){return(Dn.ScrollTrigger||Ln("scrollTrigger",e))&&Dn.ScrollTrigger.create(e,t)},So=function(t,e,i,r){return Ss(t,e),t._initted?!i&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&kr!==os.frame?(Xn.push(t),t._lazy=[e,r],1):void 0:1},Ao=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Ro=function(t,e,i,r){var n=t._repeat,o=Jn(e)||0,s=t._tTime/t._tDur;return s&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=n?n<0?1e10:Jn(o*(n+1)+t._rDelay*n):o,s&&!r?xo(t,t._tTime=t._tDur*s):t.parent&&bo(t),i||mo(t.parent,t),t},Po=function(t){return t instanceof bs?mo(t):Ro(t,t._dur)},Io={_start:0,endTime:Un,totalDuration:Un},Oo=function t(e,i,r){var n,o,s,a=e.labels,h=e._recent||Io,l=e.duration()>=ln?h.endTime(!1):e._dur;return gn(i)&&(isNaN(i)||i in a)?(o=i.charAt(0),s="%"===i.substr(-1),n=i.indexOf("="),"<"===o||">"===o?(n>=0&&(i=i.replace(/=/,"")),("<"===o?h._start:h.endTime(h._repeat>=0))+(parseFloat(i.substr(1))||0)*(s?(n<0?h:r).totalDuration()/100:1)):n<0?(i in a||(a[i]=l),a[i]):(o=parseFloat(i.charAt(n-1)+i.substr(n+1)),s&&r&&(o=o/100*(Sn(r)?r[0]:r).totalDuration()),n>1?t(e,i.substr(0,n-1),r)+o:l+o)):null==i?l:+i},Co=function(t,e,i){var r,n,o=yn(e[1]),s=(o?2:1)+(t<2?0:1),a=e[s];if(o&&(a.duration=e[1]),a.parent=i,t){for(r=a,n=i;n&&!("immediateRender"in r);)r=n.vars.defaults||{},n=xn(n.vars.inherit)&&n.parent;a.immediateRender=xn(r.immediateRender),t<2?a.runBackwards=1:a.startAt=e[s-1]}return new Is(e[0],a,e[s+1])},Mo=function(t,e){return t||0===t?e(t):e},Do=function(t,e,i){return i<t?t:i>e?e:i},No=function(t){if("string"!=typeof t)return"";var e=Mn.exec(t);return e?t.substr(e.index+e[0].length):""},Fo=[].slice,Lo=function(t,e){return t&&bn(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&bn(t[0]))&&!t.nodeType&&t!==Nr},Bo=function(t,e,i){return void 0===i&&(i=[]),t.forEach((function(t){var r;return gn(t)&&!e||Lo(t,1)?(r=i).push.apply(r,ko(t)):i.push(t)}))||i},ko=function(t,e,i){return!gn(t)||i||!Fr&&ss()?Sn(t)?Bo(t,i):Lo(t)?Fo.call(t,0):t?[t]:[]:Fo.call((e||Lr).querySelectorAll(t),0)},Uo=function(t){return t.sort((function(){return.5-Math.random()}))},Go=function(t){if(vn(t))return t;var e=bn(t)?t:{each:t},i=ps(e.ease),r=e.from||0,n=parseFloat(e.base)||0,o={},s=r>0&&r<1,a=isNaN(r)||s,h=e.axis,l=r,u=r;return gn(r)?l=u={center:.5,edges:.5,end:1}[r]||0:!s&&a&&(l=r[0],u=r[1]),function(t,s,c){var d,p,f,m,g,v,y,_,b,x=(c||e).length,T=o[x];if(!T){if(!(b="auto"===e.grid?0:(e.grid||[1,ln])[1])){for(y=-ln;y<(y=c[b++].getBoundingClientRect().left)&&b<x;);b--}for(T=o[x]=[],d=a?Math.min(b,x)*l-.5:r%b,p=a?x*u/b-.5:r/b|0,y=0,_=ln,v=0;v<x;v++)f=v%b-d,m=p-(v/b|0),T[v]=g=h?Math.abs("y"===h?m:f):pn(f*f+m*m),g>y&&(y=g),g<_&&(_=g);"random"===r&&Uo(T),T.max=y-_,T.min=_,T.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(b>x?x-1:h?"y"===h?x/b:b:Math.max(b,x/b))||0)*("edges"===r?-1:1),T.b=x<0?n-x:n,T.u=No(e.amount||e.each)||0,i=i&&x<0?cs(i):i}return x=(T[t]-T.min)/T.max||0,Jn(T.b+(i?i(x):x)*T.v)+T.u}},Xo=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var r=Math.round(parseFloat(i)/t)*t*e;return(r-r%1)/e+(yn(i)?0:No(i))}},jo=function(t,e){var i,r,n=Sn(t);return!n&&bn(t)&&(i=n=t.radius||ln,t.values?(t=ko(t.values),(r=!yn(t[0]))&&(i*=i)):t=Xo(t.increment)),Mo(e,n?vn(t)?function(e){return r=t(e),Math.abs(r-e)<=i?r:e}:function(e){for(var n,o,s=parseFloat(r?e.x:e),a=parseFloat(r?e.y:0),h=ln,l=0,u=t.length;u--;)(n=r?(n=t[u].x-s)*n+(o=t[u].y-a)*o:Math.abs(t[u]-s))<h&&(h=n,l=u);return l=!i||h<=i?t[l]:e,r||l===e||yn(e)?l:l+No(e)}:Xo(t))},Ho=function(t,e,i,r){return Mo(Sn(t)?!e:!0===i?!!(i=0):!r,(function(){return Sn(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*r)/r}))},Vo=function(t,e,i){return Mo(i,(function(i){return t[~~e(i)]}))},zo=function(t){for(var e,i,r,n,o=0,s="";~(e=t.indexOf("random(",o));)r=t.indexOf(")",e),n="["===t.charAt(e+7),i=t.substr(e+7,r-e-7).match(n?Cn:An),s+=t.substr(o,e-o)+Ho(n?i:+i[0],n?0:+i[1],+i[2]||1e-5),o=r+1;return s+t.substr(o,t.length-o)},Wo=function(t,e,i,r,n){var o=e-t,s=r-i;return Mo(n,(function(e){return i+((e-t)/o*s||0)}))},Yo=function(t,e,i){var r,n,o,s=t.labels,a=ln;for(r in s)(n=s[r]-e)<0==!!i&&n&&a>(n=Math.abs(n))&&(o=r,a=n);return o},qo=function(t,e,i){var r,n,o=t.vars,s=o[e];if(s)return r=o[e+"Params"],n=o.callbackScope||t,i&&Xn.length&&eo(),r?s.apply(n,r):s.call(n)},Ko=function(t){return fo(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&qo(t,"onInterrupt"),t},$o=function(t){var e=(t=!t.name&&t.default||t).name,i=vn(t),r=e&&!i&&t.init?function(){this._props=[]}:t,n={init:Un,render:ks,add:ws,kill:Gs,modifier:Us,rawVars:0},o={targetTest:0,get:0,getSetter:Ns,aliases:{},register:0};if(ss(),t!==r){if(Hn[e])return;so(r,so(uo(t,n),o)),ho(r.prototype,ho(n,uo(t,o))),Hn[r.prop=e]=r,t.targetTest&&(Wn.push(r),Gn[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}kn(e,r),t.register&&t.register(Ys,r,Hs)},Zo={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},Qo=function(t,e,i){return 255*(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)+.5|0},Jo=function(t,e,i){var r,n,o,s,a,h,l,u,c,d,p=t?yn(t)?[t>>16,t>>8&255,255&t]:0:Zo.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Zo[t])p=Zo[t];else if("#"===t.charAt(0)){if(t.length<6&&(r=t.charAt(1),n=t.charAt(2),o=t.charAt(3),t="#"+r+r+n+n+o+o+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(p=parseInt(t.substr(1,6),16))>>16,p>>8&255,255&p,parseInt(t.substr(7),16)/255];p=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]}else if("hsl"===t.substr(0,3))if(p=d=t.match(An),e){if(~t.indexOf("="))return p=t.match(Rn),i&&p.length<4&&(p[3]=1),p}else s=+p[0]%360/360,a=+p[1]/100,r=2*(h=+p[2]/100)-(n=h<=.5?h*(a+1):h+a-h*a),p.length>3&&(p[3]*=1),p[0]=Qo(s+1/3,r,n),p[1]=Qo(s,r,n),p[2]=Qo(s-1/3,r,n);else p=t.match(An)||Zo.transparent;p=p.map(Number)}return e&&!d&&(r=p[0]/255,n=p[1]/255,o=p[2]/255,h=((l=Math.max(r,n,o))+(u=Math.min(r,n,o)))/2,l===u?s=a=0:(c=l-u,a=h>.5?c/(2-l-u):c/(l+u),s=l===r?(n-o)/c+(n<o?6:0):l===n?(o-r)/c+2:(r-n)/c+4,s*=60),p[0]=~~(s+.5),p[1]=~~(100*a+.5),p[2]=~~(100*h+.5)),i&&p.length<4&&(p[3]=1),p},ts=function(t){var e=[],i=[],r=-1;return t.split(is).forEach((function(t){var n=t.match(Pn)||[];e.push.apply(e,n),i.push(r+=n.length+1)})),e.c=i,e},es=function(t,e,i){var r,n,o,s,a="",h=(t+a).match(is),l=e?"hsla(":"rgba(",u=0;if(!h)return t;if(h=h.map((function(t){return(t=Jo(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),i&&(o=ts(t),(r=i.c).join(a)!==o.c.join(a)))for(s=(n=t.replace(is,"1").split(Pn)).length-1;u<s;u++)a+=n[u]+(~r.indexOf(u)?h.shift()||l+"0,0,0,0)":(o.length?o:h.length?h:i).shift());if(!n)for(s=(n=t.split(is)).length-1;u<s;u++)a+=n[u]+h[u];return a+n[s]},is=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Zo)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),rs=/hsl[a]?\(/,ns=function(t){var e,i=t.join(" ");if(is.lastIndex=0,is.test(i))return e=rs.test(i),t[1]=es(t[1],e),t[0]=es(t[0],e,ts(t[1])),!0},os=(Yr=Date.now,qr=500,Kr=33,$r=Yr(),Zr=$r,Jr=Qr=1e3/240,en=function t(e){var i,r,n,o,s=Yr()-Zr,a=!0===e;if(s>qr&&($r+=s-Kr),((i=(n=(Zr+=s)-$r)-Jr)>0||a)&&(o=++Vr.frame,zr=n-1e3*Vr.time,Vr.time=n/=1e3,Jr+=i+(i>=Qr?4:Qr-i),r=1),a||(Xr=jr(t)),r)for(Wr=0;Wr<tn.length;Wr++)tn[Wr](n,zr,o,e)},Vr={time:0,frame:0,tick:function(){en(!0)},deltaRatio:function(t){return zr/(1e3/(t||60))},wake:function(){Br&&(!Fr&&Tn()&&(Nr=Fr=window,Lr=Nr.document||{},Dn.gsap=Ys,(Nr.gsapVersions||(Nr.gsapVersions=[])).push(Ys.version),Fn(Nn||Nr.GreenSockGlobals||!Nr.gsap&&Nr||{}),Hr=Nr.requestAnimationFrame),Xr&&Vr.sleep(),jr=Hr||function(t){return setTimeout(t,Jr-1e3*Vr.time+1|0)},Gr=1,en(2))},sleep:function(){(Hr?Nr.cancelAnimationFrame:clearTimeout)(Xr),Gr=0,jr=Un},lagSmoothing:function(t,e){qr=t||1/1e-8,Kr=Math.min(e,qr,0)},fps:function(t){Qr=1e3/(t||240),Jr=1e3*Vr.time+Qr},add:function(t){tn.indexOf(t)<0&&tn.push(t),ss()},remove:function(t){var e;~(e=tn.indexOf(t))&&tn.splice(e,1)&&Wr>=e&&Wr--},_listeners:tn=[]}),ss=function(){return!Gr&&os.wake()},as={},hs=/^[\d.\-M][\d.\-,\s]/,ls=/["']/g,us=function(t){for(var e,i,r,n={},o=t.substr(1,t.length-3).split(":"),s=o[0],a=1,h=o.length;a<h;a++)i=o[a],e=a!==h-1?i.lastIndexOf(","):i.length,r=i.substr(0,e),n[s]=isNaN(r)?r.replace(ls,"").trim():+r,s=i.substr(e+1).trim();return n},cs=function(t){return function(e){return 1-t(1-e)}},ds=function t(e,i){for(var r,n=e._first;n;)n instanceof bs?t(n,i):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===i||(n.timeline?t(n.timeline,i):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=i)),n=n._next},ps=function(t,e){return t&&(vn(t)?t:as[t]||function(t){var e,i,r,n,o=(t+"").split("("),s=as[o[0]];return s&&o.length>1&&s.config?s.config.apply(null,~t.indexOf("{")?[us(o[1])]:(e=t,i=e.indexOf("(")+1,r=e.indexOf(")"),n=e.indexOf("(",i),e.substring(i,~n&&n<r?e.indexOf(")",r+1):r)).split(",").map(ro)):as._CE&&hs.test(t)?as._CE("",t):s}(t))||e},fs=function(t,e,i,r){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var n,o={easeIn:e,easeOut:i,easeInOut:r};return Zn(t,(function(t){for(var e in as[t]=Dn[t]=o,as[n=t.toLowerCase()]=i,o)as[n+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=as[t+"."+e]=o[e]})),o},ms=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},gs=function t(e,i,r){var n=i>=1?i:1,o=(r||(e?.3:.45))/(i<1?i:1),s=o/un*(Math.asin(1/n)||0),a=function(t){return 1===t?1:n*Math.pow(2,-10*t)*mn((t-s)*o)+1},h="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:ms(a);return o=un/o,h.config=function(i,r){return t(e,i,r)},h},vs=function t(e,i){void 0===i&&(i=1.70158);var r=function(t){return t?--t*t*((i+1)*t+i)+1:0},n="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:ms(r);return n.config=function(i){return t(e,i)},n};Zn("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var i=e<5?e+1:e;fs(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},(function(t){return 1-Math.pow(1-t,i)}),(function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2}))})),as.Linear.easeNone=as.none=as.Linear.easeIn,fs("Elastic",gs("in"),gs("out"),gs()),rn=7.5625,on=1/(nn=2.75),fs("Bounce",(function(t){return 1-sn(1-t)}),sn=function(t){return t<on?rn*t*t:t<.7272727272727273?rn*Math.pow(t-1.5/nn,2)+.75:t<.9090909090909092?rn*(t-=2.25/nn)*t+.9375:rn*Math.pow(t-2.625/nn,2)+.984375}),fs("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),fs("Circ",(function(t){return-(pn(1-t*t)-1)})),fs("Sine",(function(t){return 1===t?1:1-fn(t*cn)})),fs("Back",vs("in"),vs("out"),vs()),as.SteppedEase=as.steps=Dn.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,r=t+(e?0:1),n=e?1:0;return function(t){return((r*Do(0,1-1e-8,t)|0)+n)*i}}},hn.ease=as["quad.out"],Zn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return Yn+=t+","+t+"Params,"}));var ys=function(t,e){this.id=dn++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:$n,this.set=e?e.getSetter:Ns},_s=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ro(this,+t.duration,1,1),this.data=t.data,Gr||os.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Ro(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(ss(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(xo(this,t),!i._dp||i.parent||To(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&wo(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&1e-8===Math.abs(this._zTime)||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),io(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+vo(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+vo(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?yo(this._tTime,i)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?_o(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,go(this.totalTime(Do(-this._delay,this._tDur,e),!0)),bo(this),this},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ss(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&1e-8!==Math.abs(this._zTime)&&(this._tTime-=1e-8)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&wo(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(xn(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_o(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(e._ts||1),e=e._dp;return i},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,Po(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,Po(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Oo(this,t),xn(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,xn(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-1e-8))},e.eventCallback=function(t,e,i){var r=this.vars;return arguments.length>1?(e?(r[t]=e,i&&(r[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise((function(i){var r=vn(t)?t:no,n=function(){var t=e.then;e.then=null,vn(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),i(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?n():e._prom=n}))},e.kill=function(){Ko(this)},t}();so(_s.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var bs=function(t){function e(e,i){var r;return void 0===e&&(e={}),(r=t.call(this,e)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=xn(e.sortChildren),Dr&&wo(e.parent||Dr,Or(r),i),e.reversed&&r.reverse(),e.paused&&r.paused(!0),e.scrollTrigger&&Eo(Or(r),e.scrollTrigger),r}Cr(e,t);var i=e.prototype;return i.to=function(t,e,i){return Co(0,arguments,this),this},i.from=function(t,e,i){return Co(1,arguments,this),this},i.fromTo=function(t,e,i,r){return Co(2,arguments,this),this},i.set=function(t,e,i){return e.duration=0,e.parent=this,co(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new Is(t,e,Oo(this,i),1),this},i.call=function(t,e,i){return wo(this,Is.delayedCall(0,t,e),i)},i.staggerTo=function(t,e,i,r,n,o,s){return i.duration=e,i.stagger=i.stagger||r,i.onComplete=o,i.onCompleteParams=s,i.parent=this,new Is(t,i,Oo(this,n)),this},i.staggerFrom=function(t,e,i,r,n,o,s){return i.runBackwards=1,co(i).immediateRender=xn(i.immediateRender),this.staggerTo(t,e,i,r,n,o,s)},i.staggerFromTo=function(t,e,i,r,n,o,s,a){return r.startAt=i,co(r).immediateRender=xn(r.immediateRender),this.staggerTo(t,e,r,n,o,s,a)},i.render=function(t,e,i){var r,n,o,s,a,h,l,u,c,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=t<=0?0:Jn(t),_=this._zTime<0!=t<0&&(this._initted||!v);if(this!==Dr&&y>g&&t>=0&&(y=g),y!==this._tTime||i||_){if(m!==this._time&&v&&(y+=this._time-m,t+=this._time-m),r=y,c=this._start,h=!(u=this._ts),_&&(v||(m=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(p=this._yoyo,a=v+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,i);if(r=Jn(y%a),y===g?(s=this._repeat,r=v):((s=~~(y/a))&&s===y/a&&(r=v,s--),r>v&&(r=v)),d=yo(this._tTime,a),!m&&this._tTime&&d!==s&&(d=s),p&&1&s&&(r=v-r,f=1),s!==d&&!this._lock){var b=p&&1&d,x=b===(p&&1&s);if(s<d&&(b=!b),m=b?0:v,this._lock=1,this.render(m||(f?0:Jn(s*a)),e,!v)._lock=0,this._tTime=y,!e&&this.parent&&qo(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m&&m!==this._time||h!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,x&&(this._lock=2,m=b?v:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!h)return this;ds(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=function(t,e,i){var r;if(i>e)for(r=t._first;r&&r._start<=i;){if(!r._dur&&"isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(!r._dur&&"isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,Jn(m),Jn(r)))&&(y-=r-(r=l._start)),this._tTime=y,this._time=r,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&r&&!e&&(qo(this,"onStart"),this._tTime!==y))return this;if(r>=m&&t>=0)for(n=this._first;n;){if(o=n._next,(n._act||r>=n._start)&&n._ts&&l!==n){if(n.parent!==this)return this.render(t,e,i);if(n.render(n._ts>0?(r-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(r-n._start)*n._ts,e,i),r!==this._time||!this._ts&&!h){l=0,o&&(y+=this._zTime=-1e-8);break}}n=o}else{n=this._last;for(var T=t<0?t:r;n;){if(o=n._prev,(n._act||T<=n._end)&&n._ts&&l!==n){if(n.parent!==this)return this.render(t,e,i);if(n.render(n._ts>0?(T-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(T-n._start)*n._ts,e,i),r!==this._time||!this._ts&&!h){l=0,o&&(y+=this._zTime=T?-1e-8:1e-8);break}}n=o}}if(l&&!e&&(this.pause(),l.render(r>=m?0:-1e-8)._zTime=r>=m?1:-1,this._ts))return this._start=c,bo(this),this.render(t,e,i);this._onUpdate&&!e&&qo(this,"onUpdate",!0),(y===g&&g>=this.totalDuration()||!y&&m)&&(c!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((t||!v)&&(y===g&&this._ts>0||!y&&this._ts<0)&&fo(this,1),e||t<0&&!m||!y&&!m&&g||(qo(this,y===g&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<g&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(t,e){var i=this;if(yn(e)||(e=Oo(this,e,t)),!(t instanceof _s)){if(Sn(t))return t.forEach((function(t){return i.add(t,e)})),this;if(gn(t))return this.addLabel(t,e);if(!vn(t))return this;t=Is.delayedCall(0,t)}return this!==t?wo(this,t,e):this},i.getChildren=function(t,e,i,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===r&&(r=-ln);for(var n=[],o=this._first;o;)o._start>=r&&(o instanceof Is?e&&n.push(o):(i&&n.push(o),t&&n.push.apply(n,o.getChildren(!0,e,i)))),o=o._next;return n},i.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},i.remove=function(t){return gn(t)?this.removeLabel(t):vn(t)?this.killTweensOf(t):(po(this,t),t===this._recent&&(this._recent=this._last),mo(this))},i.totalTime=function(e,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Jn(os.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,i),this._forcing=0,this):this._tTime},i.addLabel=function(t,e){return this.labels[t]=Oo(this,e),this},i.removeLabel=function(t){return delete this.labels[t],this},i.addPause=function(t,e,i){var r=Is.delayedCall(0,e||Un,i);return r.data="isPause",this._hasPause=1,wo(this,r,Oo(this,t))},i.removePause=function(t){var e=this._first;for(t=Oo(this,t);e;)e._start===t&&"isPause"===e.data&&fo(e),e=e._next},i.killTweensOf=function(t,e,i){for(var r=this.getTweensOf(t,i),n=r.length;n--;)xs!==r[n]&&r[n].kill(t,e);return this},i.getTweensOf=function(t,e){for(var i,r=[],n=ko(t),o=this._first,s=yn(e);o;)o instanceof Is?to(o._targets,n)&&(s?(!xs||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&r.push(o):(i=o.getTweensOf(n,e)).length&&r.push.apply(r,i),o=o._next;return r},i.tweenTo=function(t,e){e=e||{};var i,r=this,n=Oo(r,t),o=e,s=o.startAt,a=o.onStart,h=o.onStartParams,l=o.immediateRender,u=Is.to(r,so({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:n,overwrite:"auto",duration:e.duration||Math.abs((n-(s&&"time"in s?s.time:r._time))/r.timeScale())||1e-8,onStart:function(){if(r.pause(),!i){var t=e.duration||Math.abs((n-(s&&"time"in s?s.time:r._time))/r.timeScale());u._dur!==t&&Ro(u,t,0,1).render(u._time,!0,!0),i=1}a&&a.apply(u,h||[])}},e));return l?u.render(0):u},i.tweenFromTo=function(t,e,i){return this.tweenTo(e,so({startAt:{time:Oo(this,t)}},i))},i.recent=function(){return this._recent},i.nextLabel=function(t){return void 0===t&&(t=this._time),Yo(this,Oo(this,t))},i.previousLabel=function(t){return void 0===t&&(t=this._time),Yo(this,Oo(this,t),1)},i.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+1e-8)},i.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var r,n=this._first,o=this.labels;n;)n._start>=i&&(n._start+=t,n._end+=t),n=n._next;if(e)for(r in o)o[r]>=i&&(o[r]+=t);return mo(this)},i.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},i.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),mo(this)},i.totalDuration=function(t){var e,i,r,n=0,o=this,s=o._last,a=ln;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-t:t));if(o._dirty){for(r=o.parent;s;)e=s._prev,s._dirty&&s.totalDuration(),(i=s._start)>a&&o._sort&&s._ts&&!o._lock?(o._lock=1,wo(o,s,i-s._delay,1)._lock=0):a=i,i<0&&s._ts&&(n-=i,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=i/o._ts,o._time-=i,o._tTime-=i),o.shiftChildren(-i,!1,-Infinity),a=0),s._end>n&&s._ts&&(n=s._end),s=e;Ro(o,o===Dr&&o._time>n?o._time:n,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(t){if(Dr._ts&&(io(Dr,_o(t,Dr)),kr=os.frame),os.frame>=zn){zn+=an.autoSleep||120;var e=Dr._first;if((!e||!e._ts)&&an.autoSleep&&os._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||os.sleep()}}},e}(_s);so(bs.prototype,{_lock:0,_hasPause:0,_forcing:0});var xs,Ts=function(t,e,i,r,n,o,s){var a,h,l,u,c,d,p,f,m=new Hs(this._pt,t,e,0,1,Bs,null,n),g=0,v=0;for(m.b=i,m.e=r,i+="",(p=~(r+="").indexOf("random("))&&(r=zo(r)),o&&(o(f=[i,r],t,e),i=f[0],r=f[1]),h=i.match(In)||[];a=In.exec(r);)u=a[0],c=r.substring(g,a.index),l?l=(l+1)%5:"rgba("===c.substr(-5)&&(l=1),u!==h[v++]&&(d=parseFloat(h[v-1])||0,m._pt={_next:m._pt,p:c||1===v?c:",",s:d,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-d,m:l&&l<4?Math.round:0},g=In.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=s,(On.test(r)||p)&&(m.e=0),this._pt=m,m},ws=function(t,e,i,r,n,o,s,a,h){vn(r)&&(r=r(n||0,t,o));var l,u=t[e],c="get"!==i?i:vn(u)?h?t[e.indexOf("set")||!vn(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():u,d=vn(u)?h?Ms:Cs:Os;if(gn(r)&&(~r.indexOf("random(")&&(r=zo(r)),"="===r.charAt(1)&&((l=parseFloat(c)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(No(c)||0))||0===l)&&(r=l)),c!==r)return isNaN(c*r)||""===r?(!u&&!(e in t)&&Ln(e,r),Ts.call(this,t,e,c,r,d,a||an.stringFilter,h)):(l=new Hs(this._pt,t,e,+c||0,r-(c||0),"boolean"==typeof u?Ls:Fs,0,d),h&&(l.fp=h),s&&l.modifier(s,this,t),this._pt=l)},Es=function(t,e,i,r,n,o){var s,a,h,l;if(Hn[t]&&!1!==(s=new Hn[t]).init(n,s.rawVars?e[t]:function(t,e,i,r,n){if(vn(t)&&(t=As(t,n,e,i,r)),!bn(t)||t.style&&t.nodeType||Sn(t)||En(t))return gn(t)?As(t,n,e,i,r):t;var o,s={};for(o in t)s[o]=As(t[o],n,e,i,r);return s}(e[t],r,n,o,i),i,r,o)&&(i._pt=a=new Hs(i._pt,n,t,0,1,s.render,s,0,s.priority),i!==Ur))for(h=i._ptLookup[i._targets.indexOf(n)],l=s._props.length;l--;)h[s._props[l]]=a;return s},Ss=function t(e,i){var r,n,o,s,a,h,l,u,c,d,p,f,m,g=e.vars,v=g.ease,y=g.startAt,_=g.immediateRender,b=g.lazy,x=g.onUpdate,T=g.onUpdateParams,w=g.callbackScope,E=g.runBackwards,S=g.yoyoEase,A=g.keyframes,R=g.autoRevert,P=e._dur,I=e._startAt,O=e._targets,C=e.parent,M=C&&"nested"===C.data?C.parent._targets:O,D="auto"===e._overwrite&&!Mr,N=e.timeline;if(N&&(!A||!v)&&(v="none"),e._ease=ps(v,hn.ease),e._yEase=S?cs(ps(!0===S?v:S,hn.ease)):0,S&&e._yoyo&&!e._repeat&&(S=e._yEase,e._yEase=e._ease,e._ease=S),e._from=!N&&!!g.runBackwards,!N){if(f=(u=O[0]?Kn(O[0]).harness:0)&&g[u.prop],r=uo(g,Gn),I&&I.render(-1,!0).kill(),y)if(fo(e._startAt=Is.set(O,so({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:xn(b),startAt:null,delay:0,onUpdate:x,onUpdateParams:T,callbackScope:w,stagger:0},y))),i<0&&!_&&!R&&e._startAt.render(-1,!0),_){if(i>0&&!R&&(e._startAt=0),P&&i<=0)return void(i&&(e._zTime=i))}else!1===R&&(e._startAt=0);else if(E&&P)if(I)!R&&(e._startAt=0);else if(i&&(_=!1),o=so({overwrite:!1,data:"isFromStart",lazy:_&&xn(b),immediateRender:_,stagger:0,parent:C},r),f&&(o[u.prop]=f),fo(e._startAt=Is.set(O,o)),i<0&&e._startAt.render(-1,!0),_){if(!i)return}else t(e._startAt,1e-8);for(e._pt=0,b=P&&xn(b)||b&&!P,n=0;n<O.length;n++){if(l=(a=O[n])._gsap||qn(O)[n]._gsap,e._ptLookup[n]=d={},jn[l.id]&&Xn.length&&eo(),p=M===O?n:M.indexOf(a),u&&!1!==(c=new u).init(a,f||r,e,p,M)&&(e._pt=s=new Hs(e._pt,a,c.name,0,1,c.render,c,0,c.priority),c._props.forEach((function(t){d[t]=s})),c.priority&&(h=1)),!u||f)for(o in r)Hn[o]&&(c=Es(o,r,e,p,a,M))?c.priority&&(h=1):d[o]=s=ws.call(e,a,o,"get",r[o],p,M,0,g.stringFilter);e._op&&e._op[n]&&e.kill(a,e._op[n]),D&&e._pt&&(xs=e,Dr.killTweensOf(a,d,e.globalTime(i)),m=!e.parent,xs=0),e._pt&&b&&(jn[l.id]=1)}h&&js(e),e._onInit&&e._onInit(e)}e._onUpdate=x,e._initted=(!e._op||e._pt)&&!m},As=function(t,e,i,r,n){return vn(t)?t.call(e,i,r,n):gn(t)&&~t.indexOf("random(")?zo(t):t},Rs=Yn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Ps=(Rs+",id,stagger,delay,duration,paused,scrollTrigger").split(","),Is=function(t){function e(e,i,r,n){var o;"number"==typeof i&&(r.duration=i,i=r,r=null);var s,a,h,l,u,c,d,p,f=(o=t.call(this,n?i:co(i))||this).vars,m=f.duration,g=f.delay,v=f.immediateRender,y=f.stagger,_=f.overwrite,b=f.keyframes,x=f.defaults,T=f.scrollTrigger,w=f.yoyoEase,E=i.parent||Dr,S=(Sn(e)||En(e)?yn(e[0]):"length"in i)?[e]:ko(e);if(o._targets=S.length?qn(S):Bn("GSAP target "+e+" not found. https://greensock.com",!an.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=_,b||y||wn(m)||wn(g)){if(i=o.vars,(s=o.timeline=new bs({data:"nested",defaults:x||{}})).kill(),s.parent=s._dp=Or(o),s._start=0,b)co(so(s.vars.defaults,{ease:"none"})),y?S.forEach((function(t,e){return b.forEach((function(i,r){return s.to(t,i,r?">":e*y)}))})):b.forEach((function(t){return s.to(S,t,">")}));else{if(l=S.length,d=y?Go(y):Un,bn(y))for(u in y)~Rs.indexOf(u)&&(p||(p={}),p[u]=y[u]);for(a=0;a<l;a++){for(u in h={},i)Ps.indexOf(u)<0&&(h[u]=i[u]);h.stagger=0,w&&(h.yoyoEase=w),p&&ho(h,p),c=S[a],h.duration=+As(m,Or(o),a,c,S),h.delay=(+As(g,Or(o),a,c,S)||0)-o._delay,!y&&1===l&&h.delay&&(o._delay=g=h.delay,o._start+=g,h.delay=0),s.to(c,h,d(a,c,S))}s.duration()?m=g=0:o.timeline=0}m||o.duration(m=s.duration())}else o.timeline=0;return!0!==_||Mr||(xs=Or(o),Dr.killTweensOf(S),xs=0),wo(E,Or(o),r),i.reversed&&o.reverse(),i.paused&&o.paused(!0),(v||!m&&!b&&o._start===Jn(E._time)&&xn(v)&&function t(e){return!e||e._ts&&t(e.parent)}(Or(o))&&"nested"!==E.data)&&(o._tTime=-1e-8,o.render(Math.max(0,-g))),T&&Eo(Or(o),T),o}Cr(e,t);var i=e.prototype;return i.render=function(t,e,i){var r,n,o,s,a,h,l,u,c,d=this._time,p=this._tDur,f=this._dur,m=t>p-1e-8&&t>=0?p:t<1e-8?0:t;if(f){if(m!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(r=m,u=this.timeline,this._repeat){if(s=f+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*s+t,e,i);if(r=Jn(m%s),m===p?(o=this._repeat,r=f):((o=~~(m/s))&&o===m/s&&(r=f,o--),r>f&&(r=f)),(h=this._yoyo&&1&o)&&(c=this._yEase,r=f-r),a=yo(this._tTime,s),r===d&&!i&&this._initted)return this;o!==a&&(u&&this._yEase&&ds(u,h),!this.vars.repeatRefresh||h||this._lock||(this._lock=i=1,this.render(Jn(s*o),!0).invalidate()._lock=0))}if(!this._initted){if(So(this,t<0?t:r,i,e))return this._tTime=0,this;if(f!==this._dur)return this.render(t,e,i)}if(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(c||this._ease)(r/f),this._from&&(this.ratio=l=1-l),r&&!d&&!e&&(qo(this,"onStart"),this._tTime!==m))return this;for(n=this._pt;n;)n.r(l,n.d),n=n._next;u&&u.render(t<0?t:!r&&h?-1e-8:u._dur*l,e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,i),qo(this,"onUpdate")),this._repeat&&o!==a&&this.vars.onRepeat&&!e&&this.parent&&qo(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&fo(this,1),e||t<0&&!d||!m&&!d||(qo(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,i,r){var n,o,s,a=t.ratio,h=e<0||!e&&(!t._start&&function t(e){var i=e.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||t(i))}(t)&&(t._initted||!Ao(t))||(t._ts<0||t._dp._ts<0)&&!Ao(t))?0:1,l=t._rDelay,u=0;if(l&&t._repeat&&(u=Do(0,t._tDur,e),o=yo(u,l),s=yo(t._tTime,l),t._yoyo&&1&o&&(h=1-h),o!==s&&(a=1-h,t.vars.repeatRefresh&&t._initted&&t.invalidate())),h!==a||r||1e-8===t._zTime||!e&&t._zTime){if(!t._initted&&So(t,e,r,i))return;for(s=t._zTime,t._zTime=e||(i?1e-8:0),i||(i=e&&!s),t.ratio=h,t._from&&(h=1-h),t._time=0,t._tTime=u,n=t._pt;n;)n.r(h,n.d),n=n._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!i&&qo(t,"onUpdate"),u&&t._repeat&&!i&&t.parent&&qo(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===h&&(h&&fo(t,1),i||(qo(t,h?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,i);return this},i.targets=function(){return this._targets},i.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},i.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?Ko(this):this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,xs&&!0!==xs.vars.overwrite)._first||Ko(this),this.parent&&i!==this.timeline.totalDuration()&&Ro(this,this._dur*this.timeline._tDur/i,0,1),this}var r,n,o,s,a,h,l,u=this._targets,c=t?ko(t):u,d=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,r=i===e.length;r&&i--&&t[i]===e[i];);return i<0}(u,c))return"all"===e&&(this._pt=0),Ko(this);for(r=this._op=this._op||[],"all"!==e&&(gn(e)&&(a={},Zn(e,(function(t){return a[t]=1})),e=a),e=function(t,e){var i,r,n,o,s=t[0]?Kn(t[0]).harness:0,a=s&&s.aliases;if(!a)return e;for(r in i=ho({},e),a)if(r in i)for(n=(o=a[r].split(",")).length;n--;)i[o[n]]=i[r];return i}(u,e)),l=u.length;l--;)if(~c.indexOf(u[l]))for(a in n=d[l],"all"===e?(r[l]=e,s=n,o={}):(o=r[l]=r[l]||{},s=e),s)(h=n&&n[a])&&("kill"in h.d&&!0!==h.d.kill(a)||po(this,h,"_pt"),delete n[a]),"all"!==o&&(o[a]=1);return this._initted&&!this._pt&&p&&Ko(this),this},e.to=function(t,i){return new e(t,i,arguments[2])},e.from=function(t,e){return Co(1,arguments)},e.delayedCall=function(t,i,r,n){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:i,onReverseComplete:i,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:n})},e.fromTo=function(t,e,i){return Co(2,arguments)},e.set=function(t,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(t,i)},e.killTweensOf=function(t,e,i){return Dr.killTweensOf(t,e,i)},e}(_s);so(Is.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Zn("staggerTo,staggerFrom,staggerFromTo",(function(t){Is[t]=function(){var e=new bs,i=Fo.call(arguments,0);return i.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,i)}}));var Os=function(t,e,i){return t[e]=i},Cs=function(t,e,i){return t[e](i)},Ms=function(t,e,i,r){return t[e](r.fp,i)},Ds=function(t,e,i){return t.setAttribute(e,i)},Ns=function(t,e){return vn(t[e])?Cs:_n(t[e])&&t.setAttribute?Ds:Os},Fs=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},Ls=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Bs=function(t,e){var i=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+r,i=i._next;r+=e.c}e.set(e.t,e.p,r,e)},ks=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},Us=function(t,e,i,r){for(var n,o=this._pt;o;)n=o._next,o.p===r&&o.modifier(t,e,i),o=n},Gs=function(t){for(var e,i,r=this._pt;r;)i=r._next,r.p===t&&!r.op||r.op===t?po(this,r,"_pt"):r.dep||(e=1),r=i;return!e},Xs=function(t,e,i,r){r.mSet(t,e,r.m.call(r.tween,i,r.mt),r)},js=function(t){for(var e,i,r,n,o=t._pt;o;){for(e=o._next,i=r;i&&i.pr>o.pr;)i=i._next;(o._prev=i?i._prev:n)?o._prev._next=o:r=o,(o._next=i)?i._prev=o:n=o,o=e}t._pt=r},Hs=function(){function t(t,e,i,r,n,o,s,a,h){this.t=e,this.s=r,this.c=n,this.p=i,this.r=o||Fs,this.d=s||this,this.set=a||Os,this.pr=h||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=Xs,this.m=t,this.mt=i,this.tween=e},t}();Zn(Yn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return Gn[t]=1})),Dn.TweenMax=Dn.TweenLite=Is,Dn.TimelineLite=Dn.TimelineMax=bs,Dr=new bs({sortChildren:!1,defaults:hn,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),an.stringFilter=ns;var Vs={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((function(t){return $o(t)}))},timeline:function(t){return new bs(t)},getTweensOf:function(t,e){return Dr.getTweensOf(t,e)},getProperty:function(t,e,i,r){gn(t)&&(t=ko(t)[0]);var n=Kn(t||{}).get,o=i?no:ro;return"native"===i&&(i=""),t?e?o((Hn[e]&&Hn[e].get||n)(t,e,i,r)):function(e,i,r){return o((Hn[e]&&Hn[e].get||n)(t,e,i,r))}:t},quickSetter:function(t,e,i){if((t=ko(t)).length>1){var r=t.map((function(t){return Ys.quickSetter(t,e,i)})),n=r.length;return function(t){for(var e=n;e--;)r[e](t)}}t=t[0]||{};var o=Hn[e],s=Kn(t),a=s.harness&&(s.harness.aliases||{})[e]||e,h=o?function(e){var r=new o;Ur._pt=0,r.init(t,i?e+i:e,Ur,0,[t]),r.render(1,r),Ur._pt&&ks(1,Ur)}:s.set(t,a);return o?h:function(e){return h(t,a,i?e+i:e,s,1)}},isTweening:function(t){return Dr.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=ps(t.ease,hn.ease)),lo(hn,t||{})},config:function(t){return lo(an,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,r=t.plugins,n=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach((function(t){return t&&!Hn[t]&&!Dn[t]&&Bn(e+" effect requires "+t+" plugin.")})),Vn[e]=function(t,e,r){return i(ko(t),so(e||{},n),r)},o&&(bs.prototype[e]=function(t,i,r){return this.add(Vn[e](t,bn(i)?i:(r=i)&&{},this),r)})},registerEase:function(t,e){as[t]=ps(e)},parseEase:function(t,e){return arguments.length?ps(t,e):as},getById:function(t){return Dr.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var i,r,n=new bs(t);for(n.smoothChildTiming=xn(t.smoothChildTiming),Dr.remove(n),n._dp=0,n._time=n._tTime=Dr._time,i=Dr._first;i;)r=i._next,!e&&!i._dur&&i instanceof Is&&i.vars.onComplete===i._targets[0]||wo(n,i,i._start-i._delay),i=r;return wo(Dr,n,0),n},utils:{wrap:function t(e,i,r){var n=i-e;return Sn(e)?Vo(e,t(0,e.length),i):Mo(r,(function(t){return(n+(t-e)%n)%n+e}))},wrapYoyo:function t(e,i,r){var n=i-e,o=2*n;return Sn(e)?Vo(e,t(0,e.length-1),i):Mo(r,(function(t){return e+((t=(o+(t-e)%o)%o||0)>n?o-t:t)}))},distribute:Go,random:Ho,snap:jo,normalize:function(t,e,i){return Wo(t,e,0,1,i)},getUnit:No,clamp:function(t,e,i){return Mo(i,(function(i){return Do(t,e,i)}))},splitColor:Jo,toArray:ko,selector:function(t){return t=ko(t)[0]||Bn("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return ko(e,i.querySelectorAll?i:i===t?Bn("Invalid scope")||Lr.createElement("div"):t)}},mapRange:Wo,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(i){return t(parseFloat(i))+(e||No(i))}},interpolate:function t(e,i,r,n){var o=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!o){var s,a,h,l,u,c=gn(e),d={};if(!0===r&&(n=1)&&(r=null),c)e={p:e},i={p:i};else if(Sn(e)&&!Sn(i)){for(h=[],l=e.length,u=l-2,a=1;a<l;a++)h.push(t(e[a-1],e[a]));l--,o=function(t){t*=l;var e=Math.min(u,~~t);return h[e](t-e)},r=i}else n||(e=ho(Sn(e)?[]:{},e));if(!h){for(s in i)ws.call(d,e,s,"get",i[s]);o=function(t){return ks(t,d)||(c?e.p:e)}}}return Mo(r,o)},shuffle:Uo},install:Fn,effects:Vn,ticker:os,updateRoot:bs.updateRoot,plugins:Hn,globalTimeline:Dr,core:{PropTween:Hs,globals:kn,Tween:Is,Timeline:bs,Animation:_s,getCache:Kn,_removeLinkedListItem:po,suppressOverwrites:function(t){return Mr=t}}};Zn("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return Vs[t]=Is[t]})),os.add(bs.updateRoot),Ur=Vs.to({},{duration:0});var zs=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},Ws=function(t,e){return{name:t,rawVars:1,init:function(t,i,r){r._onInit=function(t){var r,n;if(gn(i)&&(r={},Zn(i,(function(t){return r[t]=1})),i=r),e){for(n in r={},i)r[n]=e(i[n]);i=r}!function(t,e){var i,r,n,o=t._targets;for(i in e)for(r=o.length;r--;)(n=t._ptLookup[r][i])&&(n=n.d)&&(n._pt&&(n=zs(n,i)),n&&n.modifier&&n.modifier(e[i],t,o[r],i))}(t,i)}}}},Ys=Vs.registerPlugin({name:"attr",init:function(t,e,i,r,n){var o,s;for(o in e)(s=this.add(t,"setAttribute",(t.getAttribute(o)||0)+"",e[o],r,n,0,0,o))&&(s.op=o),this._props.push(o)}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i])}},Ws("roundProps",Xo),Ws("modifiers"),Ws("snap",jo))||Vs;Is.version=bs.version=Ys.version="3.8.0",Br=1,Tn()&&ss();var qs=as.Power0,Ks=as.Power1,$s=as.Power2,Zs=as.Power3,Qs=as.Power4,Js=(as.Linear,as.Quad,as.Cubic,as.Quart,as.Quint,as.Strong,as.Elastic),ta=as.Back,ea=(as.SteppedEase,as.Bounce),ia=as.Sine,ra=as.Expo,na=as.Circ,oa=i(16),sa=i.n(oa),aa={easeInQuad(t,e,i,r){let n=i-e;return 0==r?0:(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},setPrecision:function(t,e){return Math.round(t*10**e)/10**e},lerpColor:function(t,e,i){for(var r=[],n=0;n<t.length;n++){var o=t[n]*t[n],s=e[n]*e[n];r[n]=Math.sqrt(i*(s-o)+o)>>0}return`rgb(${r[0]}, ${r[1]}, ${r[2]})`},saveLog:function(t,e){localStorage.setItem(t,e)},setQuality:function(t,e){_r=t,minW=oMinW*_r,minH=oMinH*_r,maxW=oMaxW*_r,maxH=oMaxH*_r,avgW=oAvgW*_r,avgH=oAvgH*_r,void 0!==g.resizeHandle&&g.resizeHandle(),e&&g.state.start(g.state.current)},shakeX:function(t,e,i){var r;0!=e?t.shaking&&!i||(t.shaking=!0,i||(t.startX=t.x),r=e%2==0?t.startX+2+4*e:t.startX-2-4*e,g.add.tween(t).to({x:r},50,Phaser.Easing.Quadratic.Out,!0).onComplete.add((function(){aa.shakeX(t,e-1,!0)}))):g.add.tween(t).to({x:t.startX},50,Phaser.Easing.Quadratic.Out,!0).onComplete.add((function(){t.shaking=!1}))},isEq:function(t,e,i){return Math.abs(t-e)<i},setHandCursor:function(t){for(var e in t.children){var i=t.children[e];i instanceof Phaser.Group?aa.setHandCursor(i):(i.inputEnabled=!0,i.input.useHandCursor=!0)}},getSuffix:function(t){var e=t.toString(),i=e[e.length-1];return"1"==i?"st":"2"==i?"nd":"3"==i?"rd":"th"},disownChild:function(t){aa.removeFromArr(t.parent.children,t)},gotoState:function(t,e){return g.state.start(t)},getChunkByName:function(t){for(var e=0;e<g.chunks.length;e++){if(g.chunks[e].name==t)return e}return-1},generateSequence:function(t,e,i){var r=t;t=Math.min(t,e);for(var n=(e=Math.max(r,e))-t,o=[],s=0;s<n;s++)o[s]=1e6;var a=[];for(s=0;s<i;s++){var h=aa.roulette(o);o[h]/=10,a[s]=h+t}return a},generateUniqueArr:function(t,e,i){for(var r=[],n=t;n<=e;n++)r.push(n);return aa.shuffle(r),r.slice(0,i)},roulette:function(t){for(var e=aa.sumArr(t),i=[],r=0,n=0;n<t.length;n++)i[n]=r+t[n]/e,r=i[n];var o=Math.random();i[t.length]=oo;for(n=0;n<t.length;n++)if(o<i[n])return n;return 0},sumArr:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i];return e},weightedSumArr:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]*(t.length-i);return e},arrContains:function(t,e){for(var i=0;i<e.length;i++)if(-1==t.indexOf(e[i]))return!1;return!0},addToArr:function(t,e){for(var i=aa.copyArr(t),r=0;r<i.length;r++)i[r]+=e;return i},maxInd:function(t){let e=-1/0,i=void 0;for(let r=0;r<t.length;r++)t[r]>e&&(e=t[r],i=r);return i},sortBy:function(t,e,i){void 0===i&&(i=!0);for(var r=1;r<t.length;r++){for(var n=t[r],o=r-1;o>=0&&(i?t[o][e]>n[e]:t[o][e]<n[e]);)t[o+1]=t[o],o--;t[o+1]=n}return t},prepareForWrap:function(t,e,i,r,n,o){t=t||"",e=e||"fnt",i=i||1,r=r||g.world.width;for(var s=t.split(" "),a="",h="",l="",u=g.add.bitmapText(g.world.width,g.world.height,e,h,i),c=0;c<s.length;c++)l=h,h+=s[c]+" ",u.text=h,u.width>=r&&(a+=l+"\n",h="",u.text=s[c]+" ",u.width>=r?a+=s[c]+"\n":c--);return u.kill(),a+=h},toHexString:function(t,e){var i=Number(t).toString(16);return i=i.toUpperCase(),i="0x"+(i=aa.formatLength(i,4))},drawBranch:function(t,e,i,r,n){t.fillStyle="#28555d";var o=aa.pointDir(e.x,e.y,i.x,i.y);t.beginPath(),t.moveTo(e.x-aa.lengthDirX(r/2,o-Math.PI/2),e.y-aa.lengthDirY(r/2,o-Math.PI/2)),t.lineTo(e.x+aa.lengthDirX(r/2,o-Math.PI/2),e.y+aa.lengthDirY(r/2,o-Math.PI/2)),t.lineTo(i.x+aa.lengthDirX(n/2,o-Math.PI/2),i.y+aa.lengthDirY(n/2,o-Math.PI/2)),t.lineTo(i.x-aa.lengthDirX(n/2,o-Math.PI/2),i.y-aa.lengthDirY(n/2,o-Math.PI/2)),t.closePath(),t.fill()},hasGetUserMedia:function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},addObj:function(t,e){void 0!==e&&null!=e&&(void 0!==e.objs&&null!=e.objs&&e.objs.push(t),"undefined"==typeof _r||isNaN(_r)||(t.scale.x*=_r,t.scale.y*=_r))},maintainVolume:function(){0==this.scale.x?this.scale.y=0:this.scale.y=Math.min(3*(this.osc||1),(this.osc||1)/this.scale.x)},fakeZ:function(){this.z||(this.z=0),this.zprev||(this.zprev=this.z);var t=this.z-this.zprev;this.y-=.5*t,this.scale.x=this.scale.y=1+this.z/20},getText:function(t){return void 0===t?console.error("no key specified for external text"):void 0===g.data.text[t]?console.error("no text entry for the specified key "+t+" exists!"):void 0===g.data.text[t][g.lang]?void 0===g.data.text[t][g.data.defaultLanguage]?console.error("no text entry for default language exists!"):(console.warn("key doesn't exist for chosen language, opting out for default language instead"),g.data.text[t][g.data.defaultLanguage]):g.data.text[t][g.lang]},fromSec:function(t){return Math.round(1e3*t/g.time.desiredFps)},head:function(t){for(var e="",i=Math.min(t.length,4e3),r=0;r<i;r++)e+=t[r]+", ";return e},getFloorPow2:function(t){var e=Math.floor(Math.log2(t));return Math.pow(2,e)},copyFloat32Arr:function(t,e){for(var i=new Float32Array(e),r=0;r<t.length;r++)i[r]=t[r];return i},getNormalizedCor:function(t,e){var i=aa.getCor(t,e),r=aa.getEnergy(t),n=aa.getEnergy(e),o=Math.sqrt(r*n);return 0==o?0:i/o},getCor:function(t,e){for(var i=0,r=Math.min(t.length,e.length),n=0;n<r;n++)i+=t[n]*e[n];return i},getEnergy:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]*t[i];return e},zeroArr:function(t){for(var e=[],i=0;i<t;i++)e[i]=0;return e},valArr:function(t,e){for(var i=[],r=0;r<t;r++)i[r]=e;return i},mulArr:function(t,e,i){for(var r=[],n=0;n<t.length;n++)r[n]=t[n]*e,i&&(r[n]=Math.round(r[n]));return r},mulPosArr:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i]*i;return e},divPosArr:function(t){for(var e=[],i=1;i<t.length;i++)e[i]=t[i]/i;return e},addArrays:function(t,e){if(t.length!=e.length)return console.error("can't add arrays of different lengths");for(var i=[],r=0;r<t.length;r++)i[r]=t[r]+e[r];return i},arrEquals:function(t,e){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!=e[i])return!1;return!0},copyObj:function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(Array.isArray(t[i])?e[i]=aa.copyArr(t[i]):"object"==typeof t[i]?e[i]=aa.copyObj(t[i]):e[i]=t[i]);return e},copyArr:function(t,e){for(var i=[],r=0;r<t.length;r++)"object"==typeof t[r]&&e?i[r]=aa.copyObj(t[r]):i[r]=t[r];return i},rndArr:function(t){return t[Math.floor(Math.random()*t.length)]},getMaxFromArr:function(t){if(0==t.length)return-1;for(var e=t[0],i=0;i<t.length;i++)t[i]>e&&(e=t[i]);return e},limit:function(t,e,i){return t<e?e:t>i?i:t},commitGenocide:function(){for(var t=0;t<g.world.children.length;t++){var e=g.world.children[t];void 0!==e.kill&&e.kill()}},choose:function(){var t=arguments.length,e=Math.floor(Math.random()*t);return arguments[e]},approachVal:function(t,e,i){return t<e?(t+=i)>e&&(t=e):t>e&&(t-=i)<e&&(t=e),t},drawLine:function(t,e,i,r,n){g.gfx.lineStyle(n||4,16777215,1),g.gfx.moveTo(t,e),g.gfx.lineTo(i,r),g.gfx.endFill()},saveToFile:function(t,e){var i=document.createElement("a");if(i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),i.setAttribute("download",t),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),i.dispatchEvent(r)}else i.click()},drawRect:function(t,e,i,r,n){g.gfx.beginFill(16724736),g.gfx.lineStyle(n||4,16777215,1),g.gfx.drawRect(t,e,i,r),g.gfx.endFill()},drawCircle:function(t,e,i){g.gfx.beginFill(16724736),g.gfx.lineStyle(2,0,1),g.gfx.drawCircle(t,e,i),g.gfx.endFill()},withinRect:function(t,e,i,r,n,o){return t>i&&e>r&&t<i+n&&e<r+o},withinCircle:function(t,e,i,r,n){return!((t-i)*(t-i)+(e-r)*(e-r)>n*n)},withinLineRect:function(t,e,i,r,n,o){return t>Math.min(i,n)&&t<Math.max(i,n)&&e>Math.min(r,o)&&e<Math.max(r,o)},rotRectColLine:function(t,e,i,r,n,o,s,a,h){var l=n,u=Math.sqrt(i*i+r*r),c=t+aa.lengthDirX(u,l),d=e+aa.lengthDirY(u,l);return aa.lineIntersectLineSegment(t,e,c,d,o,s,a,h)},rotateAbout:function(t,e,i,r,n){var o=Math.sin(n*Math.PI/180),s=Math.cos(n*Math.PI/180),a=(t-=i)*o+(e-=r)*s;return{x:t=t*s-e*o+i,y:e=a+r}},circleColRotRect:function(t,e,i,r,n,o,s,a){var h=Math.sin(a*Math.PI/180),l=Math.cos(a*Math.PI/180),u=(t-=r)*h+(e-=n)*l;return t=t*l-e*h+r,e=u+n,aa.circleColRect(t,e,i,r,n,o,s)},arraysHaveSameValues:function(t,e){if(t.length!=e.length)return!1;t=aa.copyArr(t).sort(),e=aa.copyArr(e).sort();for(var i=0;i<t.length;i++)if(t[i]!=e[i])return!1;return!0},imgColImg:function(t,e){if(t.colShape&&e.colShape){if(aa[t.colShape.type+"Col"+aa.format(e.colShape.type)])return aa[t.colShape.type+"Col"+aa.format(e.colShape.type)](t.colShape.data,e.colShape.data,!0);if(aa[e.colShape.type+"Col"+aa.format(t.colShape.type)])return aa[e.colShape.type+"Col"+aa.format(t.colShape.type)](e.colShape.data,t.colShape.data,!0);throw"no collision detector is defined for "+t.colShape+", "+e.colShape}if(0==t.angle&&0==e.angle)return aa.rectColRect(t.x-t.width*t.anchor.x,t.y-t.height*t.anchor.y,t.width,t.height,e.x-e.width*e.anchor.x,e.y-e.height*e.anchor.y,e.width,e.height)},circleColRect:function(t,e,i,r,n,o,s){if("object"==typeof t){var a=t,h=e;t=(a.x-a.owner.anchor.x)*a.owner.width+a.owner.worldPosition.x,e=(a.y-a.owner.anchor.y)*a.owner.height+a.owner.worldPosition.y,i=a.rad,r=(h.x-h.owner.anchor.x)*h.owner.width+h.owner.worldPosition.x,n=(h.y-h.owner.anchor.y)*h.owner.height+h.owner.worldPosition.y,o=h.w*h.owner.width,s=h.h*h.owner.height}return!(t+i<r)&&(!(t-i>r+o)&&(!(e+i<n)&&!(e-i>n+s)))},rectColRect:function(t,e,i,r,n,o,s,a){if("object"==typeof t){var h=t,l=e;t=(h.x-h.owner.anchor.x)*h.owner.width+h.owner.worldPosition.x,e=(h.y-h.owner.anchor.y)*h.owner.height+h.owner.worldPosition.y,i=h.w*h.owner.width,r=h.h*h.owner.height,n=(l.x-l.owner.anchor.x)*l.owner.width+l.owner.worldPosition.x,o=(l.y-l.owner.anchor.y)*l.owner.height+l.owner.worldPosition.y,s=l.w*l.owner.width,a=l.h*l.owner.height}return!(t+i<n)&&(!(t>n+s)&&(!(e+r<o)&&!(e>o+a)))},circleColCircle:function(t,e,i,r,n,o){if("object"==typeof t){var s=t,a=e;t=(s.x-s.owner.anchor.x)*s.owner.width+s.owner.worldPosition.x,e=(s.y-s.owner.anchor.y)*s.owner.height+s.owner.worldPosition.y,i=s.rad,r=(a.x-a.owner.anchor.x)*a.owner.width+a.owner.worldPosition.x,n=(a.y-a.owner.anchor.y)*a.owner.height+a.owner.worldPosition.y,o=a.rad}return aa.pointDis(t,e,r,n)<i+o},circleColLine:function(t,e,i,r,n,o,s){if(aa.withinCircle(r,n,t,e,i))return{doCollide:!0,point:[r,n]};if(aa.withinCircle(o,s,t,e,i))return{doCollide:!0,point:[o,s]};let a=o-r,h=s-n,l=a*a+h*h,u=a,c=h;if(l>0){let i=((t-r)*a+(e-n)*h)/l;u*=i,c*=i}let d=[];d[0]=r+u,d[1]=n+c;let p=u*u+c*c;return{point:d,doCollide:aa.withinCircle(d[0],d[1],t,e,i)&&p<=l&&u*a+c*h>=0}},polyColPoly:function(t,e,i){var r,n,o,s,a,h,l=aa.copyArr(t),u=aa.copyArr(e),c=[l,u];if(c[0].owner=t.owner,c[1].owner=e.owner,i)for(var d=0;d<c.length;d++)for(var p=c[d],f=0;f<p.length;f++){var m=p[f];m.x=(m.x-p.owner.anchor.x)*p.owner.width+p.owner.worldPosition.x,m.y=(m.y-p.owner.anchor.y)*p.owner.height+p.owner.worldPosition.y,m=aa.rotateAbout(m.x,m.y,p.owner.worldPosition.x,p.owner.worldPosition.y,p.owner.angle),g.debugBitmap.context.fillStyle="#ff0000",g.debugBitmap.context.fillRect(m.x,m.y,5,5)}for(f=0;f<c.length;f++){p=c[f];for(s=0;s<p.length;s++){var v=(s+1)%p.length,y=p[s],_=p[v],b={x:_.y-y.y,y:y.x-_.x};for(r=n=void 0,d=0;d<l.length;d++)o=b.x*l[d].x+b.y*l[d].y,(void 0===r||o<r)&&(r=o),(void 0===n||o>n)&&(n=o);for(a=h=void 0,d=0;d<u.length;d++)o=b.x*u[d].x+b.y*u[d].y,(void 0===a||o<a)&&(a=o),(void 0===h||o>h)&&(h=o);if(n<a||h<r)return!1}}return!0},lineColCircle:function(t,e,i,r,n,o,s){return aa.circleColLine(n,o,s,t,e,i,r)},lineIntersectLineSegment:function(t,e,i,r,n,o,s,a){var h=aa.lineIntersectLine(t,e,i,r,n,o,s,a);return!(!aa.withinLineRect(h.x,h.y,t,e,i,r)||!aa.withinLineRect(h.x,h.y,n,o,s,a))},lineIntersectLine:function(t,e,i,r,n,o,s,a){var h,l,u,c,d,p,f={x:-1,y:-1},m=t-i,g=n-s;0==m?(h=1,l=0,u=t):(l=-1,u=(h=(e-r)/m)*t-e),0==g?(c=1,d=0,p=n):(d=-1,p=(c=(o-a)/g)*n-o);var v=h*d-c*l;return 0==v||(f.x=(d*u-l*p)/v,f.y=(h*p-c*u)/v),f},getRow:function(t,e){return Math.floor(t/e)},getCol:function(t,e,i){if("Number"!=typeof i)i=aa.getRow(t,e);return t-i*e},removeFromArr:function(t,e){return t.splice(t.indexOf(e),1)},tupleExists:function(t,e,i,r,n){for(var o=0;o<t.length;o++)if(t[o][e]==r&&t[o][i]==n)return!0;return!1},appendArr:function(t,e){for(var i=0;i<e.length;i++)t.push(e[i])},shuffle:function(t){var e,i,r;for(r=t.length;r;r--)e=Math.floor(Math.random()*r),i=t[r-1],t[r-1]=t[e],t[e]=i},notUnique:function(t){for(var e=0;e<t.length;e++)for(var i=e+1;i<t.length;i++)if(t[i]==t[e])return!0;return!1},killAll:function(t){if(void 0!==t)for(var e=0;e<t.length;e++)void 0!==t[e]&&null!=t[e]&&void 0!==t[e].kill&&t[e].kill()},iRndRange:function(t,e){return Math.round(aa.rndRange(t,e))},rndRange:function(t,e){var i=e-t;return Math.random()*i+t},count:function(t,e){for(var i=0,r=0;r<t.length;r++)t[r]==e&&i++;return i},removeFromArr:function(t,e){t.splice(t.indexOf(e),1)},rndRange:function(t,e){var i=e-t;return Math.random()*i+t},count:function(t,e){for(var i=0,r=0;r<t.length;r++)t[r]==e&&i++;return i},format:function(t){return t=(t=t.toLowerCase()).charAt(0).toUpperCase()+t.slice(1)},formatLength:function(t,e){for(var i=t.toString();i.length<e;)i="0"+i;return i},formatDigit:function(t,e){var i=t.toString();if(i.length<=4)return i;var r=""+i;void 0===e&&(e=".");for(var n=i.length-4;n>=0;n-=3)r=r.slice(0,n+1)+e+r.slice(n+1,r.length);return r},lengthDirX:function(t,e){return t*Math.cos(e)},lengthDirY:function(t,e){return t*Math.sin(e)},pointDir:function(t,e,i,r){return Math.atan2(r-e,i-t)},pointDis:function(t,e,i,r){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-r,2))},generateCode:function(){for(var t="",e=0;e<15;e++){t+=Math.floor(300*Math.random())}return t},channel2hex(t){t=Math.round(t);var e=Number(t).toString(16);return e.length<2&&(e="0"+e),e},rgb2hex:function(t){return parseInt(aa.channel2hex(t[0])+aa.channel2hex(t[1])+aa.channel2hex(t[2]),16)},cmyk2hex:function(t){let e=aa.cmyk2rgb(t);return aa.rgb2hex(e)},cmyk2rgb:function(t){let[e,i,r,n]=t;e/=100,i/=100,r/=100,n/=100,e=e*(1-n)+n,i=i*(1-n)+n,r=r*(1-n)+n;var o=1-e,s=1-i,a=1-r;return[o=Math.round(255*o),s=Math.round(255*s),a=Math.round(255*a)]},dec2rgb:function(t){return[Math.floor(t/65536),Math.floor(t/256)%256,t%256]},rgb2dec:function(t,e,i){return(t<<16)+(e<<8)+i},gray2hex:function(t){const e=aa.channel2hex(255-t[0]/100*255)+aa.channel2hex(255-t[0]/100*255)+aa.channel2hex(255-t[0]/100*255);return parseInt(e,16)},channelColor2Hex:function(t){return"rgb"==t.type?aa.rgb2hex(t.channels):"cmyk"==t.type?aa.cmyk2hex(t.channels):"gray"==t.type?aa.gray2hex(t.channels):void 0}};class ha{constructor(t={x:0,y:0},e=0,i={x:1,y:1},r=1){this.translate=t,("number"!=typeof this.translate.x||Number.isNaN(this.translate.x))&&(this.translate.x=0),("number"!=typeof this.translate.y||Number.isNaN(this.translate.y))&&(this.translate.y=0),this.rotate=e,("number"!=typeof this.rotate||Number.isNaN(this.rotate))&&(this.rotate=0),this.scale=i,("number"!=typeof this.scale.x||Number.isNaN(this.scale.x))&&(this.scale.x=1),("number"!=typeof this.scale.y||Number.isNaN(this.scale.y))&&(this.scale.y=1),this.alpha=r,("number"!=typeof this.alpha||Number.isNaN(this.alpha))&&(this.alpha=0),this.isInvisible=!1}static fromProps(t){return new ha(t.translate,t.rotate,t.scale,t.alpha)}toProps(){return{translate:{x:this.translate.x,y:this.translate.y},rotate:this.rotate,scale:{x:this.scale.x,y:this.scale.y},alpha:this.alpha}}static zeroFrame(t={x:0,y:0},e=0,i={x:0,y:0},r=0){return new ha(t,e,i,r)}static fromFrame(t){t||(t={});let e=t.translate,i=t.scale,r=t.rotate,n=t.alpha;return t.translate||(e={x:0,y:0}),t.scale||(i={x:1,y:1}),void 0===t.rotate&&(r=0),void 0===t.alpha&&(n=1),new ha({x:e.x,y:e.y},r,{x:i.x,y:i.y},n)}static addFrames(t,e){return new ha({x:t.translate.x+e.translate.x,y:t.translate.y+e.translate.y},t.rotate+e.rotate,{x:t.scale.x+e.scale.x,y:t.scale.y+e.scale.y},(t.alpha||0)+(e.alpha||0))}static interpolateFrames(t,e,i){let r={x:t.translate.x+(e.translate.x-t.translate.x)*i,y:t.translate.y+(e.translate.y-t.translate.y)*i},n={x:t.scale.x+(e.scale.x-t.scale.x)*i,y:t.scale.y+(e.scale.y-t.scale.y)*i},o=t.rotate+(e.rotate-t.rotate)*i,s=t.alpha+(e.alpha-t.alpha)*i;return new ha(r,o,n,s)}}class la{constructor(t=null){this.world=t,this.world||console.error("this Motivator was not assigned a world at creation"),this.commitments=[],this.type="motiv",this.world.motivators.push(this)}set faceDirection(t){this._faceDirection=t,this.updateCommitments()}get faceDirection(){return void 0===this._faceDirection&&(this._faceDirection=!1),this._faceDirection}set doEase(t){this._doEase=t,this.updateCommitments()}get doEase(){return void 0===this._doEase&&(this._doEase=!1),this._doEase}set easingFunction(t){this._easingFunction=t,this.updateCommitments()}get easingFunction(){return void 0===this._easingFunction&&(this._easingFunction="Expo"),this._easingFunction}set easingType(t){this._easingType=t,this.updateCommitments()}get easingType(){return void 0===this._easingType&&(this._easingType="easeInOut"),this._easingType}releaseCommitments(){for(;this.commitments.length;)this.commitments[0].removeMotivator(this.commitments[0].motivators.indexOf(this))}updateCommitments(){for(let t of this.commitments)t._updateMotivators()}addCommitment(t){this.commitments.push(t)}get end(){return console.warn("this motivator doesn't define a getter for the 'end' value"),NaN}createDuplicate(){return la.fromMotivator(this)}static fromMotivator(t){let e=t.name+"_dup",i=1;for(let r of t.world.motivators)r.name.includes(t.name+"_dup")&&(e=`${t.name}_dup(${i})`,i++);let r=t.toProps(),n=t.constructor.fromProps(t.world,r);return n.name=e,n}}la.modifiers={};
/*!
 * CSSPlugin 3.8.0
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var ua,ca,da,pa,fa,ma,ga,va={},ya=180/Math.PI,_a=Math.PI/180,ba=Math.atan2,xa=/([A-Z])/g,Ta=/(?:left|right|width|margin|padding|x)/i,wa=/[\s,\(]\S/,Ea={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Sa=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Aa=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Ra=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Pa=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},Ia=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Oa=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Ca=function(t,e,i){return t.style[e]=i},Ma=function(t,e,i){return t.style.setProperty(e,i)},Da=function(t,e,i){return t._gsap[e]=i},Na=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Fa=function(t,e,i,r,n){var o=t._gsap;o.scaleX=o.scaleY=i,o.renderTransform(n,o)},La=function(t,e,i,r,n){var o=t._gsap;o[e]=i,o.renderTransform(n,o)},Ba="transform",ka=Ba+"Origin",Ua=function(t,e){var i=ca.createElementNS?ca.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ca.createElement(t);return i.style?i:ca.createElement(t)},Ga=function t(e,i,r){var n=getComputedStyle(e);return n[i]||n.getPropertyValue(i.replace(xa,"-$1").toLowerCase())||n.getPropertyValue(i)||!r&&t(e,ja(i)||i,1)||""},Xa="O,Moz,ms,Ms,Webkit".split(","),ja=function(t,e,i){var r=(e||fa).style,n=5;if(t in r&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(Xa[n]+t in r););return n<0?null:(3===n?"ms":n>=0?Xa[n]:"")+t},Ha=function(){"undefined"!=typeof window&&window.document&&(ua=window,ca=ua.document,da=ca.documentElement,fa=Ua("div")||{style:{}},Ua("div"),Ba=ja(Ba),ka=Ba+"Origin",fa.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",ga=!!ja("perspective"),pa=1)},Va=function t(e){var i,r=Ua("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,o=this.nextSibling,s=this.style.cssText;if(da.appendChild(r),r.appendChild(this),this.style.display="block",e)try{i=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(i=this._gsapBBox());return n&&(o?n.insertBefore(this,o):n.appendChild(this)),da.removeChild(r),this.style.cssText=s,i},za=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},Wa=function(t){var e;try{e=t.getBBox()}catch(i){e=Va.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Va||(e=Va.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+za(t,["x","cx","x1"])||0,y:+za(t,["y","cy","y1"])||0,width:0,height:0}},Ya=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Wa(t))},qa=function(t,e){if(e){var i=t.style;e in va&&e!==ka&&(e=Ba),i.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty(e.replace(xa,"-$1").toLowerCase())):i.removeAttribute(e)}},Ka=function(t,e,i,r,n,o){var s=new Hs(t._pt,e,i,0,1,o?Oa:Ia);return t._pt=s,s.b=r,s.e=n,t._props.push(i),s},$a={deg:1,rad:1,turn:1},Za=function t(e,i,r,n){var o,s,a,h,l=parseFloat(r)||0,u=(r+"").trim().substr((l+"").length)||"px",c=fa.style,d=Ta.test(i),p="svg"===e.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m="px"===n,g="%"===n;return n===u||!l||$a[n]||$a[u]?l:("px"!==u&&!m&&(l=t(e,i,r,"px")),h=e.getCTM&&Ya(e),!g&&"%"!==u||!va[i]&&!~i.indexOf("adius")?(c[d?"width":"height"]=100+(m?u:n),s=~i.indexOf("adius")||"em"===n&&e.appendChild&&!p?e:e.parentNode,h&&(s=(e.ownerSVGElement||{}).parentNode),s&&s!==ca&&s.appendChild||(s=ca.body),(a=s._gsap)&&g&&a.width&&d&&a.time===os.time?Qn(l/a.width*100):((g||"%"===u)&&(c.position=Ga(e,"position")),s===e&&(c.position="static"),s.appendChild(fa),o=fa[f],s.removeChild(fa),c.position="absolute",d&&g&&((a=Kn(s)).time=os.time,a.width=s[f]),Qn(m?o*l/100:o&&l?100/o*l:0))):(o=h?e.getBBox()[d?"width":"height"]:e[f],Qn(g?l/o*100:l/100*o)))},Qa=function(t,e,i,r){var n;return pa||Ha(),e in Ea&&"transform"!==e&&~(e=Ea[e]).indexOf(",")&&(e=e.split(",")[0]),va[e]&&"transform"!==e?(n=lh(t,r),n="transformOrigin"!==e?n[e]:n.svg?n.origin:uh(Ga(t,ka))+" "+n.zOrigin+"px"):(!(n=t.style[e])||"auto"===n||r||~(n+"").indexOf("calc("))&&(n=ih[e]&&ih[e](t,e,i)||Ga(t,e)||$n(t,e)||("opacity"===e?1:0)),i&&!~(n+"").trim().indexOf(" ")?Za(t,e,n,i)+i:n},Ja=function(t,e,i,r){if(!i||"none"===i){var n=ja(e,t,1),o=n&&Ga(t,n,1);o&&o!==i?(e=n,i=o):"borderColor"===e&&(i=Ga(t,"borderTopColor"))}var s,a,h,l,u,c,d,p,f,m,g,v,y=new Hs(this._pt,t.style,e,0,1,Bs),_=0,b=0;if(y.b=i,y.e=r,i+="","auto"===(r+="")&&(t.style[e]=r,r=Ga(t,e)||r,t.style[e]=i),ns(s=[i,r]),r=s[1],h=(i=s[0]).match(Pn)||[],(r.match(Pn)||[]).length){for(;a=Pn.exec(r);)d=a[0],f=r.substring(_,a.index),u?u=(u+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(u=1),d!==(c=h[b++]||"")&&(l=parseFloat(c)||0,g=c.substr((l+"").length),(v="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),p=parseFloat(d),m=d.substr((p+"").length),_=Pn.lastIndex-m.length,m||(m=m||an.units[e]||g,_===r.length&&(r+=m,y.e+=m)),g!==m&&(l=Za(t,e,c,m)||0),y._pt={_next:y._pt,p:f||1===b?f:",",s:l,c:v?v*p:p-l,m:u&&u<4||"zIndex"===e?Math.round:0});y.c=_<r.length?r.substring(_,r.length):""}else y.r="display"===e&&"none"===r?Oa:Ia;return On.test(r)&&(y.e=0),this._pt=y,y},th={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},eh=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,r,n,o=e.t,s=o.style,a=e.u,h=o._gsap;if("all"===a||!0===a)s.cssText="",r=1;else for(n=(a=a.split(",")).length;--n>-1;)i=a[n],va[i]&&(r=1,i="transformOrigin"===i?ka:Ba),qa(o,i);r&&(qa(o,Ba),h&&(h.svg&&o.removeAttribute("transform"),lh(o,1),h.uncache=1))}},ih={clearProps:function(t,e,i,r,n){if("isFromStart"!==n.data){var o=t._pt=new Hs(t._pt,e,i,0,0,eh);return o.u=r,o.pr=-10,o.tween=n,t._props.push(i),1}}},rh=[1,0,0,1,0,0],nh={},oh=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},sh=function(t){var e=Ga(t,Ba);return oh(e)?rh:e.substr(7).match(Rn).map(Qn)},ah=function(t,e){var i,r,n,o,s=t._gsap||Kn(t),a=t.style,h=sh(t);return s.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(h=[(n=t.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?rh:h:(h!==rh||t.offsetParent||t===da||s.svg||(n=a.display,a.display="block",(i=t.parentNode)&&t.offsetParent||(o=1,r=t.nextSibling,da.appendChild(t)),h=sh(t),n?a.display=n:qa(t,"display"),o&&(r?i.insertBefore(t,r):i?i.appendChild(t):da.removeChild(t))),e&&h.length>6?[h[0],h[1],h[4],h[5],h[12],h[13]]:h)},hh=function(t,e,i,r,n,o){var s,a,h,l=t._gsap,u=n||ah(t,!0),c=l.xOrigin||0,d=l.yOrigin||0,p=l.xOffset||0,f=l.yOffset||0,m=u[0],g=u[1],v=u[2],y=u[3],_=u[4],b=u[5],x=e.split(" "),T=parseFloat(x[0])||0,w=parseFloat(x[1])||0;i?u!==rh&&(a=m*y-g*v)&&(h=T*(-g/a)+w*(m/a)-(m*b-g*_)/a,T=T*(y/a)+w*(-v/a)+(v*b-y*_)/a,w=h):(T=(s=Wa(t)).x+(~x[0].indexOf("%")?T/100*s.width:T),w=s.y+(~(x[1]||x[0]).indexOf("%")?w/100*s.height:w)),r||!1!==r&&l.smooth?(_=T-c,b=w-d,l.xOffset=p+(_*m+b*v)-_,l.yOffset=f+(_*g+b*y)-b):l.xOffset=l.yOffset=0,l.xOrigin=T,l.yOrigin=w,l.smooth=!!r,l.origin=e,l.originIsAbsolute=!!i,t.style[ka]="0px 0px",o&&(Ka(o,l,"xOrigin",c,T),Ka(o,l,"yOrigin",d,w),Ka(o,l,"xOffset",p,l.xOffset),Ka(o,l,"yOffset",f,l.yOffset)),t.setAttribute("data-svg-origin",T+" "+w)},lh=function(t,e){var i=t._gsap||new ys(t);if("x"in i&&!e&&!i.uncache)return i;var r,n,o,s,a,h,l,u,c,d,p,f,m,g,v,y,_,b,x,T,w,E,S,A,R,P,I,O,C,M,D,N,F=t.style,L=i.scaleX<0,B=Ga(t,ka)||"0";return r=n=o=h=l=u=c=d=p=0,s=a=1,i.svg=!(!t.getCTM||!Ya(t)),g=ah(t,i.svg),i.svg&&(A=(!i.uncache||"0px 0px"===B)&&!e&&t.getAttribute("data-svg-origin"),hh(t,A||B,!!A||i.originIsAbsolute,!1!==i.smooth,g)),f=i.xOrigin||0,m=i.yOrigin||0,g!==rh&&(b=g[0],x=g[1],T=g[2],w=g[3],r=E=g[4],n=S=g[5],6===g.length?(s=Math.sqrt(b*b+x*x),a=Math.sqrt(w*w+T*T),h=b||x?ba(x,b)*ya:0,(c=T||w?ba(T,w)*ya+h:0)&&(a*=Math.abs(Math.cos(c*_a))),i.svg&&(r-=f-(f*b+m*T),n-=m-(f*x+m*w))):(N=g[6],M=g[7],I=g[8],O=g[9],C=g[10],D=g[11],r=g[12],n=g[13],o=g[14],l=(v=ba(N,C))*ya,v&&(A=E*(y=Math.cos(-v))+I*(_=Math.sin(-v)),R=S*y+O*_,P=N*y+C*_,I=E*-_+I*y,O=S*-_+O*y,C=N*-_+C*y,D=M*-_+D*y,E=A,S=R,N=P),u=(v=ba(-T,C))*ya,v&&(y=Math.cos(-v),D=w*(_=Math.sin(-v))+D*y,b=A=b*y-I*_,x=R=x*y-O*_,T=P=T*y-C*_),h=(v=ba(x,b))*ya,v&&(A=b*(y=Math.cos(v))+x*(_=Math.sin(v)),R=E*y+S*_,x=x*y-b*_,S=S*y-E*_,b=A,E=R),l&&Math.abs(l)+Math.abs(h)>359.9&&(l=h=0,u=180-u),s=Qn(Math.sqrt(b*b+x*x+T*T)),a=Qn(Math.sqrt(S*S+N*N)),v=ba(E,S),c=Math.abs(v)>2e-4?v*ya:0,p=D?1/(D<0?-D:D):0),i.svg&&(A=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!oh(Ga(t,Ba)),A&&t.setAttribute("transform",A))),Math.abs(c)>90&&Math.abs(c)<270&&(L?(s*=-1,c+=h<=0?180:-180,h+=h<=0?180:-180):(a*=-1,c+=c<=0?180:-180)),i.x=r-((i.xPercent=r&&(i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+"px",i.y=n-((i.yPercent=n&&(i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-n)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+"px",i.z=o+"px",i.scaleX=Qn(s),i.scaleY=Qn(a),i.rotation=Qn(h)+"deg",i.rotationX=Qn(l)+"deg",i.rotationY=Qn(u)+"deg",i.skewX=c+"deg",i.skewY=d+"deg",i.transformPerspective=p+"px",(i.zOrigin=parseFloat(B.split(" ")[2])||0)&&(F[ka]=uh(B)),i.xOffset=i.yOffset=0,i.force3D=an.force3D,i.renderTransform=i.svg?fh:ga?ph:dh,i.uncache=0,i},uh=function(t){return(t=t.split(" "))[0]+" "+t[1]},ch=function(t,e,i){var r=No(e);return Qn(parseFloat(e)+parseFloat(Za(t,"x",i+"px",r)))+r},dh=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,ph(t,e)},ph=function(t,e){var i=e||this,r=i.xPercent,n=i.yPercent,o=i.x,s=i.y,a=i.z,h=i.rotation,l=i.rotationY,u=i.rotationX,c=i.skewX,d=i.skewY,p=i.scaleX,f=i.scaleY,m=i.transformPerspective,g=i.force3D,v=i.target,y=i.zOrigin,_="",b="auto"===g&&t&&1!==t||!0===g;if(y&&("0deg"!==u||"0deg"!==l)){var x,T=parseFloat(l)*_a,w=Math.sin(T),E=Math.cos(T);T=parseFloat(u)*_a,x=Math.cos(T),o=ch(v,o,w*x*-y),s=ch(v,s,-Math.sin(T)*-y),a=ch(v,a,E*x*-y+y)}"0px"!==m&&(_+="perspective("+m+") "),(r||n)&&(_+="translate("+r+"%, "+n+"%) "),(b||"0px"!==o||"0px"!==s||"0px"!==a)&&(_+="0px"!==a||b?"translate3d("+o+", "+s+", "+a+") ":"translate("+o+", "+s+") "),"0deg"!==h&&(_+="rotate("+h+") "),"0deg"!==l&&(_+="rotateY("+l+") "),"0deg"!==u&&(_+="rotateX("+u+") "),"0deg"===c&&"0deg"===d||(_+="skew("+c+", "+d+") "),1===p&&1===f||(_+="scale("+p+", "+f+") "),v.style[Ba]=_||"translate(0, 0)"},fh=function(t,e){var i,r,n,o,s,a=e||this,h=a.xPercent,l=a.yPercent,u=a.x,c=a.y,d=a.rotation,p=a.skewX,f=a.skewY,m=a.scaleX,g=a.scaleY,v=a.target,y=a.xOrigin,_=a.yOrigin,b=a.xOffset,x=a.yOffset,T=a.forceCSS,w=parseFloat(u),E=parseFloat(c);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=_a,p*=_a,i=Math.cos(d)*m,r=Math.sin(d)*m,n=Math.sin(d-p)*-g,o=Math.cos(d-p)*g,p&&(f*=_a,s=Math.tan(p-f),n*=s=Math.sqrt(1+s*s),o*=s,f&&(s=Math.tan(f),i*=s=Math.sqrt(1+s*s),r*=s)),i=Qn(i),r=Qn(r),n=Qn(n),o=Qn(o)):(i=m,o=g,r=n=0),(w&&!~(u+"").indexOf("px")||E&&!~(c+"").indexOf("px"))&&(w=Za(v,"x",u,"px"),E=Za(v,"y",c,"px")),(y||_||b||x)&&(w=Qn(w+y-(y*i+_*n)+b),E=Qn(E+_-(y*r+_*o)+x)),(h||l)&&(s=v.getBBox(),w=Qn(w+h/100*s.width),E=Qn(E+l/100*s.height)),s="matrix("+i+","+r+","+n+","+o+","+w+","+E+")",v.setAttribute("transform",s),T&&(v.style[Ba]=s)},mh=function(t,e,i,r,n,o){var s,a,h=gn(n),l=parseFloat(n)*(h&&~n.indexOf("rad")?ya:1),u=o?l*o:l-r,c=r+u+"deg";return h&&("short"===(s=n.split("_")[1])&&(u%=360)!==u%180&&(u+=u<0?360:-360),"cw"===s&&u<0?u=(u+36e9)%360-360*~~(u/360):"ccw"===s&&u>0&&(u=(u-36e9)%360-360*~~(u/360))),t._pt=a=new Hs(t._pt,e,i,r,u,Aa),a.e=c,a.u="deg",t._props.push(i),a},gh=function(t,e){for(var i in e)t[i]=e[i];return t},vh=function(t,e,i){var r,n,o,s,a,h,l,u=gh({},i._gsap),c=i.style;for(n in u.svg?(o=i.getAttribute("transform"),i.setAttribute("transform",""),c[Ba]=e,r=lh(i,1),qa(i,Ba),i.setAttribute("transform",o)):(o=getComputedStyle(i)[Ba],c[Ba]=e,r=lh(i,1),c[Ba]=o),va)(o=u[n])!==(s=r[n])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(n)<0&&(a=No(o)!==(l=No(s))?Za(i,n,o,l):parseFloat(o),h=parseFloat(s),t._pt=new Hs(t._pt,r,n,a,h-a,Sa),t._pt.u=l||0,t._props.push(n));gh(r,u)};Zn("padding,margin,Width,Radius",(function(t,e){var i="Top",r="Right",n="Bottom",o="Left",s=(e<3?[i,r,n,o]:[i+o,i+r,n+r,n+o]).map((function(i){return e<2?t+i:"border"+i+t}));ih[e>1?"border"+t:t]=function(t,e,i,r,n){var o,a;if(arguments.length<4)return o=s.map((function(e){return Qa(t,e,i)})),5===(a=o.join(" ")).split(o[0]).length?o[0]:a;o=(r+"").split(" "),a={},s.forEach((function(t,e){return a[t]=o[e]=o[e]||o[(e-1)/2|0]})),t.init(e,a,n)}}));var yh,_h,bh={name:"css",register:Ha,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,n){var o,s,a,h,l,u,c,d,p,f,m,g,v,y,_,b,x,T,w,E=this._props,S=t.style,A=i.vars.startAt;for(c in pa||Ha(),e)if("autoRound"!==c&&(s=e[c],!Hn[c]||!Es(c,e,i,r,t,n)))if(l=typeof s,u=ih[c],"function"===l&&(l=typeof(s=s.call(i,r,t,n))),"string"===l&&~s.indexOf("random(")&&(s=zo(s)),u)u(this,t,c,s,i)&&(_=1);else if("--"===c.substr(0,2))o=(getComputedStyle(t).getPropertyValue(c)+"").trim(),s+="",is.lastIndex=0,is.test(o)||(d=No(o),p=No(s)),p?d!==p&&(o=Za(t,c,o,p)+p):d&&(s+=d),this.add(S,"setProperty",o,s,r,n,0,0,c),E.push(c);else if("undefined"!==l){if(A&&c in A?(o="function"==typeof A[c]?A[c].call(i,r,t,n):A[c],c in an.units&&!No(o)&&(o+=an.units[c]),gn(o)&&~o.indexOf("random(")&&(o=zo(o)),"="===(o+"").charAt(1)&&(o=Qa(t,c))):o=Qa(t,c),h=parseFloat(o),(f="string"===l&&"="===s.charAt(1)?+(s.charAt(0)+"1"):0)&&(s=s.substr(2)),a=parseFloat(s),c in Ea&&("autoAlpha"===c&&(1===h&&"hidden"===Qa(t,"visibility")&&a&&(h=0),Ka(this,S,"visibility",h?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==c&&"transform"!==c&&~(c=Ea[c]).indexOf(",")&&(c=c.split(",")[0])),m=c in va)if(g||((v=t._gsap).renderTransform&&!e.parseTransform||lh(t,e.parseTransform),y=!1!==e.smoothOrigin&&v.smooth,(g=this._pt=new Hs(this._pt,S,Ba,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===c)this._pt=new Hs(this._pt,v,"scaleY",v.scaleY,(f?f*a:a-v.scaleY)||0),E.push("scaleY",c),c+="X";else{if("transformOrigin"===c){x=void 0,T=void 0,w=void 0,x=(b=s).split(" "),T=x[0],w=x[1]||"50%","top"!==T&&"bottom"!==T&&"left"!==w&&"right"!==w||(b=T,T=w,w=b),x[0]=th[T]||T,x[1]=th[w]||w,s=x.join(" "),v.svg?hh(t,s,0,y,0,this):((p=parseFloat(s.split(" ")[2])||0)!==v.zOrigin&&Ka(this,v,"zOrigin",v.zOrigin,p),Ka(this,S,c,uh(o),uh(s)));continue}if("svgOrigin"===c){hh(t,s,1,y,0,this);continue}if(c in nh){mh(this,v,c,h,s,f);continue}if("smoothOrigin"===c){Ka(this,v,"smooth",v.smooth,s);continue}if("force3D"===c){v[c]=s;continue}if("transform"===c){vh(this,s,t);continue}}else c in S||(c=ja(c)||c);if(m||(a||0===a)&&(h||0===h)&&!wa.test(s)&&c in S)a||(a=0),(d=(o+"").substr((h+"").length))!==(p=No(s)||(c in an.units?an.units[c]:d))&&(h=Za(t,c,o,p)),this._pt=new Hs(this._pt,m?v:S,c,h,f?f*a:a-h,m||"px"!==p&&"zIndex"!==c||!1===e.autoRound?Sa:Pa),this._pt.u=p||0,d!==p&&"%"!==p&&(this._pt.b=o,this._pt.r=Ra);else if(c in S)Ja.call(this,t,c,o,s);else{if(!(c in t)){Ln(c,s);continue}this.add(t,c,o||t[c],s,r,n)}E.push(c)}_&&js(this)},get:Qa,aliases:Ea,getSetter:function(t,e,i){var r=Ea[e];return r&&r.indexOf(",")<0&&(e=r),e in va&&e!==ka&&(t._gsap.x||Qa(t,"x"))?i&&ma===i?"scale"===e?Na:Da:(ma=i||{})&&("scale"===e?Fa:La):t.style&&!_n(t.style[e])?Ca:~e.indexOf("-")?Ma:Ns(t,e)},core:{_removeProperty:qa,_getMatrix:ah}};Ys.utils.checkPrefix=ja,_h=Zn("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(yh="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){va[t]=1})),Zn(yh,(function(t){an.units[t]="deg",nh[t]=1})),Ea[_h[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+yh,Zn("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Ea[e[1]]=_h[e[0]]})),Zn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){an.units[t]="px"})),Ys.registerPlugin(bh);var xh=Ys.registerPlugin(bh)||Ys,Th=(xh.core.Tween,i(5)),wh=i.n(Th);function Eh(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Sh extends Array{constructor(...t){super(...t),this.maxPos=0}static generateBezVals(t,e=1e3){let i=[];for(let r=0;r<e;r++){let n=t(r/e);i.push(n)}return i}static invBez(t,e){for(let i=0;i<t.length-1;i++){if(t[i]>=e)return i/t.length;if(e>t[i]&&e<=t[i+1])return t[i+1]==e?(i+1)/t.length:i/t.length}return 1}static fromProps(t){let e=new Sh;for(let i of t)e.addKeyframe(i.pos,ha.fromProps(i.frame));return e}toProps(){let t=[];for(let e of this)t.push({pos:e.pos,frame:e.frame.toProps()});return t}get faceDirection(){return!!this.motiv&&this.motiv.faceDirection}get easingFunction(){return this.motiv?this.motiv.easingFunction:"Power0"}get easingType(){return this.motiv?this.motiv.easingType:"easeIn"}get doEase(){return!!this.motiv&&this.motiv.doEase}pullKeyframe(t=this.maxPos){let e,i;if(0==this.length){let e=this.addKeyframe(0,new ha);i=0==t?e:this.addKeyframe(t,new ha)}else if(t>this.maxPos)e=this[this.length-1].frame,i=this.addKeyframe(t,ha.fromFrame(e));else if(t==this.maxPos)i=this[this.length-1];else for(let r=this.length-1;r>=0;r--){if(t==this[r].pos){i=this[r];break}if(e=null,i=null,!this[r].frame.isInvisible&&t>this[r].pos){for(let n=r+1;n<this.length;n++)if(!this[n].frame.isInvisible&&t<this[n].pos){const o=(t-this[r].pos)/(this[n].pos-this[r].pos);e=ha.interpolateFrames(this[r].frame,this[n].frame,o),i=this.addKeyframe(t,e);break}break}}return i}modifyKeyframe(t=this.maxPos,e=ha.zeroFrame()){let i=this.pullKeyframe(t);return i.frame.translate.x+=e.translate.x,i.frame.translate.y+=e.translate.y,i.frame.scale.x+=e.scale.x,i.frame.scale.y+=e.scale.y,i.frame.rotate+=e.rotate,i.frame.alpha+=e.alpha,i}addKeyframe(t=0,e,i,r){0==this.length&&0!=t&&(console.warn("the first keyframe MUST be at position 0, so we automatically set it to zero"),t=0);for(let e=0;e<this.length;e++)if(this[e].pos==t)return console.error("can't add keyframe at this position. It over laps with another keyframe");let n=0;for(let e=0;e<this.length;e++){this[e].pos<t&&(n=e+1)}let o={pos:t,frame:e,callback:i,range:r};return this.splice(n,0,o),o.handler=this,t>this.maxPos&&(this.maxPos=t),o}removeKeyframeByInd(t=0){let e=this[t];return this.splice(t,1),0==this.length?this.maxPos=0:this.maxPos=this[this.length-1].pos,e}removeKeyframe(t=this.maxPos){let e=this.getKeyframeIndByPos(t);if(-1!=e)return this.removeKeyframeByInd(e);console.warn("no keyframe exists at this position")}shiftKeyframeByInd(t=0,e=0,i=!0){if(!this[t])return console.warn("no keyframe exists at this index");let r=this[t].pos+e;for(let e=0;e<this.length;e++)if(e!=t&&this[e].pos==r)return console.error("can't shift keyframe at this position. It overlaps with another keyframe");return this[t].pos=r,i&&(0!=t&&this[t-1]&&this[t].pos<=this[t-1].pos&&this.sortKeyframes(),t!=this.length-1&&this[t+1]&&this[t].pos>=this[t+1].pos&&this.sortKeyframes()),this[t]}shiftKeyframe(t=this.maxPos,e=0){let i=this.getKeyframeIndByPos(t);if(-1!=i)return this.shiftKeyframeByInd(i,e);console.warn("no keyframe exists at this position")}bubbleKeyframe(t=this.maxPos,e=0){let i=this.getKeyframeIndByPos(t);if(-1!=i)return this.bubbleKeyframeByInd(i,e);console.warn("no keyframe exists at this position")}bubbleKeyframeByInd(t=0,e=0){if(e<0)for(let i=t;i<this.length;i++)for(let r=0;r<t;r++)if(this[r].pos==this[i].pos+e)return console.error("can't bubble keyframes at this position. It overlaps with another keyframe");for(let i=t;i<this.length;i++)this.shiftKeyframeByInd(i,e,!1);return this.sortKeyframes(),this[t]}scale(t=1){let e=[];for(let i=1;i<this.length;i++){let r=(this[i].pos-this[i-1].pos)*t;e.push(r)}for(let t=1;t<this.length;t++)this[t].pos=this[t-1].pos+e[t-1]}reduce(t=5){if(t>this.length/this.maxPos*1e3)return console.error("the reduce operation doesn't make sense if you're using a framerate greater than what you currently have");if(this.length<=1)return console.error("too little keyframes exist. Reduce operation doesn't make sense");let e=this.maxPos/1e3*t,i=[{pos:0,frame:ha.fromFrame(this[0].frame)}],r=this.maxPos/e;for(let t=r;t<=this.maxPos;t+=r)for(let e=0;e<this.length;e++){if(t==this[e].pos||e==this.length-1){i.push({pos:t,frame:ha.fromFrame(this[e].frame)});break}if(t>this[e].pos&&t<this[e+1].pos){const r=(t-this[e].pos)/(this[e+1].pos-this[e].pos);i.push({pos:t,frame:ha.interpolateFrames(this[e].frame,this[e+1].frame,r)});break}}this.splice(0,this.length);for(let t=0;t<i.length;t++)i[t].handler=this,this.push(i[t]);this.sortKeyframes()}sortKeyframes(){aa.sortBy(this,"pos",!0),0==this.length?this.maxPos=0:this.maxPos=this[this.length-1].pos}getKeyframeIndByPos(t=this.maxPos){let e=-1;for(let i=0;i<this.keyframes.length;i++){if(this.keyframes[i].pos==t){e=i;break}}return e}static translateKeyframesIntoTimeline(t,e){let i;if(void 0===t.staticX&&(t.staticX=0),void 0===t.staticY&&(t.staticY=0),void 0===t.staticRot&&(t.staticRot=0),e.length>1){i=new bs({paused:!1}),i.callbacks=[];const r=e[0].frame;i.set(t,{staticX:r.translate?r.translate.x:0,staticY:r.translate?r.translate.y:0,scaleX:r.scale?r.scale.x:1,scaleY:r.scale?r.scale.y:1,staticRot:r.rotate,alpha:r.alpha,ease:qs.easeIn,callback:t.birthCallback.bind(t)});let n,o,s,a,h=0,l=[],u=0;for(let r=0;r<e.length;r++){if(e[r].frame.isInvisible)continue;n=e[r].frame,o=e[r].pos,e[r].callback&&i.callbacks.push({execute:e[r].callback,pos:o,range:e[r].range,originOffset:e[r].originOffset});let c={};void 0!==n.translate&&null!=n.translate&&(c.staticX=n.translate.x,c.staticY=n.translate.y),void 0!==n.scale&&null!=n.scale&&(c.scaleX=n.scale.x,c.scaleY=n.scale.y),void 0!==n.rotate&&null!=n.rotate&&(e[r].handler.faceDirection?c.staticRot="face-dir":c.staticRot=n.rotate),void 0!==n.alpha&&null!=n.alpha&&(c.alpha=n.alpha),c.duration=(o-h)/1e3,l.push(c),h=o;let d=e[r].handler.easingFunction,p=e[r].handler.easingType;if(e[r].handler.doEase||(d="Power0"),0!=r&&(d!=s||p!=a)||r==e.length-1){let e=xh.to(t,{keyframes:l,ease:Sh.EasingFunctions[s][a]});i.add(e,u),u=e.totalDuration(),l=[]}s=d,a=p}i.seek(0)}else if(1==e.length){i=new bs({paused:!1});const r=e[0].frame;i.set(t,{staticX:r.translate.x,staticY:r.translate.y,scaleX:r.scale.x,scaleY:r.scale.y,staticRot:r.rotate,alpha:r.alpha,ease:qs.easeIn,callback:t.birthCallback.bind(t)})}if(i)return i}}Eh(Sh,"EasingFunctions",{Power0:qs,Power1:Ks,Power2:$s,Power3:Zs,Power4:Qs,Circ:na,Expo:ra,Sine:ia,Back:ta,Elastic:Js,Bounce:ea}),Eh(Sh,"EasingBeziers",{"Power0.none":wh()(0,0,0,0),"Power0.easeIn":wh()(0,0,0,0),"Power0.easeOut":wh()(0,0,0,0),"Power0.easeInOut":wh()(0,0,0,0),"Power1.easeIn":wh()(.11,0,.5,0),"Power1.easeOut":wh()(.5,1,.89,1),"Power1.easeInOut":wh()(.45,0,.55,1),"Power2.easeIn":wh()(.32,0,.67,0),"Power2.easeOut":wh()(.33,1,.68,1),"Power2.easeInOut":wh()(.65,0,.35,1),"Power3.easeIn":wh()(.5,0,.75,0),"Power3.easeOut":wh()(.25,1,.5,1),"Power3.easeInOut":wh()(.76,0,.24,1),"Power4.easeIn":wh()(.64,0,.78,0),"Power4.easeOut":wh()(.22,1,.36,1),"Power4.easeInOut":wh()(.83,0,.17,1),"Expo.easeIn":wh()(.7,0,.84,0),"Expo.easeOut":wh()(.16,1,.3,1),"Expo.easeInOut":wh()(.87,0,.13,1),"Circ.easeIn":wh()(.55,0,1,.45),"Circ.easeOut":wh()(0,.55,.45,1),"Circ.easeInOut":wh()(.85,0,.15,1),"Sine.easeIn":wh()(.12,0,.39,0),"Sine.easeOut":wh()(.61,1,.88,1),"Sine.easeInOut":wh()(.37,0,.63,1)}),Eh(Sh,"EasingBezValues",{"Power0.none":Sh.generateBezVals(wh()(0,0,0,0)),"Power0.easeIn":Sh.generateBezVals(wh()(0,0,0,0)),"Power0.easeOut":Sh.generateBezVals(wh()(0,0,0,0)),"Power0.easeInOut":Sh.generateBezVals(wh()(0,0,0,0)),"Power1.easeIn":Sh.generateBezVals(wh()(.11,0,.5,0)),"Power1.easeOut":Sh.generateBezVals(wh()(.5,1,.89,1)),"Power1.easeInOut":Sh.generateBezVals(wh()(.45,0,.55,1)),"Power2.easeIn":Sh.generateBezVals(wh()(.32,0,.67,0)),"Power2.easeOut":Sh.generateBezVals(wh()(.33,1,.68,1)),"Power2.easeInOut":Sh.generateBezVals(wh()(.65,0,.35,1)),"Power3.easeIn":Sh.generateBezVals(wh()(.5,0,.75,0)),"Power3.easeOut":Sh.generateBezVals(wh()(.25,1,.5,1)),"Power3.easeInOut":Sh.generateBezVals(wh()(.76,0,.24,1)),"Power4.easeIn":Sh.generateBezVals(wh()(.64,0,.78,0)),"Power4.easeOut":Sh.generateBezVals(wh()(.22,1,.36,1)),"Power4.easeInOut":Sh.generateBezVals(wh()(.83,0,.17,1)),"Expo.easeIn":Sh.generateBezVals(wh()(.7,0,.84,0)),"Expo.easeOut":Sh.generateBezVals(wh()(.16,1,.3,1)),"Expo.easeInOut":Sh.generateBezVals(wh()(.87,0,.13,1)),"Circ.easeIn":Sh.generateBezVals(wh()(.55,0,1,.45)),"Circ.easeOut":Sh.generateBezVals(wh()(0,.55,.45,1)),"Circ.easeInOut":Sh.generateBezVals(wh()(.85,0,.15,1)),"Sine.easeIn":Sh.generateBezVals(wh()(.12,0,.39,0)),"Sine.easeOut":Sh.generateBezVals(wh()(.61,1,.88,1)),"Sine.easeInOut":Sh.generateBezVals(wh()(.37,0,.63,1))});class Ah extends la{constructor(t=null,e=new Sh,i=!1,r="easeIn",n="Power0",o=!1){super(t),this.keyframes=e,this.keyframes.motiv=this,this.genre="static-motivator",this.type="static-motivator",this.faceDirection=i,this.easingType=r,this.easingFunction=n,this.doEase=o}get end(){return this.keyframes.length>0?this.keyframes[this.keyframes.length-1].pos:0}static fromProps(t,e){let i=Sh.fromProps(e.keyframes);return new Ah(t,i,e.faceDirection,e.easingType,e.easingFunction,e.doEase)}toProps(){return{keyframes:this.keyframes.toProps(),faceDirection:this.faceDirection,easingType:this.easingType,easingFunction:this.easingFunction,doEase:this.doEase}}get initPos_x(){return this.keyframes&&this.keyframes[0]?this.keyframes[0].frame.translate.x:0}set initPos_x(t){this.keyframes&&this.keyframes[0]&&(this.keyframes[0].frame.translate.x=t,this.updateCommitments())}get initPos_y(){return this.keyframes&&this.keyframes[0]?this.keyframes[0].frame.translate.y:0}set initPos_y(t){this.keyframes&&this.keyframes[0]&&(this.keyframes[0].frame.translate.y=t,this.updateCommitments())}pullKeyframe(t=this.keyframes.maxPos){let e=this.keyframes.pullKeyframe(t);return this.updateCommitments(),e}modifyKeyframe(t=this.keyframes.maxPos,e=ha.zeroFrame()){let i=this.keyframes.modifyKeyframe(t,e);return this.updateCommitments(),i}addKeyframe(t=0,e=new ha){let i=this.keyframes.addKeyframe(t,e);return this.updateCommitments(),i}removeKeyframeByInd(t=0){if(this.keyframes.length<=1)return console.warn("a static motivator must have at least one keyframe");let e=this.keyframes.removeKeyframeByInd(t);return this.updateCommitments(),e}removedKeyframe(t=this.keyframes.maxPos){let e=this.keyframes.removeKeyframe(t);return this.updateCommitments(),e}shiftKeyframeByInd(t=0,e=0,i=!0){let r=this.keyframes.shiftKeyframeByInd(t,e,i);return this.updateCommitments(),r}shiftKeyframe(t=this.keyframes.maxPos,e=0){let i=this.keyframes.shiftKeyframe(t,e);return this.updateCommitments(),i}bubbleKeyframe(t=this.keyframes.maxPos,e=0){let i=this.keyframes.bubbleKeyframe(t,e);return this.updateCommitments(),i}bubbleKeyframeByInd(t=0,e=0){let i=this.keyframes.bubbleKeyframeByInd(t,e);return this.updateCommitments(),i}scale(t=1){return this.keyframes.scale(t),this.updateCommitments(),this.keyframes}reduce(t=5){return this.keyframes.reduce(t),this.updateCommitments(),this.keyframes}}Ah.modifiers={scale:Ah.prototype.scale,reduce:Ah.prototype.reduce};class Rh extends _e{constructor(t=null,e=""){super(v.t.from(e)),this.world=t,this.world||console.warn("this Img was not assigned a world at creation"),this.file=e,this.world.faces.push(this);var i=e.lastIndexOf("/");this.name=e.substring(i+1),this.type="image",this.instances=[]}static fromProps(t,e){return new Rh(t,e.file)}toProps(){return{type:"image",file:this.file,name:this.name}}instantiate(){let t=new _e(this.texture);return t.owner=this,t}pointWithin(t,e){return aa.withinRect(t,e,this.x,this.y,this.width,this.height)}updateTexture(t){this.texture=t;for(let e of this.instances)e&&(e.texture=t)}}class Ph{static updateGraphics(t=!1,e=0,i=0){this.clear();const r=this.params;this.beginFill(r.fill),this.lineStyle(r.lineWidth,r.stroke),this.drawRect(-r.width/2+(t?e:0),-r.height/2+(t?i:0),r.width,r.height),this.endFill()}}class Ih{static updateGraphics(t=!1,e=0,i=0){this.clear();const r=this.params;this.beginFill(r.fill),this.lineStyle(r.lineWidth,r.stroke),this.drawCircle(t?e:0,t?i:0,r.radius),this.endFill()}}class Oh{static updateGraphics(t=!1,e=0,i=0){this.clear();const r=this.params;let n=t?e:0,o=t?i:0,s=r.radius;this.beginFill(r.fill),this.lineStyle(r.lineWidth,r.stroke);let a=r.rotation/180*Math.PI;this.moveTo(n+aa.lengthDirX(s,a),o+aa.lengthDirY(s,a));for(let t=1;t<r.edges;t++)a+=2*Math.PI/r.edges,this.lineTo(n+aa.lengthDirX(s,a),o+aa.lengthDirY(s,a));this.closePath(),this.endFill()}}class Ch{static updateGraphics(t=!1){this.clear();const e=this.params;if(e.points&&e.points.split){let i=e.points.split(",").map(t=>t.split(" "));Ch.updateGraphicsPoints.call(this,t,i)}}static updateGraphicsVertices(t=0,e=0){this.clear();const i=this.params;let r,n,o=this.params.vertices.map(t=>[t.x,t.y]),s=1/0,a=1/0,h=-1/0,l=-1/0;if(o.length>1){o=o.map(t=>[parseFloat(t[0]),parseFloat(t[1])]);for(let t=0;t<o.length;t++)o[t][0]<s&&(s=o[t][0]),o[t][0]>h&&(h=o[t][0]),o[t][1]<a&&(a=o[t][1]),o[t][1]>l&&(l=o[t][1]);r=h-s,n=l-a;let u,c=1,d=1;r>.8*t&&(c=.8*t/r),n>.8*e&&(d=.8*e/n),u=Math.min(c,d),this.lineStyle(i.lineWidth,i.stroke),this.moveTo(o[0][0]*u+t/2,o[0][1]*u+e/2);for(let i=1;i<o.length;i++)this.lineTo(o[i][0]*u+t/2,o[i][1]*u+e/2);this.closePath(),this.lineStyle(1,0),this.beginFill(14526976);for(let i=0;i<o.length;i++)this.drawRect(o[i][0]*u+t/2-2,o[i][1]*u+e/2-2,4,4);this.endFill()}}static updateGraphicsPoints(t=!1,e=[]){const i=this.params;let r,n,o=1/0,s=1/0,a=-1/0,h=-1/0;if(e.length>1){e=e.map(t=>[parseFloat(t[0]),parseFloat(t[1])]);for(let t=0;t<e.length;t++)e[t][0]<o&&(o=e[t][0]),e[t][0]>a&&(a=e[t][0]),e[t][1]<s&&(s=e[t][1]),e[t][1]>h&&(h=e[t][1]);r=a-o,n=h-s,i.fill&&this.beginFill(i.fill),this.lineStyle(i.lineWidth,i.stroke),this.moveTo(e[0][0]-(t?0:o+r/2),e[0][1]-(t?0:s+n/2));for(let i=1;i<e.length;i++)this.lineTo(e[i][0]-(t?0:o+r/2),e[i][1]-(t?0:s+n/2));this.closePath(),this.endFill(),this.width=r,this.height=n}}}class Mh{static updateGraphics(t=!1,e=0,i=0){this.clear();const r=this.params;this.beginFill(r.fill),this.lineStyle(r.lineWidth,r.stroke),this.drawStar(t?e:0,t?i:0,r.pointies,r.outerRadius,r.innerRadius,r.rotation/180*Math.PI),this.endFill()}}class Dh extends fe{constructor(t=null,e=null,i){if(null!=e)return Dh.make(t,e,i);super(),this.world=t,this.world||console.error("this Img was not assigned a world at creation"),this.type="shape",this.anchor={x:.5,y:.5},this.events=new sa.a,this.world.faces.push(this)}static fromProps(t,e){let i=Dh.make(t,e.shapeType,e.params);return i.name=e.name,i}toProps(){return{type:"shape",shapeType:this.shapeType,params:this.params,name:this.name}}duplicate(){}instantiate(){let t=new fe(this.geometry);return t.anchor={x:.5,y:.5},t.owner=this,t}pointWithin(t,e){let i=this.owner.getSize.call(this.owner);return aa.withinCircle(t,e,this.x,this.y,i)}collides(t){let e=this.owner.getSize.call(this.owner),i=t.owner.getSize.call(t.owner);return!(aa.pointDis(this.x,this.y,t.x,t.y)>e+i)}getSize(){let t;switch(this.shapeType){case"box":t=Math.max(this.params.width,this.params.height)/2;break;case"triangle":t=Math.max(this.params.base,this.params.altitude)/2;break;case"circle":case"fixed-polygon":t=this.params.radius;break;case"star":t=Math.max(this.params.outerRadius,this.params.innerRadius);break;case"free-polygon":t=Math.max(this.width,this.height)/2}return t}changeType(t){let e=this.getSize();switch(t){case"box":this.params.width=2*e,this.params.height=2*e;break;case"triangle":this.params.base=2*e,this.params.altitude=2*e,void 0===this.params.rotation&&(this.params.rotation=0);break;case"circle":this.params.radius=e;break;case"fixed-polygon":this.params.radius=e,void 0===this.params.edges&&(this.params.edges=3),void 0===this.params.rotation&&(this.params.rotation=0);break;case"star":this.params.outerRadius=e,this.params.innerRadius=e/2,void 0===this.params.pointies&&(this.params.pointies=5),void 0===this.params.rotation&&(this.params.rotation=0);break;case"free-polygon":void 0===this.params.points&&(this.params.points=[])}this.shapeType=t,this.updateGraphics()}updateGraphics(...t){switch(this.shapeType){case"box":Ph.updateGraphics.call(this,...t);break;case"triangle":(class{static updateGraphics(t=!1,e=0,i=0){this.clear();const r=this.params;this.beginFill(r.fill),this.lineStyle(r.lineWidth,r.stroke);let n=t?e:0,o=t?i:0,s=r.base,a=s/2,h=r.altitude,l={x:n-a,y:o-h/2},u={x:l.x+a,y:l.y+h},c={x:l.x+s,y:l.y},d=-90+r.rotation;l=aa.rotateAbout(l.x,l.y,n,o,d),u=aa.rotateAbout(u.x,u.y,n,o,d),c=aa.rotateAbout(c.x,c.y,n,o,d),this.moveTo(l.x,l.y),this.lineTo(u.x,u.y),this.lineTo(c.x,c.y),this.closePath(),this.endFill()}}).updateGraphics.call(this,...t);break;case"circle":Ih.updateGraphics.call(this,...t);break;case"fixed-polygon":Oh.updateGraphics.call(this,...t);break;case"star":Mh.updateGraphics.call(this,...t);break;case"free-polygon":Ch.updateGraphics.call(this,...t)}this.events&&this.events.emit("updated")}static makeUniqueName(t,e){let i=e,r=1;for(let e of t.faces)e.name&&e.name.includes(i)&&(i=`${i}(${r})`,r++);return i}static make(t,e="box",i){let r=new Dh(t);return r.shapeType=e,r.params=i,r.name=Dh.makeUniqueName(t,e),r.updateGraphics(),r}static box(t,e=64,i=64,r=8947848,n=3416848,o=2){let s=new Dh(t);return s.params={width:e,height:i,fill:r,stroke:n,lineWidth:o},s.name=Dh.makeUniqueName(t,"box"),s.shapeType="box",s.updateGraphics(),s}static triangle(t,e=32,i=48,r=0,n=8947848,o=3416848,s=2){let a=new Dh(t);return a.params={base:e,altitude:i,rotation:r,fill:n,stroke:o,lineWidth:s},a.name=Dh.makeUniqueName(t,"triangle"),a.shapeType="triangle",a.updateGraphics(),a}static circle(t,e=32,i=8947848,r=3416848,n=2){let o=new Dh(t);return o.params={radius:e,fill:i,stroke:r,lineWidth:n},o.name=Dh.makeUniqueName(t,"circle"),o.shapeType="circle",o.updateGraphics(),o}static fixedPolygon(t,e=32,i=3,r=0,n=8947848,o=3416848,s=2){let a=new Dh(t);return a.params={radius:e,edges:i,rotation:r,fill:n,stroke:o,lineWidth:s},a.name=Dh.makeUniqueName(t,"fixed-poly"),a.shapeType="fixed-polygon",a.updateGraphics(),a}static star(t,e=5,i=32,r=16,n=0,o=8947848,s=3416848,a=2){let h=new Dh(t);return h.params={pointies:e,outerRadius:i,innerRadius:r,rotation:n,fill:o,stroke:s,lineWidth:a},h.name=Dh.makeUniqueName(t,"star"),h.shapeType="star",h.updateGraphics(),h}static freePolygon(t,e="",i=8947848,r=3416848,n=2){let o=new Dh(t);return o.params={points:e,fill:i,stroke:r,lineWidth:n},o.name=Dh.makeUniqueName(t,"poly"),o.shapeType="free-polygon",o.updateGraphics(),o}}class Nh{static fromProps(t,e){let i=t.getFaceByName(e.name);return null!=i?i:"image"==e.type?Rh.fromProps(t,e):"shape"==e.type?Dh.fromProps(t,e):void 0}}var Fh=i(6),Lh=i.n(Fh);class Bh{constructor(t=null,e=null,i=!0,r=!1){this.name="unnamed-entity",this.world=t,this.type="entity",this.defaultFace=e,this.cheatFace=e,this.birthFrame=new ha,this.keyframes=null,this.timeline=null,this.visible=i,this.passThrough=r,this.timeOfDeath=1/0,this.become(!1),this.face=this.defaultFace,this.face.anchor||(this.face.anchor={x:.5,y:.5}),this.face.anchor.x=.5,this.face.anchor.y=.5}static fromProps(t,e){return new Bh(t,Nh.fromProps(e.face),e.visible,e.passThrough)}set name(t){"none"==t&&(t="_none"),this._name=t}get name(){return this._name}toProps(){return{face:this.defaultFace.toProps(),visible:this.visible,pathThrough:this.passThrough}}get isAlive(){return this.alive}get width(){return this.face?this.face.width:0}set width(t){this.face&&(this.face.width=t)}get height(){return this.face?this.face.height:0}set height(t){this.face&&(this.face.height=t)}get rad(){return Math.max(this.width,this.height)/2}get front(){let t=this.angle/180*Math.PI;return new Lh.a(this.x+aa.lengthDirX(this.width/2,t),this.y+aa.lengthDirY(this.width/2,t))}set front(t){let e=this.angle/180*Math.PI;this.x=t.x-aa.lengthDirX(this.width/2,e),this.y=t.y-aa.lengthDirY(this.width/2,e)}set faceName(t){let e=this.world.getFaceByName(t);this.face=e}get faceName(){return this.face.owner.name}set face(t){let e=t.instantiate();this.face&&this.world&&(this.world.viewport.removeChild(this.face),this.world.viewport.addChild(e)),e.x=this.x,e.y=this.y,e.overlapTechnique=this.overlapTechnique,this._face=e,this.visible=this._visible}get face(){return this._face}set defaultFace(t){this._defaultFace=t}get defaultFace(){return this._defaultFace}set cheatFace(t){this._cheatFace=t}get cheatFace(){return this._cheatFace}set xPrev(t){this._xPrev=t}get xPrev(){return void 0!==this._xPrev?this._xPrev:this.x}set yPrev(t){this._yPrev=t}get yPrev(){return void 0!==this._yPrev?this._yPrev:this.y}set x(t){this.x!=t&&this.face&&(this.xPrev=this.x,this.face.x=t)}get x(){return this.face?this.face.x:0}set y(t){this.y!=t&&this.face&&(this.yPrev=this.y,this.face.y=t)}get y(){return this.face?this.face.y:0}set scaleX(t){this.face&&(this.face.scale.x=t)}get scaleX(){return this.face?this.face.scale.x:1}set scaleY(t){this.face&&(this.face.scale.y=t)}get scaleY(){return this.face?this.face.scale.y:1}set angle(t){this.face&&(this.face.angle=t)}get angle(){return this.face?this.face.angle:0}get rotation(){return this.face?this.face.angle:0}set rotation(t){this.face&&(this.face.angle=t)}get texture(){}get faceType(){return this.defaultFace.constructor.name}get cheatFaceType(){return this.cheatFace?this.cheatFace.constructor.name:"none"}get alpha(){return this.face?this.face.alpha:0}set alpha(t){this.face&&(this.face.alpha=t)}onFaceUpdated(){}set visible(t){this._visible=t,this.alive&&(this.face.visible=this.visible)}get visible(){return void 0===this._visible&&(this._visible=!0),this._visible}become(t=!0){this.alive=t,this.alive?this.face&&(this.face.visible=this.visible):this.face&&(this.face.visible=!1)}getSize(){return this.face?this.face.owner.getSize():0}courseCollides(t,e){return this.collides(t)||aa.lineColCircle(this.x,this.y,this.front.x+aa.lengthDirX(e,this.vehicle.orientation/180*Math.PI),this.front.y+aa.lengthDirY(e,this.vehicle.orientation/180*Math.PI),t.x,t.y,t.getSize()).doCollide}pointWithin(t,e){return!!this.face&&this.face.owner.pointWithin.call(this.face,t,e)}collides(t){return!(!this.face||!t.face)&&this.face.owner.collides.call(this.face,t.face)}approachAngle(t,e=.1){(void 0===this.angle||isNaN(this.angle))&&(this.angle=0);let i=this.angle;for(;t<0;)t+=360;for(;i<0;)i+=360;for(;t>360;)t-=360;for(;i>360;)i-=360;let r=t-i,n=(360-Math.abs(r))*-Math.sign(r);this.angle+=(Math.abs(r)<180?r:n)*e}}class kh{constructor(){}static applyBehavior(t){switch(t.worldBoundariesBehavior){case kh.NONE:break;case kh.WRAP:t.x>t.world.width&&(t.x=0),t.y>t.world.height&&(t.y=0),t.x<0&&(t.x=t.world.width),t.y<0&&(t.y=t.world.height);break;case kh.BLOCK:t.front.x>t.world.width&&(t.front=new Lh.a(t.world.width,t.front.y),t.vehicle&&t.vehicle.velocity.multiplyScalar(0)),t.front.y>t.world.height&&(t.front=new Lh.a(t.front.x,t.world.height),t.vehicle&&t.vehicle.velocity.multiplyScalar(0)),t.front.x<0&&(t.front=new Lh.a(0,t.front.y),t.vehicle&&t.vehicle.velocity.multiplyScalar(0)),t.front.y<0&&(t.front=new Lh.a(t.front.x,0),t.vehicle&&t.vehicle.velocity.multiplyScalar(0))}}}kh.BLOCK="block",kh.WRAP="wrap",kh.NONE="none",kh.LIST=[kh.BLOCK,kh.WRAP,kh.NONE];class Uh{constructor(t=null,e=10,i=.7,r=.4,n=.3,o=!0){if(!t)return console.error("vehicle must be attached to an agent");this.agent=t,this.maxForce=10,this.maxSpeed=500,this.mass=e,this.inertia=i,this.angInertia=r,this.drag=n,this.faceDirection=o}static fromProps(t,e,i){return new Uh(e,i.mass,i.inertia,i.angInertia,i.drag,i.faceDirection)}toProps(){return{mass:this.mass,inertia:this.inertia,angInertia:this.angInertia,drag:this.drag,faceDirection:this.faceDirection}}init(){this.velocity=new Lh.a(0,0)}posIsFree(t){for(let e of this.agent.world.entities)if(e!=this.agent&&e.face&&e.alive&&e.pointWithin(t.x,t.y))return!1;return!0}steerForce(t,e=!0){let i=t.multiplyScalar(1/this.mass);void 0===this.velocity&&(this.velocity=new Lh.a(0,0));let r=this.velocity.magnitude();this.velocity.add(i);let n=this.velocity.magnitude()*(1-this.inertia)+r*this.inertia;this.velocity.normalize(),this.velocity.multiplyScalar(Math.min(this.maxSpeed,n));i.magnitude();n=this.velocity.magnitude();let o=n;if(o<.5&&(o=0),this.approachAngle(this.velocity.angleDeg(),5*o,this.angInertia),e){let t=new Lh.a(this.agent.front.x+aa.lengthDirX(n,this.orientation/180*Math.PI),this.agent.front.y+aa.lengthDirY(n,this.orientation/180*Math.PI));if(this.posIsFree(t))this.x+=aa.lengthDirX(n,this.orientation/180*Math.PI),this.y+=aa.lengthDirY(n,this.orientation/180*Math.PI);else{this.velocity.multiplyScalar(0);let t=1e3;for(;!this.posIsFree(new Lh.a(this.agent.front.x,this.agent.front.y))&&t-- >0;)this.x-=aa.lengthDirX(n,this.orientation/180*Math.PI),this.y-=aa.lengthDirY(n,this.orientation/180*Math.PI)}}this.velocity.multiplyScalar(1-this.drag),this.showDebugging(t.multiplyScalar(50))}approachAngle(t,e=1,i=.1){let r=this.orientation;for(;t<0;)t+=360;for(;r<0;)r+=360;for(;t>360;)t-=360;for(;r>360;)r-=360;let n=t-r,o=(360-Math.abs(n))*-Math.sign(n),s=(Math.abs(n)<180?n:o)*i;Math.abs(s)>e&&(s=e*Math.sign(s)),this.orientation+=s}showDebugging(t){if(!this.agent.world.showDebugging)return;const e=this.agent.world.debugGraphics;e.lineStyle(2,16711680),e.moveTo(this.agent.front.x,this.agent.front.y),e.lineTo(this.agent.front.x+t.x,this.agent.front.y+t.y)}extractState(){return{velocity:this.velocity.clone(),x:this.x,y:this.y,orientation:this.orientation}}assumeState(t){this.x=t.x,this.y=t.y,this.velocity=t.velocity.clone(),this.orientation=t.orientation}get orientation(){return void 0===this.orientationPrev&&(this.orientationPrev=this.agent.angle),this._orientation}set orientation(t){this.orientationPrev=this.orientation,this._orientation=t,this.faceDirection&&(this.agent.angle=t)}get faceDirection(){return this._faceDirection}set faceDirection(t){this._faceDirection=t}get x(){return this.agent.x}set x(t){this.agent.x=t}get y(){return this.agent.y}set y(t){this.agent.y=t}}class Gh extends Bh{constructor(t=null,e=null,i="unnamed-agent",r=kh.BLOCK,n=!0,o=!1){super(t,e,n,o),this.world=t,this.world||console.warn("this Agent was not assigned a world at creation"),this.name=i,this.type="agent",this.motivators=[],this.offsets=[],this.watchers=[],this.worldBoundariesBehavior=r||kh.BLOCK}static fromProps(t,e){let i=t.getAgentByName(e.name);if(null!=i)return i;{let i=new Gh(t,Nh.fromProps(t,e.face),e.name,e.worldBoundariesBehavior||kh.BLOCK,e.visible,e.passThrough);return e.cheatFace&&(i.cheatFace=Nh.fromProps(t,e.cheatFace)),e.vehicle&&(i.vehicle=Uh.fromProps(t,i,e.vehicle)),i}}toProps(){return{face:this.defaultFace.toProps(),cheatFace:this.cheatFace.toProps(),name:this.name,worldBoundariesBehavior:this.worldBoundariesBehavior,visible:this.visible,vehicle:this.vehicle.toProps(),passThrough:this.passThrough}}set vehicle(t){this._vehicle=t}get vehicle(){return void 0!==this._vehicle&&null!=this._vehicle||(this._vehicle=new Uh(this),this._vehicle.init()),this._vehicle}set worldBoundariesBehavior(t){this.worldBoundariesBehavior!=t&&(this._worldBoundariesBehavior=t,this._updateMotivators())}get worldBoundariesBehavior(){return this._worldBoundariesBehavior}get birthTime(){return this._birthTime}set birthTime(t){if(t<1&&(t=1),t!=this.birthTime)if(this.world){const e=t-this.birthTime;this.shift(e)}else console.warn("this Agent is not attached to a world")}set name(t){"none"==t&&(t="_none"),this._name=t,this.motivators&&this.motivators[0]&&this.motivators[0].name.includes("initMotiv")&&(this.motivators[0].name="initMotiv_"+this._name)}get name(){return this._name}onFaceUpdated(){if(this.motivators)for(let t of this.motivators)"physics-motivator"==t.genre&&t.updateBody(this)}resolveSuggestions(){if(this.isDuringInteractionMotiv)void 0!==this.interactX&&null!=this.interactX&&(this.x=this.interactX),void 0!==this.interactY&&null!=this.interactY&&(this.y=this.interactY),void 0!==this.interactRot&&null!=this.interactRot&&(this.rotation=this.interactRot);else if(this.isDuringPhysicsMotiv)this.x=this.physicsX,this.y=this.physicsY,this.rotation=this.physicsRot;else if(this.isDuringBehavioralMotiv);else if(this.x=this.staticX,this.y=this.staticY,"face-dir"==this.staticRot){let t=aa.pointDir(this.xPrev,this.yPrev,this.x,this.y),e=aa.pointDis(this.xPrev,this.yPrev,this.x,this.y);this.approachAngle(t/Math.PI*180,Math.min(1,e/10))}else this.rotation=this.staticRot}addMotivator(t,e,i=!1,r=this.motivators.length){void 0===e&&(e=0==this.motivators.length?0:this.offsets[this.offsets.length-1]+this.motivators[this.motivators.length-1].end+1),this.motivators.splice(r,0,i?la.fromMotivator(t):t),this.offsets.splice(r,0,e),i?t.name+="_copy":t.addCommitment(this),this._updateMotivators()}releaseCommitments(){for(;this.motivators.length;)this.removeMotivator(this.motivators.length-1,!0);this.become(!1)}removeMotivator(t=this.motivators.length-1,e=!1){aa.removeFromArr(this.motivators[t].commitments,this),this.motivators.splice(t,1),this.offsets.splice(t,1),e||this._updateMotivators()}shiftMotivator(t,e){this.offsets[t]+=e,this._updateMotivators()}garbageDump(){for(let t in this)this[t]=null}shift(t=0){this._updateMotivators(t)}setMotivators(t,e){for(let i=0;i<t.length;i++)this.addMotivator(t[i],e[i])}createDuplicate(){let t=this.name+"_dup",e=1;for(let i of this.world.agents)i.name.includes(this.name+"_dup")&&(t=`${this.name}_dup(${e})`,e++);const i=new Gh(this.world,this.face.owner,t);return this.world.addEntity(i,this.birthTime),i.setMotivators(this.motivators.map(t=>"static-motivator"==t.genre?t.createDuplicate():t),this.offsets.map(t=>t)),i}extractKeyframe(){return new ha({x:this.x,y:this.y},this.angle,{x:this.scaleX,y:this.scaleY})}getNearestKeyframe(t=0){let e=-1;for(let i=0;i<this.keyframes.length;i++){let r=this.keyframes[i];if(e=i,i>0&&r.pos>=t){e=i-1;break}}return-1==e?{pos:0,frame:this.birthFrame}:this.keyframes[e]}getKeyframeIndByPos(t=0){return Ah.prototype.getKeyframeIndByPos.call(this,t)}_updateMotivators(t=0){let e,i;e=this.world.entities.indexOf(this),i=this.world.agents.indexOf(this),-1==e&&-1==i||(this.world.removeEntity(this),this.world.addEntity(this,this.birthTime+t,e,i),this.world.tainted=!0)}_setMotivators(t,e){for(let t of this.watchers)t._collapse();this.keyframes=[];let i=!1;for(let r=0;r<t.length;r++){let n=t[r];if(n.duration&&!isFinite(n.duration)&&(i=!0),n instanceof Ah)this._addKeyframes(n.keyframes,e[r]);else if("functional-motivator"==n.genre||"behavioral-motivator"==n.genre){n.isInitialStatusChanged[n.commitments.indexOf(this)]=!0;let t=n.generateKeyframes(this);t&&t.length>0&&this._addKeyframes(t,e[r])}else if("physics-motivator"==n.genre){let t=n.generateKeyframes();this._addKeyframes(t,e[r])}else if("interaction-motivator"==n.genre){n.isInitialStatusChanged[n.commitments.indexOf(this)]=!0;let t=n.generateKeyframes(this);this._addKeyframes(t,e[r])}}this.motivators=t,this.offsets=e,this.timeline=Sh.translateKeyframesIntoTimeline(this,this.keyframes),this.timeline&&(this.timeline.isInfinite=i)}_addKeyframes(t,e){for(let i=0;i<t.length;i++){let r=Object.create(t[i]),n=r.pos+e;r.pos=n,r.originOffset=e;let o=0;for(let t=0;t<this.keyframes.length;t++){this.keyframes[t].pos<n&&(o=t+1)}this.keyframes.splice(o,0,r)}}birthCallback(){this.face=this.defaultFace}getCurMotiv(){let t=this.world.now-this.birthTime;for(let e=0;e<this.offsets.length;e++){let i=this.offsets[e],r=this.motivators[e];if(t>i&&t-i<r.duration)return r.name;if(i>t)break}return null}}var Xh=i(26);class jh extends Bh{constructor(t=null,e=null,i="unnamed-obj",r=1e3,n=0,o=0){super(t,e),this.world=t,this.world||console.warn("this Obj was not assigned a world at creation"),this.name=i,this.type="obj",this.watchers=[],this.keyframes=new Sh,this.keyframes.addKeyframe(0,new ha({x:n,y:o})),this.keyframes.addKeyframe(r,new ha({x:n,y:o})),this.staticX=n,this.staticY=o,this.staticRot=0,this.overlapTechnique="go-over",this.lifeDuration=r}static fromProps(t,e){let i=t.getEntityByName(e.name);return null!=i?i:new jh(t,Nh.fromProps(t,e.face),e.name,e.lifeDuration,e.x,e.y)}toProps(){return{face:this.face.owner.toProps(),name:this.name,lifeDuration:this.lifeDuration,x:this.x,y:this.y}}set overlapTechnique(t){this._overlapTechnique=t,this.face.overlapTechnique=t}get overlapTechnique(){return this._overlapTechnique}set propX(t){this.keyframes[0].frame.translate.x=t,this.keyframes[1].frame.translate.x=t,this._updateTimeline()}get propX(){return this.keyframes[0].frame.translate.x}set propY(t){this.keyframes[0].frame.translate.y=t,this.keyframes[1].frame.translate.y=t,this._updateTimeline()}get propY(){return this.keyframes[0].frame.translate.y}set propScX(t){this.keyframes[0].frame.scale.x=t,this.keyframes[1].frame.scale.x=t,this._updateTimeline()}get propScX(){return this.keyframes[0].frame.scale.x}set propScY(t){this.keyframes[0].frame.scale.y=t,this.keyframes[1].frame.scale.y=t,this._updateTimeline()}get propScY(){return this.keyframes[0].frame.scale.y}set propRot(t){this.keyframes[0].frame.rotate=t,this.keyframes[1].frame.rotate=t,this._updateTimeline()}get propRot(){return this.keyframes[0].frame.rotate}set propAlpha(t){this.keyframes[0].frame.alpha=t,this.keyframes[1].frame.alpha=t,this._updateTimeline()}get propAlpha(){return this.keyframes[0].frame.alpha}set birthTime(t){this._birthTime=t,this.deathTime=this.birthTime+this.lifeDuration}get birthTime(){return this._birthTime}set lifeDuration(t){this._lifeDuration=t,this.deathTime=this.birthTime+this.lifeDuration,this.keyframes[1].pos=this.lifeDuration,this.timeline=Sh.translateKeyframesIntoTimeline(this,this.keyframes)}get lifeDuration(){return this._lifeDuration}createDuplicate(){let t=this.name+"_dup",e=1;for(let i of this.world.objs)i.name.includes(this.name+"_dup")&&(t=`${this.name}_dup(${e})`,e++);const i=new jh(this.world,this.face.owner,t,this.lifeDuration,this.x,this.y);return this.world.addEntity(i,this.birthTime),i}_updateTimeline(){this.timeline=Sh.translateKeyframesIntoTimeline(this,this.keyframes),this.world.seek(this.world.now)}resolveSuggestions(){this.x=this.staticX,this.y=this.staticY,this.rotation=this.staticRot}}class Hh{constructor(t){this.world=t,this.state={events:[],timeStampStates:[]}}init(){this.state.timeStampStates=[],this.elapsedTime=0,this.lastLogTime=Date.now()}log(){this.elapsedTime=Date.now()-this.lastLogTime;let t={now:this.world.now,elapsedTime:this.elapsedTime,entityStates:[]};for(let e of this.world.entities){if(!e.alive)continue;let i={name:e.name,position:{x:e.x,y:e.y},rotation:e.angle,scale:{x:e.scaleX,y:e.scaleY},currentMotiv:e instanceof Gh?e.getCurMotiv():null};t.entityStates.push(i)}this.state.timeStampStates.push(t)}addEvent(t,e){this.elapsedTime=Date.now()-this.lastLogTime,e.elapsedTime=this.elapsedTime,this.state.events.push({type:t,data:e})}finish(){}exportState(){return JSON.stringify(this.state)}}class Vh{constructor(t=800,e=600,i=400,r=300){if(this.app=new y({forceCanvas:!0,width:i,height:r,antialias:!0}),this.app.view.style.display="block",this.app.renderer.backgroundColor=10855845,!window.studio){this.app.view.style.border="1px solid black";let t=document.body.getElementsByTagName("canvas");for(let e of t)document.body.removeChild(e)}this.stateLogger=new Hh(this),this.viewport=new Xh.a({screenWidth:i,screenHeight:r,worldWidth:t,worldHeight:e,forceCanvas:!0,interaction:this.app.renderer.plugins.interaction}),this.viewport.follow(null,{speed:this.camFollowSpeed,acceleration:this.camFollowAcc,radius:this.camFollowRadius}),this.viewport.clamp({direction:"all"}),this.followPlugin=this.viewport.plugins.get("follow"),this.followPlugin.pause(),this.app.stage.addChild(this.viewport),this.viewport.on("moved",()=>{window.studio&&window.studio.$refs["canvas-view"].resizeHandle(!1)}),this.viewport.on("clicked",t=>{if(!window.studio)return;let e=null;for(let i of this.entities)if(i.pointWithin(t.world.x,t.world.y)){i instanceof Gh?(window.bus.$emit("selectLeaf",{self:i.motivators[0],isManual:!0}),window.bus.$emit("semiSelectLeaf",{self:i,isManual:!0})):i instanceof jh&&window.bus.$emit("selectLeaf",{self:i,isManual:!0}),e=i;break}null==e&&window.bus.$emit("selectLeaf",{type:"world",name:"world",self:this,isManual:!0})}),this.debugGraphics=new fe,this.viewport.addChild(this.debugGraphics),this.cnv=this.app.view,document.body.appendChild(this.cnv),this.events=new sa.a,this.grandTimeline=new bs({paused:!0}),this.grandTimeline.infinites=0,this.grandTimeline.callbacks=[],this.grandTimeline.eventCallback("onUpdate",()=>{this.now=1e3*this.grandTimeline.time(),this.tainted=!0}),this.entities=[],this.motivators=[],this.agents=[],this.objs=[],this.faces=[],this.controllers=[],this.isPlaying=!1,this.showDebugging=!0,this.type="world",this.isSelected=!1,this.tainted=!1}static sortFunc(t,e){return"go-over"==e.overlapTechnique?1:"go-under"==e.overlapTechnique||"go-over"==t.overlapTechnique?-1:"go-under"==t.overlapTechnique?1:void 0}static fromProps(t){let e=new Vh(t.width,t.height,t.cameraWidth||t.width,t.cameraHeight||t.height);return e.backgroundColor=t.backgroundColor||10855845,e.cameraX=t.cameraX||0,e.cameraY=t.cameraY||0,e.cameraZoom=t.cameraZoom||1,e.camFollowSpeed=t.camFollowSpeed,e.camFollowAcc=t.camFollowAcc,e.camFollowRadius=t.camFollowRadius,e.showDebugging=t.showDebugging,e}toProps(){return{width:this.width,height:this.height,cameraWidth:this.cameraWidth,cameraHeight:this.cameraHeight,backgroundColor:this.backgroundColor,cameraX:this.cameraX,cameraY:this.cameraY,cameraZoom:this.cameraZoom,camFollowSpeed:this.camFollowSpeed,camFollowAcc:this.camFollowAcc,camFollowRadius:this.camFollowRadius,camFollowTarget:this.camFollowTarget?this.camFollowTarget.name:null,showDebugging:this.showDebugging}}get centerX(){return this.width/2}get centerY(){return this.height/2}set isPlaying(t){this._isPlaying=t,this.isPlaying?this.camFollowTarget=this._camFollowTarget:(this.followPlugin.pause(),this.cameraX=0,this.cameraY=0)}get isPlaying(){return this._isPlaying}set cameraX(t){this.viewport.moveCorner(t,this.cameraY),window.studio&&window.studio.$refs["canvas-view"].resizeHandle()}get cameraX(){return this.viewport.corner.x}set cameraY(t){this.viewport.moveCorner(this.cameraX,t),window.studio&&window.studio.$refs["canvas-view"].resizeHandle()}get cameraY(){return this.viewport.corner.y}set cameraWidth(t){this.viewport.screenWidth=t,this.app.renderer.resize(this.viewport.screenWidth,this.viewport.screenHeight),window.studio&&window.studio.$refs["canvas-view"].resizeHandle()}get cameraWidth(){return this.viewport.screenWidth}set cameraHeight(t){this.viewport.screenHeight=t,this.app.renderer.resize(this.viewport.screenWidth,this.viewport.screenHeight),window.studio&&window.studio.$refs["canvas-view"].resizeHandle()}get cameraHeight(){return this.viewport.screenHeight}get cameraZoom(){return this.viewport.scale.x}set cameraZoom(t){this.viewport.setZoom(t),window.studio&&window.studio.$refs["canvas-view"].resizeHandle()}set camFollowTarget(t){this._camFollowTarget=t,"none"!=t&&t?(this.followPlugin.target=t,this.isPlaying&&this.followPlugin.resume()):(this.followPlugin.target=null,this.followPlugin.pause()),window.studio&&window.studio.$refs["canvas-view"].resizeHandle()}get camFollowTarget(){return this._camFollowTarget}set camFollowSpeed(t){this._camFollowSpeed=t,this.followPlugin.options.speed=this._camFollowSpeed}get camFollowSpeed(){return void 0===this._camFollowSpeed&&(this._camFollowSpeed=10),this._camFollowSpeed}set camFollowAcc(t){this._camFollowAcc=t,this.followPlugin.options.acceleration=this._camFollowAcc}get camFollowAcc(){return void 0===this._camFollowAcc&&(this._camFollowAcc=0),this._camFollowAcc}set camFollowRadius(t){this._camFollowRadius=t,this.followPlugin.options.radius=this._camFollowRadius}get camFollowRadius(){return void 0===this._camFollowRadius&&(this._camFollowRadius=50),this._camFollowRadius}get width(){return this.viewport.worldWidth}get height(){return this.viewport.worldHeight}set width(t){this.viewport.worldWidth=t,window.studio&&window.studio.$refs["canvas-view"].resizeHandle()}set height(t){this.viewport.worldHeight=t,window.studio&&window.studio.$refs["canvas-view"].resizeHandle()}get end(){return 1e3*this.grandTimeline.totalDuration()-1}set backgroundColor(t){this.app.renderer.backgroundColor=t}get backgroundColor(){return this.app.renderer.backgroundColor}get deathTime(){return 1e3*this.grandTimeline.totalDuration()}destroy(){this.graph&&this.graph.destroy(),this.app.destroy(!0)}be(){this.now=0,this.seek(0),this.tainted=!0}putText(t){let e=new Ie(t,{fontFamily:"Arial Black",fontSize:100,fill:14540253,stroke:2302755,strokeThickness:15,align:"center"});for(this.viewport.addChild(e);e.width>this.width-100;)e.style.fontSize--;return e.x=this.width/2-e.width/2,e.y=this.height/2-e.height/2,e}postCollapse(){for(let t of this.agents)t.timeOfDeath=1/0}addEntity(t,e=1,i=-1,r=-1){e<1&&(e=1),this.viewport.addChild(t.face),t.world=this,-1==i?this.entities.push(t):this.entities.splice(i,0,t),t instanceof Gh&&(-1==r?this.agents.push(t):this.agents.splice(r,0,t),t._setMotivators(t.motivators,t.offsets)),t instanceof jh&&(-1==r?this.objs.push(t):this.objs.splice(r,0,t)),t.birthFrame=new ha,t._birthTime=e,t.timeline&&(t.timeline.paused(!1),this.grandTimeline.add(t.timeline,e/1e3),t.deathTime=e+1e3*t.timeline.totalDuration(),t.timeline&&t.timeline.isInfinite&&this.grandTimeline.infinites++),t instanceof jh&&(t.deathTime=t.birthTime+t.lifeDuration),this.seek(this.now),this.tainted=!0,this.stateLogger.state.events=[]}removeFace(t){let e=this.faces.indexOf(t);-1!=e&&this.faces.splice(e,1);for(let e of this.entities)e.face!=t&&e.face.owner!=t||(e instanceof Gh?e.face=this.getDefaultFace():e instanceof jh&&(e.face=this.getDefaultObjFace()))}removeEntity(t){-1!=this.entities.indexOf(t)&&aa.removeFromArr(this.entities,t),-1!=this.agents.indexOf(t)&&(aa.removeFromArr(this.agents,t),this.viewport.removeChild(t.face)),-1!=this.objs.indexOf(t)&&(aa.removeFromArr(this.objs,t),this.viewport.removeChild(t.face)),t.timeline&&(this.grandTimeline.remove(t.timeline),t.timeline&&t.timeline.isInfinite&&(this.grandTimeline.infinites--,this.grandTimeline.infinites<0&&(this.grandTimeline.infinites=0)))}removeMotivator(t){aa.removeFromArr(this.motivators,t)}deleteEntity(t){this.removeEntity(t),t.releaseCommitments&&t.releaseCommitments(),this.seek(this.now)}seek(t=1){t<1&&(t=1),t/1e3>this.grandTimeline.totalDuration()&&(t=1e3*this.grandTimeline.totalDuration()),this.canvasVue&&this.canvasVue.setTime(t),this.debugGraphics.clear();const e=this.now;this.now=t,this.grandTimeline.seek(t/1e3-.1),t<=1&&this.grandTimeline.seek(t/1e3+.1),this.grandTimeline.seek(t/1e3,!1);for(let i=0;i<this.entities.length;i++){let r=this.entities[i];if(r.isDuringInteractionMotiv=!1,r.isDuringPhysicsMotiv=!1,r.isDuringBehavioralMotiv=!1,r.timeline&&r.timeline.callbacks)for(let i of r.timeline.callbacks)i.range?t-r.birthTime-i.originOffset>=i.range[0]&&t-r.birthTime<=i.range[1]+i.originOffset&&i.execute(t-r.birthTime-i.originOffset):"number"==typeof i.pos&&i.pos<=t-r.birthTime&&i.pos>e-r.birthTime&&i.execute(t-r.birthTime);t<r.timeOfDeath&&t>r.birthTime-20&&(r.timeline&&r.timeline.isInfinite||t<r.deathTime+20)?r.alive||r.become(!0):r.alive&&r.become(!1)}for(let t=0;t<this.controllers.length;t++)this.controllers[t].updateTime(this.now);for(let t=0;t<this.entities.length;t++){this.entities[t].resolveSuggestions()}this.viewport.children.sort(Vh.sortFunc),this.events.emit("afterseek")}getMotivByName(t){for(let e of this.motivators)if(e.name==t)return e;return null}getAgentByName(t){for(let e of this.agents)if(e.name==t)return e;return null}getEntityByName(t){for(let e of this.entities)if(e.name==t)return e;return null}getFaceByName(t){for(let e of this.faces)if(e.name==t)return e;return null}getDefaultFace(){let t=this.getFaceByName("defaultAgentFace");if(t)return t;{let t=Dh.triangle(this,28,32,void 0,void 0,0,6);return t.name="defaultAgentFace",t}}getDefaultObjFace(){let t=this.getFaceByName("defaultObjFace");if(t)return t;{let t=Dh.circle(this,16,void 0,void 0,6);return t.name="defaultObjFace",t}}static makeUniqueName(t,e){let i=e,r=1;for(let e of t)e.name&&e.name.includes(i)&&(i=`${i}(${r})`,r++);return i}}var zh=i(11),Wh=i.n(zh),Yh=i(27);class qh{constructor(t=null,e=0,i=5e3){this.world=t,this.world||console.warn("this physics controller was not assigned a world at creation"),this.birthTime=e,this.duration=i,this.delta=10,this.states=[],this.reasonsToCollapse=0,this.type="physics-controller",this.name=Vh.makeUniqueName(this.world.controllers,"physics"),this.engine=Wh.a.Engine.create(),this.world.controllers.push(this),window.studio&&Yh.a.set(window.studio.$refs["canvas-view"],"controllers",t.controllers)}static fromProps(t,e){return new qh(t,e.birthTime,e.duration)}toProps(){return{birthTime:this.birthTime,duration:this.duration}}get birthTime(){return this._birthTime}set birthTime(t){this._birthTime=t,this.reasonsToCollapse++}collapse(){this.reasonsToCollapse=0,this.states=[];for(let t=0;t<=this.duration;t+=this.delta){Wh.a.Engine.update(this.engine,this.delta);let e=this._extractState(this.birthTime+t);this.states[t]=e}}addBody(t){Wh.a.World.add(this.engine.world,t),Wh.a.Sleeping.set(t,!0),this.reasonsToCollapse++}removeBody(t){Wh.a.World.remove(this.engine.world,t),this.reasonsToCollapse++}getState(t=0){let e=t-this.birthTime;e<0&&(e=0),e>this.duration&&(e=this.duration);let i=Math.round(e/this.delta)*this.delta;return this.states[i]}updateTime(t){if(this.reasonsToCollapse>0&&this.collapse(),t>=this.birthTime+100&&t<=this.birthTime+this.duration){if(this.renderer){let e=Math.round((t-this.birthTime)/this.delta)*this.delta,i=this.states[e];if(i){this.renderer.render(i);for(let t of i.bodies)t.agent&&(t.agent.isDuringPhysicsMotiv=!0,t.agent.physicsX=t.x,t.agent.physicsY=t.y,t.agent.physicsRot=t.angle/Math.PI*180)}}}else this.renderer&&(this.renderer.isActive=!1)}_extractState(t){let e={bodies:[]};for(let i of this.world.motivators)if("physics-motivator"==i.type&&i.agent&&i.agent.alive){const r=i.agent.offsets[i.agent.motivators.indexOf(i)]+i.agent.birthTime,n=r+i.end;if(t>=r&&t<=n){Wh.a.Sleeping.set(i.body,!1);const t=i.body;e.bodies.push({agent:i.agent,x:t.position.x,y:t.position.y,angle:t.angle-(t.initRotate||0),vertices:t.vertices.map(t=>({x:t.x,y:t.y}))})}else Wh.a.Sleeping.set(i.body,!0)}return e}}var Kh,$h,Zh,Qh=i(17),Jh=i.n(Qh);class tl{constructor(t="hello, world",e=.001){this.content=t,this.mutation_chance=e,this.copy_probabilitized=new Jh.a({p:this.mutation_chance,f:this.mutate},{p:1-this.mutation_chance,f:this.copy})}static fromProps(t){return new tl(t.content,t.mutation_chance)}toProps(){return{content:this.content,mutation_chance:this.mutation_chance}}makeCopy(){let t=this.copy_probabilitized(this.content);return new this.constructor(t,this.mutation_chance)}makeChild(t){return aa.choose(this.makeCopy(),t.makeCopy())}copy(t){return t}mutate(t){return t+"m"}}class el extends tl{constructor(t="",e=.001){super(t,e),this.mutate_probabilitized=new Jh.a({p:.999,f:this.mutate_point},{p:1e-4,f:this.add_point},{p:1e-4,f:this.remove_point})}static fromProps(t){return new el(t.content,t.mutation_chance)}toProps(){return{content:this.content,mutation_chance:this.mutation_chance}}copy(t){return t}mutate_point(t){let e=t[Math.floor(Math.random()*t.length)];e[0]+=aa.rndRange(-2,2),e[1]+=aa.rndRange(-2,2)}add_point(t){let e=Math.floor(Math.random()*(t.length-1)),i=t[e],r=t[e+1],n=[(i[0]+r[0])/2,(i[1]+r[1])/2];t.splice(e+1,0,n)}remove_point(t){if(t.length>3){let e=Math.floor(Math.random()*t.length);t.splice(e,1)}}mutate(t){let e=t.split(",").map(t=>t.split(" "));return e=e.map(t=>[parseFloat(t[0]),parseFloat(t[1])]),this.mutate_probabilitized(e),e=e.map(t=>t.join(" ")).join(","),e}makeChild(t){return super.makeChild(t)}static makeRandom(t){let e=[],i=aa.rndRange(-Math.PI,Math.PI);e[0]=[0,0];for(let t=1;t<aa.choose(3,4,5);t++)e[t]=[e[t-1][0]+aa.lengthDirX(aa.rndRange(10,20),i),e[t-1][1]+aa.lengthDirY(aa.rndRange(10,20),i)],i+=aa.rndRange(-Math.PI/4,Math.PI/4);return new el(e.map(t=>t.join(" ")).join(","),t)}}class il extends tl{constructor(t=8947848,e=.001){super(t,e)}static fromProps(t){return new il(t.content,t.mutation_chance)}toProps(){return{content:this.content,mutation_chance:this.mutation_chance}}mutate(t){let e=aa.dec2rgb(t),i=aa.choose(0,1,2);e[i]=aa.limit(e[i]+aa.iRndRange(-1,1),0,255);let r=e[0],n=e[1],o=e[2];return aa.rgb2dec(r,n,o)}makeChild(t){let e=aa.dec2rgb(this.content),i=aa.dec2rgb(t.content),r=(e[0]+i[0])/2,n=(e[1]+i[1])/2,o=(e[2]+i[2])/2;return new il(aa.rgb2dec(r,n,o))}static makeRandom(t){let e=(1<<24)*Math.random()|0;return new il(e,t)}}class rl extends tl{constructor(t=73,e=.001){super(t,e)}static fromProps(t){return new rl(t.content,t.mutation_chance)}toProps(){return{content:this.content,mutation_chance:this.mutation_chance}}mutate(t){let e=t/100;return t+aa.rndRange(-e,e)}makeChild(t){let e=(this.content+t.content)/2;return new rl(e,this.mutation_chance)}static makeRandom(t,e,i){let r=aa.rndRange(t,e);return new rl(r,i)}}class nl extends tl{constructor(t={}){super(t)}static fromProps(t){return new nl({pointsGene:el.fromProps(t.pointsGene),fillColorGene:il.fromProps(t.fillColorGene),strokeColorGene:il.fromProps(t.strokeColorGene),lineThicknessGene:rl.fromProps(t.lineThicknessGene)})}toProps(){return{pointsGene:this.content.pointsGene.toProps(),fillColorGene:this.content.fillColorGene.toProps(),strokeColorGene:this.content.strokeColorGene.toProps(),lineThicknessGene:this.content.lineThicknessGene.toProps()}}makeCopy(){return new nl({pointsGene:this.content.pointsGene.makeCopy(),fillColorGene:this.content.fillColorGene.makeCopy(),strokeColorGene:this.content.strokeColorGene.makeCopy(),lineThicknessGene:this.content.lineThicknessGene.makeCopy()})}makeChild(t){return new nl({pointsGene:this.content.pointsGene.makeChild(t.content.pointsGene),fillColorGene:this.content.fillColorGene.makeChild(t.content.fillColorGene),strokeColorGene:this.content.strokeColorGene.makeChild(t.content.strokeColorGene),lineThicknessGene:this.content.lineThicknessGene.makeChild(t.content.lineThicknessGene)})}toFreePolyProps(){return[this.content.pointsGene.content,this.content.fillColorGene.content,this.content.strokeColorGene.content,this.content.lineThicknessGene.content]}static makeRandom(t){return new nl({pointsGene:el.makeRandom(t),fillColorGene:il.makeRandom(t),strokeColorGene:il.makeRandom(t),lineThicknessGene:rl.makeRandom(1,5,t)})}}class ol extends tl{constructor(t={speed:new rl,angSpeed:new rl,angDis:new rl}){super(t)}static fromProps(t){return new ol(rl.fromProps(t.speed),rl.fromProps(t.angSpeed),rl.fromProps(t.angDis))}toProps(){return{speed:this.content.speed.toProps(),angSpeed:this.content.angSpeed.toProps(),angDis:this.content.angDis.toProps()}}makeCopy(){return new ol({speed:this.content.speed.makeCopy(),angSpeed:this.content.angSpeed.makeCopy(),angDis:this.content.angDis.makeCopy()})}toAttributes(){return{speed:this.content.speed.content,angSpeed:this.content.angSpeed.content,angDis:this.content.angDis.content}}makeChild(t){return new ol({speed:this.content.speed.makeChild(t.content.speed),angSpeed:this.content.angSpeed.makeChild(t.content.angSpeed),angDis:this.content.angDis.makeChild(t.content.angDis)})}static makeRandom(){return new ol({speed:new rl(aa.rndRange(1,5),.1),angSpeed:new rl(1,.01),angDis:new rl(1,.01)})}}class sl extends tl{constructor(t){super(t)}}class al extends tl{constructor(t){super(t)}}class hl extends tl{constructor(t={}){super(t)}static fromProps(t){let e=t.weightGenes.map(t=>rl.fromProps(t));return new hl({weightGenes:e})}toProps(){return{weightGenes:this.content.weightGenes.map(t=>t.toProps())}}makeCopy(){return new hl({weightGenes:this.content.weightGenes.map(t=>t.makeCopy())})}get weights(){return this.content.weightGenes.map(t=>t.content)}static makeRandom(t=100){let e=[];for(let i=0;i<t;i++){let t=new rl(aa.rndRange(0,1),.5);e.push(t)}return new hl({weightGenes:e})}static fromBrain(t){let e=t.network.getWeights().map(t=>new rl(t,.5));return new hl({weightGenes:e})}}class ll extends tl{constructor(t,e,i,r,n){super({face:t,act:e,sense:i,att:r,brain:n})}static fromProps(t){return new ll(nl.fromProps(t.face),al.fromProps(t.act),sl.fromProps(t.sense),ol.fromProps(t.att),hl.fromProps(t.brain))}toProps(){return{face:this.content.face.toProps(),act:this.content.act.toProps(),sense:this.content.sense.toProps(),att:this.content.att.toProps(),brain:this.content.brain.toProps()}}makeCopy(){return new ll(this.content.face.makeCopy(),this.content.act.makeCopy(),this.content.sense.makeCopy(),this.content.att.makeCopy(),this.content.brain.makeCopy())}makeChild(t){let e=this.makeCopy();return new ll(e.content.face.makeChild(t.content.face),e.content.act.makeChild(t.content.act),e.content.sense.makeChild(t.content.sense),e.content.att.makeChild(t.content.att),e.content.brain.makeChild(t.content.brain))}static makeRandom(){return new ll(nl.makeRandom(),new al,new sl,ol.makeRandom(),hl.makeRandom())}}class ul{constructor(t,e,i,r){this._x1=t,this._y1=e,this._x2=i,this._y2=r,this.bez=wh()(this.x1,this.y1,this.x2,this.y2)}set x1(t){this._x1=t,this.bez=wh()(this.x1,this.y1,this.x2,this.y2)}get x1(){return this._x1}set y1(t){this._y1=t,this.bez=wh()(this.x1,this.y1,this.x2,this.y2)}get y1(){return this._y1}set x2(t){this._x2=t,this.bez=wh()(this.x1,this.y1,this.x2,this.y2)}get x2(){return this._x2}set y2(t){this._y2=t,this.bez=wh()(this.x1,this.y1,this.x2,this.y2)}get y2(){return this._y2}}class cl extends la{constructor(t,e={}){super(t),this.isInitialStatusChanged=[],this.genre="functional-motivator",this.type="functional-motivator",this._generatedKeyframes=[],this.defineParams(this.constructor.ParameterDefinitions,e)}static getDefaultParams(){let t={};for(let e in this.ParameterDefinitions)t[e]=this.ParameterDefinitions[e].defaultVal;return t}defineParams(t,e,i){void 0!==this.params&&null!=this.params||(this.params={}),i&&(void 0!==this.params[i]&&null!=this.params[i]||(this.params[i]={}));for(let r in t){let n,o,s=t[r];if("composite"!=s.type){if(n=void 0!==e[r]?e[r]:s.defaultVal,"number"==s.type)o=Math.max(s.minVal,Math.min(s.maxVal,n));else if("bool"==s.type)o=n;else if("entity"==s.type)if(s.multiple){o=[];for(let t of n)t instanceof Bh?o.push(t):o.push(this.world.getEntityByName(t))}else o=n instanceof Bh?n:this.world.getEntityByName(n);else if("choice"==s.type)o=-1!=s.choices.indexOf(n)?n:s.defaultVal;else if("bezier"==s.type)o=n instanceof ul?n:new ul(n.x1,n.y1,n.x2,n.y2);else if("points"==s.type)o=Array.isArray(n)?n:s.defaultVal;else{if("face"!=s.type)throw"parameter definition must define the type of parameter";o=this.world.getFaceByName(n)?n:s.defaultVal}i?this.params[i][r]=o:this.params[r]=o,i?Object.defineProperty(this,i+"_"+r,{get(){return this.params[i][r]},set(t){this.params[i][r]=t,this.onParamChange(r,t),this.flagAllStatuses()}}):Object.defineProperty(this,r,{get(){return this.params[r]},set(t){this.params[r]=t,this.onParamChange(r,t),this.flagAllStatuses()}})}else{if(i)throw"parameter composition is only allowed at one level";this.defineParams(s.params,e[r]||{},r)}}}onParamChange(t,e){}static fromProps(t,e){return new this(t,e)}toProps(){let t=Object.assign({},this.params);t.duration=this.duration;for(let e in t){let i=t[e];i instanceof Bh&&(t[e]=i.name),i instanceof ul&&(t[e]={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}),Array.isArray(i)&&i.length&&i[0]instanceof Bh&&(t[e]=i.map(t=>t.name))}return t}regenerateKeyframes(t){const e=this.commitments.indexOf(t);if(-1==e)return console.warn("this agent is not one of this motivators commitments");this.isInitialStatusChanged[e]=!1}set duration(t){this._duration=t,this.flagAllStatuses()}get duration(){return this._duration}get length(){return this.duration}get end(){return this.duration}generateKeyframes(t,e){if(t&&t instanceof Gh){const i=this.commitments.indexOf(t);return-1==i?console.warn("this agent is not one of this motivators commitments"):((this.isInitialStatusChanged[i]||e)&&this.regenerateKeyframes(t,e),this._generatedKeyframes[i])}return console.warn("a functional motivator only makes sense in relation to an Agent")}flagAllStatuses(){for(let t=0;t<this.isInitialStatusChanged.length;t++)this.isInitialStatusChanged[t]=!0;this.updateCommitments()}}class dl extends cl{constructor(t=null,e=5e3,i={}){super(t,i),this.genre="behavioral-motivator",this.type="behavioral-motivator",this.duration=e,this.delta=30}static fromProps(t,e){return new this(t,e.duration,e)}init(){}update(t){}finish(){this.noCollapseForOnce=!0}static enforce(t){t.vehicle||(t.vehicle=new Uh(t),t.vehicle.init())}_extractState(t){return t.vehicle||(t.vehicle=new Uh(t),t.vehicle.init()),t.vehicle.extractState()}_applyState(t,e){t.vehicle||(t.vehicle=new Uh(t),t.vehicle.init()),t.isDuringBehavioralMotiv=!0,t.vehicle.assumeState(e)}_setState(t,e){if(e==this.now)return;let i=this.commitments.indexOf(t);e<0&&(e=0),e>this.duration&&(e=this.duration),e=Math.round(e/this.delta)*this.delta,this.now=e,this._states[i][e]||(e<=0?(this.init(t),this._states[i][0]={x:t.x,y:t.y,orientation:t.rotation,velocity:new Lh.a(0,0)}):(this._setState(t,e-this.delta),this.update(t),this._states[i][e]=this._extractState(t))),this._applyState(t,this._states[i][e])}_collapse(){this.world.postCollapse(),this._states=[];for(let t=0;t<this.commitments.length;t++)this._states[t]=[]}generateKeyframes(t){let e=super.generateKeyframes(t,this.noCollapseForOnce);return this.noCollapseForOnce=!1,e}regenerateKeyframes(t,e=!1){e||this._collapse();let i=this.commitments.indexOf(t),r=[],n={},o=this._states[i][this._states[i].length-1];o&&(n={translate:{x:o.x,y:o.y},rotate:o.orientation}),r.push({pos:0,frame:{},range:[0,this.duration],callback:this._setState.bind(this,t)}),r.push({pos:this.duration,frame:n,callback:this.finish.bind(this,t)});let s=new Sh;s.motiv=this;for(let t of r)s.addKeyframe(t.pos,t.frame,t.callback,t.range);this._generatedKeyframes[i]=s,this.isInitialStatusChanged[i]=!1}}class pl{constructor(t){this.weights=[],this.numInputs=t;for(var e=0;e<t+1;++e){var i=2*Math.random()-1;this.weights.push(i)}}}class fl{constructor(t,e){this.neurons=[];for(var i=0;i<t;++i){var r=new pl(e);this.neurons.push(r)}}get size(){return this.neurons.length}}class ml{constructor(t,e,i,r){this.numInputs=t,this.numOutputs=e,this.numHiddenLayers=i,this.numNeuronsPerHiddenLayer=r,this.bias=1,this.activationResponse=1,this.neuronLayers=[],this.createNetwork()}createNetwork(){if(this.numHiddenLayers>0){var t=new fl(this.numNeuronsPerHiddenLayer,this.numInputs);this.neuronLayers.push(t);for(var e=0;e<this.numHiddenLayers-1;++e){var i=new fl(this.numNeuronsPerHiddenLayer,this.numNeuronsPerHiddenLayer);this.neuronLayers.push(i)}let r=new fl(this.numOutputs,this.numNeuronsPerHiddenLayer);this.neuronLayers.push(r)}else{let t=new fl(this.numOutputs,this.numInputs);this.neuronLayers.push(t)}}activate(t){var e=[],i=0;if(t.length!=this.numInputs)return e;for(var r=!0,n=0;n<this.numHiddenLayers+1;++n){var o=this.neuronLayers[n];r?r=!1:t=(t=[]).concat(e),e=[],i=0;for(var s=0;s<o.neurons.length;++s){for(var a=o.neurons[s],h=0,l=0;l<a.numInputs;l++)h+=a.weights[l]*t[i],i++;h+=a.weights[a.weights.length-1]*this.bias,e.push(this.sigmoid(h,this.activationResponse)),i=0}}return e}sigmoid(t,e){return t}getWeights(){for(var t=[],e=0;e<this.numHiddenLayers+1;++e)for(var i=0;i<this.neuronLayers[e].neurons.length;++i)for(var r=0;r<this.neuronLayers[e].neurons[i].numInputs+1;++r)t.push(this.neuronLayers[e].neurons[i].weights[r]);return t}setWeights(t){for(var e=0,i=0;i<this.numHiddenLayers+1;++i)for(var r=0;r<this.neuronLayers[i].neurons.length;++r)for(var n=0;n<this.neuronLayers[i].neurons[r].numInputs+1;++n)this.neuronLayers[i].neurons[r].weights[n]=t[e++]}}class gl{constructor(){}utilize(t){return null}}class vl extends gl{constructor(t,e=120,i=300,r=20,n=!1){super(),this.world=t,this.world||console.error("this Sight was not assigned a world at creation"),this.fov=e,this.ros=i,this.sampleRate=r,this.size=2,this.sightables=this.world.entities}static fromProps(t,e){return new vl(t,e.fov,e.ros,e.sampleRate,e.showDebugging)}toProps(){return{fov:this.fov,ros:this.ros,sampleRate:this.sampleRate,showDebugging:this.showDebugging}}setSightables(t){this.sightables=t}parse(t){if(t&&t.length){let e=t[0];return[e.x/this.world.width,e.y/this.world.height]}return[0,0]}utilize(t){return this.cast(t)}cast(t){let e=[];const i=this.world.debugGraphics;this.fov,this.sampleRate;for(let r=-this.fov+t.angle;r<=this.fov+t.angle;r+=5){let n=this._castRay(t,t.front,r/180*Math.PI);n.seen&&e.push(n.seen),this.world.showDebugging&&(i.lineStyle(1),i.moveTo(t.front.x,t.front.y),i.lineTo(n.end.x,n.end.y))}return e}_castRay(t,e,i){let r={x:e.x,y:e.y},n=aa.lengthDirX(12,i),o=aa.lengthDirY(12,i);for(;aa.withinCircle(r.x,r.y,e.x,e.y,this.ros);){for(let e of this.sightables)if(e!=t&&e.alive&&e.pointWithin(r.x,r.y))return{seen:e,end:r};r.x+=n,r.y+=o}return{seen:null,end:r}}}class yl extends gl{constructor(t=3){super(),this.size=t}static fromProps(t){return new yl(t.size)}toProps(){return{size:this.size}}parse(t){return t}utilize(t){return[t.x/t.world.width,t.y/t.world.height,t.rotation/360]}}class _l extends gl{constructor(t=1){super(),this.size=t}static fromProps(t,e){return new _l(e.size)}toProps(){return{size:this.size}}parse(t){return t}utilize(t){return[(t.world.now-t.birthTime)/t.world.end]}}class bl extends gl{constructor(t=2){super(),this.size=t,this.contents=[];for(let e=0;e<t;e++)this.contents[e]=0}static fromProps(t){return new bl(t.size)}toProps(){return{size:this.size}}add(t){this.contents.push(t),this.contents.pop()}parse(t){return this.contents}utilize(){return this.contents}}class xl{constructor(){}get name(){return this.constructor.name}drive(t){}}class Tl extends xl{constructor(){super()}drive(t){let e=1,i=1;t.attributes&&(t.attributes.angSpeed&&(e=t.attributes.angSpeed),t.attributes.angDis&&(i=t.attributes.angDis)),t.angle-=e}}class wl extends xl{constructor(){super()}drive(t){let e=1,i=1;t.attributes&&(t.attributes.angSpeed&&(e=t.attributes.angSpeed),t.attributes.angDis&&(i=t.attributes.angDis)),t.angle+=e}}class El extends xl{constructor(){super()}drive(t){let e=4;t.attributes&&t.attributes.speed&&(e=t.attributes.speed),t.x+=aa.lengthDirX(e,t.angle/180*Math.PI),t.y+=aa.lengthDirY(e,t.angle/180*Math.PI)}}class Sl extends gl{constructor(t=3){super(),this.size=t}static fromProps(t){return new Sl(t.size)}toProps(){return{size:this.size}}parse(t){return t}utilize(){let t=[];for(let e=0;e<this.size;e++)t.push(Math.random());return t}}class Al extends dl{constructor(t,e=15e3,i){super(t,e),this.senses={spacialAwareness:new yl,sight:new vl(t),memory:new bl(1)},this.motors=[new wl,new El,new Tl],this.buildNetwork(5),null!=typeof i&&i instanceof hl?this.updateGenes(i):this.genes=hl.fromBrain(this)}static fromProps(t,e){return new Al(t,e.duration,hl.fromProps(e.genes))}toProps(){return{duration:this.duration,genes:this.genes.toProps()}}get weights(){return this.network.getWeights()}updateGenes(t){this.genes=t,this.updateWeights(t.weights)}buildNetwork(t=2){let e=0;for(let t of Object.values(this.senses))e+=t.size;this.input_layer_size=e,this.hidden_layer_size=t,this.output_layer_size=this.motors.length,this.network=new ml(this.input_layer_size,this.output_layer_size,0,this.hidden_layer_size);let i=this.network.getWeights().length;this.network.setWeights(this.makeInitialWeights(i))}updateWeights(t){this.network.setWeights(t),this.flagAllStatuses()}makeInitialWeights(t){let e=[];for(let i=0;i<t;i++)e.push(1+2*Math.random());return e}makeRandomWeights(t){let e=[];for(let i=0;i<t;i++)e.push(Math.random());return e}visualize(t){t.clear();let e=[{size:this.input_layer_size},...this.network.neuronLayers],i=0;for(let t=0;t<e.length;t++)e[t].size>i&&(i=e[t].size);let r=68*i/2,n=0;for(let i=0;i<e.length;i++){let o=e[i];for(let s=0;s<o.size;s++){t.beginFill(11184810),t.lineStyle(2,0);let a=74+150*i,h=50+r-68*o.size/2+24+68*s;if(t.drawCircle(a,h,24),t.endFill(),i<e.length-1)for(let o=0;o<e[i+1].size;o++){let s=this.weights[n++],l=74+150*(i+1),u=50+r-68*e[i+1].size/2+24+68*o;t.lineStyle(s+2,1184274,s),t.moveTo(a+24,h),t.lineTo(l-24,u)}}}}init(){}deriveInputs(t){let e=[],i=Object.values(this.senses).map(e=>e.parse(e.utilize(t)));for(let t of i)e.push(...t);return e}update(t){let e=this.deriveInputs(t),i=this.network.activate(e),r=aa.maxInd(i),n=this.motors[r];t.brain.senses.memory&&t.brain.senses.memory.add(r),n.drive(t)}}class Rl extends Gh{constructor(t,e){super(t,Dh.freePolygon(...e.content.face.toFreePolyProps()));let i=new Ah;i.name="spawnMotiv - "+this.name,i.addKeyframe(0,new ha),this.addMotivator(i,0),this.brain=new Al(this.world),this.addMotivator(this.brain,1),this.updateGenome(e)}static fromProps(t,e){let i=t.getAgentByName(e.name);return null!=i?i:new Rl(t,ll.fromProps(e.genome))}toProps(){return{genome:this.genome.toProps(),name:this.name}}setSpawnPos(t=0,e=0){this.motivators[0].keyframes[0].frame.translate.x=t,this.motivators[0].keyframes[0].frame.translate.y=e}updateGenome(t){this.genome=t,this.attributes=this.genome.content.att.toAttributes(),this.brain.updateGenes(this.genome.content.brain)}}class Pl{static makeFit(t){let e;return t instanceof Rh?e=Wh.a.Bodies.rectangle(0,0,t.width,t.height):t instanceof Dh&&("box"==t.shapeType?e=Wh.a.Bodies.rectangle(0,0,t.params.width,t.params.height):"circle"==t.shapeType?e=Wh.a.Bodies.circle(0,0,t.params.radius):"fixed-polygon"==t.shapeType?(e=Wh.a.Bodies.polygon(0,0,t.params.edges,t.params.radius),e.initRotate=t.params.rotation/180*Math.PI+Math.PI):"free-polygon"==t.shapeType||"triangle"==t.shapeType&&(e=Wh.a.Bodies.polygon(0,0,3,t.getSize()),e.initRotate=t.params.rotation/180*Math.PI+Math.PI)),e}}class Il{constructor(){}static getTopLine(t,e,i){return{x1:t.front.x+aa.lengthDirX(i,t.vehicle.orientation/180*Math.PI+Math.PI/2),y1:t.front.y+aa.lengthDirY(i,t.vehicle.orientation/180*Math.PI+Math.PI/2),x2:e.x+aa.lengthDirX(i,t.vehicle.orientation/180*Math.PI+Math.PI/2),y2:e.y+aa.lengthDirY(i,t.vehicle.orientation/180*Math.PI+Math.PI/2)}}static getBotLine(t,e,i){return{x1:t.front.x+aa.lengthDirX(i,t.vehicle.orientation/180*Math.PI-Math.PI/2),y1:t.front.y+aa.lengthDirY(i,t.vehicle.orientation/180*Math.PI-Math.PI/2),x2:e.x+aa.lengthDirX(i,t.vehicle.orientation/180*Math.PI-Math.PI/2),y2:e.y+aa.lengthDirY(i,t.vehicle.orientation/180*Math.PI-Math.PI/2)}}static getNextPos(t,e){return t.front.add(new Lh.a(aa.lengthDirX(e,t.vehicle.orientation/180*Math.PI),aa.lengthDirY(e,t.vehicle.orientation/180*Math.PI)))}static enforce(t,e,i=[],r=!1,n=[]){dl.enforce(t),kh.applyBehavior(t);let o,s,a,h,l,u=e.seperateDis,c=e.avoidForceFactor,d=e.speedImpactFactor,p=e.lookaheadDistance,f=Il.getNextPos(t,p),m=500,g=null,v=Math.max(t.width,t.height)/2,y={x1:t.front.x,y1:t.front.y,x2:f.x,y2:f.y},_=Il.getTopLine(t,f,v),b=Il.getBotLine(t,f,v);for(let e of r?n:t.world.entities){if(e==t)continue;if(!e.isAlive)continue;if(-1!=i.indexOf(e))continue;if(e==t.targetPrey)continue;if(!0===e.passThrough)continue;let r=Math.max(e.width,e.height)/2+u;if(o=aa.lineColCircle(_.x1,_.y1,_.x2,_.y2,e.x,e.y,r),s=aa.lineColCircle(y.x1,y.y1,y.x2,y.y2,e.x,e.y,r),a=aa.lineColCircle(b.x1,b.y1,b.x2,b.y2,e.x,e.y,r),o.doCollide||s.doCollide||a.doCollide){if(t.world.showDebugging){const e=t.world.debugGraphics;e.moveTo(t.x,t.y),e.lineStyle(2,o.doCollide?16711680:255),e.moveTo(_.x1,_.y1),e.lineTo(_.x2,_.y2),e.lineStyle(2,s.doCollide?16711680:255),e.moveTo(y.x1,y.y1),e.lineTo(y.x2,y.y2),e.lineStyle(2,a.doCollide?16711680:255),e.moveTo(b.x1,b.y1),e.lineTo(b.x2,b.y2)}let i=aa.pointDis(t.x,t.y,e.x,e.y);i<m+v+r&&(m=i,g=e,h=o,l=a)}}if(null!=g){if(t.world.showDebugging){const e=t.world.debugGraphics;e.moveTo(g.x,g.y),e.drawRect(g.x-(g.width+10+u)/2,g.y-(g.height+10+u)/2,g.width+u+10,g.height+u+10)}let e,i=t.vehicle.velocity.clone().normalize().multiplyScalar(t.vehicle.mass*((200-m)/50)**2);if(h.doCollide&&!l.doCollide)e=i.clone().rotateDeg(-90);else if(l.doCollide&&!h.doCollide)e=i.clone().rotateDeg(90);else{let r=15,n=t.vehicle.orientation,o=0,s=0,a=0,c=10;for(;0==o&&c-- >0;){for(let e=r;e<180;e+=r){o=0;for(let i of[-1,1]){t.vehicle.orientation=n+e*i;let r=Il.getNextPos(t,p+s),c=Il.getTopLine(t,r,t.rad),d=Il.getBotLine(t,r,t.rad),f=aa.lineColCircle(c.x1,c.y1,c.x2,c.y2,g.x,g.y,g.rad+Math.max(0,u-a)),m=aa.lineColCircle(d.x1,d.y1,d.x2,d.y2,g.x,g.y,g.rad+Math.max(0,u-a));h.doCollide&&l.doCollide?f.doCollide&&m.doCollide||(o=i):(f.doCollide||m.doCollide)&&(o=-i)}if(0!=o)break}s+=50,a+=20}if(t.vehicle.orientation=n,e=i.clone().rotateDeg(110*o),t.world.showDebugging){const i=t.world.debugGraphics;i.moveTo(t.front.x,t.front.y),i.lineTo(t.front.x+10*e.x,t.front.y+10*e.y)}}return e.multiplyScalar(c),t.vehicle.velocity.multiplyScalar(1-d),t.vehicle.steerForce(e,!0),t.wanderTarget&&g instanceof jh&&(t.wanderTarget=t.vehicle.velocity.clone().normalize().add(t.wanderTarget.normalize(),.5)),m}return 1/0}static showDebugCircle(t,e,i=16711680,r=10){if(!t.world.showDebugging)return;const n=t.world.debugGraphics;n.lineStyle(2,i),n.moveTo(e.x,e.y),n.arc(e.x,e.y,r,0,2*Math.PI),n.closePath()}}Zh={doAvoid:{type:"bool",defaultVal:!0,desc:"whether or not to avoid collision with obstacles"},seperateDis:{type:"number",label:"seperate dis",minVal:0,maxVal:200,defaultVal:20,units:"px",desc:"minimum distance that should be kept between this agent and obstacles"},avoidForceFactor:{type:"number",label:"avoid force",minVal:0,maxVal:1,defaultVal:.5,stepVal:.01,units:"%",desc:"scalar for the force in the opposite direction of collision direction"},speedImpactFactor:{type:"number",label:"speed impact",minVal:0,maxVal:1,defaultVal:.5,stepVal:.01,units:"%",desc:"scalar for the force that slows the agent down on collision"},lookaheadDistance:{type:"number",label:"lookahead dis",minVal:1,maxVal:500,defaultVal:50,units:"px",desc:"how far ahead to look for potential collisions"}},($h="ParameterDefinitions")in(Kh=Il)?Object.defineProperty(Kh,$h,{value:Zh,enumerable:!0,configurable:!0,writable:!0}):Kh[$h]=Zh;class Ol extends dl{constructor(...t){super(...t),this.type="arrive-behavioral-motivator"}static enforce(t,e){if(dl.enforce(t),kh.applyBehavior(t),!e.target)return;let i=new Lh.a(t.x,t.y),r=new Lh.a(e.target.x,e.target.y).subtract(i),n=r.magnitude();r=n<e.slowingRadius?r.normalize().multiplyScalar(e.maxSpeed*n/e.slowingRadius):r.normalize().multiplyScalar(e.maxSpeed),e.avoidParams.doAvoid?(Il.enforce.call(this,t,e.avoidParams,[e.target]),t.vehicle.steerForce(r)):t.vehicle.steerForce(r)}init(){this.target&&this.target.watchers.push(this)}update(t){super.update(t),this.target&&Ol.enforce(t,this.params)}finish(){super.finish(),this.target&&this.target.watchers&&aa.removeFromArr(this.target.watchers,this)}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Ol,"ParameterDefinitions",{target:{label:"target",type:"entity"},slowingRadius:{label:"slowing radius",type:"number",minVal:1,maxVal:1e3,defaultVal:100,units:"px",desc:"slow down when within this radius of the target"},maxSpeed:{label:"max speed",type:"number",minVal:1,maxVal:1e3,defaultVal:30,units:"px/s",desc:""},avoidParams:{type:"composite",label:"obstacle avoid parameters",params:Il.ParameterDefinitions}});class Cl extends Ol{constructor(...t){super(...t),this.type="seek-behavioral-motivator"}static enforce(t,e){e.slowingRadius=-1/0,super.enforce(t,e)}}function Ml(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Cl,"ParameterDefinitions",{target:{label:"target",type:"entity"},maxSpeed:{label:"max speed",type:"number",minVal:1,maxVal:1e3,defaultVal:30,units:"px/s"},avoidParams:{type:"composite",label:"obstacle avoid parameters",params:Il.ParameterDefinitions}});class Dl extends dl{constructor(...t){super(...t),this.type="wander-behavioral-motivator"}static enforce(t,e){dl.enforce(t),void 0===t.wanderTarget&&(t.wanderTarget=new Lh.a(0,0)),"function"==typeof this.wanderJitterFunc?this.wanderJitterFunc(t,e):t.wanderTarget.add(new Lh.a(aa.rndRange(-e.jitter,e.jitter),aa.rndRange(-e.jitter,e.jitter)));let i=t.wanderTarget.normalize();t.wanderTarget.multiplyScalar(e.radius),e.avoidEdges&&Dl.enforceAvoidEdges(t,e);let r=(new Lh.a).copy(t.wanderTarget).add(t.front).add(i.multiplyScalar(e.distance));if(e.target=r,Cl.enforce(t,e),t.world.showDebugging){const e=t.world.debugGraphics;e.lineStyle(2,0),e.moveTo(t.front.x,t.front.y),e.lineTo(r.x,r.y)}}static enforceAvoidEdges(t,e){let i=new Lh.a,r=aa.pointDis(t.x,t.y,t.world.centerX,t.world.centerY)/Math.sqrt(t.world.width**2+t.world.height**2);r=Dl._bez(r);let n,o=aa.pointDir(t.x,t.y,t.world.centerX,t.world.centerY),s=t.x,a=t.world.width-t.x,h=t.y,l=t.world.height-t.y,u=Math.min(s,a,h,l);switch(u){case s:n=0;break;case a:n=Math.PI;break;case h:n=Math.PI/2;break;case l:n=-Math.PI/2}o=n+aa.rndRange(-Math.PI/2,Math.PI/2),u<40&&(r*=20),i=new Lh.a(aa.lengthDirX(r,o),aa.lengthDirY(r,o)),i.multiplyScalar(e.radius*r),t.wanderTarget.multiplyScalar(1-r),t.wanderTarget.add(i)}init(t){t.wanderTarget=new Lh.a(0,0)}update(t){super.update(t),Dl.enforce.call(this,t,this.params)}flagAllStatuses(){super.flagAllStatuses();for(let t of this.commitments)Dl.reset.call(this,t)}static reset(t){t.wanderTarget=void 0}}Ml(Dl,"_bez",wh()(1,0,1,1)),Ml(Dl,"ParameterDefinitions",{radius:{type:"number",label:"radius",defaultVal:30,minVal:10,maxVal:200,units:"px",desc:"the radius of the imaginary wander circle"},distance:{type:"number",label:"distance",defaultVal:2,minVal:1,maxVal:200,units:"px",desc:"how far away the imaginary wander circle is from the agent's front"},jitter:{type:"number",label:"jitter",defaultVal:2,minVal:0,maxVal:50,units:"deg",desc:"the random fluctuation in the angle used to determine the new steering direction"},maxSpeed:{type:"number",label:"max speed",defaultVal:30,minVal:1,maxVal:500,units:"px/s",desc:"the movement speed of the agent while wandering"},avoidEdges:{type:"bool",label:"avoid edges",defaultVal:!0,desc:"should the agent avoid hitting the edges of the screen?"},avoidParams:{type:"composite",label:"obstacle avoid parameters",params:Il.ParameterDefinitions}});class Nl extends dl{constructor(...t){super(...t),this.type="basic-predator-behavioral-motivator"}static fromProps(t,e){if(e.params){for(let t in e.params)e[t]=e.params[t];e.params=[]}return super.fromProps(t,e)}init(t){t.targetPrey=null,this.preys.forEach(t=>{t&&t.watchers&&t.watchers.push(this)})}finish(){for(let t of this.preys)t&&t.watchers&&aa.removeFromArr(t.watchers,this)}flagAllStatuses(){super.flagAllStatuses();for(let t of this.commitments)Nl.reset.call(this,t),Dl.reset.call(this,t)}static reset(t){t.targetPrey=null,t.__subtlety=void 0,t.__subtletyChangeWait=void 0,t.__tarSubtlety=void 0}static enforce(t,e,i){if(dl.enforce(t),t.alive)if(t.targetPrey){let e=aa.pointDir(t.x,t.y,t.targetPrey.x,t.targetPrey.y),r=aa.pointDis(t.x,t.y,t.targetPrey.x,t.targetPrey.y);if(r>i.boredomDis)return t.world.stateLogger.addEvent("behavior-change",{agent:t.name,time:t.world.now,behavior:"chase ended by prey getting too far",prey:t.targetPrey.name}),void(t.targetPrey=null);if((void 0===t.__subtletyChangeWait||isNaN(t.__subtletyChangeWait))&&(t.__subtletyChangeWait=0),t.__subtletyChangeWait<=0){let e=t.__subtletyChangeWait,r=i.subtletyRandomness.bez(Math.random())*aa.choose(-1,1)*i.subtlety/180*Math.PI;t.__tarSubtlety=r,t.world.stateLogger.addEvent("subtlety-angle-changed",{agent:t.name,time:t.world.now,new_angle:r/Math.PI*180}),(void 0===t.__subtlety||null==t.__subtlety||isNaN(t.__subtlety))&&(t.__subtlety=r),t.__subtletyChangeWait=i.subtletyLag+e-this.delta}else t.__subtletyChangeWait-=this.delta;t.__subtlety=aa.easeInQuad(i.subtletyLag-t.__subtletyChangeWait,t.__subtlety,t.__tarSubtlety,i.subtletyLag);let n=e+t.__subtlety,o={x:t.x+aa.lengthDirX(r,n),y:t.y+aa.lengthDirY(r,n)};Ol.enforce(t,{target:o,maxSpeed:i.speed,slowingRadius:20,avoidParams:i.avoidParams}),t.targetPrey.pointWithin(t.front.x,t.front.y)&&(t.targetPrey.timeOfDeath=t.world.now,t.world.stateLogger.addEvent("behavior-change",{agent:t.name,time:t.world.now,behavior:"chase ended by kill",prey:t.targetPrey.name}),t.targetPrey=null)}else{i.wanderParams.avoidParams=i.avoidParams,Dl.enforce.call(this,t,i.wanderParams);let r=Nl.getTargetPeer.call(this,t,e,i.omnivision,i.preys);if(r){aa.pointDis(t.x,t.y,r.x,r.y)<i.boredomDis&&(t.targetPrey=r,t.world.stateLogger.addEvent("behavior-change",{agent:t.name,time:t.world.now,behavior:"begin chase",prey:r.name}))}}}static getTargetPeer(t,e,i,r){let n=null;if(i){let e=1/0;for(let i of r){if(i==t)continue;let r=aa.pointDis(t.x,t.y,i.x,i.y);r<e&&(e=r,n=i)}}else{let i=e.cast(t);for(let t of i)if(-1!=r.indexOf(t)){n=t;break}}return n}update(t){super.update(t),this.sight||(this.sight=new vl(this.world,this.params.fov,this.params.ros)),this.sight.fov=this.params.fov,this.sight.ros=this.params.ros,Nl.enforce.call(this,t,this.sight,this.params)}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Nl,"ParameterDefinitions",{preys:{type:"entity",multiple:!0,label:"preys",defaultVal:[],desc:"list of agents that can be targeted as preys"},fov:{type:"number",label:"field of view",minVal:1,maxVal:180,defaultVal:120,units:"deg",desc:"how wide or narrow the agent's vision is"},ros:{type:"number",label:"range of sight",minVal:1,maxVal:2e3,defaultVal:200,units:"px",desc:"how far can the agent see"},omnivision:{type:"bool",label:"omnivision",defaultVal:!1,desc:"not limited by sight"},speed:{type:"number",label:"speed",minVal:1,maxVal:1e3,defaultVal:30,units:"px/s",desc:"how fast the agent goes during the chase"},subtlety:{type:"number",label:"subtlety",minVal:0,maxVal:180,defaultVal:0,units:"deg",desc:"Rather than heading directly towards the prey, the predator can move anywhere within +- the angle of the chasing subtelty.  This makes for a more subtle chasing behavior, where a larger angle for chasing subtelty makes it not directly obvious that the predator is chasing the prey. "},subtletyLag:{type:"number",label:"subtlety lag",minVal:0,maxVal:500,defaultVal:30,units:"ms",desc:"The time interval between picking a new subtlety angle (also the time taken to ease into the chosen angle)"},subtletyRandomness:{type:"bezier",label:"subtlety randomness",defaultVal:new ul(0,1,1,1),desc:"used to control probability weight for picking subtlety angle"},boredomDis:{type:"number",label:"boredom dis",minVal:100,maxVal:1/0,defaultVal:250,units:"px",desc:"Even if there is a prey in sight, if it's far away enough, the predator will be too lazy to keep chasing it"},wanderParams:{type:"composite",label:"wander params",params:(t=>{let e=Object.assign({},t);return delete e.avoidParams,e})(Dl.ParameterDefinitions)},avoidParams:{type:"composite",label:"obstacle avoid params",params:Il.ParameterDefinitions}});class Fl extends dl{constructor(...t){super(...t),this.type="unboundFlee-behavioral-motivator"}static enforce(t,e){dl.enforce(t);let i=new Lh.a(t.x,t.y),r=new Lh.a(e.target.x,e.target.y);const n=e.criticalDisTarget||40,o=e.criticalDisWall||50;let s=i.subtract(r).normalize();s.multiplyScalar(100);let a=s,h=[],l=[];for(let e=-150;e<=150;e+=30){let i=s.clone().rotateDeg(e),a=new Lh.a(t.x+i.x,t.y+i.y);Fl.showDebugging(t,a,16776960,5);let u=aa.pointDis(a.x,a.y,r.x,r.y);u<n&&(u=-1/0);let c=Fl.getNearestWallDis(a,t.world);c<o||c<0?c=-1/0:c/=10;let d=0;t.fleeTarget&&(d=-Math.abs(t.vehicle.orientation-i.angleDeg()));let p=-aa.pointDis(a.x,a.y,t.world.centerX,t.world.centerY);c=Math.min(c,100),h.push([u,c,d,p]),l.push(i)}let u=[-1/0,-1/0,-1/0,-1/0];for(let t=0;t<4;t++)for(let e=0;e<h.length;e++)h[e][t]>u[t]&&(u[t]=h[e][t]);for(let t=0;t<4;t++)for(let e=0;e<h.length;e++)h[e][t]/=u[t];let c,d=-1/0,p=Math.max(e.targetFearCoef,e.wallAvoidCoef,e.changeReduceCoef,e.centerSeekCoef),f=e.targetFearCoef/p,m=e.wallAvoidCoef/p,g=e.changeReduceCoef/p,v=e.centerSeekCoef/p;for(let t=0;t<h.length;t++)c=h[t][0]*f+h[t][1]*m+h[t][2]*g+h[t][3]*v,c>d&&(d=c,a=l[t]);let y=new Lh.a(t.x+a.x,t.y+a.y);void 0===t.fleeTarget||null==t.fleeTarget?t.fleeTarget=y:(t.fleeTarget.multiplyScalar(.8),t.fleeTarget.add(y.clone().multiplyScalar(.2))),Fl.showDebugging(t,y,16776960,10,5),Fl.showDebugging(t,t.fleeTarget,65280),Cl.enforce(t,{target:t.fleeTarget,maxSpeed:e.maxSpeed,avoidParams:e.avoidParams})}static getNearestWallDis(t,e){let i=t.x,r=t.y,n=e.width-t.x,o=e.height-t.y;return Math.min(i,r,n,o)}static showDebugging(t,e,i=16711680,r=10,n=2){if(!t.world.showDebugging)return;const o=t.world.debugGraphics;o.lineStyle(n,i),o.moveTo(e.x,e.y),o.arc(e.x,e.y,r,0,2*Math.PI),o.closePath()}init(){this.target&&this.target.watchers.push(this)}update(t){super.update(t),this.target&&Fl.enforce(t,this.params)}finish(){this.target&&this.target.watchers&&aa.removeFromArr(this.target.watchers,this)}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Fl,"ParameterDefinitions",{target:{label:"target",type:"entity"},maxSpeed:{label:"max speed",type:"number",minVal:1,maxVal:1e3,defaultVal:30,units:"px/s",desc:"the maximum speed the agent reaches during the flee"},targetFearCoef:{label:"target fear",type:"number",minVal:0,maxVal:100,stepVal:1,defaultVal:5,units:"%",desc:"how important is it to flee the target"},wallAvoidCoef:{label:"wall avoid",type:"number",minVal:0,maxVal:100,stepVal:1,defaultVal:1,units:"%",desc:"how important is it to avoid hitting walls"},changeReduceCoef:{label:"change reduce",type:"number",minVal:0,maxVal:100,stepVal:1,defaultVal:1,units:"%",desc:"how important is it to avoid sudden changes in orientation"},centerSeekCoef:{label:"center seek",type:"number",minVal:0,maxVal:100,stepVal:1,defaultVal:1,units:"%",desc:"how important is it to steer away from screen edges and towards the center"},criticalDisTarget:{label:"crit target dis",type:"number",minVal:0,maxVal:500,stepVal:1,defaultVal:40,units:"px",desc:"if getting this close to target, avoiding target becomes priority"},criticalDisWall:{label:"crit wall dis",type:"number",minVal:0,maxVal:500,stepVal:1,defaultVal:50,units:"px",desc:"if getting this close to wall, avoiding wall becomes priority"},avoidParams:{type:"composite",label:"obstacle avoid parameters",params:Il.ParameterDefinitions}});class Ll extends dl{constructor(...t){super(...t),this.type="basic-prey-behavioral-motivator"}static fromProps(t,e){if(e.params){for(let t in e.params)e[t]=e.params[t];e.params=[]}return e.fleeParams||(e.fleeParams={}),void 0!==e.targetFear&&(e.fleeParams.targetFearCoef=e.targetFear),void 0!==e.centerSeek&&(e.fleeParams.centerSeekCoef=e.centerSeek),void 0!==e.changeReduce&&(e.fleeParams.changeReduceCoef=e.changeReduce),void 0!==e.wallAvoid&&(e.fleeParams.wallAvoidCoef=e.wallAvoid),super.fromProps(t,e)}init(){this.predators.forEach(t=>{t&&t.watchers&&t.watchers.push(this)})}finish(){for(let t of this.predators)t&&t.watchers&&aa.removeFromArr(t.watchers,this)}update(t){super.update(t),this.sight||(this.sight=new vl(this.world,this.params.fov,this.params.ros)),this.sight.fov=this.params.fov,this.sight.ros=this.params.ros,Ll.enforce.call(this,t,this.sight,this.params)}flagAllStatuses(){super.flagAllStatuses();for(let t of this.commitments)Ll.reset.call(this,t),Dl.reset.call(this,t)}static reset(t){t.targetPredator=null,t.__subtlety=void 0,t.__subtletyChangeWait=void 0,t.__tarSubtlety=void 0}static enforce(t,e,i){if(dl.enforce(t),t.alive)if(i.wanderParams.avoidParams=i.avoidParams,t.targetPredator){let e=aa.pointDir(t.x,t.y,t.targetPredator.x,t.targetPredator.y),r=aa.pointDis(t.x,t.y,t.targetPredator.x,t.targetPredator.y);if(r>i.safetyDis+50&&(t.world.stateLogger.addEvent("behavior-change",{agent:t.name,time:t.world.now,behavior:"flee ended by getting far enough",predator:t.targetPredator.name}),t.targetPredator=null,t.wanderTarget=new Lh.a(0,0)),(void 0===t.__subtletyChangeWait||isNaN(t.__subtletyChangeWait))&&(t.__subtletyChangeWait=0),t.__subtletyChangeWait<=0){let e=t.__subtletyChangeWait,r=i.subtletyRandomness.bez(Math.random())*aa.choose(-1,1)*i.subtlety/180*Math.PI;t.world.stateLogger.addEvent("subtlety-angle-changed",{agent:t.name,time:t.world.now,new_angle:r/Math.PI*180}),t.__tarSubtlety=r,(void 0===t.__subtlety||null==t.__subtlety||isNaN(t.__subtlety))&&(t.__subtlety=r),t.__subtletyChangeWait=i.subtletyLag+e-this.delta}else t.__subtletyChangeWait-=this.delta;t.__subtlety=aa.easeInQuad(i.subtletyLag-t.__subtletyChangeWait,t.__subtlety,t.__tarSubtlety,i.subtletyLag);let n=e+t.__subtlety,o=new Lh.a(t.x+aa.lengthDirX(r,n),t.y+aa.lengthDirY(r,n));i.fleeParams.avoidParams=i.avoidParams,i.fleeParams.target=o,Fl.enforce(t,i.fleeParams)}else{Dl.enforce.call(this,t,i.wanderParams);let r=Nl.getTargetPeer.call(this,t,e,i.omnivision,i.predators);if(r){aa.pointDis(t.x,t.y,r.x,r.y)<i.safetyDis&&(t.targetPredator=r,t.world.stateLogger.addEvent("behavior-change",{agent:t.name,time:t.world.now,behavior:"flee started",predator:t.targetPredator.name}))}}}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Ll,"ParameterDefinitions",{predators:{type:"entity",multiple:!0,label:"predators",defaultVal:[]},fov:{type:"number",label:"field of view",minVal:1,maxVal:180,defaultVal:120,units:"deg",desc:"how wide or narrow the agent's vision is"},ros:{type:"number",label:"range of sight",minVal:1,maxVal:2e3,defaultVal:200,units:"px",desc:"how far can the agent see"},omnivision:{type:"bool",label:"omnivision",defaultVal:!1,desc:"not limited by sight"},subtlety:{type:"number",label:"subtlety",minVal:0,maxVal:180,defaultVal:0,units:"deg",desc:"Rather than heading directly away from the predator, the prey can move anywhere within +- the angle of the fleeing subtelty.  This makes for a more subtle fleeing behavior, where a larger angle for fleeing subtelty makes it not directly obvious that the prey is fleeing the predator. "},subtletyLag:{type:"number",label:"subtlety lag",minVal:0,maxVal:500,defaultVal:30,units:"ms",desc:"The time interval between picking a new subtlety angle (also the time taken to ease into the chosen angle)"},subtletyRandomness:{type:"bezier",label:"subtlety randomness",defaultVal:new ul(0,1,1,1),desc:"used to control probability weight for picking subtlety angle"},safetyDis:{type:"number",label:"safety dis",minVal:100,maxVal:1/0,defaultVal:250,units:"px",desc:"Even if there is a predator in sight, if it's far away enough, the prey will feel safe enough to stop fleeing it"},wanderParams:{type:"composite",label:"wander params",params:(t=>{let e=Object.assign({},t);return delete e.avoidParams,e})(Dl.ParameterDefinitions)},avoidParams:{type:"composite",label:"obstacle avoid params",params:Il.ParameterDefinitions},fleeParams:{type:"composite",label:"flee params",params:(t=>{let e=Object.assign({},t);return delete e.avoidParams,delete e.target,e})(Fl.ParameterDefinitions)}});class Bl extends dl{constructor(...t){super(...t),this.type="flee-behavioral-motivator"}static enforce(t,e){if(dl.enforce(t),!e.target)return;let i=new Lh.a(t.x,t.y),r=new Lh.a(e.target.x,e.target.y),n=i.subtract(r).normalize().multiplyScalar(e.maxSpeed),o=new Lh.a(t.x+n.x,t.y+n.y),s=e.target;e.target=o,Cl.enforce(t,e),e.target=s}init(){this.target&&this.target.watchers.push(this)}update(t){super.update(t),Bl.enforce(t,this.params)}finish(){super.finish(),this.target&&this.target.watchers&&aa.removeFromArr(this.target.watchers,this)}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Bl,"ParameterDefinitions",{target:{label:"target",type:"entity"},maxSpeed:{label:"max speed",type:"number",minVal:1,maxVal:1e3,defaultVal:30,units:"px/s"},avoidParams:{type:"composite",label:"obstacle avoid parameters",params:Il.ParameterDefinitions}});class kl extends dl{constructor(...t){super(...t),this.type="pursue-behavioral-motivator"}static enforce(t,e){dl.enforce(t);let i=kl.predictNext(e.target),r=e.target;e.target=i,Ol.enforce(t,e),e.target=r}static predictNext(t){let e=new Lh.a(t.xPrev,t.yPrev),i=new Lh.a(t.x,t.y),r=new Lh.a(t.x,t.y).subtract(e);return i.add(r)}init(){this.target&&this.target.watchers.push(this)}update(t){super.update(t),this.target&&kl.enforce(t,this.params)}finish(){super.finish(),this.target&&this.target.watchers&&aa.removeFromArr(this.target.watchers,this)}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(kl,"ParameterDefinitions",{target:{label:"target",type:"entity"},maxSpeed:{label:"max speed",type:"number",minVal:1,maxVal:1e3,defaultVal:30,units:"px/s"},avoidParams:{type:"composite",label:"obstacle avoid parameters",params:Il.ParameterDefinitions}});class Ul extends dl{constructor(...t){super(...t),this.type="explore-behavioral-motivator"}static enforce(t,e){dl.enforce(t,e),Ul.calculateExploreGrid.call(this,t),Ul.seekTowardsUnexplored.call(this,t,e)}static calculateExploreGrid(t){for(let e=0,i=0;i<t.world.width;i+=this.params.exploreGridW,e++)for(let i=0,r=0;r<t.world.height;r+=this.params.exploreGridW,i++)aa.withinRect(t.front.x,t.front.y,e*this.params.exploreGridW,i*this.params.exploreGridW,this.params.exploreGridW,this.params.exploreGridW)&&(t.exploreGrid[e][i]++,t.curGridPos=[e,i]),this.showDebugRect(t,e,i)}static getGridPos(t,e){return[Math.floor(t.x/e.exploreGridW),Math.floor(t.y/e.exploreGridW)]}static seekTowardsUnexplored(t,e){if(t.unexploredTarget){if(t.unexploredTargetRealPos){aa.pointDis(t.x,t.y,t.unexploredTargetRealPos.x,t.unexploredTargetRealPos.y)<16&&(t.unexploredTargetDecisionMakeTimeout=0)}Fl.getNearestWallDis(t,t.world)<20&&(t.unexploredTargetDecisionMakeTimeout=0,t.unexploredTargetCoords&&(t.unexploredTarget.x>t.world.width||t.unexploredTarget.y>t.world.height)&&(t.exploreGrid[t.unexploredTargetCoords[0]][t.unexploredTargetCoords[1]]=1/0));let i={target:t.unexploredTarget,slowingRadius:16,maxSpeed:e.maxSpeed,avoidParams:e.avoidParams};Ol.enforce(t,i),this.showDebugPoint(t,t.unexploredTarget.x,t.unexploredTarget.y,16776960,1)}if(t.unexploredTargetDecisionMakeTimeout<=0){t.unexploredTargetDecisionMakeTimeout=e.decisionSharpness.decisionTimeout;let i=t.curGridPos,r=i[0],n=i[1],o=[[r,n-1],[r-1,n-1],[r,n-1],[r-1,n+1],[r,n+1],[r+1,n+1],[r+1,n],[r+1,n-1]];aa.shuffle(o);let s=i,a=1/0;for(let e of o){e[0]=Math.max(0,Math.min(t.exploreGrid.length-1,e[0])),e[1]=Math.max(0,Math.min(t.exploreGrid[0].length-1,e[1]));let i=t.exploreGrid[e[0]][e[1]];i<a&&(s=e,a=i)}this.showDebugRect(t,s[0],s[1],255,1);let h=s.map(t=>t*e.exploreGridW+e.exploreGridW/2),l=new Lh.a(h[0],h[1]);if(t.world.showDebugging){const e=t.world.debugGraphics;e.lineStyle(2,0),e.moveTo(t.front.x,t.front.y),e.lineTo(l.x,l.y)}t.unexploredTarget?(xh.to(t.unexploredTarget,{x:l.x,y:l.y,duration:e.decisionSharpness.easeTime/1e3,ease:`${e.decisionSharpness.easeFunc}.${e.decisionSharpness.easeType}`}),t.unexploredTargetRealPos=l):t.unexploredTarget=l,t.unexploredTargetCoords=s}else(void 0===t.unexploredTargetDecisionMakeTimeout||isNaN(t.unexploredTargetDecisionMakeTimeout))&&(t.unexploredTargetDecisionMakeTimeout=0),t.unexploredTargetDecisionMakeTimeout--}showDebugRect(t,e,i,r=16711680,n=-1){if(!t.world.showDebugging)return;const o=t.world.debugGraphics;let s=Math.min(1,t.exploreGrid[e][i]/100);o.beginFill(r,-1==n?s:n),o.drawRect(e*this.params.exploreGridW,i*this.params.exploreGridW,this.params.exploreGridW,this.params.exploreGridW),o.endFill()}showDebugPoint(t,e,i,r=16711680,n=1){if(!t.world.showDebugging)return;const o=t.world.debugGraphics;o.beginFill(r,n),o.moveTo(e,i),o.arc(e,i,15,0,2*Math.PI),o.closePath(),o.endFill()}init(t){t.exploreGrid=[],t.unexploredTargetDecisionMakeTimeout=0;for(let e=0,i=0;i<t.world.width;i+=this.params.exploreGridW,e++){t.exploreGrid[e]=[];for(let i=0,r=0;r<t.world.height;r+=this.params.exploreGridW,i++)t.exploreGrid[e][i]=0}t.curGridPos=[0,0]}update(t){super.update(t),Ul.enforce.call(this,t,this.params)}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Ul,"ParameterDefinitions",{exploreGridW:{type:"number",label:"explore gridW",defaultVal:64,stepVal:1,minVal:16,maxVal:512,desc:"the world is split into regions of this size which are rated for their exploration"},maxSpeed:{type:"number",label:"max speed",defaultVal:30,minVal:1,maxVal:500,units:"px/s",desc:"the movement speed of the agent while exploring"},decisionSharpness:{type:"composite",label:"decision sharpness",params:{decisionTimeout:{type:"number",label:"decision timeout",defaultVal:100,stepVal:1,minVal:0,maxVal:1e4,desc:"interval to wait before seeking a new position to explore"},easeTime:{type:"number",label:"ease time",defaultVal:1e3,stepVal:1,minVal:1,maxVal:1e4,desc:"time taken to ease into our newly decided target"},easeFunc:{type:"choice",label:"ease func",defaultVal:"Power0",choices:["Power0","Power1","Power2","Power3","Power4","Circ","Expo","Sine","Back","Elastic","Bounce"]},easeType:{type:"choice",label:"ease type",defaultVal:"easeIn",choices:["easeIn","easeOut","easeInOut"]}}},avoidParams:{type:"composite",label:"obstacle avoid",params:Il.ParameterDefinitions}});class Gl extends dl{constructor(...t){super(...t),this.type="playFight-behavioral-motivator"}static enforce(t,e){dl.enforce(t,e);let i=new Lh.a(t.x-t.xPrev,t.y-t.yPrev).multiplyScalar(2);if(t.sustainedSpeed||(t.sustainedSpeed=new Lh.a(0,0)),t.sustainedSpeed.magnitude()>0&&t.sustainedSpeed.multiplyScalar(.7),i&&t.sustainedSpeed.add(i),this.showDebugForces(t),t.knockoutTimeout>0)return t.knockoutTimeout-=this.delta,this.showDebugLoadingArc(t,t.knockoutTimeout/t.totalKnockoutTimeout),t.x=t.pushX+aa.lengthDirX(5,t.vehicle.orientation/180*Math.PI),t.y=t.pushY+aa.lengthDirY(5,t.vehicle.orientation/180*Math.PI),kh.applyBehavior(t),void(t.vehicle.orientation=t.pushRot);(void 0===t.chargeBreak||isNaN(t.chargeBreak))&&(t.chargeBreak=e.chargeParams.breakDuration+aa.rndRange(-e.chargeParams.durationRange,e.chargeParams.durationRange)),t.attackerToFlee&&t.attackerToFlee.chargeTarget!=t&&(t.attackerToFlee=null);let r=this.getTargetPeer(t,e);if(t.attackerToFlee&&t.attackerToFlee.chargeTarget==t){let i=Object.assign({},e.fleeParams);i.avoidParams=e.avoidParams;let r=aa.pointDis(t.x,t.y,t.attackerToFlee.x,t.attackerToFlee.y);i.maxSpeed=r<80?e.fleeParams.maxSpeed:e.fleeParams.maxSpeed/(r/40)+t.attackerToFlee.chargeSpeed/2,i.target=t.attackerToFlee,Fl.enforce(t,i)}else{if(t.chargeTarget){this.showDebugPoint(t,t.x+aa.lengthDirX(t.chargeSpeed,t.vehicle.orientation/180*Math.PI),t.y+aa.lengthDirY(t.chargeSpeed,t.vehicle.orientation/180*Math.PI));let i={target:t.chargeTarget,slowingRadius:10,maxSpeed:t.chargeSpeed,avoidParams:e.avoidParams};if(Ol.enforce(t,i),t.courseCollides(t.chargeTarget,5)){e.doFollowAfterCharge&&(t.wanderTarget=t.chargeTarget.wanderTarget.clone());let i=t.chargeTarget;t.chargeTarget=null;let r=t.sustainedSpeed.magnitude(),n=t.sustainedSpeed.direction();if(r>e.knockoutParams.requiredForce){i.totalKnockoutTimeout=e.knockoutParams.duration,i.knockoutTimeout=i.totalKnockoutTimeout;let t={x:i.x+aa.lengthDirX(r,n),y:i.y+aa.lengthDirY(r,n)},o=i.vehicle.orientation+aa.rndRange(0,180);i.pushX=i.x,i.pushY=i.y,i.pushRot=i.vehicle.orientation,xh.to(i,{pushX:t.x,pushY:t.y,pushRot:o,ease:e.knockoutParams.pushBackEaseFunc+"."+e.knockoutParams.pushBackEaseType,duration:e.knockoutParams.pushBackEaseDuration/1e3})}}}else{let i=Object.assign({},e.wanderParams);if(i.avoidParams=e.avoidParams,t.wanderSpeed&&(i.maxSpeed=t.wanderSpeed,t.wanderSpeed<e.wanderParams.maxSpeed&&(t.wanderSpeed+=1)),t.isFleeing=!1,r){if(aa.pointDis(t.x,t.y,r.x,r.y)<e.preferredSeperation&&r.wanderTarget){let i=r.wanderTarget.direction();if(t.wanderTarget){let n=t.wanderTarget.direction();if(Math.abs(n,i)<Math.PI/2){let i=Object.assign({},e.fleeParams);i.avoidParams=e.avoidParams;aa.pointDis(t.x,t.y,r.x,r.y);i.maxSpeed=e.fleeParams.maxSpeed,i.target=r,t.isFleeing=!0,Fl.enforce(t,i)}}}}t.isFleeing||Dl.enforce.call(this,t,i)}if(r&&r.chargeTarget==t&&e.doFleeWhenAttacked)return void(t.attackerToFlee=r);t.chargeBreak<=0?r&&(t.courseCollides(r,5)?t.chargeTarget=null:(t.chargeTw&&t.chargeTw.pause(),t.chargeTarget=r,t.chargeSpeed=e.wanderParams.maxSpeed,t.chargeTw=xh.to(t,{duration:e.chargeParams.easeTime/1e3,chargeSpeed:e.chargeParams.chargeSpeed,ease:`${e.chargeParams.easeFunc}.${e.chargeParams.easeType}`})),void 0===t.repeatedStabsLeft&&(t.repeatedStabsLeft=e.chargeParams.repeatedStabs),t.repeatedStabsLeft<=0?(t.chargeBreak=e.chargeParams.breakDuration+aa.rndRange(-e.chargeParams.durationRange,e.chargeParams.durationRange),t.repeatedStabsLeft=e.chargeParams.repeatedStabs):(t.repeatedStabsLeft--,t.chargeBreak=e.chargeParams.stabDuration)):null==t.chargeTarget&&(t.chargeBreak-=this.delta)}}getTargetPeer(t,e){let i=null;if(e.omnivision){let r=1/0;for(let n of e.peers){if(n==t)continue;let e=aa.pointDis(t.x,t.y,n.x,n.y);e<r&&(r=e,i=n)}}else{let r=this.sight.cast(t);for(let t of r)if(-1!=e.peers.indexOf(t)){i=t;break}}return i}showDebugLoadingArc(t,e){if(!t.world.showDebugging)return;const i=t.world.debugGraphics;let r=t.x+30,n=t.y-30;i.beginFill("grey",.5),i.lineStyle(2,0),i.moveTo(r,n),i.arc(r,n,25,0,e*Math.PI*2),i.closePath(),i.endFill()}showDebugForces(t){if(!t.world.showDebugging)return;const e=t.world.debugGraphics;e.lineStyle(3,65280),e.moveTo(t.front.x,t.front.y);let i=t.sustainedSpeed.clone().multiplyScalar(1);e.lineTo(t.front.x+i.x,t.front.y+i.y)}showDebugRect(t,e,i,r=16711680,n=-1){if(!t.world.showDebugging)return;const o=t.world.debugGraphics;let s=Math.min(1,t.exploreGrid[e][i]/100);o.beginFill(r,-1==n?s:n),o.drawRect(e*this.params.exploreGridW,i*this.params.exploreGridW,this.params.exploreGridW,this.params.exploreGridW),o.endFill()}showDebugPoint(t,e,i,r=16711680,n=1){if(!t.world.showDebugging)return;const o=t.world.debugGraphics;o.beginFill(r,n),o.moveTo(e,i),o.arc(e,i,15,0,2*Math.PI),o.closePath(),o.endFill()}init(t){t.exploreGrid=[],t.chargeBreak=0;for(let e=0,i=0;i<t.world.width;i+=this.params.exploreGridW,e++){t.exploreGrid[e]=[];for(let i=0,r=0;r<t.world.height;r+=this.params.exploreGridW,i++)t.exploreGrid[e][i]=0}t.curGridPos=[0,0],t.chargeBreak=this.params.chargeParams.breakDuration+aa.rndRange(-this.params.chargeParams.durationRange,this.params.chargeParams.durationRange),t.knockoutTimeout=0,t.repeatedStabsLeft=0}update(t){super.update(t),this.sight||(this.sight=new vl(this.world,this.params.fov,this.params.ros)),this.sight.fov=this.params.fov,this.sight.ros=this.params.ros,Gl.enforce.call(this,t,this.params)}flagAllStatuses(){super.flagAllStatuses();for(let t of this.commitments)Gl.reset.call(this,t),Dl.reset.call(this,t)}static reset(t){t.sustainedSpeed=void 0,t.knockoutTimeout=void 0,t.totalKnockoutTimeout=void 0,t.pushX=void 0,t.pushY=void 0,t.pushRot=void 0,t.chargeBreak=void 0,t.attackerToFlee=void 0,t.chargeTarget=void 0,t.chargeSpeed=void 0,t.isFlleeing=void 0,t.chargeTw&&t.chargeTw.stop&&t.chargeTw.stop(),t.chargeTw=void 0,t.repeatedStabsLeft=void 0}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Gl,"ParameterDefinitions",{exploreGridW:{type:"number",label:"explore gridW",defaultVal:64,stepVal:1,minVal:16,maxVal:512,desc:"the world is split into regions of this size which are rated for their exploration"},peers:{type:"entity",multiple:!0,label:"peers",defaultVal:[]},fov:{type:"number",label:"field of view",minVal:1,maxVal:180,defaultVal:120,units:"deg",desc:"how wide or narrow the agent's vision is"},ros:{type:"number",label:"range of sight",minVal:1,maxVal:2e3,defaultVal:200,units:"px",desc:"how far can the agent see"},omnivision:{type:"bool",label:"omnivision",defaultVal:!1,desc:"not limited by sight"},doFleeWhenAttacked:{type:"bool",label:"flee when attacked?",defaultVal:!1,desc:"if charged at, should I flee away from the attacker?"},doFollowAfterCharge:{type:"bool",label:"follow after charge?",defaultVal:!1,desc:"after charge is completed, should I go wander the same way as the target I just attacked?"},preferredSeperation:{type:"number",label:"preferred seperation",defaultVal:100,minVal:0,maxVal:5e3,desc:"when not charging or fleeing, we should like to steer away from peer to keep this distances at least"},knockoutParams:{type:"composite",label:"knockout params",params:{duration:{type:"number",label:"knockout duration",defaultVal:2e3,minVal:0,maxVal:5e3,desc:"after being hit by an attacker, how long should I be knocked out (0 for no knockout)"},requiredForce:{type:"number",label:"required force",defaultVal:70,minVal:0,maxVal:500,desc:"minimum force required by attacker to knock this agent out"},pushBackEaseDuration:{type:"number",label:"ease duration",defaultVal:1500,minVal:0,maxVal:5e3,desc:"time taken to be be pushed back by knocking blow"},pushBackEaseFunc:{type:"choice",label:"ease func",defaultVal:"Back",choices:["Power0","Power1","Power2","Power3","Power4","Circ","Expo","Sine","Back","Elastic","Bounce"]},pushBackEaseType:{type:"choice",label:"ease type",defaultVal:"easeOut",choices:["easeIn","easeOut","easeInOut"]}}},chargeParams:{type:"composite",label:"charge params",params:{chargeSpeed:{type:"number",label:"charge speed",defaultVal:100,stepVal:1,minVal:1,maxVal:1e4,desc:"speed of the agent while charging at peer"},repeatedStabs:{type:"number",label:"repeated stabs",defaultVal:0,minVal:0,maxVal:50,desc:"after charging at peer, keep attacking this number of times"},stabDuration:{type:"number",label:"stab duration",defaultVal:200,minVal:100,maxVal:600,desc:"time between each additional stab"},breakDuration:{type:"number",label:"break duration",defaultVal:1e3,stepVal:1,minVal:0,maxVal:1e4,desc:"interval to wait before charing at your peer again"},durationRange:{type:"number",label:"duration range",defaultVal:500,stepVal:1,minVal:0,maxVal:1e4,desc:"to avoid break duration being constant, this is a +- give or take value to add to break duration each time"},easeTime:{type:"number",label:"ease time",defaultVal:1e3,stepVal:1,minVal:1,maxVal:1e4,desc:"time taken to ease into our newly decided target"},easeFunc:{type:"choice",label:"ease func",defaultVal:"Power0",choices:["Power0","Power1","Power2","Power3","Power4","Circ","Expo","Sine","Back","Elastic","Bounce"]},easeType:{type:"choice",label:"ease type",defaultVal:"easeIn",choices:["easeIn","easeOut","easeInOut"]}}},fleeParams:{type:"composite",label:"flee params",params:(t=>{let e=Object.assign({},t);return delete e.avoidParams,delete e.target,e})(Fl.ParameterDefinitions)},wanderParams:{type:"composite",label:"wander params",params:(t=>{let e=Object.assign({},t);return delete e.avoidParams,e})(Dl.ParameterDefinitions)},avoidParams:{type:"composite",label:"obstacle avoid",params:Il.ParameterDefinitions}});class Xl extends dl{constructor(...t){super(...t),this.type="mimic-behavioral-motivator"}init(t){this.params.target&&this.params.target.watchers&&(this.params.target.watchers.push(this),t.mimicTarget=this.params.target,t.mimicTarget.posPrev={x:this.target.x,y:this.target.y})}static enforce(t,e){if(t.vehicle.velocity=new Lh.a(0,0),e.target&&e.target instanceof Gh&&e.target.vehicle&&e.target.vehicle.velocity){const i=new Lh.a(e.target.x-e.target.posPrev.x,e.target.y-e.target.posPrev.y);e.target.posPrev={x:e.target.x,y:e.target.y};const r=i.clone().rotate(e.offsetAngle/180*Math.PI);if(t.x+=r.x,t.y+=r.y,t.world.showDebugging){const e=t.world.debugGraphics;e.lineStyle(2,0),e.moveTo(t.front.x,t.front.y),e.lineTo(t.front.x+i.x,t.front.y+i.y),e.lineStyle(2,16711680),e.moveTo(t.front.x,t.front.y),e.lineTo(t.front.x+r.x,t.front.y+r.y)}}t.vehicle.steerForce(new Lh.a(0,0))}onParamChange(t,e){"target"==t&&this.takeTargetDuration(e)}takeTargetDuration(t){if(t&&t instanceof Gh&&t.timeline){let e=1e3*t.timeline.totalDuration();this.duration!=e&&(this.duration=e)}}flagAllStatuses(){super.flagAllStatuses(),this.params&&this.params.sameDurationAsTarget&&this.takeTargetDuration(this.params.target)}update(t){super.update(t),Xl.enforce(t,this.params)}finish(){super.finish(),this.target&&this.target.watchers&&aa.removeFromArr(this.target.watchers,this)}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Xl,"ParameterDefinitions",{target:{label:"target",type:"entity"},offsetAngle:{label:"offset angle",type:"number",defaultVal:0,minVal:0,maxVal:360},sameDurationAsTarget:{label:"same duration",type:"bool",defaultVal:!0,desc:"should have the same duration as the target agent"}});class jl extends dl{constructor(...t){super(...t),this.type="mirror-behavioral-motivator"}static enforce(t,e){if(e.target&&e.target instanceof Gh){let i=jl.mirror(e.target);t.x=i.x,t.y=i.y,t.scaleX=i.scaleX,t.scaleY=i.scaleY;let r=aa.pointDir(t.xPrev,t.yPrev,t.x,t.y),n=aa.pointDis(t.xPrev,t.yPrev,t.x,t.y);t.vehicle.approachAngle(r/Math.PI*180,Math.min(1,n/10))}}static mirror(t){return{x:t.world.centerX+(t.world.centerX-t.x),y:t.world.centerY+(t.world.centerY-t.y),scaleX:t.scaleX,scaleY:t.scaleY,rotation:180-t.rotation}}onParamChange(t,e){"target"==t&&this.takeTargetDuration(e)}takeTargetDuration(t){if(t&&t instanceof Gh&&t.timeline){let e=1e3*t.timeline.totalDuration();this.duration!=e&&(this.duration=e)}}flagAllStatuses(){super.flagAllStatuses(),this.params&&this.params.sameDurationAsTarget&&this.takeTargetDuration(this.params.target)}init(){this.target&&this.target.watchers&&this.target.watchers.push(this)}update(t){super.update(t),jl.enforce(t,this.params)}finish(){super.finish(),this.target&&this.target.watchers&&aa.removeFromArr(this.target.watchers,this)}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(jl,"ParameterDefinitions",{target:{label:"target",type:"entity"},sameDurationAsTarget:{label:"same duration",type:"bool",defaultVal:!0,desc:"should have the same duration as the target agent"}});class Hl{static draggablify(t){t.pos1=0,t.pos2=0,t.pos3=0,t.pos4=0,document.getElementById(t.id+"header")?document.getElementById(t.id+"header").onmousedown=Hl.dragMouseDown.bind(t):t.onmousedown=Hl.dragMouseDown.bind(t)}static dragMouseDown(t){(t=t||window.event).preventDefault(),this.pos3=t.clientX,this.pos4=t.clientY,document.onmouseup=Hl.closeDragElement.bind(this),document.onmousemove=Hl.elementDrag.bind(this)}static elementDrag(t){(t=t||window.event).preventDefault(),this.pos1=this.pos3-t.clientX,this.pos2=this.pos4-t.clientY,this.pos3=t.clientX,this.pos4=t.clientY,this.style.top=this.offsetTop-this.pos2+"px",this.style.left=this.offsetLeft-this.pos1+"px"}static closeDragElement(){document.onmouseup=null,document.onmousemove=null}}class Vl{constructor(t=820,e=150,i=200,r=200,n="Plot",o=!0,s=null){if(o)this.cnv=s;else{this.div=document.createElement("div"),this.div.setAttribute("id","plotterCnv"),this.div.style.position="absolute",this.div.style.left=t+"px",this.div.style.top=e+"px",Hl.draggablify(this.div);const o=30;this.cnv=document.createElement("canvas"),this.cnv.setAttribute("width",i),this.cnv.setAttribute("height",r-o),this.cnv.style.position="absolute",this.cnv.style.left="0px",this.cnv.style.top=o+"px",this.cnv.style.outline="2px solid #3051CE",this.cnv.setAttribute("draggable",!0),this.div.appendChild(this.cnv),this.header=document.createElement("div"),this.header.style.backgroundColor="#3086FF",this.header.style.position="absolute",this.header.style.width=i+"px",this.header.style.height=o+"px",this.header.style.outline="2px solid #3051CE",this.div.appendChild(this.header),this.title=document.createElement("p"),this.title.style.padding="5px",this.title.innerText=n,this.title.style.color="white",this.title.style.fontFamily="sans-serif",this.title.style.fontSize="20px",this.title.style.fontWeight="bold",this.header.appendChild(this.title),document.body.appendChild(this.div)}this.cnv&&this.setCanvas(this.cnv),this.latestPoints=[]}setCanvas(t){this.cnv=t,this.width=this.cnv.width,this.height=this.cnv.height,this.ctx=this.cnv.getContext("2d")}plot(t=[]){this.latestPoints=t,this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.beginPath();let e=Vl.shiftSpace(t,30,30,0,this.width,this.height,1);for(let t=0;t<e.length;t++){let i=e[t][0],r=e[t][1];"number"==typeof i&&isFinite(i)||(i=0),"number"==typeof r&&isFinite(r)||(r=0),0==t?this.ctx.moveTo(i,r):this.ctx.lineTo(i,r)}this.ctx.strokeStyle="black",this.ctx.stroke()}static shiftSpace(t,e=0,i=0,r=0,n=400,o=400,s=400){let a=[],h=0,l=0,u=0,c=0,d=0,p=0;for(let e=0;e<t.length;e++)t[e][0]<h&&(h=t[e][0]),t[e][0]>u&&(u=t[e][0]),t[e][1]<l&&(l=t[e][1]),t[e][1]>c&&(c=t[e][1]),t[e][2]<d&&(d=t[e][2]),t[e][2]>p&&(p=t[e][2]);let f=u-h,m=c-l,g=p-d;for(let u=0;u<t.length;u++){let c=e+(n-2*e)*(-h+t[u][0])/f,p=i+(o-2*i)*(-l+t[u][1])/m,v=r+(s-2*r)*(-d+t[u][2])/g;a.push([c,p,v])}return a}}function zl(t,e){for(var i=[],r=0;r<e.length;r++)i[r]=t*e[r];return i}function Wl(t,e){for(var i=[],r=0;r<t.length&&r<e.length;r++)i[r]=t[r]+e[r];return i}class Yl{constructor(t){this.t=[],this.pts=[],this.V=t}step(t){var e=t<0?this.t[0]:this.t[this.t.length-1],i=t<0?this.pts[0]:this.pts[this.pts.length-1],r=this.V,n=zl(t,r(e,i)),o=zl(t,r(e+.5*t,Wl(i,zl(.5,n)))),s=zl(t,r(e+.5*t,Wl(i,zl(.5,o))));zl(t,r(e+.5*t,Wl(i,s)));i=Wl(i,zl(1/6,Wl(n,zl(2,Wl(o,s)))));for(let t in i)if(isNaN(t))return!1;return!("limit"in this&&"function"==typeof this.limit&&!this.limit(i))&&(this.n+=1,t<0?(this.t.unshift(e+t),this.pts.unshift(i)):(this.t.push(e+t),this.pts.push(i)),!0)}solve(t,e,i,r){this.dt=e,arguments.length>2?(this.t=[i],this.pts=[r],this.n=0):0==this.t.length&&alert("initial conditions are needed for first call to 'solve'");for(var n=0;n<t&&this.step(e);n++);return{t:this.t,pts:this.pts}}pushPt(t,e,i){this.pts.length>t&&(e.push(this.t[t]),i.push(this.pts[t]))}setLimit(t){this.limit=t}}class ql extends cl{constructor(...t){super(...t),this._initialState=[],this._initialState[0]=[aa.rndRange(-10,10),aa.rndRange(-10,10),aa.rndRange(-10,10)],this.type="lorenz-functional-motivator",this.isDeterministic=!1,this.plotter=new Vl(820,150,350,350,"Lorenz Functional Motivator - plot")}updateCommitments(){super.updateCommitments(),this.recollapse()}nextState(t,e){let[i,r,n]=e;return[this.sigma*(r-i),i*(this.rho-n)-r,i*r-this.beta*n]}recollapse(){for(let t=0;t<this.commitments.length;t++)this.isInitialStatusChanged[t]=!0}regenerateKeyframes(t){let e=this.commitments.indexOf(t);if(!(t.world instanceof Vh))return console.warn("this motivator only makes sense if the agent is attached to a world");!this.isInitialStatusChanged[e]&&this._initialState[e]||(this._initialState[e]=[aa.rndRange(-10,10),aa.rndRange(-10,10),aa.rndRange(-10,10)]);let i=new Yl(this.nextState.bind(this)),r=this.duration/1e3,n=i.solve(r/.01,.01,0,this._initialState[e]),o=[];for(let t=0;t<n.pts.length;t++)o.push(n.pts[t]);this.plotter&&this.plotter.cnv&&this.plotter.plot(o),this._generatedKeyframes[e]=new Sh,this._generatedKeyframes[e].motiv=this;let s=Vl.shiftSpace(o,0,0,0,t.world.width,t.world.height,180);const a=this.duration/(s.length-1);for(let t=0;t<s.length;t++){let i=new ha({x:s[t][0],y:s[t][1]},s[t][2],{x:1,y:1});this._generatedKeyframes[e].addKeyframe(t*a,i)}this._generatedKeyframes[e].reduce(this.fps),super.regenerateKeyframes(t)}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(ql,"ParameterDefinitions",{duration:{type:"number",minVal:0,maxVal:5e4,defaultVal:5e3},rho:{type:"number",minVal:-30,maxVal:30,defaultVal:28,stepVal:.1},sigma:{type:"number",minVal:-20,maxVal:20,defaultVal:10,stepVal:.1},beta:{type:"number",minVal:-3,maxVal:3,defaultVal:8/3,stepVal:.01},fps:{type:"number",minVal:1,maxVal:240,defaultVal:5}});class Kl extends cl{constructor(...t){super(...t),this.type="moveBy-functional-motivator",this.isDeterministic=!0,this.calculateDuration()}static fromProps(t,e){return e.target&&(e.moveX=e.target.x,e.moveY=e.target.y),new Kl(t,e)}onParamChange(){this.calculateDuration()}calculateDuration(){const t=aa.pointDis(0,0,this.params.moveX,this.params.moveY)/this.params.spd;this.duration=Math.round(1e3*t)}regenerateKeyframes(t){super.regenerateKeyframes(t);let e=this.commitments.indexOf(t),i=t.motivators.indexOf(this),r=t.offsets[i],n=t.getNearestKeyframe(r),o=ha.fromFrame(n.frame);this._generatedKeyframes[e]=new Sh,this._generatedKeyframes[e].motiv=this,this._generatedKeyframes[e].addKeyframe(0,o),this._generatedKeyframes[e].addKeyframe(this.duration,ha.addFrames(o,ha.zeroFrame({x:this.moveX,y:this.moveY})))}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Kl,"ParameterDefinitions",{moveX:{type:"number",label:"Move X",minVal:0,maxVal:1e4,defaultVal:0,units:"px",desc:"the distance to move horizontally"},moveY:{type:"number",label:"Move Y",minVal:0,maxVal:1e4,defaultVal:0,units:"px",desc:"the distance to move vertically"},spd:{type:"number",label:"Speed",minVal:1,maxVal:1e5,defaultVal:10,units:"px/s",desc:"the movement speed"}});class $l extends cl{constructor(...t){super(...t),this.type="setFace-functional-motivator",this.isDeterministic=!0}get duration(){return 1}regenerateKeyframes(t){super.regenerateKeyframes(t);let e=this.commitments.indexOf(t);this._generatedKeyframes[e]=new Sh,this._generatedKeyframes[e].motiv=this,this._generatedKeyframes[e].addKeyframe(0,{}),this._generatedKeyframes[e].addKeyframe(this.duration,{},()=>{t.face=t.world.getFaceByName(this.params.face)})}flagAllStatuses(){}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}($l,"ParameterDefinitions",{face:{type:"face",label:"face",defaultVal:"defaultAgentFace"}});class Zl extends cl{constructor(...t){super(...t),this.type="setVisibility-functional-motivator",this.isDeterministic=!0}get duration(){return 1}regenerateKeyframes(t){super.regenerateKeyframes(t);let e=this.commitments.indexOf(t);this._generatedKeyframes[e]=new Sh,this._generatedKeyframes[e].motiv=this,this._generatedKeyframes[e].addKeyframe(0,{}),this._generatedKeyframes[e].addKeyframe(this.duration,{},()=>{t.visible=this.params.visible})}flagAllStatuses(){}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Zl,"ParameterDefinitions",{visible:{type:"bool",label:"visible",defaultVal:!0}});class Ql extends cl{constructor(...t){super(...t),this._distances=[],this.distance=0,this.type="path-follow-functional-motivator",this.onParamChange("points")}onParamChange(t,e){"speed"!=t&&"points"!=t||(this.distance=this.getDistance(),this.duration=this.distance/this.speed*1e3+1)}get faceDirection(){return this.doFaceDirection}set pointsStr(t){this.points=t.split(",").map(t=>t.split(" "))}get pointsStr(){return this.points.map(t=>t.join(" ")).join(",")}regenerateKeyframes(t){let e=new Sh;e.motiv=this;let i=this.commitments.indexOf(t),r=t.motivators.indexOf(this),n=t.offsets[r],o=t.getNearestKeyframe(n),s=ha.fromFrame(o.frame),a=s.translate,h=s.rotate;if(0==this.points.length){let t={translate:{x:a.x,y:a.y}};e.addKeyframe(0,t)}let l=0;this.isRelative&&(l=h);let u=0,c=this.points[0];for(let t=0;t<this.points.length;t++){let i=this.points[t];u+=this._distances[t]/this.distance*this.length;let r={pos:u,frame:{translate:{x:i[0]+(this.isRelative?a.x-c[0]:0),y:i[1]+(this.isRelative?a.y-c[1]:0)},rotate:0}};this.doFaceDirection,e.addKeyframe(r.pos,r.frame)}this._generatedKeyframes[i]=e,this.isInitialStatusChanged[i]=!1}getDistance(){let t=0;this._distances=[0];for(let e=1;e<this.points.length;e++){const i=aa.pointDis(this.points[e][0],this.points[e][1],this.points[e-1][0],this.points[e-1][1]);this._distances[e]=i,t+=i}return t}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Ql,"ParameterDefinitions",{speed:{type:"number",label:"speed",units:"px/s",minVal:1,maxVal:1e4,defaultVal:10},isRelative:{type:"bool",label:"is relative?",defaultVal:!0,desc:"is movement relative to start position?"},doFaceDirection:{type:"bool",label:"face direction?",defaultVal:!0,desc:"face the direction of the movement?"},points:{type:"points",label:"points",defaultVal:[],desc:"draw the path to follow"}});class Jl extends cl{constructor(t,e=1e3){super(t),this.duration=e,this.type="simple-functional-motivator",this.isDeterministic=!0}static fromProps(t,e){return new Jl(t,e.duration)}onParamChange(){this._generatedKeyframes=new Sh,this._generatedKeyframes.motiv=this;let t=[{pos:0,frame:new ha},{pos:this.duration,frame:new ha}];for(let e of t)this._generatedKeyframes.addKeyframe(e.pos,e.frame)}toProps(){return{duration:this.duration}}generateKeyframes(){return this._generatedKeyframes}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(Jl,"ParameterDefinitions",{duration:{type:"number",label:"duration",minVal:"0",maxVal:"1000000",defaultVal:"1000"}});class tu extends cl{constructor(...t){super(...t),this.type="trajectory-follow-functional-motivator",this.onParamChange("FPS")}onParamChange(t){"FPS"==t&&(this.TPF=1/this.FPS*1e3)}set duration(t){this._duration=t}get duration(){return this._duration}regenerateKeyframes(t){let e=new Sh;e.motiv=this;let i=this.commitments.indexOf(t),r=t.motivators.indexOf(this),n=t.offsets[r],o=t.getNearestKeyframe(n),s=ha.fromFrame(o.frame),a=s.translate,h=s.scale,l=a.x,u=a.y,c=aa.lengthDirX(this.speed,this.angle/180*Math.PI),d=aa.lengthDirY(this.speed,this.angle/180*Math.PI),p=0,f=this.angle,m=1,g=1,v=this.drag,y=0,_=100;for(;y<this.distance&&_-- >0;){let t={pos:p,frame:{translate:{x:l,y:u}}};this.doFaceDirection&&(t.frame.rotate=f);let i=aa.pointDir(l,u,l+c,u+d);if(this.doStretchWithSpeed){t.frame.scale={x:m*h.x,y:g*h.y},m=1+Math.sqrt(c**2,d**2)/this.speed,g=Math.min(3,1/m)}else t.frame.scale={x:m,y:g};f=i/Math.PI*180,l+=c,u+=d,y+=Math.sqrt(c**2,d**2),c*=1-v,d*=1-v,d+=this.gravity,p+=this.TPF,e.addKeyframe(t.pos,t.frame)}this.duration=p,this._generatedKeyframes[i]=e,this.isInitialStatusChanged[i]=!1}}!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(tu,"ParameterDefinitions",{angle:{type:"number",label:"angle",units:"deg",minVal:0,maxVal:360,defaultVal:45},gravity:{type:"number",label:"gravity",units:"px/sec2",minVal:1,maxVal:100,defaultVal:20},speed:{type:"number",label:"speed",units:"px/sec",minVal:1,maxVal:1e4,defaultVal:100},distance:{type:"number",label:"distance",units:"px",minVal:1,maxVal:5e4,defaultVal:2e3},drag:{type:"number",label:"drag",minVal:.001,maxVal:1,defaultVal:.01,stepVal:.01},doFaceDirection:{type:"bool",label:"face direction?",defaultVal:!0},doStretchWithSpeed:{type:"bool",label:"stretch speed?",defaultVal:!1},FPS:{type:"number",label:"FPS",minVal:1,maxVal:240,defaultVal:10}});class eu extends la{constructor(t,e=4e3){super(t),this.genre="physics-motivator",this.type="physics-motivator",this.duration=e,this.body=null}get end(){return this.duration}get agent(){return 1==this.commitments.length?this.commitments[0]:null}static fromProps(t,e){return new eu(t,e.duration)}toProps(){return{duration:this.duration}}generateKeyframes(){let t=new Sh;t.motiv=this;let e=[{pos:0,frame:{},callback:this.takeStaticPosition.bind(this)},{pos:this.end,frame:{}}];for(let i of e)t.addKeyframe(i.pos,i.frame,i.callback);return t}addCommitment(t){if(this.commitments.length>0)return console.error("a physics motivator may only have one commitment");super.addCommitment(t),this.updateBody(t)}updateBody(t){if(void 0!==this.body&&null!=this.body)for(let t of this.world.controllers)"physics-controller"==t.type&&t.removeBody(this.body);this.body=Pl.makeFit(t.face.owner);for(let t of this.world.controllers)"physics-controller"==t.type&&t.addBody(this.body)}takeStaticPosition(){this.agent&&(Wh.a.Body.setPosition(this.body,{x:this.agent.x,y:this.agent.y}),Wh.a.Body.setAngle(this.body,this.agent.angle/180*Math.PI+(this.body.initRotate||null)),this.world.controllers.forEach(t=>{t.reasonsToCollapse++}))}}class iu{constructor(){this.nodes=[],this.nodePoses=[]}static fromProps(t,e){let i=new iu;i.nodePoses=t.nodePoses;for(let r of t.nodes){e.make(r.constructor,i,r)}for(let t of i.nodes)t.setConnections(t.tmpConnections);return i}toProps(){return{nodes:this.nodes.map(t=>t.toProps()),nodePoses:this.nodePoses}}onNodesChanged(){this.roots=[],this.nonRoots=[];for(let t of this.nodes)0==t.inputs.length?this.roots.push(t):this.nonRoots.push(t);for(let t=0;t<this.nodes.length;t++)this.nodePoses[t]||(this.nodePoses[t]={x:0,y:0})}}class ru extends cl{constructor(t,e=5e3,i=new iu){super(t),this.duration=e,this.genre="interaction-motivator",this.type="interaction-motivator",this.graph=i,this.graph.motiv=this}static fromProps(t,e,i){return new ru(t,"Infinity"==e.duration?1/0:e.duration,iu.fromProps(e.graph,i))}toProps(){let t=this.graph.toProps();return{duration:this.duration==1/0?"Infinity":this.duration,graph:t}}begin(t){t.interactX=t.staticX||0,t.interactY=t.staticY||0,t.interactRot=t.staticRot||0,t.isDuringInteractionMotiv=!0}listen(t){if(this.graph&&this.graph.roots&&this.graph.roots.length)for(let e of this.graph.roots)e.listen(t);if(this.graph&&this.graph.nonRoots&&this.graph.nonRoots.length)for(let e of this.graph.nonRoots)e.activate(t);t.isDuringInteractionMotiv=!0}get length(){return this.duration}set length(t){this.duration=t}set duration(t){this._duration=t,this.flagAllStatuses()}get duration(){return this._duration}regenerateKeyframes(t){super.regenerateKeyframes(t);let e=this.commitments.indexOf(t),i=t.motivators.indexOf(this),r=t.offsets[i],n=t.getNearestKeyframe(r),o=[{pos:0,frame:ha.fromFrame(n.frame),callback:this.begin.bind(this,t)},{pos:1,frame:ha.fromFrame(n.frame),range:[0,this.duration],callback:this.listen.bind(this,t)}];isFinite(this.length)&&o.push({pos:this.length,frame:ha.addFrames(n.frame,ha.zeroFrame(this.target))});let s=new Sh;s.motiv=this;for(let t of o)s.addKeyframe(t.pos,t.frame,t.callback,t.range);this._generatedKeyframes[e]=s}}class nu{constructor(t,e=1,i=1,r={}){if(void 0===t||null==t)return console.error("a node must belong to a graph");this.graph=t,this.inputs=new Array(e),this.outputs=new Array(i),this.connections=new Array(i),this.type="basic",this.name="basic",this.vue="basic-node",this.params=r,this.graph.nodes.push(this),this.graph.onNodesChanged()}static fromProps(t,e){}toProps(){return{}}listen(t){}activate(t){}setConnections(t){for(let e=0;e<t.length;e++){let i=t[e];if(i)for(let t=0;t<i.length;t++){let r=i[t];if(!r)continue;let n=this.graph.nodes[r.dstNodeInd],o=e,s=r.itsIn;this.connect(n,o,s)}}}connect(t,e=0,i=0){t.inputs[i]={nodeInd:this.graph.nodes.indexOf(this),out:e},void 0!==this.connections[e]&&null!=this.connections[e]||(this.connections[e]=[]),this.connections[e].push({dstNodeInd:this.graph.nodes.indexOf(t),itsIn:i})}disconnectAll(t){if(this.connections[t]&&this.connections[t].length)for(;this.connections[t].length>0;){let e=this.connections[t].pop();this.graph.nodes[e.dstNodeInd].inputs[e.itsIn]=null}}delete(){for(let t=0;t<this.connections.length;t++)this.disconnectAll(t);for(let t of this.graph.nodes)for(let e of t.connections)if(e&&e.length)for(let t=0;t<e.length;t++){e[t].dstNodeInd==this.graph.nodes.indexOf(this)&&e.splice(t,1)}let t=this.graph.nodes.indexOf(this);this.graph.nodes.splice(t,1),this.graph.nodePoses.splice(t,1)}updateOutputsCount(t=1){if(t>this.outputs.length)for(;this.outputs.length<t;)this.outputs.push(null);else{for(let e=t;e<this.outputs.length;e++)this.disconnectAll(e);this.outputs=this.outputs.slice(0,t)}}}class ou extends nu{constructor(t,e={keybindings:["W","A","S","D"]}){super(t,0,4,e),this.type="trigger",this.name="keyboard",this.vue="keyboard-trigger-node",this.keyPressed={},window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this))}static fromProps(t,e){let i=new ou(t,{keybindings:e.keybindings});return i.tmpConnections=e.connections,i}toProps(){return{constructor:this.constructor.name,keybindings:this.params.keybindings,connections:this.connections}}updateOutputsCount(t=1){for(super.updateOutputsCount(t);t>this.params.keybindings.length;)this.params.keybindings.push(null);this.params.keybindings=this.params.keybindings.slice(0,t)}getKey(t){return" "==t?"Space":t.toUpperCase()}onKeyDown(t){let e=this.getKey(t.key);if(this.keyPressed[e]=!0,this.graph&&this.graph.motiv&&this.graph.motiv.world){const t=this.graph.motiv.world;t.stateLogger.addEvent("interaction-trigger-keyboard",{time:t.now,key:e})}}onKeyUp(t){this.keyPressed[this.getKey(t.key)]=!1}listen(){for(let t=0;t<this.outputs.length;t++)this.outputs[t]=!1;for(let t=0;t<this.params.keybindings.length;t++){let e=this.params.keybindings[t];this.keyPressed[e.toUpperCase()]&&(this.outputs[t]=!0)}}}class su extends nu{constructor(t,e={}){super(t,0,3,e),this.type="trigger",this.name="mouseDown",this.vue="mouseDown-trigger-node",this.mousedown=-1,window.addEventListener("mousedown",this.onDown.bind(this)),window.addEventListener("mouseup",this.onUp.bind(this))}static fromProps(t,e){let i=new su(t);return i.tmpConnections=e.connections,i}toProps(){return{constructor:this.constructor.name,connections:this.connections}}onDown(t){if(this.mousedown=t.button,this.graph&&this.graph.motiv&&this.graph.motiv.world){const t=this.graph.motiv.world;t.stateLogger.addEvent("interaction-trigger-mouse",{time:t.now,button:this.mousedown})}}onUp(){this.mousedown=-1}listen(){for(let t=0;t<this.outputs.length;t++)this.outputs[t]=!1;-1!=this.mousedown&&(this.outputs[this.mousedown]=!0)}}class au extends nu{constructor(t,e={}){super(t,0,4,e),this.type="trigger",this.name="mouseScroll",this.vue="mouseScroll-trigger-node",this.scrollDirX=0,this.scrollDirY=0,this.isScrolling=!1,window.addEventListener("wheel",this.onScroll.bind(this))}static fromProps(t,e){let i=new au(t);return i.tmpConnections=e.connections,i}toProps(){return{constructor:this.constructor.name,connections:this.connections}}onScroll(t){if(t.deltaY>0?this.scrollDirY=1:t.deltaY<0?this.scrollDirY=-1:this.scrollDirY=0,t.deltaX>0?this.scrollDirX=1:t.deltaX<0?this.scrollDirX=-1:this.scrollDirX=0,this.isScrolling=!0,this.scrollResetTimeout&&window.clearTimeout(this.scrollResetTimeout),this.scrollResetTimeout=window.setTimeout(()=>this.isScrolling=!1,10),this.graph&&this.graph.motiv&&this.graph.motiv.world){const t=this.graph.motiv.world;t.stateLogger.addEvent("interaction-trigger-scroll",{time:t.now,scrollDirX:this.scrollDirX,scrollDirY:this.scrollDirY})}}listen(){for(let t=0;t<this.outputs.length;t++)this.outputs[t]=!1;this.isScrolling&&(1==this.scrollDirY&&(this.outputs[0]=!0),-1==this.scrollDirY&&(this.outputs[1]=!0),1==this.scrollDirX&&(this.outputs[2]=!0),-1==this.scrollDirX&&(this.outputs[3]=!0))}}class hu extends nu{constructor(t,e={speed:5,direction:"left",exactDirection:0}){super(t,1,0,e),this.type="action",this.name="move",this.vue="move-action-node"}static fromProps(t,e){let i=new hu(t,e.params);return i.tmpConnections=e.connections,i}toProps(){return{constructor:this.constructor.name,params:this.params,connections:this.connections}}activate(t){if(this.inputs[0]){if(1==this.graph.nodes[this.inputs[0].nodeInd].outputs[this.inputs[0].out]){let e=this.dirToAng(t);if(t.interactX+=aa.lengthDirX(this.params.speed,e),t.interactY+=aa.lengthDirY(this.params.speed,e),this.graph&&this.graph.motiv&&this.graph.motiv.world){const t=this.graph.motiv.world;t.stateLogger.addEvent("interaction-action-move",{time:t.now,speed:this.params.speed,direction:e})}}}}dirToAng(t){let e=this.params.direction;return"left"==e?Math.PI:"right"==e?0:"up"==e?3*Math.PI/2:"down"==e?Math.PI/2:"forward"==e?t.angle/180*Math.PI:"backward"==e?t.angle/180*Math.PI+Math.PI:this.params.exactDirection/180*Math.PI}}class lu extends nu{constructor(t,e={rot:3}){super(t,1,0,e),this.type="action",this.name="rotate",this.vue="rotate-action-node"}static fromProps(t,e){let i=new lu(t,e.params);return i.tmpConnections=e.connections,i}toProps(){return{constructor:this.constructor.name,params:this.params,connections:this.connections}}activate(t){if(this.inputs[0]){if(1==this.graph.nodes[this.inputs[0].nodeInd].outputs[this.inputs[0].out]&&(t.interactRot+=this.params.rot,this.graph&&this.graph.motiv&&this.graph.motiv.world)){const t=this.graph.motiv.world;t.stateLogger.addEvent("interaction-action-rotate",{time:t.now,rotateBy:this.params.rot})}}}}const uu={Physics:qh,Box:Ph,Circle:Ih,FixedPolygon:Oh,FreePolygon:Ch,Star:Mh,Face:Nh,Img:Rh,Shape:Dh,SVG:class{constructor(){}},Agent:Gh,Obj:jh,BioAgent:Rl,Body:Pl,Entity:Bh,World:Vh,MimickingEvolver:class{},ActGenes:al,AttributeGenes:ol,BrainGenes:hl,ColorGene:il,FaceGenes:nl,Gene:tl,Genome:ll,NumberGene:rl,PointsGene:el,SenseGenes:sl,BasicPredator:Nl,BasicPrey:Ll,Brain:Al,Arrive:Ol,Flee:Bl,Pursue:kl,Seek:Cl,Wander:Dl,Explore:Ul,PlayFight:Gl,Mirror:jl,Mimic:Xl,Lorenz:ql,MoveBy:Kl,SetFace:$l,SetVisibility:Zl,PathFollow:Ql,Simple:Jl,TrajectoryFollow:tu,PhysicsMotivator:eu,BehavioralMotivator:dl,FunctionalMotivator:cl,InteractionMotivator:ru,Motivator:la,StaticMotivator:Ah,Idle:class extends xl{constructor(){super()}},Motor:xl,MoveForward:El,TurnLeft:Tl,TurnRight:wl,Memory:bl,Randomness:Sl,Sense:gl,Sight:vl,SpacialAwareness:yl,TemporalAwareness:_l,Frame:ha,GraphicalTimeline:class{constructor(t,e=!1,i=null){this.cnv=document.createElement("canvas"),this.cnv.owner=this,this.useStudio=e,this.world=t,this.world||console.error("this GraphicalTimeline was not assigned a world at creation"),e?this.studio=i:(this.cnv.width=window.innerWidth-200,this.cnv.height=100,this.cnv.style.border="3px solid red",this.cnv.style.backgroundColor="white",this.cnv.style.position="absolute",this.cnv.style.top="450px",this.cnv.style.left="50px"),this.ctx=this.cnv.getContext("2d"),this.displayedDuration=2e4,this.offset=0,document.body.appendChild(this.cnv),this.padX=0,this.plotWorld(this.world),this.mouseX=0,this.mouseY=0,window.requestAnimationFrame(()=>this.renderIfTainted()),window.addEventListener("resize",()=>this.resizeHandle()),this.cnv.addEventListener("mouseout",()=>this.onMouseOut()),this.cnv.addEventListener("mouseup",()=>this.onMouseUp()),this.cnv.addEventListener("touchend",()=>this.onMouseUp()),this.cnv.addEventListener("mousedown",t=>this.onMouseDown(t)),this.cnv.addEventListener("touchstart",t=>this.onMouseDown(t)),this.cnv.addEventListener("mousemove",t=>this.onMouseMove(t)),this.cnv.addEventListener("touchmove",t=>this.onMouseMove(t)),this.cnv.addEventListener("mousewheel",t=>this.onMouseWheel(t))}destroy(){this.cnv.parentNode.removeChild(this.cnv)}renderIfTainted(){this.world.tainted&&this.plotWorld(this.world),window.requestAnimationFrame(()=>this.renderIfTainted())}resizeHandle(){this.useStudio&&(this.cnv.width=this.cnv.offsetWidth,this.cnv.height=this.cnv.offsetHeight),this.plotWorld(this.world)}onMouseOut(){this.mouseDown=!1}onMouseUp(){this.mouseDown=!1}onMouseWheel(t){let e=t.deltaY;this.displayedDuration+=1e3*Math.sign(e),this.displayedDuration<1e3&&(this.displayedDuration=1e3)}onMouseMove(t){t.preventDefault();let e=this.mouseX;if(t instanceof TouchEvent){const e=t.target.getBoundingClientRect();this.mouseX=t.targetTouches[0].pageX-e.left,this.mouseY=t.targetTouches[0].pageY-e.top}else this.mouseX=t.offsetX,this.mouseY=t.offsetY;if(this.setCursor("default"),0==this.mouseBtn)if(this.mouseDown)if(this.clickAction=null,this.clickedElement=null,this.clickedElementsAgent=null,this.clickedElementsPos=0,this.clickedElementsClickPos=0,this.plotWorld(this.world,!0),null==this.clickedElement){if(this.mouseY<20){let t=50,e=this.mouseX/this.cnv.width*this.displayedDuration+this.offset;Math.abs(e-1e3*Math.round(e/1e3))<t&&(e=1e3*Math.round(e/1e3)),this.world.seek(e)}}else{let t,i,r,n,o,s=this.mouseX-e;switch(this.clickAction){case"resize":t=this.mouseX/this.cnv.width*this.displayedDuration+this.offset,i=t-this.clickedElementsPos,this.clickedElement.duration=i;break;case"move":n=this.mouseX/this.cnv.width*this.displayedDuration+this.offset;this.clickedElementsClickPos,this.clickedElementsPos;o=this.clickedElementsAgent.motivators.indexOf(this.clickedElement),1==o?this.clickedElementsAgent.birthTime+=5*s:this.clickedElementsAgent.offsets[o]+=5*s,this.clickedElementsAgent._updateMotivators();break;case"resize_and_move":n=this.mouseX/this.cnv.width*this.displayedDuration+this.offset,r=this.clickedElementsPos,i=this.clickedElement.duration-(n-r),this.clickedElement.duration=i,o=this.clickedElementsAgent.motivators.indexOf(this.clickedElement),1==o?this.clickedElementsAgent.birthTime=n:this.clickedElementsAgent.offsets[o]=n-this.clickedElementsAgent.birthTime}}else this.plotWorld(this.world,!1);else 1==this.mouseBtn&&this.mouseDown&&(this.offset-=5*(this.mouseX-e),this.offset<0&&(this.offset=0))}setCursor(t){document.body.style.cursor=t}onMouseDown(t){if(this.mouseDown=!0,this.mouseBtn=t.button,t instanceof TouchEvent){const e=t.target.getBoundingClientRect();this.mouseX=t.targetTouches[0].pageX-e.left,this.mouseY=t.targetTouches[0].pageY-e.top}else this.mouseX=t.offsetX,this.mouseY=t.offsetY;this.onMouseMove(t)}plotFrameInfo(t=0,e,i,r=10){i+=8,r-=20;const n=e.frame;this.ctx.fillStyle="#222222",this.ctx.fillRect(i,r,150,82),this.ctx.font="15px sans-serif",this.ctx.fillStyle="white",this.ctx.fillText("pos: "+(e.pos+t),i+3,r+15),this.ctx.fillText(`translate: (${n.translate.x}, ${n.translate.y})`,i+3,r+30),this.ctx.fillText(`scale: (${n.scale.x}, ${n.scale.y})`,i+3,r+45),this.ctx.fillText(`rotate: ${n.rotate}deg`,i+3,r+60),this.ctx.fillText("alpha: "+n.alpha,i+3,r+75)}plotFunctionalMotivator(t,e,i,r=48,n=!1,o="#0382b1"){const s=this.timeToX(t.end);this.drawRect(this.timeToX(i),r+5,s,15,"black",o);const a=t.constructor.name;this.ctx.font="12px sans-serif",this.ctx.fillStyle="white",this.ctx.fillText(a,this.timeToX(i)+s/2,r+15),this.plotKeyframes(t.generateKeyframes(e),i,r,o,t,e)}plotInteractionMotivator(t,e,i,r=48,n=!1){let o;o=isFinite(t.end)?this.timeToX(t.end):this.cnv.width+this.timeToX(this.offset),this.drawRect(this.timeToX(i),r+5,o,15,"black","#ffff00");const s=t.constructor.name;this.ctx.font="12px sans-serif",this.ctx.fillStyle="black",this.ctx.fillText(s,this.timeToX(i)+o/2,r+15),this.plotKeyframes(t.generateKeyframes(e),i,r,"#ffff00",t,e)}plotStaticMotivator(t,e,i,r,n=!1){const o=this.timeToX(t.end);this.drawRect(this.timeToX(i),r+5,o,15,"black","rgba(255, 0, 0, 0.5)");this.ctx.font="12px sans-serif",this.ctx.fillStyle="white",this.ctx.fillText("static",this.timeToX(i)+o/2,r+15),this.plotKeyframes(t.keyframes,i,r,n?"teal":"red",t,e)}plotKeyframes(t,e=0,i=0,r="red",n=null,o=null){if(t.length<1)return;let s=this.timeToX(t[0].pos+e),a=this.timeToX(t[t.length-1].pos+e);this.drawLine(s,i,a,i,r,1);let h=t[0].handler.doEase?t[0].handler.easingFunction+"."+t[0].handler.easingType:"Linear";if(this.ctx.font="12px sans-serif",this.ctx.textAlign="center",t.length>3){let t=this.ctx.measureText(h).width+10;this.drawRect(s+(a-s)/2-t/2,i,t,15,"black","rgba(255, 0, 0, 0.5)"),this.ctx.fillStyle="white",this.ctx.strokeStyle="black",this.ctx.lineWidth=3,this.ctx.strokeText(h,s+(a-s)/2,i+10),this.ctx.fillText(h,s+(a-s)/2,i+10)}let l=-1,u=-1;for(let a=0;a<t.length;a++){let h=t[a],c=!h.frame.isInvisible,d=h.pos/h.handler.maxPos,p=Sh.invBez(Sh.EasingBezValues[h.handler.easingFunction+"."+h.handler.easingType],d)*h.handler.maxPos,f=this.timeToX(p+e),m=this.timeToX(h.pos+e);0==a&&(s=m);const g=Math.abs(this.world.now-(h.pos+e+this.offset))<20;c&&this.world.now-(h.pos+e)>20&&(l=a),g&&(u=a,this.useStudio);let v=aa.withinCircle(this.mouseX,this.mouseY,m,i,10);this.useStudio&&v&&this.mouseDown&&o&&n&&(this.clickedElement=h,this.world.seek(h.pos+e+this.offset),window.bus.$emit("semiSelectLeaf",{self:o,isManual:!1}),window.bus.$emit("selectLeaf",{self:n,isManual:!1})),c?"Power0"!=t[0].handler.easingFunction&&t[0].handler.doEase?(this.drawDiamond(m,i,r,g?"orange":"black",!1,g||v?10:5),this.drawDiamond(f,i,r,g?"orange":"black",!1,g||v?18:10),this.drawCurve(m,i,f,i+5,"grey",1)):this.drawDiamond(m,i,r,g?"orange":"black",!1,g||v?18:10):this.drawDiamond(m,i,"rgba(0, 0, 0, 0.3)","grey",!1)}if(this.useStudio&&"static-motivator"==n.type&&this.studio.selectedComponent==n){var c,d,p,f,m,g;let t=null===(c=this.studio)||void 0===c||null===(d=c.$refs)||void 0===d||null===(p=d["properties-view"])||void 0===p||null===(f=p.$refs)||void 0===f||null===(m=f["properties-holder"])||void 0===m||null===(g=m.$refs)||void 0===g?void 0:g["motivator-properties-holder"];t&&(-1!=u?t.selectKeyframe&&t.selectKeyframe(u):-1!=l&&t.selectInterpolatedFrame&&t.selectInterpolatedFrame(l))}}plotPhysicsMotivator(t,e,i=0,r=30,n=!1){this.plotFunctionalMotivator(t,e,i,r,n,"#de2e7d")}plotBehavioralMotivator(t,e,i=0,r=30,n=!1){this.plotFunctionalMotivator(t,e,i,r,n,"#A5769C")}plotObj(t,e=0,i=!1){let r=Math.max(this.bottomYs[Math.round(this.timeToX(t.birthTime)-5)]||0,this.bottomYs[Math.round(this.timeToX(t.deathTime)-5)]||0)||30;this.drawRect(this.timeToX(e),r,this.timeToX(t.lifeDuration),10,"black","grey",2);for(let e=Math.round(this.timeToX(t.birthTime)-5);e<Math.min(this.timeToX(t.deathTime)+10,this.cnv.width);e++)this.bottomYs[e]=r+10+5+5}handleMotivActions(){aa.withinCircle(this.mouseX,this.mouseY,this.timeToX(offset)+width,posY,20)?(this.setCursor("ew-resize"),this.clickedElement=motiv,this.clickedElementsPos=offset,this.clickAction="resize"):aa.withinCircle(this.mouseX,this.mouseY,this.timeToX(offset),posY,20)?(this.setCursor("ew-resize"),this.clickedElement=motiv,this.clickedElementsPos=offset,this.clickedElementsAgent=agent,this.clickAction="resize_and_move"):aa.withinRect(this.mouseX,this.mouseY,this.timeToX(offset),posY,width,20)&&(this.setCursor("move"),this.clickedElement=motiv,this.clickedElementsPos=offset,this.clickedElementsClickPos=this.mouseX/this.cnv.width*this.displayedDuration+this.offset,this.clickAction="move",this.clickedElementsAgent=agent)}plotAgent(t,e=0,i=!1){let r=t.motivators;let n=Math.max(this.bottomYs[Math.round(this.timeToX(t.birthTime)-10)]||0,this.bottomYs[Math.round(this.timeToX(t.deathTime)-10)]||0)||30,o=n,s=o;for(let a=0;a<r.length;a++){let h=r[a],l=t.offsets[a]+e-this.offset;if(i&&t.isSelected&&this.world.now>=t.offsets[a]+e-5&&this.world.now<=t.offsets[a]+e+h.end+5&&!h.isSelected&&this.useStudio){let t=window.studio.selectedComponent;window.bus.$emit("selectLeaf",{self:h,isManual:!1}),t&&"agent"==t.type&&window.bus.$emit("semiSelectLeaf",{self:t,isManual:!1})}if(this.plottingAgenda.push(()=>{h instanceof Ah?(o=n+4,o>s&&(s=o+5),this.plotStaticMotivator(h,t,l,o,h.isSelected)):h instanceof ru?(o=n+4,o>s&&(s=o+5),this.plotInteractionMotivator(h,t,l,o,h.isSelected)):h instanceof dl?(o=n+4,o>s&&(s=o+5),this.plotBehavioralMotivator(h,t,l,o,h.isSelected)):h instanceof eu?(o=n+4,o>s&&(s=o+5),this.plotPhysicsMotivator(h,t,l,o,h.isSelected)):h instanceof cl&&(o=n+4,o>s&&(s=o+5),this.plotFunctionalMotivator(h,t,l,o,h.isSelected))}),a>0){let i=this.timeToX(r[a-1].end+t.offsets[a-1]+e-this.offset),o=this.timeToX(t.offsets[a]+e-this.offset);this.drawDashedLine(i,n+5,o,n+5,"red")}}this.ctx.strokeStyle=t.alive?"orange":"grey";this.ctx.lineWidth=3,this.ctx.strokeRect(this.timeToX(t.birthTime-this.offset)-10-1.5,n-1.5-5,t.timeline&&t.timeline.isInfinite?this.cnv.width+this.offset:this.timeToX(t.deathTime-t.birthTime)+20+3,38),this.ctx.fillStyle="rgba(255, 255, 255, 0.5)",this.ctx.fillRect(this.timeToX(t.birthTime-this.offset)-10-1.5,n-1.5-5,t.timeline&&t.timeline.isInfinite?this.cnv.width+this.offset:this.timeToX(t.deathTime-t.birthTime)+20+3,38);for(let e=Math.round(this.timeToX(t.birthTime)-10);e<Math.min(this.timeToX(t.deathTime)+20,this.cnv.width);e++)this.bottomYs[e]=s+5+50}plotPhysicsController(t){if(!t)return;this.ctx.fillStyle="#E84C97",this.ctx.strokeStyle="black";let e=this.timeToX(t.birthTime),i=this.timeToX(t.duration);this.ctx.fillRect(e,0,i,20),this.ctx.strokeRect(e,0,i,20),this.ctx.fillStyle="white",this.ctx.font="14px sans-serif",this.ctx.fillText(t.name,e+10,15),this.ctx.fillStyle="#EADAE2",this.ctx.fillRect(e,20,i,this.cnv.height-0-20),this.drawDashedLine(e,20,e,this.cnv.height,"#E84C97",2),this.drawDashedLine(e+i,20,e+i,this.cnv.height,"#E84C97",2)}plotWorld(t,e=!1){if(this.useStudio){var i,r,n,o,s,a,h;this.cnv.width=this.cnv.offsetWidth,this.cnv.height=this.cnv.offsetHeight;let t=null===(i=this.studio)||void 0===i||null===(r=i.$refs)||void 0===r||null===(n=r["properties-view"])||void 0===n||null===(o=n.$refs)||void 0===o||null===(s=o["properties-holder"])||void 0===s||null===(a=s.$refs)||void 0===a||null===(h=a["motivator-properties-holder"])||void 0===h?void 0:h.deselectAll;t&&"function"==typeof t&&t()}this.ctx.clearRect(0,0,this.cnv.width,this.cnv.height),this.ctx.fillStyle="teal",this.ctx.strokeStyle="black",this.ctx.lineWidth=1,this.ctx.fillRect(0,0,this.cnv.width-2,20),this.ctx.strokeRect(0,0,this.cnv.width-2,20);for(let i of t.controllers)"physics-controller"==i.type&&this.plotPhysicsController(i,e);this.plottingAgenda=[],this.bottomYs=[],this.ctx.fillStyle="#cccccc",this.ctx.fillRect(0,20,this.cnv.width,this.cnv.height),this.drawGuidlines(),this.drawSeeker(this.timeToX(t.now-this.offset));let l=t.agents.sort((t,e)=>t.birthTime-e.birthTime);for(let t of l)this.plotAgent(t,t.birthTime,e);for(let i of t.objs)this.plotObj(i,i.birthTime,e);for(;this.plottingAgenda.length;)this.plottingAgenda.shift()()}drawLine(t,e,i,r,n="red",o=2){this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(i,r),this.ctx.closePath(),this.ctx.strokeStyle=n,this.ctx.lineWidth=o,this.ctx.stroke(),this.ctx.setLineDash([])}drawCurve(t,e,i,r,n="red",o=1){this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.bezierCurveTo(t+(i-t)/4,e,i-(i-t)/4,e+20,i,r),this.ctx.strokeStyle=n,this.ctx.lineWidth=o,this.ctx.stroke(),this.ctx.setLineDash([])}drawRect(t=0,e=0,i=0,r=10,n="black",o="grey",s=1){this.ctx.fillStyle=o,this.ctx.strokeStyle=n,this.ctx.lineWidth=s,this.ctx.fillRect(t,e,i,r),this.ctx.strokeRect(t,e,i,r)}drawPointyRect(t=0,e=0,i=0,r="black",n="grey",o=1){i=Math.max(i,5*3**.5*2),this.ctx.beginPath(),this.ctx.moveTo(t,e-5),this.ctx.lineTo(t+i-5*3**.5,e-5),this.ctx.lineTo(t+i,e),this.ctx.lineTo(t+i-5*3**.5,e+5),this.ctx.lineTo(t,e+5),this.ctx.closePath(),this.ctx.lineWidth=o,this.ctx.strokeStyle=r,this.ctx.fillStyle=n,this.ctx.fill(),this.ctx.stroke()}drawDoublePointyRect(t=0,e=0,i=0,r="black",n="grey",o=1){i=Math.max(i,5*3**.5*4),this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(t+5*3**.5,e-5),this.ctx.lineTo(t+i-5*3**.5,e-5),this.ctx.lineTo(t+i,e),this.ctx.lineTo(t+i-5*3**.5,e+5),this.ctx.lineTo(t+5*3**.5,e+5),this.ctx.closePath(),this.ctx.lineWidth=o,this.ctx.strokeStyle=r,this.ctx.fillStyle=n,this.ctx.fill(),this.ctx.stroke()}drawInwardDoublePointyRect(t=0,e=0,i=0,r="black",n="grey",o=1){i=Math.max(i,5*3**.5*4),this.ctx.beginPath(),this.ctx.moveTo(t,e-5),this.ctx.lineTo(t+i,e-5),this.ctx.lineTo(t+i-5*3**.5,e),this.ctx.lineTo(t+i,e+5),this.ctx.lineTo(t,e+5),this.ctx.lineTo(t+5*3**.5,e),this.ctx.closePath(),this.ctx.lineWidth=o,this.ctx.strokeStyle=r,this.ctx.fillStyle=n,this.ctx.fill(),this.ctx.stroke()}drawDashedLine(t,e,i,r,n="red",o=1){this.ctx.setLineDash([5,7]),this.drawLine(t,e,i,r,n,o),this.ctx.setLineDash([])}drawDiamond(t,e,i="red",r="black",n=!1,o=10){let s=o,a=o;n&&(s=17,a=17,i="#cccccc",this.plottingAgenda.push(()=>{this.ctx.fillStyle="black",this.ctx.font="bold 15px sans-serif",this.ctx.fontWeight,this.ctx.fillText("?",t-5,e+6)})),this.plottingAgenda.push(()=>{this.ctx.beginPath(),this.ctx.moveTo(t-s/2,e),this.ctx.lineTo(t,e-a/2),this.ctx.lineTo(t+s/2,e),this.ctx.lineTo(t,e+a/2),this.ctx.closePath(),this.ctx.fillStyle=i,this.ctx.fill(),n||(this.ctx.strokeStyle=r,this.ctx.lineWidth=1,this.ctx.stroke())})}drawGuidlines(){const t=Math.max(100,1e4*Math.round(this.displayedDuration/1e4)/20),e=Math.max(1e3,1e4*Math.round(this.displayedDuration/1e4)/10)/t,i=this.displayedDuration/t,r=this.cnv.width/i;for(let n=0;n<i;n++){let i=n%e==0;if(this.ctx.beginPath(),this.ctx.moveTo(this.rotate(n*r)+this.padX,i?30:50),this.ctx.lineTo(this.rotate(n*r)+this.padX,this.cnv.height),this.ctx.closePath(),this.ctx.strokeStyle="black",this.ctx.lineWidth=1,this.ctx.stroke(),i){this.ctx.fillStyle="white",this.ctx.strokeStyle="black",this.ctx.font="13px Sans-serif",this.ctx.miterLimit=1,this.ctx.lineWidth=3;let e=n*r+this.padX,i=this.rotate(e),o=n*t+Math.max(0,Math.floor((i-e+this.timeToX(this.offset))/this.cnv.width))*this.displayedDuration;this.ctx.strokeText(this.formatTime(o),i,15),this.ctx.fillText(this.formatTime(o),i,15)}}}formatTime(t){return t<1e4?t+"ms":t>=1e4?t/1e3+"s":void 0}drawSeeker(t){this.ctx.beginPath(),this.ctx.moveTo(t,0),this.ctx.lineTo(t,this.cnv.height),this.ctx.closePath(),this.ctx.lineWidth=4,this.ctx.strokeStyle="red",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(t,30),this.ctx.lineTo(t+10,0),this.ctx.lineTo(t-10,0),this.ctx.closePath(),this.ctx.fillStyle="red",this.ctx.strokeStyle="black",this.ctx.lineWidth=4,this.ctx.stroke(),this.ctx.fill()}timeToX(t){return t/this.displayedDuration*this.cnv.width+this.padX}rotate(t){let e=t-(this.timeToX(this.offset)-this.padX);return e>this.cnv.width-this.padX&&(e-=this.cnv.width-2*this.padX),e<this.padX&&(e+=this.cnv.width-2*this.padX),e}},KeyframesHandler:Sh,KeyboardTriggerNode:ou,MouseDownTriggerNode:su,MouseScrollTriggerNode:au,MoveActionNode:hu,RotateActionNode:lu};class cu{static make(t,...e){return uu[t].fromProps(...e,cu)}static get(t){return uu[t]}}function du(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class pu{constructor(){du(this,"doLoop",!1),du(this,"world",void 0),du(this,"events",new r.c)}static forWorld(t){let e=new pu;return e.world=t,e}makeControls(){let t=document.createElement("button");t.innerText="play",t.onclick=()=>{this.play()},document.body.appendChild(t);let e=document.createElement("button");e.innerText="pause",e.onclick=()=>{this.pause()},document.body.appendChild(e);let i=document.createElement("button");i.innerText="stop",i.onclick=()=>{this.stop()},document.body.appendChild(i);let r=document.createElement("button");r.innerText="re-collapse",r.onclick=()=>{this.recollapse()},document.body.appendChild(r)}initStateLogger(){this.world.stateLogger.init()}init(t="./data.psyn",e="world-container",i=(()=>{})){let r=new XMLHttpRequest;r.open("GET",t),r.onreadystatechange=()=>{if(4==r.readyState){let t,n=r.responseText;this.world=function(t){let e=JSON.parse(t),i=Vh.fromProps(e.world);if(e.faces)for(let t of e.faces){cu.make(t.constructor,i,t.props).name=t.name}for(let t of e.agents){let e=cu.make(t.constructor,i,t.props);i.addEntity(e,t.birthTime)}for(let t of e.motivs){cu.make(t.constructor,i,t.props).name=t.name}for(let t of e.controllers){cu.make(t.constructor,i,t.props).name=t.name}for(let t of e.agents){let e=i.getEntityByName(t.name);if(e instanceof Gh)for(let r=0;r<t.motivs.length;r++){let n=t.motivs[r],o=t.offsets[r],s=i.getMotivByName(n);null==s?console.error("WARNING: something happended incorrectly during loading or this save data is corrupt"):e.addMotivator(s,o)}}return e.world.camFollowTarget&&(i.camFollowTarget=i.getEntityByName(e.world.camFollowTarget)),i.be(),i}(n),this.initStateLogger(),"string"==typeof e?t=document.getElementById(e):e instanceof HTMLElement&&(t=e),t&&t.appendChild(this.world.cnv),i&&i(this.world)}},r.send()}play(){this.world&&(this.world.isPlaying||(this.world.isPlaying=!0,this.events.emit("play-started"),window.requestAnimationFrame(t=>this.playInterval(t))))}pause(){this.world.isPlaying=!1,this.events.emit("paused")}stop(){this.world.isPlaying=!1,this.world.seek(0),this.events.emit("stopped-manually")}recollapse(){this.stop(),window.requestAnimationFrame(()=>{for(let t of this.world.motivators)t.flagAllStatuses&&t.flagAllStatuses();this.play()})}playInterval(t){if(!this.world.isPlaying)return void(this.lastTime=0);this.lastTime||(this.lastTime=t);let e=t-this.lastTime;this.lastTime=t;let i=this.world.now+e;0==this.world.grandTimeline.infinites&&i>1e3*this.world.grandTimeline.totalDuration()?(i=0,this.world.cameraX=0,this.world.cameraY=0,this.doLoop?(this.world.seek(0),this.playInterval(t)):(this.world.isPlaying=!1,this.events.emit("done-playing"))):(this.world.seek(i),this.world.stateLogger.log(),window.requestAnimationFrame(t=>this.playInterval(t)))}}}]);